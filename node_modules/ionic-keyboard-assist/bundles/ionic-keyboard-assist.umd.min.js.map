{"version":3,"sources":["ng://ionic-keyboard-assist/lib/keyboard-options.model.ts","ng://ionic-keyboard-assist/lib/ionic-keyboard-assist.service.ts"],"names":["KeyboardOptions","options","this","scrollPadding","scrollAssist","IonicKeyboardAssist","prototype","init","setOptions","addEventListeners","window","addEventListener","onKeyboardDidShow","onKeyboardWillHide","removeEventListeners","removeEventListener","getActivePageElement","elem","document","getElementsByTagName","length","page","lastElementChild","getActiveModalElement","tagName","setPadding","value","setAttribute","activeElement","setTimeout","scrollIntoView","block","behavior","ngOnDestroy","Injectable","args","providedIn","_this","pages","event","modal","push","keyboardHeight","forEach"],"mappings":"wRAGA,MAKE,SAAAA,EAAYC,GACVC,KAAKC,eAAgBF,IAAWA,EAAQE,eAAgBF,EAAQE,cAChED,KAAKE,cAAeH,IAAWA,EAAQG,cAAeH,EAAQG,cCVlEC,GA0BEA,EAAAC,UAAAC,KAAA,SAAKN,GACCA,GACFC,KAAKM,WAAWP,GAElBC,KAAKO,qBAOPJ,EAAAC,UAAAE,WAAA,SAAWP,GACTC,KAAKD,QAAU,IAAID,EAAgBC,IAM7BI,EAAAC,UAAAG,kBAAR,WACEC,OAAOC,iBAAiB,kBAAmBT,KAAKU,mBAChDF,OAAOC,iBAAiB,mBAAoBT,KAAKW,qBAM3CR,EAAAC,UAAAQ,qBAAR,WACEJ,OAAOK,oBAAoB,kBAAmBb,KAAKU,mBACnDF,OAAOK,oBAAoB,mBAAoBb,KAAKW,qBAyC9CR,EAAAC,UAAAU,qBAAR,eACQC,EAAOC,SAASC,qBAAqB,qBAC3C,GAAIF,GAAsB,EAAdA,EAAKG,OAAY,KACrBC,EAAOJ,EAAKA,EAAKG,OAAS,GAChC,OAAOC,GAAQA,EAAKC,iBAAmBD,EAAKC,iBAAmB,KAEjE,OAAO,MAMDjB,EAAAC,UAAAiB,sBAAR,eACQN,EAAOC,SAASC,qBAAqB,WAC3C,GAAIF,GAAsB,EAAdA,EAAKG,OAAY,KACrBC,EAAOJ,EAAKA,EAAKG,OAAS,GAChC,OAAOC,GAAQA,EAAKC,kBAAsD,cAAlCD,EAAKC,iBAAiBE,QAA0BH,EAAKC,iBAAmB,KAElH,OAAO,MAMDjB,EAAAC,UAAAmB,WAAR,SAAmBR,EAAMS,QAAA,IAAAA,IAAAA,EAAA,GACnBT,GACFA,EAAKU,aAAa,QAAS,mBAAmBD,EAAK,kBAO/CrB,EAAAC,UAAAF,aAAR,WACMc,SAASU,eAAoD,UAAnCV,SAASU,cAAcJ,SACnDK,WAAU,WAAO,OAAAX,SAASU,cAAcE,eAAe,CAACC,MAAO,SAAUC,SAAU,YAAY,MAOnG3B,EAAAC,UAAA2B,YAAA,WACE/B,KAAKY,4CAvIRoB,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,uJAcZ,SAAA/B,IAAA,IAAAgC,EAAAnC,KAPQA,KAAAoC,MAAQ,GAkDRpC,KAAAU,kBAAiB,SAAI2B,OAEvBX,EADEY,EAAQH,EAAKd,wBAIjBK,EADEY,GAGcH,EAAKrB,uBAGvBqB,EAAKC,MAAMG,KAAKb,GAEZS,EAAKpC,QAAQE,eACfkC,EAAKZ,WAAWG,EAAeW,EAAMG,gBAGnCL,EAAKpC,QAAQG,cACfiC,EAAKjC,gBAODF,KAAAW,mBAAkB,WACxBwB,EAAKC,MAAMK,QAAO,SAAC1B,GACjBoB,EAAKZ,WAAWR,KAElBY,WAAU,WAAO,OAAAQ,EAAKC,MAAQ,IAAI,KAtElCpC,KAAKM","sourcesContent":["/**\n * Keyboard options class\n */\nexport class KeyboardOptions {\n\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n\n  constructor(options?: KeyboardOptionsModel) {\n    this.scrollPadding = options && options.scrollPadding ? options.scrollPadding : true;\n    this.scrollAssist = options && options.scrollAssist ? options.scrollAssist : true;\n  }\n\n}\n\n/**\n * Keyboard options model\n */\nexport interface KeyboardOptionsModel {\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { KeyboardOptions, KeyboardOptionsModel } from './keyboard-options.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicKeyboardAssist implements OnDestroy {\n\n  /**\n   * Stores modified pages element\n   */\n  private pages = [];\n\n  /**\n   * Keyboard options\n   */\n  private options: KeyboardOptions;\n\n  constructor() {\n    this.setOptions();\n  }\n\n  /**\n   * Start the keyboard wizard\n   * @param options: KeyboardOptionsModel\n   */\n  init(options?: KeyboardOptionsModel) {\n    if (options) {\n      this.setOptions(options);\n    }\n    this.addEventListeners();\n  }\n\n  /**\n   * Set keyboard options\n   * @param options: KeyboardOptionsModel\n   */\n  setOptions(options?: KeyboardOptionsModel) {\n    this.options = new KeyboardOptions(options);\n  }\n\n  /**\n   * Add Event Listeners\n   */\n  private addEventListeners() {\n    window.addEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.addEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * Remove Event Listeners\n   */\n  private removeEventListeners() {\n    window.removeEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.removeEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * On keyboard did show actions\n   * @param event: keyboard event\n   */\n  private onKeyboardDidShow = (event) => {\n    const modal = this.getActiveModalElement();\n    let activeElement;\n\n    if (modal) {\n      activeElement = modal;\n    } else {\n      activeElement = this.getActivePageElement();\n    }\n\n    this.pages.push(activeElement);\n\n    if (this.options.scrollPadding) {\n      this.setPadding(activeElement, event.keyboardHeight);\n    }\n\n    if (this.options.scrollAssist) {\n      this.scrollAssist();\n    }\n  };\n\n  /**\n   * On keyboard will hide actions\n   */\n  private onKeyboardWillHide = () => {\n    this.pages.forEach(elem => {\n      this.setPadding(elem);\n    });\n    setTimeout(() => this.pages = [], 50);\n  };\n\n  /**\n   * Get current page element\n   */\n  private getActivePageElement() {\n    const elem = document.getElementsByTagName('ion-router-outlet');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Get current modal element\n   */\n  private getActiveModalElement() {\n    const elem = document.getElementsByTagName('ion-app');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild && page.lastElementChild.tagName === 'ION-MODAL' ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Add padding on the element\n   */\n  private setPadding(elem, value = 0) {\n    if (elem) {\n      elem.setAttribute('style', `padding-bottom: ${value}px !important`);\n    }\n  }\n\n  /**\n   * Scroll view to active element\n   */\n  private scrollAssist() {\n    if (document.activeElement && document.activeElement.tagName === 'INPUT') {\n      setTimeout(() => document.activeElement.scrollIntoView({block: 'center', behavior: 'smooth'}), 100);\n    }\n  }\n\n  /**\n   * Remove listeners on destroy\n   */\n  ngOnDestroy(): void {\n    this.removeEventListeners();\n  }\n\n}\n"]}