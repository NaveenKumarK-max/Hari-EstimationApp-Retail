{"version":3,"file":"ionic-keyboard-assist.umd.js.map","sources":["ng://ionic-keyboard-assist/lib/keyboard-options.model.ts","ng://ionic-keyboard-assist/lib/ionic-keyboard-assist.service.ts"],"sourcesContent":["/**\n * Keyboard options class\n */\nexport class KeyboardOptions {\n\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n\n  constructor(options?: KeyboardOptionsModel) {\n    this.scrollPadding = options && options.scrollPadding ? options.scrollPadding : true;\n    this.scrollAssist = options && options.scrollAssist ? options.scrollAssist : true;\n  }\n\n}\n\n/**\n * Keyboard options model\n */\nexport interface KeyboardOptionsModel {\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { KeyboardOptions, KeyboardOptionsModel } from './keyboard-options.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicKeyboardAssist implements OnDestroy {\n\n  /**\n   * Stores modified pages element\n   */\n  private pages = [];\n\n  /**\n   * Keyboard options\n   */\n  private options: KeyboardOptions;\n\n  constructor() {\n    this.setOptions();\n  }\n\n  /**\n   * Start the keyboard wizard\n   * @param options: KeyboardOptionsModel\n   */\n  init(options?: KeyboardOptionsModel) {\n    if (options) {\n      this.setOptions(options);\n    }\n    this.addEventListeners();\n  }\n\n  /**\n   * Set keyboard options\n   * @param options: KeyboardOptionsModel\n   */\n  setOptions(options?: KeyboardOptionsModel) {\n    this.options = new KeyboardOptions(options);\n  }\n\n  /**\n   * Add Event Listeners\n   */\n  private addEventListeners() {\n    window.addEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.addEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * Remove Event Listeners\n   */\n  private removeEventListeners() {\n    window.removeEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.removeEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * On keyboard did show actions\n   * @param event: keyboard event\n   */\n  private onKeyboardDidShow = (event) => {\n    const modal = this.getActiveModalElement();\n    let activeElement;\n\n    if (modal) {\n      activeElement = modal;\n    } else {\n      activeElement = this.getActivePageElement();\n    }\n\n    this.pages.push(activeElement);\n\n    if (this.options.scrollPadding) {\n      this.setPadding(activeElement, event.keyboardHeight);\n    }\n\n    if (this.options.scrollAssist) {\n      this.scrollAssist();\n    }\n  };\n\n  /**\n   * On keyboard will hide actions\n   */\n  private onKeyboardWillHide = () => {\n    this.pages.forEach(elem => {\n      this.setPadding(elem);\n    });\n    setTimeout(() => this.pages = [], 50);\n  };\n\n  /**\n   * Get current page element\n   */\n  private getActivePageElement() {\n    const elem = document.getElementsByTagName('ion-router-outlet');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Get current modal element\n   */\n  private getActiveModalElement() {\n    const elem = document.getElementsByTagName('ion-app');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild && page.lastElementChild.tagName === 'ION-MODAL' ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Add padding on the element\n   */\n  private setPadding(elem, value = 0) {\n    if (elem) {\n      elem.setAttribute('style', `padding-bottom: ${value}px !important`);\n    }\n  }\n\n  /**\n   * Scroll view to active element\n   */\n  private scrollAssist() {\n    if (document.activeElement && document.activeElement.tagName === 'INPUT') {\n      setTimeout(() => document.activeElement.scrollIntoView({block: 'center', behavior: 'smooth'}), 100);\n    }\n  }\n\n  /**\n   * Remove listeners on destroy\n   */\n  ngOnDestroy(): void {\n    this.removeEventListeners();\n  }\n\n}\n"],"names":["Injectable"],"mappings":"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"}
