{"version":3,"file":"ionic-keyboard-assist.js.map","sources":["ng://ionic-keyboard-assist/lib/keyboard-options.model.ts","ng://ionic-keyboard-assist/lib/ionic-keyboard-assist.service.ts"],"sourcesContent":["/**\n * Keyboard options class\n */\nexport class KeyboardOptions {\n\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n\n  constructor(options?: KeyboardOptionsModel) {\n    this.scrollPadding = options && options.scrollPadding ? options.scrollPadding : true;\n    this.scrollAssist = options && options.scrollAssist ? options.scrollAssist : true;\n  }\n\n}\n\n/**\n * Keyboard options model\n */\nexport interface KeyboardOptionsModel {\n  scrollPadding: boolean;\n  scrollAssist: boolean;\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { KeyboardOptions, KeyboardOptionsModel } from './keyboard-options.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicKeyboardAssist implements OnDestroy {\n\n  /**\n   * Stores modified pages element\n   */\n  private pages = [];\n\n  /**\n   * Keyboard options\n   */\n  private options: KeyboardOptions;\n\n  constructor() {\n    this.setOptions();\n  }\n\n  /**\n   * Start the keyboard wizard\n   * @param options: KeyboardOptionsModel\n   */\n  init(options?: KeyboardOptionsModel) {\n    if (options) {\n      this.setOptions(options);\n    }\n    this.addEventListeners();\n  }\n\n  /**\n   * Set keyboard options\n   * @param options: KeyboardOptionsModel\n   */\n  setOptions(options?: KeyboardOptionsModel) {\n    this.options = new KeyboardOptions(options);\n  }\n\n  /**\n   * Add Event Listeners\n   */\n  private addEventListeners() {\n    window.addEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.addEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * Remove Event Listeners\n   */\n  private removeEventListeners() {\n    window.removeEventListener('keyboardDidShow', this.onKeyboardDidShow);\n    window.removeEventListener('keyboardWillHide', this.onKeyboardWillHide);\n  }\n\n  /**\n   * On keyboard did show actions\n   * @param event: keyboard event\n   */\n  private onKeyboardDidShow = (event) => {\n    const modal = this.getActiveModalElement();\n    let activeElement;\n\n    if (modal) {\n      activeElement = modal;\n    } else {\n      activeElement = this.getActivePageElement();\n    }\n\n    this.pages.push(activeElement);\n\n    if (this.options.scrollPadding) {\n      this.setPadding(activeElement, event.keyboardHeight);\n    }\n\n    if (this.options.scrollAssist) {\n      this.scrollAssist();\n    }\n  };\n\n  /**\n   * On keyboard will hide actions\n   */\n  private onKeyboardWillHide = () => {\n    this.pages.forEach(elem => {\n      this.setPadding(elem);\n    });\n    setTimeout(() => this.pages = [], 50);\n  };\n\n  /**\n   * Get current page element\n   */\n  private getActivePageElement() {\n    const elem = document.getElementsByTagName('ion-router-outlet');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Get current modal element\n   */\n  private getActiveModalElement() {\n    const elem = document.getElementsByTagName('ion-app');\n    if (elem && elem.length > 0) {\n      const page = elem[elem.length - 1];\n      return page && page.lastElementChild && page.lastElementChild.tagName === 'ION-MODAL' ? page.lastElementChild : null;\n    }\n    return null;\n  }\n\n  /**\n   * Add padding on the element\n   */\n  private setPadding(elem, value = 0) {\n    if (elem) {\n      elem.setAttribute('style', `padding-bottom: ${value}px !important`);\n    }\n  }\n\n  /**\n   * Scroll view to active element\n   */\n  private scrollAssist() {\n    if (document.activeElement && document.activeElement.tagName === 'INPUT') {\n      setTimeout(() => document.activeElement.scrollIntoView({block: 'center', behavior: 'smooth'}), 100);\n    }\n  }\n\n  /**\n   * Remove listeners on destroy\n   */\n  ngOnDestroy(): void {\n    this.removeEventListeners();\n  }\n\n}\n"],"names":[],"mappings":"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"}
