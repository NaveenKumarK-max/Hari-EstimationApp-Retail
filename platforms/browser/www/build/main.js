webpackJsonp([0],{

/***/ 10:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return CommonProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseAPIURL; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs__ = __webpack_require__(481);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



//import { encode } from 'punycode'; 

//import { Chart } from 'chart.js';
/*
  Generated class for the CommonProvider provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular DI.
*/
var CommonProvider = /** @class */ (function () {
    function CommonProvider(http, toast) {
        this.http = http;
        this.toast = toast;
        this._username = 'lmxretail';
        this._password = 'lmx@2017';
        this.status = false;
        this.cmpName = "Hari Jewellery ";
        this.cmpShortName = "RTM";
        this.msgTimeout = 10000; // Alert Block timeout
        this.toastTimeout = 6000; // Toast message timeout
        this.currentUser = JSON.parse(localStorage.getItem('empDetail'));
        this._header = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        // this._header.append('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
        this._header.append('Content-Type', 'application/json');
        this._imageheader = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        this._imageheader.append('Authorization', 'Basic ' + btoa(this._username + ':' + this._password));
    }
    CommonProvider.prototype.getHeader = function () {
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: this._header });
        return options;
    };
    CommonProvider.prototype.getImageHeader = function () {
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: this._imageheader });
        return options;
    };
    CommonProvider.prototype.getAuthUserName = function () {
        return this._username;
    };
    CommonProvider.prototype.getAuthUserPwd = function () {
        return this._password;
    };
    CommonProvider.prototype.presentToast = function (text, duration) {
        var toast = this.toast.create({
            message: text,
            duration: (duration == '' ? this.toastTimeout : duration),
            position: 'bottom',
            //dismissOnPageChange : true,
            showCloseButton: true,
            closeButtonText: "Ok"
        });
        toast.present();
    };
    /*updatestatus(data) {
        console.log(data)
        this.status = data;
        console.log(this.status);
    }*/
    CommonProvider.prototype.doLogin = function (logindata) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/authenticate', logindata, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.createCustomer = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/createCustomer', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.createQuickCustomer = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/createQuickCustomer', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getbranch = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getBranchList?&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getBranchEmployees = function (id_branch) {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getBranchEmployees?id_branch=' + id_branch + '&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getCustBySearch = function (data) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getCustBySearch', data, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getCusAppVersion = function () {
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getVersion', this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getCurrencyAndSettings = function (data) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getCurrencyAndSettings', data, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getcountry = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getCountry?nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getstate = function (id) {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getState?id_country=' + id + '&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getcity = function (id) {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getCity?id_state=' + id + '&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getVillages = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getVillages?&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getoldcategory = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getOldMetalCategory?&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getoldrates = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getAllOldMetalRates?&nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.verifyLoginOTP = function (data) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/verifyLoginOTP', data, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    // Dashboard 
    CommonProvider.prototype.getRetDashboard = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/get_ret_dashboard', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getlist = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getCurrentDayEstimationsByBranch', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getdivision = function () {
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getRetCharges', this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getsubdesigns = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getSubDesigns', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.deletegallery = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/deletesubdesignimage', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.updatedefault = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/updateDefaultSubDesignImage', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.updatecustomer = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/updateCustomer', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getcustomer = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/estcustomerDetails', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getsub = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/estcustomerDetails', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.getslip = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/slipdetails', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.checkstock = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getCheckStockAvail', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.fin = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getFinancialYear?nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.checkwgstock = function (postData) {
        return this.http
            .post(BaseAPIURL + 'admin_app_api/getCheckStockAvail', postData, this.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider.prototype.othermetal = function () {
        var d = new Date(), n = d.getTime();
        return this.http
            .get(BaseAPIURL + 'admin_app_api/getFinancialYear?nocache=' + n)
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    CommonProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["z" /* ToastController */]])
    ], CommonProvider);
    return CommonProvider;
}());

var BaseAPIURL = 'https://rajathangamaligai.com/rjretail/admin/index.php/';
// export const BaseAPIURL = 'https://retail.logimaxindia.com/v2/admin/index.php/';
// https://rajathangamaligai.com/rjretail/admin/index.php/
// https://srikrishnajewels.com/test_sknretail/admin/index.php/
//# sourceMappingURL=common.js.map

/***/ }),

/***/ 104:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__otp_otp__ = __webpack_require__(387);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_device__ = __webpack_require__(176);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/*
  Generated class for the Login page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var LoginPage = /** @class */ (function () {
    function LoginPage(device, navParams, appCtrl, viewCtrl, toast, platform, builder, nav, event, menu, common, loadingCtrl, events, modal) {
        var _this = this;
        this.device = device;
        this.navParams = navParams;
        this.appCtrl = appCtrl;
        this.viewCtrl = viewCtrl;
        this.toast = toast;
        this.platform = platform;
        this.builder = builder;
        this.nav = nav;
        this.event = event;
        this.menu = menu;
        this.common = common;
        this.loadingCtrl = loadingCtrl;
        this.events = events;
        this.modal = modal;
        this.visibleState = 'visible';
        // public branchname: AbstractControl;
        this.submitted = false;
        this.isDisabled = false;
        this.getuserLoginURL = '';
        this.errorMessage = '';
        this.typecheck = 'password';
        this.showPass = false;
        this.remember = false;
        this.currency = '';
        this.id_branch = [];
        this.branch_name = '';
        this.user = { username: '' };
        this.emailChanged = false;
        this.submitAttempt = false;
        this.animateClass = { 'zoom-in': true };
        this.branches = [];
        this.class = "margin";
        this.cmpName = "";
        this.nav = nav;
        this.menu = menu;
        this.platform = platform;
        this.type = "User";
        this.cmpName = this.common.cmpName;
        this.loginForm = builder.group({
            username: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(5), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(15)])],
            password: ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(8), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(16)])],
            id_branch: ['1', this.id_branch != null ? this.id_branch['id_branch'] : null],
            remember2: [false, ''],
            device: this.device.uuid
        });
        this.username = this.loginForm.controls['username'];
        this.password = this.loginForm.controls['password'];
        this.id_branch = this.loginForm.controls['id_branch'];
        this.remember2 = this.loginForm.controls['remember2'];
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getCusAppVersion().then(function (data) {
            _this.branch_settings = data['settings']['branch_settings'];
            _this.login_branch = data['settings']['login_branch'];
            localStorage.setItem('versionData', JSON.stringify(data));
            // if(this.branch_settings == 1 && this.login_branch == 1){ 
            //   this.common.getbranch().then(data=>{
            //     loader.dismiss();
            //     this.branches = data;
            //   })
            // }else{
            //   loader.dismiss();
            // }
            if (_this.branch_settings == 1 && _this.login_branch == 1) {
                _this.common.getbranch().then(function (data) {
                    loader.dismiss();
                    _this.branches = data;
                    var remember = JSON.parse(localStorage.getItem('remember2'));
                    console.log(remember);
                    if (remember == true) {
                        // this.remember2 = true;
                        _this.loginForm.controls["remember2"].setValue(true);
                        _this.loginForm.controls["username"].setValue(JSON.parse(localStorage.getItem('remember2value'))['username']);
                        _this.loginForm.controls["password"].setValue(JSON.parse(localStorage.getItem('remember2value'))['password']);
                        _this.loginForm.controls["id_branch"].setValue(JSON.parse(localStorage.getItem('remember2value'))['id_branch']);
                    }
                });
            }
            else {
                var remember = JSON.parse(localStorage.getItem('remember2'));
                console.log(remember);
                if (remember == true) {
                    // this.remember2 = true;
                    _this.loginForm.controls["remember2"].setValue(true);
                    _this.loginForm.controls["username"].setValue(JSON.parse(localStorage.getItem('remember2value'))['username']);
                    _this.loginForm.controls["password"].setValue(JSON.parse(localStorage.getItem('remember2value'))['password']);
                    _this.loginForm.controls["id_branch"].setValue(_this.login_branch);
                }
                loader.dismiss();
            }
        });
    }
    LoginPage_1 = LoginPage;
    LoginPage.prototype.onSubmit = function (values) {
        var _this = this;
        var hasBranch = (this.branch_settings == 1 && this.login_branch == 1) ? true : false;
        this.submitted = true;
        if (hasBranch == false) {
            /*  this.loginForm.controls["branchname"].setValidators(null);
              this.loginForm.controls["branchname"].updateValueAndValidity();*/
        }
        if (this.loginForm.valid) {
            this.errorMessage = 'Logging in...';
            this.isDisabled = true;
            var loader_1 = this.loadingCtrl.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            this.common.doLogin(JSON.stringify(values)).then(function (res) {
                if (res) {
                    if (res.result) {
                        localStorage.setItem('remember', JSON.stringify(_this.remember));
                        if (res.type == "logged") {
                            localStorage.setItem('remember2', JSON.stringify(_this.loginForm.get('remember2').value));
                            localStorage.setItem('remember2value', JSON.stringify(values));
                            localStorage.setItem('userdet', JSON.stringify(values)); // Login details
                            console.log(values);
                            console.log(JSON.parse(localStorage.getItem('remember2value')));
                            res.empdata['id_branch'] = JSON.parse(localStorage.getItem('remember2value'))['id_branch'];
                            var bname = _this.branches.filter(function (data) { return data['id_branch'] == res.empdata['id_branch']; });
                            res.empdata['branch_name'] = bname.length > 0 ? bname[0]['name'] : res.empdata['branch_name'];
                            console.log(res.empdata);
                            localStorage.setItem('empDetail', JSON.stringify(res.empdata)); // Employee Details
                            localStorage.setItem('logstatus', JSON.stringify(true));
                            _this.event.publish('user:changed', true);
                            _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_4__home_home__["a" /* HomePage */]);
                        }
                        else if (res.type == "otp") {
                            _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_5__otp_otp__["a" /* OtpPage */], { userdet: values, page: 'loginOTP', otpDetail: res });
                        }
                    }
                    else {
                        _this.errorMessage = res.msg;
                        var ctrl = _this.toast.create({
                            message: res.msg,
                            duration: _this.common.toastTimeout,
                            position: 'bottom'
                        });
                        ctrl.present();
                        _this.isDisabled = false;
                    }
                    loader_1.dismiss();
                }
            }, function (error) {
                _this.isDisabled = false;
                loader_1.dismiss();
            });
        }
        else {
            if (!this.loginForm.get('username').valid) {
                var ctrl = this.toast.create({
                    message: 'Please Enter Username Minimum 5 & Maximum 15 letters',
                    duration: this.common.toastTimeout,
                    position: 'bottom'
                });
                ctrl.present();
            }
            else {
                if (!this.loginForm.get('password').valid) {
                    var ctrl = this.toast.create({
                        message: 'Please Enter Password Minimum 8 & Maximum 16 letters',
                        duration: this.common.toastTimeout,
                        position: 'bottom'
                    });
                    ctrl.present();
                }
            }
        }
    };
    LoginPage.prototype.updateremember = function (value) {
        this.remember = value;
        console.log(this.remember);
    };
    LoginPage.prototype.login = function () {
        this.nav.setRoot(LoginPage_1); //navigate to HomePage
    };
    LoginPage.prototype.skip = function () {
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_4__home_home__["a" /* HomePage */]); //navigate to HomePage
    };
    /*openmodal() {
      let mod = this.modal.create(BranchPage)
      mod.present();
      mod.onDidDismiss(data => {
        if (data != undefined) {
          this.loginForm.controls['branchname'].setValue(data['name']);
          this.loginForm.controls['id_branch'].setValue(data['id_branch']);
        }
      });
    }*/
    LoginPage.prototype.showPassword = function () {
        this.showPass = !this.showPass;
        if (this.showPass) {
            this.typecheck = 'text';
        }
        else {
            this.typecheck = 'password';
        }
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    LoginPage.prototype.ionViewWillEnter = function () {
        var user = false;
        this.events.publish('user:created', user);
    };
    LoginPage.prototype.ionViewDidEnter = function () {
        this.menu.swipeEnable(false);
        // If you have more than one side menu, use the id like below
        // this.menu.swipeEnable(false, 'menu1');
    };
    LoginPage.prototype.ionViewWillLeave = function () {
        // Don't forget to return the swipe to normal, otherwise
        // the rest of the pages won't be able to swipe to open menu
        this.menu.swipeEnable(true);
        // If you have more than one side menu, use the id like below
        // this.menu.swipeEnable(true, 'menu1');
    };
    LoginPage.prototype.toggleVisible = function () {
        this.visibleState = (this.visibleState == 'visible') ? 'invisible' : 'visible';
    };
    LoginPage.prototype.updateremember2 = function (value) {
        // this.remember2 = value;
        this.loginForm.controls["remember2"].setValue(value);
        console.log(value);
    };
    LoginPage = LoginPage_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-login',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\login\login.html"*/'<ion-content padding text-center class="login-content loginbg">\n\n    <div class="margin">\n\n        <img style="height: 120px;" src=\'assets/img/IntroducingLogo.png\' />\n\n        <p class="theme-color" style="color: #e99418 !important;font-weight: 800;">{{cmpName}}</p>\n\n    </div>\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col col-sm-12 col-md-6 offset-md-3 col-lg-6 offset-lg-3 col-xl-6 offset-xl-3>\n\n                <div class="login-box">\n\n                    <form [formGroup]="loginForm" (ngSubmit)="onSubmit(loginForm.value)" novalidate padding>\n\n\n\n                        <ion-item no-padding>\n\n                            <ion-label color="label-color" stacked>User Name <span class="required"> *</span>\n\n                            </ion-label>\n\n                            <ion-input type="text" [formControl]="username" placeholder="User Name" name="username">\n\n                            </ion-input>\n\n                        </ion-item>\n\n\n\n                        <ion-item no-padding>\n\n                            <ion-label color="label-color" stacked>Password <span class="required"> *</span></ion-label>\n\n                            <ion-input placeholder="Password" [formControl]="password" type="{{typecheck}}"></ion-input>\n\n                            <button class="no-margin" *ngIf="!showPass" ion-button clear color="dark" type="button"\n\n                                item-right (click)="showPassword()">\n\n                                <ion-icon style="background:none !important;" name="eye"></ion-icon>\n\n                            </button>\n\n                            <button class="no-margin" *ngIf="showPass" ion-button clear color="dark" type="button"\n\n                                item-right (click)="showPassword()">\n\n                                <ion-icon style="background:none !important;" name="eye-off"></ion-icon>\n\n                            </button>\n\n                        </ion-item>\n\n\n\n                        <span *ngIf="branch_settings == 1 && login_branch == 1">\n\n                            <ion-item no-padding>\n\n                                <ion-label color="label-color" stacked>Branch <span class="required"> *</span>\n\n                                </ion-label>\n\n                                <ion-select [formControl]="id_branch" placeholder="Branch" name="branchname">\n\n                                    <ion-option *ngFor="let b of branches" [value]="b.id_branch">{{b.name}}</ion-option>\n\n                                </ion-select>\n\n                            </ion-item>\n\n                        </span>\n\n                        <ion-row style="margin-top: 10px;">\n\n                            <ion-col col-6>\n\n                            </ion-col>\n\n                            <ion-col col-1>\n\n                                <ion-checkbox [formControl]="remember2" (ionChange)="updateremember2(remember2.value)">\n\n                                </ion-checkbox>\n\n                            </ion-col>\n\n\n\n                            <ion-col col-5>\n\n                                <span style="font-size: 1.4rem;font-weight: normal;color: #222;float:left;margin-top: 2px;">Remember\n\n                                    me</span>\n\n                            </ion-col>\n\n                        </ion-row>\n\n                        <div style="margin-top: 5%;">\n\n                            <button ion-button icon-start full class="theme-btn" type="submit">Login</button>\n\n                        </div>\n\n                    </form>\n\n                </div>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n    <!-- <ion-note margin align="center">Retail v2</ion-note> -->\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\login\login.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]],
            animations: [
                Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_23" /* trigger */])('myvisibility', [
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_20" /* state */])('visible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_21" /* style */])({
                        opacity: 1
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_20" /* state */])('invisible', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_21" /* style */])({
                        opacity: 0
                    })),
                    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_22" /* transition */])('* => *', Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* animate */])('.5s'))
                ])
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__ionic_native_device__["a" /* Device */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* App */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormBuilder */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], LoginPage);
    return LoginPage;
    var LoginPage_1;
}());

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 105:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MasSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the MasSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var MasSearchPage = /** @class */ (function () {
    function MasSearchPage(events, keyboard, load, common, viewCtrl, navCtrl, navParams) {
        var _this = this;
        this.events = events;
        this.keyboard = keyboard;
        this.load = load;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.searchArr = [];
        this.toggle = true;
        this.page = "";
        this.list = [];
        this.listType = "normal";
        this.searchArr = this.navParams.get('searchArr');
        this.list = this.navParams.get('searchArr');
        this.page = this.navParams.get('page');
        this.listType = this.navParams.get('listType');
        events.subscribe('treeProd:selected', function (data) {
            _this.viewCtrl.dismiss(data);
        });
    }
    MasSearchPage.prototype.selected = function (data) {
        this.viewCtrl.dismiss(data);
    };
    MasSearchPage.prototype.getSearch = function (ev) {
        var val = ev.target.value;
        if (!val.trim().length || !this.keyboard.isOpen()) {
            this.list = this.navParams.get('searchArr');
            return;
        }
        this.list = this.searchArr.filter(function (item) { return item['label'].toUpperCase().includes(val.toUpperCase()); });
        console.log(this.list);
    };
    MasSearchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MasSearchPage');
    };
    MasSearchPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    MasSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-mas-search',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\mas-search\mas-search.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Search {{page}}\n    </ion-title>\n    <ion-buttons end>\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <span *ngIf="listType == \'normal\'">\n    <ion-searchbar (ionInput)="getSearch($event)"></ion-searchbar>\n    <ion-list>\n      <ion-item *ngFor="let d of list" (click)="selected(d)">\n        {{ d.label }}\n      </ion-item>\n    </ion-list>\n  </span>\n  <tree-view *ngIf="listType == \'tree\' && page == \'Product\'" [TreeData]="list" [hasCheckbox]="true"></tree-view>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\mas-search\mas-search.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], MasSearchPage);
    return MasSearchPage;
}());

//# sourceMappingURL=mas-search.js.map

/***/ }),

/***/ 106:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CountrymodelPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CustomPopupPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var CountrymodelPage = /** @class */ (function () {
    function CountrymodelPage(keyboard, event, navCtrl, renderer, viewCtrl, navParams) {
        this.keyboard = keyboard;
        this.event = event;
        this.navCtrl = navCtrl;
        this.renderer = renderer;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.details = [];
        this.searchData = [];
        this.input = '';
        this.name = '';
        this.renderer.setElementClass(viewCtrl.pageRef().nativeElement, 'countrymodel', true);
        this.name = this.navParams.get('name');
        this.details = this.navParams.get('data');
        this.searchData = this.navParams.get('data');
    }
    CountrymodelPage.prototype.selected = function (temp) {
        this.viewCtrl.dismiss(temp, this.name);
    };
    CountrymodelPage.prototype.dismiss = function (temp) {
        this.viewCtrl.dismiss();
    };
    CountrymodelPage.prototype.search = function () {
        var _this = this;
        if (!this.input.trim().length || !this.keyboard.isOpen()) {
            this.details = this.navParams.get('data');
            return;
        }
        this.details = this.searchData.filter(function (item) { return item['name'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    CountrymodelPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-countrymodel',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\countrymodel\countrymodel.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Search {{name}}\n    </ion-title>\n    <ion-buttons end>\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-searchbar [(ngModel)]="input" placeholder="Search {{name}}" (ionChange)="search()"></ion-searchbar>\n    <ion-list>\n        <ion-item *ngFor="let data of details" (click)="selected(data)">\n            <span *ngIf="data[\'name\']">  {{data[\'name\']}} </span>\n            <span>{{data[\'village_name\']}}</span>\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\countrymodel\countrymodel.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["V" /* Renderer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], CountrymodelPage);
    return CountrymodelPage;
}());

//# sourceMappingURL=countrymodel.js.map

/***/ }),

/***/ 14:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RetailProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var RetailProvider = /** @class */ (function () {
    function RetailProvider(http, commonService) {
        this.http = http;
        this.commonService = commonService;
    }
    // Item Sale Value calculation - Common for all Pages
    RetailProvider.prototype.setAsNumber = function (data) {
        if (typeof data != 'undefined' && data) {
            return Number(data);
        }
        else {
            return 0;
        }
    };
    RetailProvider.prototype.calculate_base_value_tax = function (taxcallrate, taxgroup) {
        var totaltax = 0;
        this.tax_details.forEach(function (taxitem) {
            if (taxitem.tgi_tgrpcode == taxgroup) {
                if (taxitem.tgi_calculation == 1) {
                    if (taxitem.tgi_type == 1) {
                        totaltax += (taxcallrate) * ((taxitem.tax_percentage) / 100);
                    }
                    else {
                        totaltax -= (taxcallrate) * ((taxitem.tax_percentage) / 100);
                    }
                }
            }
        });
        return totaltax;
    };
    RetailProvider.prototype.calculate_arrived_value_tax = function (taxcallrate, taxgroup) {
        var totaltax = 0;
        this.tax_details.forEach(function (taxitem) {
            if (taxitem.tgi_tgrpcode == taxgroup) {
                if (taxitem.tgi_calculation == 2) {
                    if (taxitem.tgi_type == 1) {
                        totaltax += (taxcallrate) * ((taxitem.tax_percentage) / 100);
                    }
                    else {
                        totaltax -= (taxcallrate) * ((taxitem.tax_percentage) / 100);
                    }
                }
            }
        });
        return totaltax;
    };
    RetailProvider.prototype.calculateSaleValueBasedMc = function (data) {
        var itemData = data.itemData;
        var metalRates = data.metalRate;
        this.tax_details = data.tax_details;
        console.log(data);
        var arrived_value_tax = 0;
        var base_value_amt = 0;
        var arrived_value_amt = 0;
        var market_arrived_value_tax = 0;
        var market_base_value_amt = 0;
        var market_arrived_value_amt = 0;
        var gross_wt = this.setAsNumber(itemData.gross_wt);
        var less_wt = this.setAsNumber(itemData.less_wt);
        var net_wt = this.setAsNumber(itemData.net_wt);
        var piece = this.setAsNumber(itemData.piece);
        var tax_group = this.setAsNumber(itemData.tax_group_id);
        var metal_type = this.setAsNumber(itemData.metal_type);
        var calculation_type = this.setAsNumber(itemData.calculation_based_on);
        var mc_type = this.setAsNumber(itemData.mc_type);
        var mc_value = this.setAsNumber(itemData.mc_value);
        var tot_wastage = this.setAsNumber(itemData.retail_max_wastage_percent);
        var stone_price = this.setAsNumber(itemData.stone_price);
        var certification_price = this.setAsNumber(itemData.certification_cost);
        var ratePerG = this.setAsNumber(metalRates[itemData.metal_type]);
        var marketRatePerG = this.setAsNumber(metalRates[itemData.market_metal_type]);
        var item_rate = this.setAsNumber(itemData.item_rate);
        var sales_value = this.setAsNumber(itemData.sales_value);
        var charges = this.setAsNumber(itemData.charge_value);
        var finalmaking_charge = this.setAsNumber(itemData.making_charge);
        /**
        *	Amount calculation based on settings (without discount and tax )
        *   0 - Wastage on Gross weight And MC on Gross weight
        *   1 - Wastage on Net weight And MC on Net weight
        *   2 - Wastage On Netwt And MC On Grwt
        *   taxable = Metal Rate + Stone + OM + Wastage + MC
        */
        if (calculation_type == 0) {
            var wast_wgt = parseFloat(((gross_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = finalmaking_charge;
                // Metal Rate + Stone + OM + Wastage + MC
                mc_value = parseFloat((mc_type == 2 ? (making_charge / gross_wt) : ((mc_type) == 1 ? (mc_value / piece) : 0)).toFixed(2));
                console.log(mc_value);
                var taxable = ((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges));
                var market_taxable = ((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges));
            }
            else {
                var making_charge = finalmaking_charge;
                var taxable = ((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges));
                var market_taxable = ((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges));
            }
        }
        else if (calculation_type == 1) {
            var wast_wgt = parseFloat(((net_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = finalmaking_charge;
                // Metal Rate + Stone + OM + Wastage + MC
                mc_value = parseFloat((mc_type == 2 ? (making_charge / net_wt) : ((mc_type) == 1 ? (mc_value / piece) : 0)).toFixed(2));
                console.log(mc_value);
                var taxable = parseFloat(((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges)).toFixed(2));
                var market_taxable = parseFloat(((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges)).toFixed(2));
            }
            else {
                var making_charge = finalmaking_charge;
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges)).toFixed(2));
                var market_taxable = parseFloat(((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges)).toFixed(2));
            }
        }
        else if (calculation_type == 2) {
            var wast_wgt = parseFloat(((net_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = finalmaking_charge;
                console.log(making_charge);
                console.log(mc_value);
                console.log(piece);
                mc_value = parseFloat((mc_type == 2 ? (making_charge / gross_wt) : ((mc_type) == 1 ? (mc_value / piece) : 0)).toFixed(2));
                console.log(mc_value);
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((((ratePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges)).toFixed(2));
                var market_taxable = parseFloat(((((marketRatePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges)).toFixed(2));
            }
            else {
                console.log(making_charge);
                var making_charge = finalmaking_charge;
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((((ratePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges)).toFixed(2));
                var market_taxable = parseFloat(((((marketRatePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges)).toFixed(2));
            }
        }
        else if (calculation_type == 3) {
            var wast_wgt = 0;
            var taxable = (sales_value ? sales_value : 0);
            var market_taxable = (sales_value ? sales_value : 0);
        }
        else if (calculation_type == 4) {
            var wast_wgt = 0;
            var taxable = (item_rate ? item_rate : 0);
            var market_taxable = (item_rate ? item_rate : 0);
        }
        if (calculation_type != 3) {
            if (this.tax_details) {
                // Tax Calculation
                var base_value_tax = (this.calculate_base_value_tax(taxable, tax_group));
                var base_value_amt = ((taxable) + (base_value_tax));
                var arrived_value_tax = (this.calculate_arrived_value_tax(base_value_amt, tax_group));
                var arrived_value_amt = ((base_value_amt) + (arrived_value_tax));
                var total_tax_rate = parseFloat((base_value_tax + arrived_value_tax).toFixed(2));
                var market_base_value_tax = (this.calculate_base_value_tax(market_taxable, tax_group));
                var market_base_value_amt = ((market_taxable) + (base_value_tax));
                var market_arrived_value_tax = (this.calculate_arrived_value_tax(base_value_amt, tax_group));
                var market_arrived_value_amt = ((base_value_amt) + (arrived_value_tax));
                var market_total_tax_rate = parseFloat((base_value_tax + arrived_value_tax).toFixed(2));
            }
            else {
                var total_tax_rate = 0;
                var market_total_tax_rate = 0;
            }
            var total_price = (taxable + total_tax_rate);
            var market_total_price = (market_taxable + market_total_tax_rate);
        }
        else {
            var total_price = sales_value;
            var market_total_price = sales_value;
        }
        // Set Calculated Value
        itemData["mc_value"] = mc_value;
        itemData["making_charge"] = making_charge;
        itemData["wast_wgt"] = wast_wgt;
        itemData["taxable"] = taxable;
        itemData["sales_value"] = total_price.toFixed(2);
        itemData["market_tax_price"] = market_total_tax_rate;
        itemData["market_sales_value"] = market_total_price;
        itemData["tax_price"] = total_tax_rate;
        itemData["gross_wt"] = itemData.gross_wt;
        itemData["less_wt"] = itemData.less_wt;
        itemData["net_wt"] = itemData.net_wt;
        if (data.item_type == 'tag') {
            itemData["is_partial"] = itemData.is_partial;
        }
        if (data.item_type == 'non_tag') {
            itemData["design"] = itemData.design;
        }
        console.log(itemData);
        return itemData;
    };
    RetailProvider.prototype.calculateSaleValue = function (data) {
        var itemData = data.itemData;
        var metalRates = data.metalRate;
        this.tax_details = data.tax_details;
        console.log(data);
        var arrived_value_tax = 0;
        var base_value_amt = 0;
        var arrived_value_amt = 0;
        var market_arrived_value_tax = 0;
        var market_base_value_amt = 0;
        var market_arrived_value_amt = 0;
        var gross_wt = this.setAsNumber(itemData.gross_wt);
        var less_wt = this.setAsNumber(itemData.less_wt);
        var net_wt = this.setAsNumber(itemData.net_wt);
        // var piece     = this.setAsNumber(itemData.piece) ;
        var piece = 1;
        var tax_group = this.setAsNumber(itemData.tax_group_id);
        var metal_type = this.setAsNumber(itemData.metal_type);
        var calculation_type = this.setAsNumber(itemData.calculation_based_on);
        var mc_type = this.setAsNumber(itemData.mc_type);
        var mc_value = this.setAsNumber(itemData.mc_value);
        var tot_wastage = this.setAsNumber(itemData.retail_max_wastage_percent);
        var stone_price = this.setAsNumber(itemData.stone_price);
        var certification_price = this.setAsNumber(itemData.certification_cost);
        var ratePerG = this.setAsNumber(metalRates[itemData.metal_type]);
        var marketRatePerG = this.setAsNumber(metalRates[itemData.market_metal_type]);
        var item_rate = this.setAsNumber(itemData.item_rate);
        var sales_value = this.setAsNumber(itemData.sales_value);
        var charges = this.setAsNumber(itemData.charge_value);
        var othercharges = this.setAsNumber(itemData.othermetal_charges);
        var advance = this.setAsNumber(itemData['advance']);
        /**
        *	Amount calculation based on settings (without discount and tax )
        *   0 - Wastage on Gross weight And MC on Gross weight
        *   1 - Wastage on Net weight And MC on Net weight
        *   2 - Wastage On Netwt And MC On Grwt
        *   taxable = Metal Rate + Stone + OM + Wastage + MC
        */
        if (calculation_type == 0) {
            var wast_wgt = parseFloat(((gross_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = (mc_type == 2 ? (mc_value * gross_wt) : ((mc_type) == 1 ? (mc_value * piece) : 0));
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = ((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges));
                var market_taxable = ((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges));
            }
            else {
                var making_charge = (ratePerG * ((wast_wgt) + (net_wt)) * (mc_value / 100));
                var taxable = ((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges));
                var market_taxable = ((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges));
            }
        }
        else if (calculation_type == 1) {
            var wast_wgt = parseFloat(((net_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = parseFloat((mc_type == 2 ? (mc_value * net_wt) : ((mc_type) == 1 ? (mc_value * piece) : 0)).toFixed(2));
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
                var market_taxable = parseFloat(((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
            }
            else {
                var making_charge = ((ratePerG * ((wast_wgt) + (net_wt))) * (mc_value / 100));
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((ratePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
                var market_taxable = parseFloat(((marketRatePerG * ((wast_wgt) + (net_wt))) + (making_charge) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
            }
        }
        else if (calculation_type == 2) {
            var wast_wgt = parseFloat(((net_wt) * (tot_wastage / 100)).toFixed(3));
            if (mc_type != 3) {
                var making_charge = parseFloat((mc_type == 2 ? (mc_value * gross_wt) : ((mc_type) == 1 ? (mc_value * piece) : 0)).toFixed(2));
                console.log(making_charge);
                console.log(mc_value);
                console.log(piece);
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((((ratePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
                var market_taxable = parseFloat(((((marketRatePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
            }
            else {
                console.log(making_charge);
                var making_charge = (((ratePerG) * ((wast_wgt) + (net_wt))) * (mc_value / 100));
                // Metal Rate + Stone + OM + Wastage + MC
                var taxable = parseFloat(((((ratePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
                var market_taxable = parseFloat(((((marketRatePerG) * ((wast_wgt) + (net_wt))) + (making_charge)) + (stone_price) + (certification_price) + (charges) + (othercharges)).toFixed(2));
            }
        }
        else if (calculation_type == 3) {
            var wast_wgt = 0;
            console.log(charges);
            var taxable = (sales_value ? sales_value + (charges) + (othercharges) : 0);
            var market_taxable = (sales_value ? sales_value + (charges) + (othercharges) : 0);
        }
        else if (calculation_type == 4) {
            var wast_wgt = 0;
            var taxable = (item_rate ? item_rate : 0);
            var market_taxable = (item_rate ? item_rate : 0);
        }
        // if(calculation_type != 3){ 
        if (this.tax_details) {
            // Tax Calculation
            var base_value_tax = (this.calculate_base_value_tax(taxable, tax_group));
            var base_value_amt = ((taxable) + (base_value_tax));
            var arrived_value_tax = (this.calculate_arrived_value_tax(base_value_amt, tax_group));
            var arrived_value_amt = ((base_value_amt) + (arrived_value_tax));
            var total_tax_rate = parseFloat((base_value_tax + arrived_value_tax).toFixed(2));
            var market_base_value_tax = (this.calculate_base_value_tax(market_taxable, tax_group));
            var market_base_value_amt = ((market_taxable) + (base_value_tax));
            var market_arrived_value_tax = (this.calculate_arrived_value_tax(base_value_amt, tax_group));
            var market_arrived_value_amt = ((base_value_amt) + (arrived_value_tax));
            var market_total_tax_rate = parseFloat((base_value_tax + arrived_value_tax).toFixed(2));
            // }else{
            //     var total_tax_rate	= 0;
            //     var market_total_tax_rate	= 0;
            // }
            var total_price = (taxable + total_tax_rate);
            var market_total_price = (market_taxable + market_total_tax_rate);
        }
        else {
            var total_price = sales_value;
            var market_total_price = sales_value;
        }
        // if(itemData.hasOwnProperty('advance')){
        // total_price =  total_price - advance;
        // }
        // Set Calculated Value
        itemData["making_charge"] = making_charge;
        itemData["wast_wgt"] = wast_wgt;
        itemData["taxable"] = taxable;
        itemData["sales_value"] = calculation_type == 3 ? taxable : total_price.toFixed(2);
        itemData["market_tax_price"] = market_total_tax_rate;
        itemData["market_sales_value"] = market_total_price;
        itemData["tax_price"] = total_tax_rate;
        itemData["gross_wt"] = itemData.gross_wt;
        itemData["less_wt"] = itemData.less_wt;
        itemData["net_wt"] = itemData.net_wt;
        if (data.item_type == 'tag') {
            itemData["is_partial"] = itemData.is_partial;
        }
        if (data.item_type == 'non_tag') {
            itemData["design"] = itemData.design;
        }
        console.log(itemData);
        return itemData;
    };
    // ./Item Sale Value calculation - Common for all Pages
    // Estimation
    RetailProvider.prototype.getTagData = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getTaggingBySearch', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getorderData = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getorderBySearch', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getNonTagItems = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getNonTagItems', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getHomeStock = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getHomeStock', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getAllTaxGroupItems = function () {
        return this.http
            .get(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getAllTaxGroupItems', this.commonService.getHeader())
            .map(function (response) {
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getAllPurities = function (id_product) {
        return this.http
            .get(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getAllPurities?id_product=' + id_product, this.commonService.getHeader())
            .map(function (response) {
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getOldMetalType = function () {
        return this.http
            .get(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getOldMetalType', this.commonService.getHeader())
            .map(function (response) {
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getAllStoneMaters = function (type) {
        return this.http
            .get(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getStones?type=' + type, this.commonService.getHeader())
            .map(function (response) {
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.createEstimation = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/createEstimation', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getEstiPrintURL = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getEstiPrintData', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getEstiDetails = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getEstimationDetails', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    // ./Estimation
    // Catalog
    RetailProvider.prototype.getCategories = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getCategories', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getCollections = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getCollections', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getProducts = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getProducts', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getProductTreeList = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getProductTreeList', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getDesigns = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getDesigns', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getDesignById = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getSubDesignById', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getECatalog = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getECatalog', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getEcatalogFilters = function () {
        return this.http
            .get(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getEcatalogFilters', this.commonService.getHeader())
            .map(function (response) {
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.uploadImg = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/uploadImg', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    // ./Catalog
    // Wishlist and Cart
    RetailProvider.prototype.addToWishlist = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/addToWishlist', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.getItemslist = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/getItemslist', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.removeItem = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/removeItem', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.updateItem = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/updateItem', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.addToCart = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/addToCart', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    // ./Cart
    // Order  
    RetailProvider.prototype.createOrder = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/createOrder', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider.prototype.deletetagimage = function (postData) {
        return this.http
            .post(__WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/deletetagimage', postData, this.commonService.getHeader())
            .map(function (response) {
            // some response manipulation
            var result = response.json();
            return result;
        })
            .toPromise();
    };
    RetailProvider = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]])
    ], RetailProvider);
    return RetailProvider;
}());

//# sourceMappingURL=retail.js.map

/***/ }),

/***/ 177:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EstiPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_add_esti_item_add_esti_item__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_opener__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_chooser__ = __webpack_require__(76);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_barcode_scanner__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__modal_customer_customer__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__bluetooth_bluetooth__ = __webpack_require__(181);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__gift_gift__ = __webpack_require__(391);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


// import { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';















/*
  Generated class for the Estimation page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var EstiPage = /** @class */ (function () {
    function EstiPage(cd, barcodeScanner, navParams, navCtrl, load, printer, nav, events, commonservice, retail, toast, event, modal, common, fileOpener, transfer, file, filePath, fileChooser, platform) {
        var _this = this;
        this.cd = cd;
        this.barcodeScanner = barcodeScanner;
        this.navParams = navParams;
        this.navCtrl = navCtrl;
        this.load = load;
        this.printer = printer;
        this.nav = nav;
        this.events = events;
        this.commonservice = commonservice;
        this.retail = retail;
        this.toast = toast;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.fileOpener = fileOpener;
        this.transfer = transfer;
        this.file = file;
        this.filePath = filePath;
        this.fileChooser = fileChooser;
        this.platform = platform;
        this.fileTransfer = this.transfer.create();
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.esti_type = 'tag';
        this.page_type = "create";
        this.branches = [];
        this.employees = [];
        this.askBranch = 0;
        this.selectedCusData = [];
        this.nonTagStock = [];
        this.settings = [];
        this.ret_settings = [];
        this.tagMsg = "";
        this.tagErrorMsg = "";
        this.scannerOn = false;
        this.ntMsg = "";
        this.ntErrorMsg = "";
        this.hbMsg = "";
        this.hbErrorMsg = "";
        this.purities = [];
        this.collections = [];
        this.omErrorMsg = "";
        this.ombMsg = "";
        this.oldMetalCat = [];
        this.stoneMasData = [];
        this.esti = { "cus_id": "", "customer": "", "id_branch": "", "id_employee": "", "emp_name": "", "is_tag": false, "is_non_tag": false, "is_home_bill": false, "is_old_metal": false, "tag": [], "non_tag": [], "home_bill": [], "old_metal": [], "chit_details": [{ 'slip_no': '', 'slip_amt': '' }] };
        this.tot_purch_wgt = 0;
        this.tot_purch_rate = 0;
        this.tot_sale_wgt = 0;
        this.tot_sale_rate = 0;
        this.tot_charge = 0;
        this.total_esti_value = 0;
        this.oldMetalTypes = [];
        this.estiDetail = {};
        this.dataCheckList = { "empData": false, "taxGroup": false, "branch": false, "settings": false };
        this.color = 'black';
        this.tagData = { 'fin_year': '', "order_id": "", "tag_code": "", "tag_code1": "", "tag_code2": "", "is_partial": 0, "stone_details": [] };
        this.show = true;
        this.list = [];
        this.togtype = '';
        this.checkold = false;
        this.fin = [];
        this.advance = 0;
        this.tot_gift_rate = 0;
        this.nav = nav;
        this.page_type = this.navParams.get('page_type');
        this.loggedInBranch = this.empData['id_branch'];
        this.esti['id_log'] = this.empData['id_log'];
        this.esti['id_employee'] = this.empData['uid'];
        this.esti['emp_name'] = this.empData['username'];
        if (this.navParams.get('empname') != undefined && this.navParams.get('empname') != '') {
            this.esti['emp_name'] = this.navParams.get('empname');
            this.esti['id_employee'] = this.navParams.get('empid');
            this.empData['emp_name'] = this.navParams.get('empname');
            this.empData['id_employee'] = this.navParams.get('empid');
        }
        if (this.navParams.get('bname') != undefined && this.navParams.get('bid') != '') {
            this.esti['branch_name'] = this.navParams.get('bname');
            this.esti['id_branch'] = this.navParams.get('bid');
            this.empData['branch_name'] = this.navParams.get('bname');
            this.empData['id_branch'] = this.navParams.get('bid');
            this.loggedInBranch = this.navParams.get('bid');
        }
        /*this.retail.getHomeStock({"type":"all", "searchTxt":"", "searchField":"", "id_branch":this.esti['id_branch']}).then(data=>{
          this.homeBillStock = data;
        })*/
        this.commonservice.getlist({ 'id_branch': this.empData['id_branch'], 'emp_code': this.empData['emp_code'] }).then(function (res) {
            _this.list = res['estdetails'];
            _this.content.resize();
        }, function (err) {
        });
        this.retail.getAllStoneMaters({ "id_branch": this.esti['id_branch'] }).then(function (data) {
            _this.stoneMasData = data;
        });
        /*     this.commonservice.fin().then(res => {
        
              this.fin = res;
              this.tagData['fin_year'] = this.fin.filter(data=>data['fin_status'] == 1)[0]['fin_year_code'];
            }); */
        this.event.subscribe('gift', function (gift) {
            _this.esti['chit_details'] = gift['fields'];
            _this.esti['cus_id'] = gift['idcus'];
            console.log(gift);
            _this.calcEstiSummary();
        });
        this.openEstiBasicDetailModal();
    }
    EstiPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        if (this.navParams.get('empname') != undefined && this.navParams.get('empname') != '') {
            this.esti['emp_name'] = this.navParams.get('empname');
            this.esti['id_employee'] = this.navParams.get('empid');
            this.empData['emp_name'] = this.navParams.get('empname');
            this.empData['id_employee'] = this.navParams.get('empid');
        }
        if (this.navParams.get('bname') != undefined && this.navParams.get('bid') != '') {
            this.esti['branch_name'] = this.navParams.get('bname');
            this.esti['id_branch'] = this.navParams.get('bid');
            this.empData['branch_name'] = this.navParams.get('bname');
            this.empData['id_branch'] = this.navParams.get('bid');
            this.loggedInBranch = this.navParams.get('bid');
        }
        console.log(this.loggedInBranch);
        console.log('000000000000000');
        if (this.page_type == "create") {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            // let loader2 = this.load.create({
            //   content: 'Please Wait',
            //   spinner: 'bubbles',
            // });
            // loader2.present();
            // let loader3 = this.load.create({
            //   content: 'Please Wait',
            //   spinner: 'bubbles',
            // });
            // loader3.present();
            // let loader4 = this.load.create({
            //   content: 'Please Wait',
            //   spinner: 'bubbles',
            // });
            // loader4.present();
            if ((this.loggedInBranch == 0 || this.loggedInBranch == '' || this.loggedInBranch == null) && this.empData['branch_settings'] == 1) {
                this.askBranch = 1;
                this.common.getbranch().then(function (data) {
                    _this.branches = data;
                    _this.events.publish('branch:loaded', true);
                    _this.dataCheckList['branch'] = true;
                    _this.common.getBranchEmployees(_this.empData['id_branch']).then(function (data) {
                        _this.employees = data;
                        // this.openEstiBasicDetailModal();
                        _this.events.publish('empData:loaded', true);
                        _this.dataCheckList['empData'] = true;
                        _this.empSelected();
                        _this.retail.getAllTaxGroupItems().then(function (data) {
                            _this.taxGroupItems = data;
                            _this.events.publish('taxGroup:loaded', true);
                            _this.dataCheckList['taxGroup'] = true;
                            _this.common.getCurrencyAndSettings({ "id_branch": _this.esti['id_branch'] }).then(function (data) {
                                _this.metalRate = data.metal_rates;
                                _this.settings = data.settings;
                                _this.ret_settings = data.ret_settings;
                                _this.events.publish('settings:loaded', true);
                                _this.events.publish('ret_settings:loaded', true);
                                _this.dataCheckList['settings'] = true;
                                loader_1.dismiss();
                            });
                        });
                    });
                });
            }
            else {
                this.esti['id_branch'] = this.loggedInBranch;
                this.estiDetail['id_branch'] = this.loggedInBranch;
                this.events.publish('branch:loaded', true);
                this.dataCheckList['branch'] = true;
                this.common.getBranchEmployees(this.empData['id_branch']).then(function (data) {
                    _this.employees = data;
                    // this.openEstiBasicDetailModal();
                    _this.events.publish('empData:loaded', true);
                    _this.dataCheckList['empData'] = true;
                    _this.empSelected();
                    _this.retail.getAllTaxGroupItems().then(function (data) {
                        _this.taxGroupItems = data;
                        _this.events.publish('taxGroup:loaded', true);
                        _this.dataCheckList['taxGroup'] = true;
                        _this.common.getCurrencyAndSettings({ "id_branch": _this.esti['id_branch'] }).then(function (data) {
                            _this.metalRate = data.metal_rates;
                            _this.settings = data.settings;
                            _this.ret_settings = data.ret_settings;
                            _this.events.publish('settings:loaded', true);
                            _this.events.publish('ret_settings:loaded', true);
                            _this.dataCheckList['settings'] = true;
                            loader_1.dismiss();
                        });
                    });
                });
            }
        }
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    EstiPage.prototype.ionViewWillEnter = function () {
    };
    EstiPage.prototype.estiTypeChanged = function (ev) {
        var _this = this;
        var type = ev._value;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        if (type != 'summary') {
            if ((this.stoneMasData).length == 0) {
                this.retail.getAllStoneMaters({ "id_branch": this.esti['id_branch'] }).then(function (data) {
                    _this.stoneMasData = data;
                    loader.dismiss();
                });
            }
            if (type == 'non_tag') {
                this.retail.getNonTagItems({ "id_branch": this.esti['id_branch'] }).then(function (data) {
                    _this.nonTagStock = data;
                    loader.dismiss();
                    _this.openItemAddModal(_this.esti_type, '', 'add');
                });
            }
            else if (type == 'home_bill') {
                if ((this.purities).length == 0) {
                    this.retail.getAllPurities("").then(function (data) {
                        _this.purities = data;
                        if ((_this.collections).length == 0 && _this.ret_settings['collections_required'] == 1) {
                            _this.retail.getCollections({ "type": "active", "last_id": -1 }).then(function (data) {
                                _this.collections = data;
                                loader.dismiss();
                                _this.openItemAddModal(_this.esti_type, '', 'add');
                            });
                        }
                        else {
                            loader.dismiss();
                            _this.openItemAddModal(_this.esti_type, '', 'add');
                        }
                        // loader.dismiss();
                    });
                }
                else {
                    // loader.dismiss();
                    if ((this.collections).length == 0 && this.ret_settings['collections_required'] == 1) {
                        this.retail.getCollections({ "type": "active", "last_id": -1 }).then(function (data) {
                            _this.collections = data;
                            loader.dismiss();
                            _this.openItemAddModal(_this.esti_type, '', 'add');
                        });
                    }
                    else {
                        loader.dismiss();
                        this.openItemAddModal(this.esti_type, '', 'add');
                    }
                }
            }
            else if (type == 'old_metal') {
                this.retail.getOldMetalType().then(function (data) {
                    _this.oldMetalTypes = data;
                    loader.dismiss();
                    _this.openItemAddModal(_this.esti_type, '', 'add');
                });
            }
            else {
                loader.dismiss();
            }
        }
        else {
            loader.dismiss();
        }
        this.calcEstiSummary();
    };
    EstiPage.prototype.empSelected = function () {
        var _this = this;
        this.oldMetalCat = [];
        var emp = { "allowed_old_met_pur": "" };
        this.employees.forEach(function (e) {
            if (_this.esti['id_employee'] == e.id_employee) {
                emp = e;
            }
        });
        if (emp.allowed_old_met_pur != '') {
            var categories = emp.allowed_old_met_pur;
            var catArr = categories.split(",");
            catArr.forEach(function (cat) {
                var categoryArr = cat.split("-");
                _this.oldMetalCat.push({ "id_category": categoryArr[0], "cat_name": categoryArr[1] });
            });
        }
    };
    EstiPage.prototype.openEstiBasicDetailModal = function () {
        var _this = this;
        var data = { "askBranch": this.askBranch, employees: this.employees, selectedCusData: this.selectedCusData, esti: this.esti, branches: this.branches };
        console.log(data);
        // let modal = this.modal.create(EstiBasicDetailPage, data,{enableBackdropDismiss: false})
        // modal.present();
        // modal.onDidDismiss(data => {
        //   if(data != null){
        //     this.selectedCusData = data.selectedCusData;
        //     this.esti['cus_id'] = data.cus_id;
        //     this.esti['customer'] = data.customer;
        //     this.empSelected();
        //   }
        // });
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_13__modal_customer_customer__["a" /* CusSearchPage */], { 'show': 'true' });
        modal.present();
        modal.onDidDismiss(function (mData) {
            console.log(mData);
            if (mData != null) {
                _this.selectedCusData = mData;
                _this.esti['cus_id'] = mData['id_customer'];
                _this.esti['customer'] = mData['label'];
                _this.empSelected();
            }
            else {
            }
        });
    };
    EstiPage.prototype.check = function () {
        if (this.show == false) {
            this.show = true;
        }
        else {
            this.show = false;
        }
    };
    EstiPage.prototype.openItemAddModal = function (type, item, action) {
        var _this = this;
        var idx = -1;
        var estiData = [];
        if (action == 'edit') {
            estiData = item;
            idx = this.esti[type].indexOf(item);
            console.log(idx);
            console.log(item);
            console.log(this.esti);
            console.log(this.esti[type][idx]);
        }
        var data = { type: type, action: action, ret_settings: this.ret_settings, esti: estiData, id_branch: this.esti['id_branch'], metal_rates: this.metalRate, taxGroupItems: this.taxGroupItems, nonTagStock: this.nonTagStock, homeBillStock: this.homeBillStock, purities: this.purities, collections: this.collections, oldMetalCat: this.oldMetalCat, stoneMasData: this.stoneMasData, oldMetalTypes: this.oldMetalTypes };
        console.log(data);
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_add_esti_item_add_esti_item__["a" /* AddEstiItemPage */], data, { enableBackdropDismiss: false });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                if (data.item_data != null) {
                    // ADD
                    if (action == 'add') {
                        var addItem_1 = true;
                        if (type == "tag") {
                            _this.esti[type].forEach(function (item) {
                                if (item.tag_id == data.item_data.tag_id) {
                                    addItem_1 = false;
                                    _this.tagMsg = "";
                                    _this.tagErrorMsg = "Tag Already exist..";
                                    var toastMsg = _this.toast.create({
                                        message: _this.tagErrorMsg,
                                        duration: _this.common.toastTimeout,
                                        position: 'middle'
                                    });
                                    toastMsg.present();
                                    setTimeout(function () {
                                        _this.tagErrorMsg = "";
                                    }, _this.common.msgTimeout);
                                }
                            });
                        }
                        if (addItem_1) {
                            _this.esti[type].push(data.item_data);
                        }
                    }
                    // UPDATE 
                    if (action == 'edit' && idx >= 0) {
                        // console.log(idx)          
                        // console.log(this.esti[type][idx]);
                        // console.log(data.item_data);
                        _this.esti[type][idx] = data.item_data;
                    }
                }
                _this.calcEstiSummary();
                if (data.submitType == 'SN') {
                    _this.openItemAddModal(type, '', 'add');
                }
            }
            else if (action == 'edit' && idx >= 0) {
                console.log(estiData);
                _this.esti[type][idx] = estiData;
            }
            var y = Object.assign({}, _this.esti[type]);
            console.log(y);
            _this.esti[type].reverse();
            console.log(_this.esti[type]);
        });
    };
    EstiPage.prototype.colorchange = function (index) {
        if (this.esti['tag'][index]['is_partial'] == '0') {
            this.esti['tag'][index]['is_partial'] = '1';
        }
        else {
            this.esti['tag'][index]['is_partial'] = '0';
            this.esti['tag'][index]['gross_wt'] = this.esti['tag'][index]['actual_gross_wt'];
            this.esti['tag'][index]['less_wt'] = this.esti['tag'][index]['actual_less_wt'];
            this.esti['tag'][index]['net_wt'] = this.esti['tag'][index]['actual_net_wt'];
            var detail = { itemData: this.esti['tag'][index], metalRate: this.metalRate, tax_details: this.taxGroupItems, item_type: 'tag' };
            this.esti['tag'][index] = this.retail.calculateSaleValue(detail);
            this.calcEstiSummary();
        }
    };
    EstiPage.prototype.colorchangehome = function (index) {
        if (this.esti['home_bill'][index]['is_partly_sold'] == '0') {
            this.esti['home_bill'][index]['is_partly_sold'] = '1';
        }
        else {
            this.esti['home_bill'][index]['is_partly_sold'] = '0';
            this.esti['home_bill'][index]['gross_wt'] = this.esti['home_bill'][index]['actual_gross_wt'];
            this.esti['home_bill'][index]['less_wt'] = this.esti['home_bill'][index]['actual_less_wt'];
            this.esti['home_bill'][index]['net_wt'] = this.esti['home_bill'][index]['actual_net_wt'];
            var detail = { itemData: this.esti['home_bill'][index], metalRate: this.metalRate, tax_details: this.taxGroupItems, item_type: 'home_bill' };
            this.esti['home_bill'][index] = this.retail.calculateSaleValue(detail);
            this.calcEstiSummary();
        }
    };
    EstiPage.prototype.calcSaleValue = function (index) {
        var _this = this;
        console.log(this.esti['tag'][index]);
        // this.checking(index)
        // if(this.esti_type == 'tag'){
        if (parseFloat(this.esti['tag'][index]['gross_wt']) <= parseFloat(this.esti['tag'][index]['actual_gross_wt']) && parseFloat(this.esti['tag'][index]['net_wt']) <= parseFloat(this.esti['tag'][index]['actual_net_wt']) && parseFloat(this.esti['tag'][index]['less_wt']) >= parseFloat(this.esti['tag'][index]['actual_less_wt'])) {
            this.esti['tag'][index]['net_wt'] = this.esti['tag'][index]['gross_wt'] - this.esti['tag'][index]['less_wt'];
            var detail = { itemData: this.esti['tag'][index], metalRate: this.metalRate, tax_details: this.taxGroupItems, item_type: 'tag' };
            this.esti['tag'][index] = this.retail.calculateSaleValue(detail);
            this.calcEstiSummary();
        }
        else {
            this.tagErrorMsg = "Entered weight greater than tag weight";
            // this.esti['tag'][index]['gross_wt']  = this.esti['tag'][index]['actual_gross_wt'] ;
            // this.esti['tag'][index]['less_wt']   = this.esti['tag'][index]['actual_less_wt'];
            // this.esti['tag'][index]['net_wt']    = this.esti['tag'][index]['actual_net_wt'];
            // Alert Message Timeout
            setTimeout(function () {
                _this.tagErrorMsg = "";
            }, this.common.msgTimeout);
        }
        // }
        // else if(this.item_type == 'non_tag'){
        //   let stData = this.calcStoneDetail(); 
        //   this.ntData['stone_wt'] = stData['stone_wt']; 
        //   this.ntData['stone_price'] = stData['stone_price'];  
        //   if(parseFloat(this.ntData['gross_wt']) > parseFloat(this.selectedNTStock['gross_wt'])){
        //     this.ntData['gross_wt'] = this.selectedNTStock['gross_wt'];
        //   }
        //   if(parseFloat(this.ntData['less_wt']) > parseFloat(this.selectedNTStock['less_wt'])){
        //     this.ntData['less_wt'] = this.retail.setAsNumber(this.selectedNTStock['less_wt']);
        //   }
        //   if(parseFloat(this.ntData['piece']) > parseFloat(this.selectedNTStock['piece'])){
        //     this.ntData['piece'] = this.selectedNTStock['piece'];
        //   }
        //   this.ntData['net_wt']    = parseFloat(this.ntData['gross_wt']) - this.retail.setAsNumber(this.ntData['less_wt']);
        //   let detail = {itemData : this.ntData, metalRate : this.metalRate, tax_details : this.tax_details, item_type : this.item_type};
        //   this.ntData = this.retail.calculateSaleValue(detail);
        // }
        // else if(this.esti_type == 'home_bill'){
        //   let stData = this.calcStoneDetail(); 
        //   this.esti['home_bill'][index]['stone_wt'] = stData['stone_wt']; 
        //   this.esti['home_bill'][index]['stone_price'] = stData['stone_price'];  
        //   if(this.esti['home_bill'][index]['is_partly_sold'] == 1){
        //     if(parseFloat(this.esti['home_bill'][index]['gross_wt']) > parseFloat(this.esti['home_bill'][index]['stock_gross_wt'])){
        //       this.esti['home_bill'][index]['gross_wt'] = this.retail.setAsNumber(this.esti['home_bill'][index]['stock_gross_wt']); 
        //     }
        //     if(parseFloat(this.esti['home_bill'][index]['less_wt']) > parseFloat(this.esti['home_bill'][index]['stock_less_wt'])){
        //       this.esti['home_bill'][index]['less_wt'] = this.retail.setAsNumber(this.esti['home_bill'][index]['stock_less_wt']);
        //     }
        //   } 
        //   this.esti['home_bill'][index]['net_wt'] = parseFloat(this.esti['home_bill'][index]['gross_wt']) - this.retail.setAsNumber(this.esti['home_bill'][index]['less_wt']);
        //   let detail = {itemData : this.esti['home_bill'][index], metalRate : this.metalRate, tax_details : this.taxGroupItems, item_type : this.esti_type};
        //   this.esti['home_bill'][index] = this.retail.calculateSaleValue(detail);
        // }
    };
    EstiPage.prototype.calcSaleValuehome = function (index) {
        // let stData = this.calcStoneDetail(); 
        // this.esti['home_bill'][index]['stone_wt'] = stData['stone_wt']; 
        // this.esti['home_bill'][index]['stone_price'] = stData['stone_price'];  
        if (this.esti['home_bill'][index]['is_partly_sold'] == 1) {
            if (parseFloat(this.esti['home_bill'][index]['gross_wt']) > parseFloat(this.esti['home_bill'][index]['stock_gross_wt'])) {
                this.esti['home_bill'][index]['gross_wt'] = this.retail.setAsNumber(this.esti['home_bill'][index]['stock_gross_wt']);
            }
            if (parseFloat(this.esti['home_bill'][index]['less_wt']) > parseFloat(this.esti['home_bill'][index]['stock_less_wt'])) {
                this.esti['home_bill'][index]['less_wt'] = this.retail.setAsNumber(this.esti['home_bill'][index]['stock_less_wt']);
            }
        }
        this.esti['home_bill'][index]['net_wt'] = parseFloat(this.esti['home_bill'][index]['gross_wt']) - this.retail.setAsNumber(this.esti['home_bill'][index]['less_wt']);
        var detail = { itemData: this.esti['home_bill'][index], metalRate: this.metalRate, tax_details: this.taxGroupItems, item_type: this.esti_type };
        this.esti['home_bill'][index] = this.retail.calculateSaleValue(detail);
    };
    EstiPage.prototype.calcEstiSummary = function () {
        var _this = this;
        console.log(this.esti);
        this.tot_sale_wgt = 0;
        this.tot_sale_rate = 0;
        this.tot_purch_wgt = 0;
        this.tot_purch_rate = 0;
        this.tot_charge = 0;
        this.esti['tag'].forEach(function (tag) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(tag.net_wt);
            _this.tot_charge = Number(_this.tot_charge) + Number(tag.charge_value);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(tag.sales_value);
        });
        this.esti['non_tag'].forEach(function (non_tag) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(non_tag.net_wt);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(non_tag.sales_value);
        });
        this.esti['home_bill'].forEach(function (home_bill) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(home_bill.net_wt);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(home_bill.sales_value);
        });
        this.esti['old_metal'].forEach(function (old_metal) {
            _this.tot_purch_wgt = Number(_this.tot_purch_wgt) + Number(old_metal.net_wt);
            _this.tot_purch_rate = Number(_this.tot_purch_rate) + Number(old_metal.amount);
        });
        this.tot_gift_rate = 0;
        this.esti['chit_details'].forEach(function (gift) {
            _this.tot_gift_rate = Number(_this.tot_gift_rate) + Number(gift.slip_amt);
        });
        this.total_esti_value = Number(this.tot_sale_rate) - Number(this.tot_purch_rate) - Number(this.advance) - Number(this.tot_gift_rate);
    };
    /*openBarcodeScanner(){
      this.barcodeScanner.scan().then(barcodeData => {
        if(barcodeData){
          console.log(barcodeData);
          this.getTagByID(barcodeData);
        }
       }).catch(err => {
           console.log('Error', err);
       });
    }*/
    EstiPage.prototype.closeScanner = function () {
        this.scannerOn = false;
        // this.scanSub.unsubscribe();
        // this.qrScanner.hide().then();
        // this.qrScanner.destroy().then();    
    };
    EstiPage.prototype.openQRScanner = function () {
        var _this = this;
        this.scannerOn = true;
        console.log("QR Scanner");
        this.barcodeScanner.scan().then(function (barcodeData) {
            _this.scannerOn = false;
            if (barcodeData['text'] != '') {
                var text1 = barcodeData['text'];
                var text2 = text1.replace(/ /g, "");
                console.log(text2);
                _this.getTagByID(text2);
            }
            // // Optionally request the permission early
            // this.qrScanner.prepare()
            // .then((status: QRScannerStatus) => {
            //   console.log("Then");
            //   if (status.authorized) {
            //     console.log("authorized");
            //     // start scanning
            //     this.scannerOn = true;
            //     this.qrScanner.show().then();  
            //     this.scanSub = this.qrScanner.scan().subscribe((text: string) => {
            //       console.log('Scanned something', text); 
            //       // Hide and unsubscribe from scanner
            //       this.qrScanner.hide().then();
            //       this.qrScanner.destroy().then();
            //       this.scanSub.unsubscribe();
            //       this.scannerOn = false;
            //       if(text != ''){
            //         this.getTagByID(text);
            //       }
            //     }); 
            //   } 
            //   else if (status.denied) {
            //     console.log("camera permission was permanently denied");
            //     // camera permission was permanently denied
            //     // you must use QRScanner.openSettings() method to guide the user to the settings page
            //     // then they can grant the permission from there
            //     this.qrScanner.openSettings();
            //   } 
            //   else {
            //     console.log("Camera Access permission denied. Kindly enable to Scan QR");
            //     // permission was denied, but not permanently. You can ask for permission again at a later time.
            //     alert('Camera Access permission denied. Kindly enable to Scan QR.');
            //   }
            // })
            // .catch((e: any) => console.log('Error is', e));
        }, function (err) {
            _this.scannerOn = false;
            console.log(err);
        });
    };
    EstiPage.prototype.getTagByID = function (tagData) {
        var _this = this;
        if (tagData != '') {
            var istagId = (tagData.search("/") > 0 ? true : false);
            var isTagCode = (tagData.search("-") > 0 ? true : false);
            if (istagId) {
                var tId = tagData.split("/");
                var searchTxt = (tId.length >= 2 ? tId[0] : "");
                var searchField = this.checkold == true ? "old_tag_id" : "tag_id";
            }
            else if (isTagCode) {
                var searchTxt = tagData;
                var searchField = this.checkold == true ? "old_tag_id" : "tag_code";
            }
            // Search Tag
            var loader_2 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_2.present();
            var postData = { "searchTxt": searchTxt, "searchField": searchField, "id_branch": this.esti['id_branch'] };
            this.retail.getTagData(postData).then(function (data) {
                if (data.status) {
                    _this.tagMsg = data.msg;
                    _this.tagErrorMsg = "";
                    var toastMsg = _this.toast.create({
                        message: _this.tagMsg,
                        duration: _this.common.toastTimeout,
                        position: 'middle'
                    });
                    toastMsg.present();
                    setTimeout(function () {
                        _this.tagMsg = "";
                    }, _this.common.msgTimeout);
                    data.tagData['actual_gross_wt'] = data.tagData['gross_wt'];
                    data.tagData['actual_less_wt'] = data.tagData['less_wt'];
                    data.tagData['actual_net_wt'] = data.tagData['net_wt'];
                    data.tagData['charge_value'] = data.tagData['charge_value'];
                    data.tagData['charges'] = data.tagData['charges'];
                    data.tagData['checkwas'] = data.tagData['retail_max_wastage_percent'];
                    var detail = { itemData: data.tagData, metalRate: _this.metalRate, tax_details: _this.taxGroupItems, item_type: "tag" };
                    var tagItem_1 = _this.retail.calculateSaleValue(detail);
                    var addItem_2 = true;
                    _this.esti['tag'].forEach(function (item) {
                        if (item.tag_id == tagItem_1.tag_id) {
                            _this.tagMsg = "";
                            addItem_2 = false;
                            _this.tagErrorMsg = "Tag Already exist..";
                            var toastMsg_1 = _this.toast.create({
                                message: _this.tagErrorMsg,
                                duration: _this.common.toastTimeout,
                                position: 'middle'
                            });
                            toastMsg_1.present();
                            setTimeout(function () {
                                _this.tagErrorMsg = "";
                            }, _this.common.msgTimeout);
                        }
                    });
                    if (addItem_2) {
                        _this.esti['is_tag'] = true;
                        _this.esti['tag'].push(tagItem_1);
                    }
                    var y = Object.assign({}, _this.esti['tag']);
                    console.log(y);
                    _this.esti['tag'].reverse();
                    console.log(_this.esti['tag']);
                }
                else {
                    _this.tagMsg = "";
                    _this.tagErrorMsg = data.msg;
                    var toastMsg = _this.toast.create({
                        message: _this.tagErrorMsg,
                        duration: _this.common.toastTimeout,
                        position: 'middle'
                    });
                    toastMsg.present();
                    setTimeout(function () {
                        _this.tagErrorMsg = "";
                    }, _this.common.msgTimeout);
                }
                loader_2.dismiss();
            });
        }
    };
    EstiPage.prototype.getorderByID = function (tagData) {
        var _this = this;
        // if(tagData != ''){
        //  var istagId = (tagData.search("/") > 0 ? true : false);
        //  var isTagCode = (tagData.search("-") > 0 ? true : false);
        //  if(istagId){
        //    var tId   = tagData.split("/");
        //    var searchTxt = (tId.length >= 2 ? tId[0] : "");
        //    var searchField  = this.checkold == true ? "old_tag_id" : "tag_id";
        //  }
        //  else if(isTagCode){
        //    var searchTxt = tagData;
        //    var searchField  = this.checkold == true ? "old_tag_id" : "tag_code";
        //  }
        // Search Tag
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = { "fin_year": this.tagData['fin_year'], "searchTxt": tagData, "searchField": 'order_id', "id_branch": this.esti['id_branch'] };
        this.retail.getorderData(postData).then(function (data) {
            if (data.status) {
                data['tagData'].forEach(function (element, i) {
                    if (i == data['tagData'].length - 1) {
                        _this.tagMsg = data.msg;
                        _this.tagErrorMsg = "";
                        var toastMsg = _this.toast.create({
                            message: _this.tagMsg,
                            duration: _this.common.toastTimeout,
                            position: 'middle'
                        });
                        toastMsg.present();
                        setTimeout(function () {
                            _this.tagMsg = "";
                        }, _this.common.msgTimeout);
                    }
                    element['actual_gross_wt'] = element['gross_wt'];
                    element['actual_less_wt'] = element['less_wt'];
                    element['actual_net_wt'] = element['net_wt'];
                    element['charge_value'] = element['charge_value'];
                    element['charges'] = element['charges'];
                    element['checkwas'] = element['retail_max_wastage_percent'];
                    var detail = { itemData: element, metalRate: _this.metalRate, tax_details: _this.taxGroupItems, item_type: "tag" };
                    var tagItem = _this.retail.calculateSaleValue(detail);
                    var addItem = true;
                    _this.esti['tag'].forEach(function (item) {
                        if (item.tag_id == tagItem.tag_id) {
                            _this.tagMsg = "";
                            addItem = false;
                            _this.tagErrorMsg = "Tag Already exist..";
                            var toastMsg = _this.toast.create({
                                message: _this.tagErrorMsg,
                                duration: _this.common.toastTimeout,
                                position: 'middle'
                            });
                            toastMsg.present();
                            setTimeout(function () {
                                _this.tagErrorMsg = "";
                            }, _this.common.msgTimeout);
                        }
                    });
                    if (addItem) {
                        _this.esti['is_tag'] = true;
                        _this.esti['tag'].push(tagItem);
                    }
                    var y = Object.assign({}, _this.esti['tag']);
                    console.log(y);
                    _this.esti['tag'].reverse();
                    console.log(_this.esti['tag']);
                });
                if (data.hasOwnProperty('advance')) {
                    _this.advance = data['advance'];
                }
            }
            else {
                _this.tagMsg = "";
                _this.tagErrorMsg = data.msg;
                var toastMsg = _this.toast.create({
                    message: _this.tagErrorMsg,
                    duration: _this.common.toastTimeout,
                    position: 'middle'
                });
                toastMsg.present();
                setTimeout(function () {
                    _this.tagErrorMsg = "";
                }, _this.common.msgTimeout);
            }
            loader.dismiss();
        });
        // }
    };
    EstiPage.prototype.deleteItem = function (item_type, idx) {
        var _this = this;
        console.log(this.esti[item_type]);
        console.log(idx);
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        if (item_type == 'tag') {
            this.esti[item_type].splice(idx, 1);
            this.tagErrorMsg = "";
            this.tagMsg = "Tag removed from estimation..";
            var toastMsg = this.toast.create({
                message: this.tagMsg,
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
            setTimeout(function () {
                _this.tagMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'non_tag') {
            this.esti[item_type].splice(idx, 1);
            this.ntErrorMsg = "";
            this.ntMsg = "Non-Tag item removed from estimation..";
            setTimeout(function () {
                _this.ntMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'home_bill') {
            this.esti[item_type].splice(idx, 1);
            this.hbErrorMsg = "";
            this.hbMsg = "Home Bill item removed from estimation..";
            var toastMsg = this.toast.create({
                message: this.hbMsg,
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
            setTimeout(function () {
                _this.hbMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'old_metal') {
            this.esti[item_type].splice(idx, 1);
            this.omErrorMsg = "";
            this.ombMsg = "Old Metal item removed from estimation..";
            var toastMsg = this.toast.create({
                message: this.ombMsg,
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
            setTimeout(function () {
                _this.ombMsg = "";
            }, this.common.msgTimeout);
        }
        this.calcEstiSummary();
        loader.dismiss();
    };
    EstiPage.prototype.createEsti = function () {
        var _this = this;
        if (this.esti['cus_id'] == '' || this.esti['id_employee'] == '' || this.esti['id_branch'] == '') {
            var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_13__modal_customer_customer__["a" /* CusSearchPage */], { 'show': 'true' });
            modal.present();
            modal.onDidDismiss(function (mData) {
                console.log(mData);
                if (mData != null) {
                    _this.esti['cus_id'] = mData['id_customer'];
                    _this.esti['customer'] = mData['label'];
                    _this.createEstisubmit();
                }
                else {
                }
            });
        }
        else {
            this.createEstisubmit();
        }
    };
    EstiPage.prototype.createEstiprint = function () {
        var _this = this;
        if (this.esti['cus_id'] == '' || this.esti['id_employee'] == '' || this.esti['id_branch'] == '') {
            var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_13__modal_customer_customer__["a" /* CusSearchPage */], { 'show': 'true' });
            modal.present();
            modal.onDidDismiss(function (mData) {
                console.log(mData);
                if (mData != null) {
                    _this.esti['cus_id'] = mData['id_customer'];
                    _this.esti['customer'] = mData['label'];
                    _this.createEstisubmitprint();
                }
                else {
                }
            });
        }
        else {
            this.createEstisubmitprint();
        }
    };
    EstiPage.prototype.createEstisubmitprint = function () {
        var _this = this;
        this.esti['is_tag'] = ((this.esti['tag']).length > 0 ? true : false);
        this.esti['is_non_tag'] = ((this.esti['non_tag']).length > 0 ? true : false);
        this.esti['is_home_bill'] = ((this.esti['home_bill']).length > 0 ? true : false);
        this.esti['is_old_metal'] = ((this.esti['old_metal']).length > 0 ? true : false);
        console.log(this.esti);
        // Validate Postdata
        if (this.esti['cus_id'] == '' || this.esti['id_employee'] == '' || this.esti['id_branch'] == '') {
            var toastMsg = this.toast.create({
                message: "Please fill required fields",
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
        }
        else if (this.esti['is_tag'] || this.esti['is_non_tag'] || this.esti['is_home_bill'] || this.esti['is_old_metal']) {
            if (this.esti['tag'] || this.esti['non_tag'] || this.esti['home_bill'] || this.esti['old_metal']) {
                var loader_3 = this.load.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_3.present();
                this.esti['type'] = 1;
                this.esti['total_cost'] = this.total_esti_value;
                this.retail.createEstimation(this.esti).then(function (data) {
                    if (data.status) {
                        _this.tot_sale_wgt = 0;
                        _this.tot_sale_rate = 0;
                        _this.tot_purch_wgt = 0;
                        _this.tot_purch_rate = 0;
                        _this.total_esti_value = 0;
                        _this.tot_charge = 0;
                        _this.selectedCusData = [];
                        _this.esti = { "cus_id": _this.esti['cus_id'], "customer": _this.esti['customer'], "id_branch": _this.esti['id_branch'], "id_employee": _this.esti['id_employee'], "emp_name": _this.esti['emp_name'], "is_tag": false, "is_non_tag": false, "is_home_bill": false, "is_old_metal": false, "tag": [], "non_tag": [], "home_bill": [], "old_metal": [], "chit_details": [{ 'slip_no': '', 'slip_amt': '' }] };
                        // if(data.printURL != ''){
                        //   console.log(data.printURL);
                        //   this.downloadfile(data.printURL,data.esti_name);       
                        // }
                        _this.nav.setPages([{ page: __WEBPACK_IMPORTED_MODULE_11__home_home__["a" /* HomePage */] }, { page: __WEBPACK_IMPORTED_MODULE_14__bluetooth_bluetooth__["a" /* BluetoothPage */], params: { 'file': data } }]);
                    }
                    loader_3.dismiss();
                    var toastMsg = _this.toast.create({
                        message: data.msg,
                        duration: _this.common.toastTimeout,
                        position: 'middle'
                    });
                    toastMsg.present();
                    // this.navCtrl.setRoot(HomePage);
                });
            }
            else {
                var toastMsg = this.toast.create({
                    message: "Minimum 1 estimation item is required",
                    duration: this.common.toastTimeout,
                    position: 'middle'
                });
                toastMsg.present();
            }
        }
        else {
            var toastMsg = this.toast.create({
                message: "Invalid Estimation",
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
        }
    };
    EstiPage.prototype.createEstisubmit = function () {
        var _this = this;
        this.esti['is_tag'] = ((this.esti['tag']).length > 0 ? true : false);
        this.esti['is_non_tag'] = ((this.esti['non_tag']).length > 0 ? true : false);
        this.esti['is_home_bill'] = ((this.esti['home_bill']).length > 0 ? true : false);
        this.esti['is_old_metal'] = ((this.esti['old_metal']).length > 0 ? true : false);
        console.log(this.esti);
        // Validate Postdata
        if (this.esti['cus_id'] == '' || this.esti['id_employee'] == '' || this.esti['id_branch'] == '') {
            var toastMsg = this.toast.create({
                message: "Please fill required fields",
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
        }
        else if (this.esti['is_tag'] || this.esti['is_non_tag'] || this.esti['is_home_bill'] || this.esti['is_old_metal']) {
            if (this.esti['tag'] || this.esti['non_tag'] || this.esti['home_bill'] || this.esti['old_metal']) {
                var loader_4 = this.load.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_4.present();
                this.esti['type'] = 1;
                this.esti['total_cost'] = this.total_esti_value;
                this.retail.createEstimation(this.esti).then(function (data) {
                    if (data.status) {
                        _this.tot_sale_wgt = 0;
                        _this.tot_sale_rate = 0;
                        _this.tot_purch_wgt = 0;
                        _this.tot_purch_rate = 0;
                        _this.total_esti_value = 0;
                        _this.tot_charge = 0;
                        _this.selectedCusData = [];
                        _this.esti = { "cus_id": _this.esti['cus_id'], "customer": _this.esti['customer'], "id_branch": _this.esti['id_branch'], "id_employee": _this.esti['id_employee'], "emp_name": _this.esti['emp_name'], "is_tag": false, "is_non_tag": false, "is_home_bill": false, "is_old_metal": false, "tag": [], "non_tag": [], "home_bill": [], "old_metal": [], "chit_details": [{ 'slip_no': '', 'slip_amt': '' }] };
                        if (data.printURL != '') {
                            console.log(data.printURL);
                            _this.downloadfile(data.printURL, data.esti_name);
                        }
                    }
                    loader_4.dismiss();
                    var toastMsg = _this.toast.create({
                        message: data.msg,
                        duration: _this.common.toastTimeout,
                        position: 'middle'
                    });
                    toastMsg.present();
                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_11__home_home__["a" /* HomePage */]);
                });
            }
            else {
                var toastMsg = this.toast.create({
                    message: "Minimum 1 estimation item is required",
                    duration: this.common.toastTimeout,
                    position: 'middle'
                });
                toastMsg.present();
            }
        }
        else {
            var toastMsg = this.toast.create({
                message: "Invalid Estimation",
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
        }
    };
    EstiPage.prototype.getEstiByEstiNo = function (no) {
        var _this = this;
        if (no != '') {
            this.estiDetail['esti_no'] = no;
        }
        if (this.estiDetail['esti_no'] != '') {
            var loader_5 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_5.present();
            this.estiDetail['id_branch'] = this.loggedInBranch;
            this.retail.getEstiPrintURL(this.estiDetail).then(function (data) {
                if (data.status) {
                    if (data.printURL != '') {
                        console.log(data.printURL);
                        _this.downloadfile(data.printURL, data.esti_name);
                    }
                }
                loader_5.dismiss();
                var toastMsg = _this.toast.create({
                    message: data.msg,
                    duration: _this.common.toastTimeout,
                    position: 'middle'
                });
                toastMsg.present();
            });
        }
        else {
            var toastMsg = this.toast.create({
                message: "Enter valid estimation number",
                duration: this.common.toastTimeout,
                position: 'middle'
            });
            toastMsg.present();
        }
    };
    EstiPage.prototype.downloadfile = function (url, name) {
        var _this = this;
        console.log(url);
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log("Platform ready");
            if (_this.platform.is('android')) {
                console.log("Platform Android");
                _this.file.checkDir(_this.file.externalDataDirectory, _this.common.cmpShortName).then(function (data) {
                    console.log("Check directory IDO");
                    _this.file.checkDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0]).then(function (_) {
                        console.log("Check directory IDO " + date.toISOString().split('T')[0]);
                        _this.viewFile(url, name);
                    }).catch(function (er) {
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log("Create directory IDO " + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err) {
                            console.log(err);
                            console.log('Couldn\'t create directory');
                        });
                    });
                }).catch(function (err) {
                    _this.file.createDir(_this.file.externalDataDirectory, _this.common.cmpShortName, false).then(function (_) {
                        console.log('Create directory IDO');
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log('Create directory IDO / ' + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err1) {
                            console.log(err1);
                            console.log('Couldn\'t create directory');
                        });
                    }).catch(function (err2) {
                        console.log(err2);
                        console.log('Couldn\'t create directory');
                    });
                });
            }
        });
    };
    EstiPage.prototype.viewFile = function (url, name) {
        var _this = this;
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date);
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log('platform ready viewFile');
            _this.file.resolveDirectoryUrl(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0]).then(function (resolvedDirectory) {
                console.log(resolvedDirectory);
                console.log("resolved  directory: " + resolvedDirectory.nativeURL);
                _this.file.checkFile(resolvedDirectory.nativeURL, name).then(function (data) {
                    console.log(data);
                    console.log(resolvedDirectory.nativeURL + name);
                    _this.fileOpener.open(resolvedDirectory.nativeURL + name, 'application/pdf')
                        .then(function () { return console.log('File is opened'); })
                        .catch(function (e) { return console.log('Error opening file', e); });
                    // this.printEsti(resolvedDirectory.nativeURL+name,name); 
                }, function (err) {
                    console.log(err);
                    var loader = _this.load.create({
                        content: 'Please Wait',
                        spinner: 'bubbles',
                    });
                    loader.present();
                    var targetPath = _this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0] + '/' + name;
                    _this.fileTransfer.download(url, targetPath, true).then(function (entry) {
                        console.log('download complete: ' + entry.toURL());
                        loader.dismiss();
                        _this.fileOpener.open(entry.toURL(), 'application/pdf')
                            .then(function () { return console.log('File is opened'); })
                            .catch(function (e) { return console.log('Error opening file', e); });
                        // this.printEsti(entry.toURL(),name);  
                    }, function (error) {
                        loader.dismiss();
                        console.log(error);
                    });
                });
            }, function (err) {
                console.log(err);
            });
        });
    };
    EstiPage.prototype.printEsti = function (content, ename) {
        console.log(content);
        console.log(ename);
        this.printer.isAvailable().then(function (onSuccess) {
            console.log("isAvailable - Success");
        }, function (onError) {
            console.log(onError);
            console.log("isAvailable - Error");
        });
        var options = {
            name: ename,
            //printerId: 'printer007',
            //duplex: true,
            //landscape: true,
            grayscale: true
        };
        this.printer.print(content, options).then(function (onSuccess) {
            console.log("print - Success");
        }, function (onError) {
            console.log("print - Error");
        });
    };
    EstiPage.prototype.append = function () {
        var one = document.getElementById('one').value.toUpperCase();
        var two = document.getElementById('two').value.toUpperCase();
        this.tagData['tag_code1'] = this.tagData['tag_code1'].toUpperCase();
        this.tagData['tag_code2'] = this.tagData['tag_code2'].toUpperCase();
        console.log(one);
        console.log(two);
        this.tagData['tag_code'] = one + '-' + two;
        // let test:any = new String(two);
        // if(test.length == 5 && one != ''){
        //   console.log(test.length)
        //   this.getTagByID(this.tagData['tag_code']);
        //   this.tagData['tag_code'] = '';
        //   this.tagData['tag_code1'] = '';
        //   this.tagData['tag_code2'] = '';
        // }
    };
    EstiPage.prototype.goto = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_11__home_home__["a" /* HomePage */]);
    };
    EstiPage.prototype.tog = function (type) {
        if (type == 'tag') {
            if (this.togtype == '' || this.togtype == 'home_bill' || this.togtype == 'old_metal' || this.togtype == 'non_tag') {
                this.togtype = type;
                console.log(this.togtype);
            }
            else {
                this.togtype = '';
            }
        }
        else if (type == 'home_bill') {
            if (this.togtype == '' || this.togtype == 'tag' || this.togtype == 'old_metal' || this.togtype == 'non_tag') {
                this.togtype = type;
                console.log(this.togtype);
            }
            else {
                this.togtype = '';
            }
        }
        else if (type == 'old_metal') {
            if (this.togtype == '' || this.togtype == 'tag' || this.togtype == 'home_bill' || this.togtype == 'non_tag') {
                this.togtype = type;
                console.log(this.togtype);
            }
            else {
                this.togtype = '';
            }
        }
        else if (type == 'non_tag') {
            if (this.togtype == '' || this.togtype == 'tag' || this.togtype == 'home_bill' || this.togtype == 'old_metal') {
                this.togtype = type;
                console.log(this.togtype);
            }
            else {
                this.togtype = '';
            }
        }
    };
    EstiPage.prototype.print = function (data) {
        this.nav.push(__WEBPACK_IMPORTED_MODULE_14__bluetooth_bluetooth__["a" /* BluetoothPage */], { 'file': data });
    };
    EstiPage.prototype.opengift = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_15__gift_gift__["a" /* GiftPage */], { 'chit': this.esti['chit_details'], 'id_customer': this.esti['cus_id'] });
    };
    EstiPage.prototype.checking = function (index) {
        console.log(parseInt(this.esti['tag'][index]['less_wt']) > parseInt(this.esti['tag'][index]['net_wt']));
        if (parseInt(this.esti['tag'][index]['less_wt']) > parseInt(this.esti['tag'][index]['net_wt'])) {
            this.cd.detectChanges();
            this.esti['tag'][index]['less_wt'] = '';
            this.cd.detectChanges();
            this.content.resize();
            this.calcSaleValue(index);
        }
        else {
            this.calcSaleValue(index);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], EstiPage.prototype, "content", void 0);
    EstiPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-estimation',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\estimation\estimation.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title style="text-align: center !important;\n\n    margin-right: 15% !important;" (click)="goto()"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n\n  </ion-navbar>\n\n  <!-- <ion-toolbar text-center *ngIf="page_type == \'print\'">\n\n      <ion-title>Print Estimation</ion-title>\n\n  </ion-toolbar> -->\n\n</ion-header>\n\n\n\n<!-- Estimation Create Block  -->\n\n  <ion-content    *ngIf="page_type == \'create\'">\n\n    <ion-segment style="margin-top: 6px !important;" [(ngModel)]="esti_type" mode="ios" color="label-color" scrollable (ionChange)="estiTypeChanged($event)">\n\n      <ion-segment-button value="tag">\n\n        Tag\n\n      </ion-segment-button>\n\n      <ion-segment-button value="non_tag">\n\n        Non-Tag\n\n      </ion-segment-button>\n\n      <ion-segment-button value="home_bill">\n\n        Home Bill\n\n      </ion-segment-button>\n\n      <ion-segment-button value="old_metal" [disabled]="oldMetalCat?.length == 0">\n\n        Old Metal\n\n      </ion-segment-button>\n\n      <ion-segment-button value="summary">\n\n          Summary\n\n      </ion-segment-button>\n\n    </ion-segment> \n\n    <ion-grid style="padding: 6px !important;"> \n\n\n\n      <span *ngIf="esti_type == \'summary\'">\n\n        <h5 style="text-align: center;" margin>Summary</h5>\n\n        <ion-row text-center>\n\n          <ion-col text-wrap col-sm-6 col-md-6 col-lg-6 col-xl-6>\n\n              <h5>{{tot_sale_wgt | number:\'1.3-3\' }} g</h5>\n\n              Sale weight\n\n              <br/>\n\n              <h5><span [innerHTML]="settings.curr_symb_html"></span> {{tot_sale_rate | number:\'1.2-2\' }}</h5>\n\n              Sale Amount \n\n          </ion-col>\n\n          <ion-col text-wrap col-sm-6 col-md-6 col-lg-6 col-xl-6>\n\n              <h5>{{tot_purch_wgt | number:\'1.3-3\' }} g</h5>\n\n              Purchase Weight<br/>\n\n              <h5><span [innerHTML]="settings.curr_symb_html"></span> {{tot_purch_rate | number:\'1.2-2\' }}</h5>\n\n              Purchase Amount\n\n          </ion-col>\n\n        </ion-row>\n\n        <!-- <h5 text-center>Total Charges Amount : <span [innerHTML]="settings.curr_symb_html"></span> {{tot_charge | number:\'1.2-2\' }}</h5> -->\n\n\n\n        <h5 text-center>Estimation Amount : <span [innerHTML]="settings.curr_symb_html"></span> {{total_esti_value | number:\'1.2-2\' }}</h5>\n\n      </span>\n\n      <!-- <br/>\n\n      <br/>\n\n      <br/> -->\n\n\n\n      <div [ngSwitch]="esti_type">\n\n        <!-- Row 1 -->\n\n        <ion-item *ngIf="esti_type == \'tag\' && show == true">\n\n          <ion-label *ngIf="esti_type == \'tag\' && show == true && checkold != true" style="" color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n\n          <ion-label *ngIf="esti_type == \'tag\' && show == true && checkold == true" style="" color="label-color" stacked>Old Tag Code <span class="required">*</span></ion-label>\n\n\n\n          <ion-toggle [(ngModel)]="checkold"></ion-toggle>\n\n        </ion-item>\n\n\n\n        <!-- <ion-label *ngIf="esti_type == \'tag\' && show == true" style="margin-top: 0px;" color="label-color" stacked>Tag Code <span class="required">*</span></ion-label> -->\n\n        <div *ngIf="esti_type == \'tag\' && show == true" class="row">\n\n          <div class="col" col-3 style="margin: auto;" >\n\n            <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" type="text" id="one"  [(ngModel)]="tagData[\'tag_code1\']" (ngModelChange)="append()" >\n\n\n\n            </div>\n\n            <div class="col" col-1 style="margin: auto;font-weight: bold;">\n\n              <hr>\n\n              </div>\n\n\n\n            <div class="col" col-6 style="margin: auto;" >\n\n              <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" type="text"  id="two"  [(ngModel)]="tagData[\'tag_code2\']" (ngModelChange)="append()" > \n\n\n\n            </div>\n\n            <div class="col" style="margin: auto;" col-2>\n\n              <button style="" item-right ion-button  color="light" (click)="getTagByID(tagData[\'tag_code\'])"><ion-icon name="ios-search"></ion-icon></button>\n\n\n\n            </div>\n\n        </div>\n\n\n\n        <div *ngIf="esti_type == \'tag\' && show == true" class="row">\n\n          <div class="col" col-4 style="">\n\n            <ion-item no-padding>\n\n              <!-- <ion-label color="label-color" stacked>Metal<span class="required"> *</span></ion-label> -->\n\n              <ion-select style="    max-width: 100% ;    padding-left: 2px !important;" [(ngModel)]="tagData[\'fin_year\']" placeholder="year">\n\n                <ion-option *ngFor="let m of fin" [value]="m[\'fin_year_code\']">{{m[\'fin_year_name\']}}</ion-option>\n\n              </ion-select>\n\n            </ion-item>\n\n            <!-- <ion-label  style="margin-top: 16px !important;\n\n            margin-left: 4px !important;" color="label-color" stacked>Order No <span class="required">*</span></ion-label> -->\n\n          </div>\n\n          <!-- <div class="col" col-1 style="margin: auto;font-weight: bold;">\n\n            <hr>\n\n            </div> -->\n\n          <div class="col" col-6 style="margin: auto;" >\n\n            <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" type="text"    [(ngModel)]="tagData[\'order_id\']" placeholder="Order No" > \n\n\n\n          </div>\n\n        <div class="col" style="margin: auto;" col-2>\n\n          <button style="" item-right ion-button  color="light" (click)="getorderByID(tagData[\'order_id\'])"><ion-icon name="ios-search"></ion-icon></button>\n\n\n\n        </div>\n\n</div>\n\n        <span *ngIf="esti_type == \'summary\' || esti_type == \'tag\'" margin-top> <!-- *ngIf="esti[\'is_tag\']" -->\n\n          <ion-row *ngIf="esti_type == \'summary\' && esti[\'tag\']?.length > 0">\n\n            <ion-col no-padding text-wrap col-12 >\n\n              <div (click)="tog(\'tag\')" class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Tag Items  <ion-badge color="light" float-right>{{esti[\'tag\']?.length}}</ion-badge></div>\n\n            </ion-col>\n\n            <ion-col text-wrap *ngIf="esti_type == \'tag\'">\n\n              <!-- <span float-left class="esti-notes">\n\n                Add Tag Items\n\n              </span> -->\n\n              <!-- <span float-right>\n\n                  <button ion-button icon-start outline small color="secondary" (click)="openItemAddModal(\'tag\',\'\',\'add\')">\n\n                    <ion-icon name="ios-add"></ion-icon> ADD\n\n                  </button>\n\n                  <button ion-button icon-start outline small color="dark" (click)="openQRScanner(\'tag\')">\n\n                    <ion-icon name="ios-qr-scanner"></ion-icon> SCAN\n\n                  </button>\n\n              </span> -->\n\n            </ion-col>\n\n          </ion-row>\n\n          <!-- <ion-card class="errorMsg" padding *ngIf="tagErrorMsg">\n\n            {{tagErrorMsg}}\n\n          </ion-card>\n\n          <ion-card class="msg" padding *ngIf="tagMsg">\n\n            {{tagMsg}}\n\n          </ion-card> -->\n\n          <ion-list *ngIf="(esti_type == \'summary\' && togtype == \'tag\')|| esti_type == \'tag\'"> \n\n            <ion-item-sliding margin-top #tags *ngFor="let t of esti[\'tag\'];let i = index;" id=\'\'>\n\n              <ion-item no-padding style="border-bottom:2px solid #eee !important;">\n\n                <!-- <ion-avatar item-start>\n\n                    <img src="{{t.image}}" imageViewer="{{t.image}}" onerror="this.onerror=null;this.src=\'assets/no-img.png\';">\n\n                </ion-avatar> -->\n\n                <ion-row>\n\n                  <ion-col style="margin:auto" no-padding text-wrap col-6 class="theme-color-secondary">\n\n                    <p style="margin-left: 5px;">{{t.tag_code}} </p>\n\n                  </ion-col>\n\n                  <ion-col no-padding text-wrap col-6 align="right">\n\n                    <button ion-button small style="font-size: xx-small;" [ngClass]="t[\'is_partial\'] == \'0\' ? \'one\':\'two\'"  (click)="colorchange(i)"><ion-icon  name="checkmark-circle"></ion-icon></button>\n\n                    <button ion-button small style="font-size: xx-small;"  (click)="openItemAddModal(\'tag\',t,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n\n\n                    <button ion-button small style="font-size: xx-small;" color="danger" (click)="deleteItem(\'tag\',i)"><ion-icon name="trash"></ion-icon></button>\n\n                  </ion-col>\n\n                </ion-row>\n\n                <ion-row> \n\n                  <ion-col no-padding text-wrap col-12 col-md-12 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 1" style="font-size: 11px !important;padding-left: 5px !important;">\n\n                    <span *ngIf="t.collection_name != null">{{t.collection_name}} <b> | </b> </span>\n\n                    {{t.parent_prods_name}}\n\n                  </ion-col>\n\n                  <ion-col no-padding text-wrap col-12 col-md-12 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0" style="padding-left: 5px !important;">\n\n                    {{t.product_name}} | {{t.design_name}} \n\n                  </ion-col>\n\n                </ion-row>\n\n              </ion-item>\n\n              <ion-item class="no-padding">\n\n              <!-- <ion-row>\n\n\n\n                <ion-col no-padding text-wrap col-12 col-md-12 class="custom-2col theme-color-secondary">\n\n                  <span style="margin-left: 5px;">{{t.product_name}} | {{t.design_name}} </span> \n\n                  <span (click)="colorchange(i)" style="float: right;">Partly Sale  <ion-icon [ngClass]="t[\'is_partial\'] == \'0\' ? \'one\':\'two\'" name="checkmark-circle"></ion-icon></span> \n\n                </ion-col>\n\n              </ion-row> -->\n\n				        <ion-row>\n\n                \n\n                  <!--<ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Size </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{t.size}} \n\n                  </ion-col>-->\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Gross wgt </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                   <span *ngIf="t[\'is_partial\'] == \'0\'"> {{t.gross_wt}} g </span>\n\n                   <!-- <span *ngIf="t[\'is_partial\'] == \'1\'"> {{t.actual_gross_wt}} g </span> -->\n\n\n\n                    <input style="width: 90%;padding: 2px;" *ngIf="t[\'is_partial\'] == \'1\'" type="number" [(ngModel)]="t[\'gross_wt\']" (ngModelChange)="calcSaleValue(i)"/>\n\n\n\n                  </ion-col>\n\n                  <ion-col *ngIf="t[\'is_partial\'] == \'1\'" text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Less wgt(g) </p>\n\n                  </ion-col>\n\n                  <ion-col *ngIf="t[\'is_partial\'] == \'1\'" text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <input style="width: 90%;padding: 2px;" *ngIf="t[\'is_partial\'] == \'1\'" type="number" [(ngModel)]="t[\'less_wt\']" (ngModelChange)="checking(i)" readonly/>\n\n\n\n                  </ion-col>\n\n                  <ion-col *ngIf="t[\'is_partial\'] == \'1\'" text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Net Wgt(g) </p>\n\n                  </ion-col>\n\n                  <ion-col *ngIf="t[\'is_partial\'] == \'1\'" text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <input style="width: 90%;padding: 2px;" *ngIf="t[\'is_partial\'] == \'1\'" type="number" [(ngModel)]="t[\'net_wt\']" (ngModelChange)="calcSaleValue(i)" readonly/>\n\n\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-4 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Pcs </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-2 col-md-2 class="custom-2col">\n\n                    {{t.piece}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Total MC </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{t.making_charge | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-4 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Wast ({{t.retail_max_wastage_percent}} %)  </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-2 col-md-2 class="custom-2col">\n\n                    {{t.wast_wgt}} g\n\n                  </ion-col>                  \n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Purity </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{t.purname}} \n\n                  </ion-col>\n\n                  <ion-col no-padding *ngFor="let da of t[\'charges\']" text-wrap col-6 col-md-2 class="custom-2col">\n\n                    <div class="row">\n\n                      <div class="col" class="text-small" col-md-2 class="custom-2col" col-6>\n\n                        <p class="text-small"> {{da[\'code_charge\']}} </p>\n\n                        </div>\n\n                        <div class="col" col-md-2 class="custom-2col" col-6>\n\n                          {{da[\'charge_value\']}}\n\n                        </div>\n\n                    </div>\n\n                    <!-- <p class="text-small"> {{da[\'code_charge\']}}  <span style="color: black;">{{da[\'charge_value\']}}</span>\n\n                    </p> -->\n\n                  </ion-col>\n\n                  \n\n                  <!-- <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{t[\'charge_value\'] | number:\'1.2-2\' }}\n\n                  </ion-col> -->\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Taxable Amount</p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{t.taxable | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">GST </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{t.tax_price | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Amount </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> <b>{{t.sales_value | number:\'1.2-2\' }}</b>\n\n                  </ion-col>\n\n                </ion-row>\n\n\n\n                <!-- <div margin-top>\n\n                  <ion-row>\n\n                    <ion-col>\n\n                       <h5>Charges Detail</h5>\n\n                    </ion-col>\n\n                    </ion-row>\n\n                    <ion-row>\n\n                      <ion-col>\n\n                        <div class="row" *ngFor="let da of t[\'charges\']">\n\n                          {{da[\'code_charge\']}}\n\n                        </div>\n\n                      </ion-col>\n\n                      <ion-col>\n\n                        <div class="row" *ngFor="let da of t[\'charges\']">\n\n                           {{da[\'charge_value\']}}\n\n                        </div>\n\n                      </ion-col>\n\n                    </ion-row>\n\n                    </div> -->\n\n              </ion-item>\n\n              <ion-item-options side="right">\n\n                <button style="width: 45px;" ion-button *ngIf="esti_type != \'summary\'" color="primary" (click)="openItemAddModal(\'tag\',t,\'edit\')"><ion-icon style="    position: absolute;\n\n                  top: 28px;" name="create"></ion-icon></button>\n\n                <button style="width: 45px;" ion-button color="danger" (click)="deleteItem(\'tag\',i)"><ion-icon style="    position: absolute;\n\n                  top: 28px;" name="trash"></ion-icon></button>\n\n              </ion-item-options>\n\n            </ion-item-sliding>\n\n          </ion-list>\n\n        </span>\n\n        <!-- ./Row 3 : Tag-->\n\n\n\n        <!-- Row 4 : Non Tag-->\n\n        <span *ngIf="esti_type == \'summary\' || esti_type == \'non_tag\'" margin-top> <!-- <span *ngIf="esti[\'is_non_tag\']" margin-top> -->\n\n          <ion-row *ngIf="esti_type == \'summary\' && esti[\'non_tag\']?.length > 0">\n\n            <ion-col no-padding text-wrap col-12 >\n\n              <div (click)="tog(\'non_tag\')" class="theme-title-blk"> <ion-icon name="ribbon"></ion-icon> Non-Tag Items <ion-badge color="light" float-right>{{esti[\'non_tag\']?.length}}</ion-badge></div>\n\n            </ion-col>\n\n            <ion-col text-wrap *ngIf="esti_type == \'non_tag\'">\n\n              <!-- <span float-left class="esti-notes">\n\n                Add Non-Tag Items\n\n              </span> -->\n\n              <!-- <span float-right>\n\n                  <button ion-button icon-start outline small color="secondary" (click)="openItemAddModal(\'non_tag\',\'\',\'add\')">\n\n                    <ion-icon name="ios-add"></ion-icon> ADD\n\n                  </button>\n\n              </span> -->\n\n            </ion-col>\n\n          </ion-row>\n\n          <ion-card class="errorMsg" padding *ngIf="ntErrorMsg">\n\n            {{ntErrorMsg}}\n\n          </ion-card>\n\n          <ion-card class="msg" padding *ngIf="ntMsg">\n\n            {{ntMsg}}\n\n          </ion-card>\n\n          <ion-list *ngIf="(esti_type == \'summary\' && togtype == \'non_tag\')|| esti_type == \'non_tag\'"> \n\n\n\n          <!-- <ion-list *ngIf="esti[\'non_tag\'].length > 0"> -->\n\n            <ion-item-sliding margin-top #tags *ngFor="let nt of esti[\'non_tag\'];let i = index;">\n\n              <ion-item class="no-padding">\n\n                <!-- <div style="text-align: end;">\n\n                  <button ion-button small style="font-size: xx-small;"  (click)="openItemAddModal(\'non_tag\',nt,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n\n\n                  <button ion-button color="danger" (click)="deleteItem(\'non_tag\',i)"><ion-icon name="trash"></ion-icon></button>\n\n\n\n                </div> -->\n\n                <ion-row>                  \n\n                  <ion-col text-wrap col-12 col-md-12 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 1" style="font-size: 11px !important;">\n\n                    <span *ngIf="nt.collection_name != null">{{nt.collection_name}} <b> | </b> </span>\n\n                    {{nt.product_name}} <b> | </b>\n\n                    {{nt.design_name}}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-6 col-md-2 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n\n                    <span class="text-small">{{nt.product_name}}</span>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-6 col-md-2 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n\n                    <span class="text-small">{{nt.design_name}}</span>\n\n                  </ion-col>  \n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Purity </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.purname}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Pcs </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.piece}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Size </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.size}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Gross wgt </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.gross_wt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Less Weight </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.less_wt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Net Weight </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.net_wt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Wast ({{nt.retail_max_wastage_percent}} %)  </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    {{nt.wast_wgt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Total MC </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{nt.making_charge | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Taxable Amount </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{nt.taxable | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">GST </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{nt.tax_price | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <p class="text-small">Amount </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> <b>{{nt.sales_value | number:\'1.2-2\' }}</b>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-6 col-md-4 class="custom-2col">\n\n\n\n                  <div style="text-align: end;">\n\n                    <button ion-button small style="font-size: xx-small;"  (click)="openItemAddModal(\'non_tag\',nt,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n  \n\n                    <button small style="font-size: xx-small;" ion-button color="danger" (click)="deleteItem(\'non_tag\',i)"><ion-icon name="trash"></ion-icon></button>\n\n  \n\n                  </div>\n\n                  </ion-col>\n\n                </ion-row>\n\n              </ion-item>\n\n              <ion-item-options side="right">\n\n                <button ion-button *ngIf="esti_type != \'summary\'" color="primary" (click)="openItemAddModal(\'non_tag\',nt,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n                <button ion-button color="danger" (click)="deleteItem(\'non_tag\',i)"><ion-icon name="trash"></ion-icon></button>\n\n              </ion-item-options>\n\n            </ion-item-sliding>\n\n          </ion-list>\n\n        </span>\n\n        <!-- ./Row 4 Non-Tag -->\n\n\n\n        <!-- Row 5 : Home Bill -->\n\n        <span *ngIf="esti_type == \'summary\' || esti_type == \'home_bill\'" margin-top> <!-- <span *ngIf="esti[\'is_home_bill\']" margin-top> -->\n\n          <ion-row *ngIf="esti_type == \'summary\' && esti[\'home_bill\']?.length > 0">\n\n            <ion-col no-padding text-wrap col-12 >\n\n              <div (click)="tog(\'home_bill\')" class="theme-title-blk"> <ion-icon name="home"></ion-icon> Home Bill Items <ion-badge color="light" float-right>{{esti[\'home_bill\']?.length}}</ion-badge></div>\n\n            </ion-col>\n\n            <ion-col text-wrap *ngIf="esti_type == \'home_bill\'">\n\n              <!-- <span float-left class="esti-notes">\n\n                Add Home Bill Items\n\n              </span> -->\n\n              <!-- <span float-right>\n\n                  <button ion-button icon-start outline small color="secondary" (click)="openItemAddModal(\'home_bill\',\'\',\'add\')">\n\n                    <ion-icon name="ios-add"></ion-icon> ADD\n\n                  </button>\n\n              </span> -->\n\n            </ion-col>\n\n          </ion-row>\n\n          <!-- <ion-card class="errorMsg" padding *ngIf="hbErrorMsg">\n\n            {{hbErrorMsg}}\n\n          </ion-card>\n\n          <ion-card class="msg" padding *ngIf="hbMsg">\n\n            {{hbMsg}}\n\n          </ion-card> -->\n\n          <ion-list *ngIf="(esti_type == \'summary\' && togtype == \'home_bill\')|| esti_type == \'home_bill\'">\n\n            <ion-item-sliding margin-top #tags *ngFor="let hb of esti[\'home_bill\'];let i = index;">\n\n              <ion-item class="no-padding">\n\n               \n\n                <ion-row>\n\n                  <ion-col text-wrap col-3  class="custom-2col">\n\n                    {{hb.tag_code}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-12  class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 1" style="font-size: 11px !important;">\n\n                    <span *ngIf="hb.collection_name != null">{{hb.collection_name}} <b> | </b> </span>\n\n                    {{hb.product_name}} <b> | </b> \n\n                    {{hb.design_name}}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-4  class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n\n                    {{hb.product_name}}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-4  class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n\n                    {{hb.design_name}}\n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Purity </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.purname}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Pcs </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.piece}} \n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Size </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.size}} \n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Gross wgt </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.gross_wt}} g\n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Less Weight </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.less_wt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Net Weight </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.net_wt}} g\n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Wast ({{hb.retail_max_wastage_percehb}} %)  </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    {{hb.wast_wgt}} g\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Total MC </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{hb.making_charge | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Taxable Amount </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{hb.taxable | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">GST </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> {{hb.tax_price | number:\'1.2-2\' }}\n\n                  </ion-col>\n\n                  </ion-row>\n\n                  <ion-row>\n\n\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <p class="text-small">Amount </p>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-3 class="custom-2col">\n\n                    <span [innerHTML]="settings.curr_symb_html"></span> <b>{{hb.sales_value | number:\'1.2-2\' }}</b>\n\n                  </ion-col>\n\n                  <ion-col text-wrap col-6 class="custom-2col">\n\n\n\n                  <div style="text-align: end;">\n\n                    <button ion-button small style="font-size: xx-small;"  (click)="openItemAddModal(\'home_bill\',hb,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n  \n\n                    <button ion-button small style="font-size: xx-small;" color="danger" (click)="deleteItem(\'home_bill\',i)"><ion-icon name="trash"></ion-icon></button>\n\n  \n\n                  </div>\n\n                  </ion-col>\n\n                  </ion-row>\n\n              </ion-item>\n\n              <ion-item-options side="right">\n\n                <button ion-button *ngIf="esti_type != \'summary\'" color="primary" (click)="openItemAddModal(\'home_bill\',hb,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n                <button ion-button color="danger" (click)="deleteItem(\'home_bill\',i)"><ion-icon name="trash"></ion-icon></button>\n\n              </ion-item-options>\n\n            </ion-item-sliding>\n\n          </ion-list>\n\n        </span>\n\n        <!-- ./Row 5 Home Bill -->\n\n\n\n        <!-- Row 6 : Old Gold -->\n\n        <span *ngIf="esti_type == \'summary\' || esti_type == \'old_metal\'" margin-top> <!-- <span *ngIf="esti[\'is_old_metal\']" margin-top> -->\n\n          <ion-row  *ngIf="esti_type == \'summary\' && esti[\'old_metal\']?.length > 0">\n\n            <ion-col no-padding text-wrap col-12 >\n\n              <div (click)="tog(\'old_metal\')" class="theme-title-blk"> <img class="summary-img-icon" src=\'assets/icon/old_metal_white.svg\' /> Old Metal Items <ion-badge color="light" float-right>{{esti[\'old_metal\']?.length}}</ion-badge></div>\n\n            </ion-col>\n\n            <ion-col text-wrap *ngIf="esti_type == \'old_metal\'">\n\n              <!-- <span float-left class="esti-notes">\n\n                Add Old Metal Items\n\n              </span> -->\n\n              <!-- <span float-right>\n\n                  <button ion-button icon-start outline small color="secondary" (click)="openItemAddModal(\'old_metal\',\'\',\'add\')">\n\n                    <ion-icon name="ios-add"></ion-icon> ADD\n\n                  </button>\n\n              </span> -->\n\n            </ion-col>\n\n          </ion-row>\n\n          <!-- <ion-card class="errorMsg" padding *ngIf="omErrorMsg">\n\n            {{omErrorMsg}}\n\n          </ion-card>\n\n          <ion-card class="msg" padding *ngIf="omMsg">\n\n            {{omMsg}}\n\n          </ion-card> -->\n\n          <ion-list  *ngIf="(esti_type == \'summary\' && togtype == \'old_metal\')|| esti_type == \'old_metal\'">\n\n            <ion-item-sliding margin-top #tags *ngFor="let om of esti[\'old_metal\'];let i = index;">\n\n              <ion-item class="no-padding">\n\n              \n\n                  <ion-row>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col" >\n\n                        <p class="text-small">Metal  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.category}} \n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Purpose  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.purpose}} \n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Gross wgt  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.gross_wt}} g\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Dust wgt  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.dust_wt}} g\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Stone wgt  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.stone_wt}} g\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Wast ({{om.wastage}} %)   </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.wastage_wt}} g\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Net Weight  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        {{om.net_wt}} g\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Rate  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <span [innerHTML]="settings.curr_symb_html"></span> {{om.rate}}\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <p class="text-small">Amount  </p>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n\n                        <span [innerHTML]="settings.curr_symb_html"></span> <b>{{om.amount | number:\'1.2-2\' }} </b>\n\n                      </ion-col>\n\n                      <ion-col text-wrap col-6 col-md-4 class="custom-2col">\n\n\n\n                      <div style="text-align: end;">\n\n                        <button ion-button small style="font-size: xx-small;"  (click)="openItemAddModal(\'old_metal\',om,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n      \n\n                        <button ion-button small style="font-size: xx-small;" color="danger" (click)="deleteItem(\'old_metal\',i)"><ion-icon name="trash"></ion-icon></button>\n\n      \n\n                      </div>\n\n                      </ion-col>\n\n                  </ion-row>\n\n              </ion-item>\n\n              <ion-item-options side="right">\n\n                <button ion-button *ngIf="esti_type != \'summary\'" color="primary" (click)="openItemAddModal(\'old_metal\',om,\'edit\')"><ion-icon name="create"></ion-icon></button>\n\n                <button ion-button color="danger" (click)="deleteItem(\'old_metal\',i)"><ion-icon name="trash"></ion-icon></button>\n\n              </ion-item-options>\n\n            </ion-item-sliding>\n\n          </ion-list>\n\n        </span>\n\n        <!-- ./Row 6 Old Gold -->\n\n        </div>\n\n   \n\n    </ion-grid> \n\n    <br/>\n\n      <br/>\n\n      <br/>\n\n  </ion-content>\n\n  <ion-footer style="text-align: center;" *ngIf="page_type == \'create\'">\n\n    <ion-fab left bottom *ngIf="!scannerOn"> \n\n      <button ion-fab mini color="primary" (click)="openEstiBasicDetailModal()"><ion-icon name="person"></ion-icon></button>\n\n    </ion-fab>\n\n    <ion-fab left bottom style="margin-left: 47px;" *ngIf="!scannerOn  && esti_type == \'summary\'"> \n\n      <button ion-fab mini color="primary" (click)="opengift()"><ion-icon name="bookmark"></ion-icon></button>\n\n    </ion-fab>\n\n    <ion-fab left bottom style="margin-left: 47px;"  *ngIf="!scannerOn && esti_type != \'summary\' && esti_type != \'tag\' "> \n\n      <button ion-fab mini color="primary" (click)="openItemAddModal(esti_type,\'\',\'add\')"><ion-icon name="ios-add"></ion-icon></button>\n\n    </ion-fab>\n\n    <ion-fab left bottom style="margin-left: 47px;"  *ngIf="!scannerOn && esti_type != \'summary\' && esti_type == \'tag\' "> \n\n      <button ion-fab mini color="primary" (click)="check()"><ion-icon name="ios-add"></ion-icon></button>\n\n    </ion-fab>\n\n    <ion-fab center bottom style="left: 47% !important;" *ngIf="!scannerOn && esti_type != \'summary\'"> \n\n      <button *ngIf="checkold != true" ion-fab mini color="primary" style="    width: 95px !important;\n\n      border-radius: 10px !important;\n\n      background: #630b23 !important;" (click)="openQRScanner(\'tag\')"><ion-icon name="ios-qr-scanner"></ion-icon>SCAN</button>\n\n        <button *ngIf="checkold == true" ion-fab mini color="primary" style="    width: 105px !important;\n\n        border-radius: 10px !important;\n\n        background: #630b23 !important;" (click)="openQRScanner(\'tag\')"><ion-icon name="ios-qr-scanner"></ion-icon>OLD SCAN</button>  \n\n  </ion-fab>\n\n\n\n    <button style="width: 45% !important;" ion-button *ngIf="!scannerOn && esti_type == \'summary\'" icon-start  class="theme-btn" (click)="createEstiprint()">Print</button>\n\n\n\n    <button style="width: 45% !important;" ion-button *ngIf="!scannerOn && esti_type == \'summary\'" icon-start  class="theme-btn" (click)="createEsti()">Save</button>\n\n    <!-- <button *ngIf="scannerOn" ion-button icon-start full class="warning" (click)="closeScanner()">Close Scanner</button>   -->\n\n  </ion-footer>  \n\n<!-- ./Estimation Create Block  -->\n\n\n\n\n\n<!-- Estimation Print  Block--> \n\n  <ion-content *ngIf="page_type == \'print\'">\n\n    <!-- <ion-row>\n\n      <ion-col>\n\n        <div class="esti-notes" text-center margin>Enter Estimation No. to re-print estimation</div>\n\n      </ion-col>\n\n    </ion-row> -->\n\n    <div class="row">\n\n      <div class="col" col-3>\n\n       \n\n      </div>  \n\n      <div class="col" col-9>\n\n        <ion-item no-padding>\n\n          <ion-label color="label-color" stacked>Estimation No<span class="required"> *</span></ion-label>\n\n          <ion-input type="text" [(ngModel)]="estiDetail[\'esti_no\']"></ion-input>\n\n          <button ion-button outline small color="dark" type="button" item-right (click)="getEstiByEstiNo(\'\')"> Search </button> \n\n      </ion-item>\n\n      </div>  \n\n    </div>\n\n\n\n   \n\n\n\n    <ion-row>\n\n      <ion-col no-padding text-wrap col-12>\n\n        <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Estimation List  <ion-badge color="light" float-right></ion-badge></div>\n\n      </ion-col>\n\n      </ion-row>\n\n    <ion-row style="    margin-top: 10px;\n\n    border: 1px solid lightgrey;" *ngFor="let l of list">\n\n  \n\n      <ion-col>\n\n        <div class="row">\n\n        <div class="col" style="    padding: 5px;font-weight: bold;">{{l[\'firstname\']}}\n\n          <!-- <ion-icon (click)="edit(l[\'cus_id\'])" name="ios-create" style="float: right;"></ion-icon> -->\n\n        </div>\n\n        <div  class="col" style="    padding: 5px;">  {{l[\'total_cost\']}}\n\n          <!-- <ion-icon style="float: right;" (click)="print(l)" name="print"></ion-icon> -->\n\n\n\n        </div>\n\n        <!-- <div style="    padding: 5px;font-weight: bold;">{{l[\'totwt\']}} Grms\n\n        </div> -->\n\n      </div>\n\n      <div class="row">\n\n        <div  class="col" style="    padding: 5px;">{{l[\'mobile\']}}</div>\n\n  \n\n      <div class="col"  style="    padding: 5px;">{{l[\'totwt\']}} grms\n\n      </div>\n\n    </div>\n\n        <!-- <div style="    padding: 5px;">\n\n          <ion-badge style="background: linear-gradient(to right, #630b23 0%, #630b23 75%, #630b23 100%);" *ngIf="l[\'has_converted_order\'] == 0">Open</ion-badge>\n\n          <ion-badge  style="background: green;" *ngIf="l[\'has_converted_order\'] == 1">Billed</ion-badge>\n\n  \n\n        </div> -->\n\n  \n\n      </ion-col>\n\n      <!-- <ion-col (click)="getEstiByEstiNo(l[\'esti_no\'])" col-3 style="background-color: #630b23 !important;text-align: center;">\n\n        <div style="color: white;font-weight: bold;margin-top:25px">Esti.No</div>\n\n      <div style="color: white;">{{l[\'esti_no\']}}</div>\n\n      </ion-col> -->\n\n\n\n      <!-- <ion-col  col-4 style="background-color: #630b23 !important;text-align: center;">\n\n        <div class="row">\n\n          <div class="col" style="border: 1px solid white;    margin-top: 10px;" col-8 (click)="getEstiByEstiNo(l[\'esti_no\'])">\n\n            <ion-icon style="" (click)="print(l)" name="eye"></ion-icon>\n\n  \n\n            <div style="color: white;font-weight: bold;">Esti.No</div>\n\n            <div style="color: white;">{{l[\'esti_no\']}}</div>\n\n            </div>\n\n            <div class="col" col-4 style="margin: auto;">\n\n              <ion-icon style="float: right;font-size: 1.5em !important;margin-top: 15px;" (click)="print(l)" name="print"></ion-icon>\n\n  \n\n            </div>\n\n  \n\n        </div>\n\n       \n\n      </ion-col> -->\n\n\n\n      <ion-col  col-4 style="background-color: #630b23 !important;text-align: center;">\n\n        <div class="row">\n\n          <div class="col" style="border: 1px solid white;        margin-top: 5px;\n\n          margin-bottom: 5px;" col-8 (click)="getEstiByEstiNo(l[\'esti_no\'])">\n\n  \n\n            <!-- <div style="color: white;font-weight: bold;">Esti.No</div> -->\n\n            <div class="row">\n\n            <div class="col" col-7 *ngIf="l[\'has_converted_order\'] == 0" style="color: white;font-size: 16px !important;    white-space: nowrap;\n\n            text-overflow: ellipsis;\n\n            overflow: hidden;">{{l[\'esti_no\']}}</div>\n\n            <div class="col" col-7 *ngIf="l[\'has_converted_order\'] == 1" style="color: green;font-size: 16px !important;    white-space: nowrap;\n\n            text-overflow: ellipsis;\n\n            overflow: hidden;">{{l[\'esti_no\']}}</div>\n\n\n\n            <div class="col" col-5>\n\n              <ion-icon style="margin: auto;color: gold;"  name="eye"></ion-icon>\n\n\n\n            </div>\n\n          </div>\n\n            </div>\n\n            <!-- <div class="col" col-4 style="margin: auto;">\n\n              <ion-icon style=""  name="eye"></ion-icon>\n\n  \n\n            </div> -->\n\n            <div class="col" col-4 >\n\n              <ion-icon style="float: right;font-size: 1.5em !important;margin-top: 10px;color: gold;" (click)="print(l)" name="print"></ion-icon>\n\n  \n\n            </div>\n\n  \n\n        </div>\n\n       \n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-content> \n\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\estimation\estimation.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */], __WEBPACK_IMPORTED_MODULE_12__ionic_native_barcode_scanner__["a" /* BarcodeScanner */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__["a" /* Printer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_chooser__["a" /* FileChooser */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], EstiPage);
    return EstiPage;
}());

//# sourceMappingURL=estimation.js.map

/***/ }),

/***/ 178:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AddEstiItemPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_add_stone_detail_add_stone_detail__ = __webpack_require__(388);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__other_other__ = __webpack_require__(389);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








/**
 * Generated class for the CusSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var AddEstiItemPage = /** @class */ (function () {
    //empData = JSON.parse(localStorage.getItem('empDetail'));
    function AddEstiItemPage(cd, events, load, retail, common, viewCtrl, navParams, modal) {
        var _this = this;
        this.cd = cd;
        this.events = events;
        this.load = load;
        this.retail = retail;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.modal = modal;
        this.terrorMsg = '';
        this.stoneMasData = [];
        this.uom = [];
        this.stone_details = [];
        this.esti = [];
        this.tagData = { "tag_code": "", "tag_code1": "", "tag_code2": "", "is_partial": 0, "stone_details": [] };
        // NonTag
        this.ntData = { "stone_details": [] };
        this.products = [];
        this.designs = [];
        this.selectedNTStock = [];
        // Home Bill
        this.hbData = { 'charge_value': 0, 'mc_type': '1', 'id_charge': '', 'chargecode': '', "tag_code": "", "tag_code1": "", "tag_code2": "", "is_partly_sold": 0, "stone_details": [], 'allcharges': [] };
        this.purities = [];
        this.collections = [];
        this.hbProducts = [];
        this.hbDesigns = [];
        this.hbPurities = [];
        this.hbsubDesigns = [];
        this.ntPurities = [];
        // Old metal
        this.omData = { "stone_details": [] };
        this.oldMetalCat = [];
        this.oldMetalTypes = [];
        this.metalCatTypes = [];
        this.ret_settings = [];
        this.oldrates = [];
        this.oldcategory = [];
        this.oldfullrates = [];
        this.oldfullcategory = [];
        this.oldamount = 0;
        this.homeback = false;
        this.nonback = false;
        this.oldback = false;
        this.other = [];
        this.item_type = this.navParams.get('type');
        this.ret_settings = this.navParams.get('ret_settings');
        this.id_branch = this.navParams.get('id_branch');
        this.metalRate = this.navParams.get('metal_rates');
        this.tax_details = this.navParams.get('taxGroupItems');
        this.nonTagStock = this.navParams.get('nonTagStock');
        localStorage.setItem('st', JSON.stringify(this.navParams.get('nonTagStock')));
        this.nonTagStock1 = JSON.parse(localStorage.getItem('st'));
        this.products = this.nonTagStock.products;
        this.homeBillStock = this.navParams.get('homeBillStock');
        this.purities = this.navParams.get('purities');
        this.collections = this.navParams.get('collections');
        this.oldMetalCat = this.navParams.get('oldMetalCat');
        console.log(this.oldMetalCat);
        this.stoneMasData = this.navParams.get('stoneMasData');
        this.action = this.navParams.get('action');
        this.oldMetalTypes = this.navParams.get('oldMetalTypes');
        if (this.item_type == 'tag' && this.action == 'edit') {
            this.tagData = this.navParams.get('esti');
            this.other = this.tagData.hasOwnProperty('othermetal_details') ? this.tagData['othermetal_details'] : [];
            // this.stone_details = this.tagData['stone_details'] ;
            this.stone_details = this.tagData.hasOwnProperty('stone_details') ? this.tagData['stone_details'] : [];
        }
        else if (this.item_type == 'non_tag' && this.action == 'edit') {
            this.ntData = this.navParams.get('esti');
            this.productSelected(this.ntData['pro_id']);
            this.selectedNTStock['gross_wt'] = this.ntData['AVgross_wt'];
            // this.setNTitemData(this.ntData['design'])
            console.log(this.ntData);
        }
        else if (this.item_type == 'home_bill' && this.action == 'edit') {
            this.hbData = this.navParams.get('esti');
            this.stone_details = this.hbData['stone_details'];
            console.log(this.stone_details);
        }
        else if (this.item_type == 'old_metal' && this.action == 'edit') {
            this.omData = this.navParams.get('esti');
            this.stone_details = this.omData['stone_details'];
        }
        console.log(this.omData);
        if (this.item_type == 'old_metal' && this.action != 'edit') {
            this.omData['id_category'] = this.oldMetalCat.length > 0 ? this.oldMetalCat[0]['id_category'] : '';
            this.omData['id_purpose'] = 1;
            this.omData['purity'] = '';
        }
        this.common.getoldrates().then(function (data) {
            _this.oldrates = data;
            _this.oldfullrates = data;
            _this.common.getoldcategory().then(function (data) {
                _this.oldcategory = data;
                _this.oldfullcategory = data;
                console.log(_this.oldcategory, 'rates1');
                _this.calcOldmetalValue('id_category');
                loader.dismiss();
                console.log(_this.omData['id_category']);
                console.log(_this.omData['id_old_metal_type']);
                console.log(_this.omData['id_old_metal_cat_type']);
                console.log(_this.omData['id_purpose']);
                console.log(_this.omData['gross_wt']);
            }, function (err) {
                loader.dismiss();
            });
        }, function (err) {
            loader.dismiss();
        });
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getdivision().then(function (data) {
            _this.hbData['allcharges'] = data['charges'];
            // loader.dismiss();
        });
        // let loader = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
    }
    AddEstiItemPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    AddEstiItemPage.prototype.updateItem = function (submitType) {
        var _this = this;
        var data = [];
        data['submitType'] = submitType;
        if (this.item_type == 'tag') {
            if (this.tagData['actual_gross_wt'] < this.tagData['gross_wt'] || this.tagData['actual_net_wt'] < this.tagData['net_wt']) {
                this.msg = "";
                this.errorMsg = "Invalid Tag weight..";
            }
            else {
                data['item_data'] = this.tagData;
                this.viewCtrl.dismiss(data);
            }
        }
        else if (this.item_type == 'non_tag') {
            if (this.ntData['id_nontag_item'] == '' || this.ntData['id_nontag_item'] == null || this.ntData['gross_wt'] <= 0) {
                this.msg = "";
                this.errorMsg = "Invalid Non-Tag details..";
            }
            else {
                data['item_data'] = this.ntData;
                this.viewCtrl.dismiss(data);
            }
        }
        else if (this.item_type == 'home_bill') {
            if ((this.hbData['tag_id'] > 0 || this.hbData['gross_wt'] > 0) && this.hbData['piece'] != '' && this.hbData['purname'] != '') {
                data['item_data'] = this.hbData;
                this.viewCtrl.dismiss(data);
            }
            else {
                this.msg = "";
                this.errorMsg = "Invalid Home Bill details..";
            }
        }
        else if (this.item_type == 'old_metal') {
            if (this.omData['amount'] > 0 && this.omData['id_purpose'] > 0 && this.omData['id_category'] > 0 && this.omData['id_old_metal_type'] > 0 && this.omData['id_old_metal_cat_type'] > 0 && this.omData['purity'] > 0 && (this.omData['id_purpose'] == '1' && this.omData['amount'] <= parseInt(this.ret_settings['max_cash_allowed']) || this.omData['id_purpose'] == '2' && this.omData['amount'] != 0) && ((this.omData['id_category'] == '1' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_gold_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_gold_rate']) || this.omData['id_category'] == '2' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_silver_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_silver_rate'])))) {
                // if(this.omData['amount'] > 0 && this.omData['id_purpose'] > 0 && this.omData['id_category'] > 0 && this.omData['id_old_metal_type'] > 0 && this.omData['id_old_metal_cat_type'] > 0 && this.omData['purity'] > 0 && (this.omData['id_category'] == '1' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_gold_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_gold_rate'])  ||  this.omData['id_category'] == '2' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_silver_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_silver_rate']))){
                data['item_data'] = this.omData;
                this.viewCtrl.dismiss(data);
            }
            else {
                this.msg = "";
                this.errorMsg = "Invalid Old metal details..";
            }
        }
        // Alert Message Timeout
        setTimeout(function () {
            _this.errorMsg = "";
        }, this.common.msgTimeout);
    };
    AddEstiItemPage.prototype.addItem = function (submitType) {
        var _this = this;
        var data = [];
        data['submitType'] = submitType;
        if (this.item_type == 'tag') {
            if (this.tagData['tag_id'] == '' || this.tagData['tag_id'] == null || this.ntData['gross_wt'] <= 0) {
                this.msg = "";
                this.errorMsg = "Invalid Tag details..";
            }
            else {
                data['item_data'] = this.tagData;
                this.viewCtrl.dismiss(data);
            }
        }
        else if (this.item_type == 'non_tag') {
            if (this.ntData['id_nontag_item'] == '' || this.ntData['id_nontag_item'] == null || this.ntData['gross_wt'] <= 0) {
                this.msg = "";
                this.errorMsg = "Invalid Non-Tag details..";
            }
            else {
                data['item_data'] = this.ntData;
                this.viewCtrl.dismiss(data);
            }
        }
        else if (this.item_type == 'home_bill') {
            // if(this.hbData['tag_id'] > 0 || this.hbData['gross_wt'] > 0){
            if ((this.hbData['tag_id'] > 0 || this.hbData['gross_wt'] > 0) && this.hbData['piece'] != '' && this.hbData['purname'] != '') {
                data['item_data'] = this.hbData;
                this.viewCtrl.dismiss(data);
            }
            else {
                this.msg = "";
                this.errorMsg = "Invalid Home Bill details..";
            }
        }
        else if (this.item_type == 'old_metal') {
            if (this.omData['amount'] > 0 && this.omData['id_purpose'] > 0 && this.omData['id_category'] > 0 && this.omData['id_old_metal_type'] > 0 && this.omData['id_old_metal_cat_type'] > 0 && this.omData['purity'] > 0 && (this.omData['id_purpose'] == '1' && this.omData['amount'] <= parseInt(this.ret_settings['max_cash_allowed']) || this.omData['id_purpose'] == '2' && this.omData['amount'] != 0) && ((this.omData['id_category'] == '1' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_gold_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_gold_rate']) || this.omData['id_category'] == '2' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_silver_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_silver_rate'])))) {
                // if(this.omData['amount'] > 0 && this.omData['id_purpose'] > 0 && this.omData['id_category'] > 0 && this.omData['id_old_metal_type'] > 0 && this.omData['id_old_metal_cat_type'] > 0 && this.omData['purity'] > 0 && (this.omData['id_category'] == '1' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_gold_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_gold_rate'])  ||  this.omData['id_category'] == '2' && this.omData['rate'] <= parseInt(this.ret_settings['max_old_silver_rate']) && this.omData['rate'] >= parseInt(this.ret_settings['min_old_silver_rate']))){
                data['item_data'] = this.omData;
                this.viewCtrl.dismiss(data);
            }
            else {
                this.msg = "";
                this.errorMsg = "Invalid Old metal details..";
            }
        }
        // Alert Message Timeout
        setTimeout(function () {
            _this.errorMsg = "";
        }, this.common.msgTimeout);
    };
    // calcStoneDetail(){
    //   let data = {"stone_wt" : 0, "stone_price" : 0};
    //   this.stone_details.forEach( i => {
    //     data['stone_wt']   = data['stone_wt'] + Number(i['stone_wt']); 
    //     data['stone_price'] = data['stone_price'] + Number(i['stone_price']); 
    //   }) 
    //   return data;
    // }
    AddEstiItemPage.prototype.calcStoneDetail = function () {
        var _this = this;
        if (this.item_type == 'tag') {
            var data_1 = { "wt": 0, "amount": 0 };
            this.stone_details.forEach(function (i, index) {
                if (_this.stone_details[index]['lwt']) {
                    _this.stone_details[index]['is_apply_in_lwt'] = 1;
                    data_1['wt'] = data_1['wt'] + Number(i['wt']);
                }
                else {
                    _this.stone_details[index]['is_apply_in_lwt'] = 0;
                }
                data_1['amount'] = data_1['amount'] + Number(i['amount']);
            });
            return data_1;
        }
        else {
            var data_2 = { "stone_wt": 0, "stone_price": 0 };
            this.stone_details.forEach(function (i, index) {
                if (_this.stone_details[index]['lwt']) {
                    _this.stone_details[index]['is_apply_in_lwt'] = 1;
                    data_2['stone_wt'] = data_2['stone_wt'] + Number(i['stone_wt']);
                }
                else {
                    _this.stone_details[index]['is_apply_in_lwt'] = 0;
                }
                data_2['stone_price'] = data_2['stone_price'] + Number(i['stone_price']);
            });
            return data_2;
        }
    };
    AddEstiItemPage.prototype.calcSaleValuemc = function () {
        var _this = this;
        if (this.item_type == 'tag') {
            if ((this.tagData['checkwas'] >= 10 && this.tagData['retail_max_wastage_percent'] >= 10) || (this.tagData['checkwas'] < 10 && this.tagData['retail_max_wastage_percent'] < 10)) {
                this.terrorMsg = "";
                console.log('11111111111111111');
                if (parseFloat(this.tagData['gross_wt']) <= parseFloat(this.tagData['actual_gross_wt']) && parseFloat(this.tagData['net_wt']) <= parseFloat(this.tagData['actual_net_wt'])) {
                    this.tagData['net_wt'] = this.tagData['gross_wt'] - this.tagData['less_wt'];
                    var detail = { itemData: this.tagData, metalRate: this.metalRate, tax_details: this.tax_details, item_type: this.item_type };
                    this.tagData = this.retail.calculateSaleValueBasedMc(detail);
                }
                else {
                    this.errorMsg = "Entered weight greater than tag weight";
                    // this.tagData['gross_wt']  = this.tagData['actual_gross_wt'] ;
                    // this.tagData['less_wt']   = this.tagData['actual_less_wt'];
                    // this.tagData['net_wt']    = this.tagData['actual_net_wt'];
                    // Alert Message Timeout
                    console.log(parseFloat(this.tagData['gross_wt']) > parseFloat(this.tagData['actual_gross_wt']));
                    console.log(parseFloat(this.tagData['less_wt']) > parseFloat(this.tagData['actual_less_wt']));
                    if (parseFloat(this.tagData['gross_wt']) > parseFloat(this.tagData['actual_gross_wt'])) {
                        this.tagData['gross_wt'] = this.tagData['actual_gross_wt'];
                    }
                    else if (parseFloat(this.tagData['less_wt']) > parseFloat(this.tagData['actual_less_wt'])) {
                        this.tagData['less_wt'] = this.tagData['actual_less_wt'];
                    }
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, this.common.msgTimeout);
                }
            }
            else {
                console.log('11111111111111111');
                this.errorMsg = "Please Enter required wastage";
                this.terrorMsg = "Please Enter required wastage";
            }
        }
    };
    AddEstiItemPage.prototype.calcSaleValue = function (changedInput) {
        var _this = this;
        console.log(this.tagData);
        if (this.item_type == 'tag') {
            this.tagData['mc_value'] = this.tagData['mc_value'] < 0 || this.tagData['mc_value'] == '' ? 0 : this.tagData['mc_value'];
            console.log(this.tagData['mc_value']);
            // this.checkingtag();
            var stData = this.calcStoneDetail();
            this.tagData['stone_wt'] = stData['wt'];
            this.tagData['stone_price'] = stData['amount'];
            this.tagData['stone_details'] = this.stone_details;
            console.log('****', this.stone_details);
            console.log('****', stData['wt']);
            if (this.stone_details.length != 0) {
                this.tagData['less_wt'] = this.retail.setAsNumber(stData['wt']);
                this.tagData['net_wt'] = this.tagData['gross_wt'] - this.tagData['less_wt'];
                this.tagData['net_wt'] = this.retail.setAsNumber(this.tagData['net_wt']).toFixed(3);
                this.tagData['actual_net_wt'] = this.tagData['net_wt'];
            }
            // this.tagData['mc_value'] =  this.tagData['making_charge'];
            if (this.tagData['retail_max_wastage_percent'] >= parseInt(this.tagData['checkwas'])) {
                this.terrorMsg = "";
                if (parseFloat(this.tagData['gross_wt']) <= parseFloat(this.tagData['actual_gross_wt']) && parseFloat(this.tagData['net_wt']) <= parseFloat(this.tagData['actual_net_wt'])) {
                    if (this.stone_details.length == 0) {
                        this.tagData['net_wt'] = this.tagData['gross_wt'] - this.tagData['less_wt'];
                    }
                    // if(this.tagData['calculation_based_on'] == 3){
                    //   this.tagData['sales_value'] = this.tagData['taxable'];
                    // }
                    // if(changedInput == 'wastage_wt'){
                    //   let wast_percent= parseFloat((((this.retail.setAsNumber(this.tagData['wast_wgt']))*100)/this.retail.setAsNumber(this.tagData['net_wt'])).toFixed(3));
                    //   this.tagData['retail_max_wastage_percent']  = wast_percent;
                    // }
                    // else if(changedInput == 'wast'){
                    //   let wast_wgt    = parseFloat( (this.tagData['net_wt'] * (this.retail.setAsNumber(this.tagData['retail_max_wastage_percent']) / 100)).toFixed(3));
                    //   this.tagData['wast_wgt']  = wast_wgt;
                    // }
                    var detail = { itemData: this.tagData, metalRate: this.metalRate, tax_details: this.tax_details, item_type: this.item_type };
                    console.log('*******', this.tagData['taxable']);
                    this.tagData = this.retail.calculateSaleValue(detail);
                }
                else {
                    this.errorMsg = "Entered weight greater than tag weight";
                    console.log(parseFloat(this.tagData['gross_wt']) > parseFloat(this.tagData['actual_gross_wt']));
                    console.log(parseFloat(this.tagData['less_wt']) > parseFloat(this.tagData['actual_less_wt']));
                    if (parseFloat(this.tagData['gross_wt']) > parseFloat(this.tagData['actual_gross_wt'])) {
                        this.tagData['gross_wt'] = this.tagData['actual_gross_wt'];
                    }
                    else if (parseFloat(this.tagData['less_wt']) > parseFloat(this.tagData['actual_less_wt'])) {
                        this.tagData['less_wt'] = this.tagData['actual_less_wt'];
                    }
                    // Alert Message Timeout
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, this.common.msgTimeout);
                }
            }
            else {
                console.log('11111111111111111');
                this.errorMsg = "Please Enter required wastage";
                this.terrorMsg = "Please Enter required wastage";
            }
        }
        else if (this.item_type == 'non_tag') {
            // this.checkingnon();
            var stData = this.calcStoneDetail();
            this.ntData['stone_wt'] = stData['stone_wt'];
            this.ntData['stone_price'] = stData['stone_price'];
            if (parseFloat(this.ntData['gross_wt']) > parseFloat(this.selectedNTStock['gross_wt'])) {
                this.ntData['gross_wt'] = this.selectedNTStock['gross_wt'];
            }
            if (parseFloat(this.ntData['less_wt']) > parseFloat(this.selectedNTStock['less_wt'])) {
                this.ntData['less_wt'] = this.retail.setAsNumber(this.selectedNTStock['less_wt']);
            }
            if (parseFloat(this.ntData['piece']) > parseFloat(this.selectedNTStock['piece'])) {
                this.ntData['piece'] = this.selectedNTStock['piece'];
            }
            this.ntData['net_wt'] = parseFloat(this.ntData['gross_wt']) - this.retail.setAsNumber(this.ntData['less_wt']);
            if (changedInput == 'wastage_wt') {
                var wast_percent = parseFloat((((this.retail.setAsNumber(this.ntData['wast_wgt'])) * 100) / this.retail.setAsNumber(this.ntData['net_wt'])).toFixed(3));
                this.ntData['retail_max_wastage_percent'] = wast_percent;
            }
            else if (changedInput == 'wast') {
                var wast_wgt = parseFloat((this.ntData['net_wt'] * (this.retail.setAsNumber(this.ntData['retail_max_wastage_percent']) / 100)).toFixed(3));
                this.ntData['wast_wgt'] = wast_wgt;
            }
            var detail = { itemData: this.ntData, metalRate: this.metalRate, tax_details: this.tax_details, item_type: this.item_type };
            if (this.ntData['calculation_based_on'] == 3) {
                this.ntData['sales_value'] = this.ntData['taxable'];
            }
            this.ntData = this.retail.calculateSaleValue(detail);
        }
        else if (this.item_type == 'home_bill') {
            console.log(this.hbData['stone_details']);
            this.checkinghome();
            var stData = this.calcStoneDetail();
            this.hbData['stone_wt'] = stData['stone_wt'];
            this.hbData['stone_price'] = stData['stone_price'];
            this.hbData['stone_details'] = this.stone_details;
            console.log(this.hbData['stone_details']);
            if (this.hbData['is_partly_sold'] == 1) {
                if (parseFloat(this.hbData['gross_wt']) > parseFloat(this.hbData['stock_gross_wt'])) {
                    this.hbData['gross_wt'] = this.retail.setAsNumber(this.hbData['stock_gross_wt']);
                }
                if (parseFloat(this.hbData['less_wt']) > parseFloat(this.hbData['stock_less_wt'])) {
                    this.hbData['less_wt'] = this.retail.setAsNumber(this.hbData['stock_less_wt']);
                }
            }
            if (this.stone_details.length != 0) {
                this.hbData['less_wt'] = this.retail.setAsNumber(stData['stone_wt']);
            }
            this.hbData['net_wt'] = parseFloat(this.hbData['gross_wt']) - this.retail.setAsNumber(this.hbData['less_wt']);
            if (changedInput == 'wastage_wt') {
                var wast_percent = parseFloat((((this.retail.setAsNumber(this.hbData['wast_wgt'])) * 100) / this.retail.setAsNumber(this.hbData['net_wt'])).toFixed(3));
                this.hbData['retail_max_wastage_percent'] = wast_percent;
            }
            else if (changedInput == 'wast') {
                var wast_wgt = parseFloat((this.hbData['net_wt'] * (this.retail.setAsNumber(this.hbData['retail_max_wastage_percent']) / 100)).toFixed(3));
                this.hbData['wast_wgt'] = wast_wgt;
            }
            var detail = { itemData: this.hbData, metalRate: this.metalRate, tax_details: this.tax_details, item_type: this.item_type };
            console.log(detail);
            if (this.hbData['calculation_based_on'] == 3) {
                this.hbData['sales_value'] = this.hbData['taxable'];
            }
            this.hbData = this.retail.calculateSaleValue(detail);
        }
    };
    // Tag Item
    AddEstiItemPage.prototype.getTagData = function (tag_code) {
        var _this = this;
        if (tag_code.length > 0) {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            var postData = { "type": 'EstiTag', "searchTxt": tag_code, "searchField": "tag_code", "id_branch": this.id_branch };
            this.retail.getTagData(postData).then(function (data) {
                if (data.status) {
                    _this.msg = data.msg;
                    _this.errorMsg = "";
                    setTimeout(function () {
                        _this.msg = "";
                    }, _this.common.msgTimeout);
                    data.tagData['actual_gross_wt'] = data.tagData['gross_wt'];
                    data.tagData['charge_value'] = data.tagData['charge_value'];
                    data.tagData['charges'] = data.tagData['charges'];
                    data.tagData['actual_less_wt'] = data.tagData['less_wt'];
                    data.tagData['actual_net_wt'] = data.tagData['net_wt'];
                    data.tagData['checkwas'] = data.tagData['retail_max_wastage_percent'];
                    _this.stone_details = data.tagData['stone_details'];
                    data.tagData['product_name'] = (data.tagData['parent_prods_name'] != null ? (data.tagData['parent_prods_name'] + ',' + data.tagData['product_name']) : data.tagData['product_name']);
                    var detail = { itemData: data.tagData, metalRate: _this.metalRate, tax_details: _this.tax_details, item_type: _this.item_type };
                    _this.tagData = _this.retail.calculateSaleValue(detail);
                }
                else {
                    _this.tagData = { "tag_code": "", "tag_code1": "", "tag_code2": "", "is_partial": 0, "stone_details": [] };
                    _this.msg = "";
                    _this.errorMsg = data.msg;
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, _this.common.msgTimeout);
                }
                loader_1.dismiss();
            });
        }
        else {
            console.log(tag_code);
            this.errorMsg = "Enter Tag Code";
            setTimeout(function () {
                _this.errorMsg = "";
            }, this.common.msgTimeout);
        }
    };
    AddEstiItemPage.prototype.partlySale = function () {
        if (this.tagData['is_partial'] == 0) {
            this.tagData['gross_wt'] = this.tagData['actual_gross_wt'];
            this.tagData['less_wt'] = this.tagData['actual_less_wt'];
            this.tagData['net_wt'] = this.tagData['actual_net_wt'];
        }
    };
    // ./Tag Item
    // Non Tag
    AddEstiItemPage.prototype.collectionSelected = function (id_collection) {
        var _this = this;
        this.products = [];
        this.nonTagStock['products'].forEach(function (prod) {
            if (prod.id_collection == id_collection) {
                _this.products.push(prod);
            }
        });
    };
    AddEstiItemPage.prototype.append = function () {
        if (this.item_type == 'tag') {
            var one = document.getElementById('one1').value;
            var two = document.getElementById('two1').value;
            console.log(one);
            console.log(two);
            this.tagData['tag_code'] = one + '-' + two;
            var test = new String(two);
            console.log(test.length);
            if (test.length == 5 && one != '') {
                this.getTagData(this.tagData['tag_code']);
            }
        }
        else if (this.item_type == 'home_bill') {
            var one = document.getElementById('one2').value.toUpperCase();
            var two = document.getElementById('two2').value.toUpperCase();
            this.hbData['tag_code1'] = this.hbData['tag_code1'].toUpperCase();
            this.hbData['tag_code2'] = this.hbData['tag_code2'].toUpperCase();
            console.log(one);
            console.log(two);
            this.hbData['tag_code'] = one + '-' + two;
            // let test:any = new String(two);
            // console.log(test.length)
            // if(test.length == 5 && one != ''){
            //   this.getHomeStockByTag();
            // }
        }
    };
    AddEstiItemPage.prototype.productSelected = function (id_product) {
        var _this = this;
        this.designs = [];
        this.nonTagStock['designs'].forEach(function (design) {
            if (design.pro_id == id_product) {
                _this.designs.push(design);
            }
        });
        this.retail.getAllPurities(id_product).then(function (data) {
            _this.ntPurities = data;
        });
    };
    AddEstiItemPage.prototype.clear = function () {
        if (this.item_type == 'old_metal') {
            this.omData['id_category'] = '';
            this.omData['id_old_metal_type'] = '';
            this.omData['id_old_metal_cat_type'] = '';
            this.omData['id_purpose'] = '';
            this.omData['gross_wt'] = '';
            this.omData['dust_wt'] = '';
            this.omData['stone_wt'] = '';
            this.omData['wastage'] = '';
            this.omData['wastage_wt'] = '';
            this.omData['net_wt'] = '';
            this.omData['rate'] = '';
            this.omData['amount'] = '';
            this.omData['purity'] = '';
            this.omData['old_pcs'] = '';
        }
        else if (this.item_type == 'home_bill') {
            this.hbData['is_partly_sold'] = 0;
            this.hbData['tag_code'] = '';
            this.hbData['tag_code1'] = '';
            this.hbData['tag_code2'] = '';
            this.hbData['sub_design_name'] = '';
            this.hbData['collection'] = '';
            this.hbData['product_name'] = '';
            this.hbData['design_name'] = '';
            this.hbData['purname'] = '';
            this.hbData['size'] = '';
            this.hbData['piece'] = 1;
            this.hbData['gross_wt'] = '';
            this.hbData['less_wt'] = '';
            this.hbData['net_wt'] = '';
            this.hbData['retail_max_wastage_percent'] = '';
            this.hbData['wast_wgt'] = '';
            this.hbData['mc_type'] = '1';
            this.hbData['mc_value'] = '';
            this.hbData['making_charge'] = '';
            this.hbData['taxable'] = '';
            this.hbData['tax_price'] = '';
            this.hbData['sales_value'] = '';
            this.hbPurities = [];
        }
        else if (this.item_type == 'non_tag') {
        }
    };
    AddEstiItemPage.prototype.setNTitemData = function (id_design) {
        var _this = this;
        this.ntData['design_no'] = id_design;
        this.selectedNTStock = [];
        this.ntData = { "stone_details": [] };
        this.nonTagStock1['nt_items'].forEach(function (nt_item) {
            if (nt_item.design == id_design) {
                _this.selectedNTStock['AVgross_wt'] = nt_item.gross_wt;
                _this.selectedNTStock['gross_wt'] = nt_item.gross_wt;
                _this.selectedNTStock['less_wt'] = nt_item.less_wt;
                _this.selectedNTStock['net_wt'] = nt_item.net_wt;
                _this.selectedNTStock['piece'] = nt_item.piece;
                nt_item.product_name = (nt_item.parent_prods_name != null ? nt_item.parent_prods_name + ',' + nt_item.product_name : nt_item.product_name);
                _this.ntData = nt_item;
                _this.ntData['AVgross_wt'] = nt_item.gross_wt;
                if (parseFloat(nt_item.gross_wt) == 0) {
                    _this.errorMsg = "Requested item is currently Out of Stock!!";
                    _this.msg = "";
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, _this.common.msgTimeout);
                }
                if (parseFloat(nt_item.gross_wt) > 0) {
                    _this.ntData['gross_wt'] = "";
                    _this.ntData['less_wt'] = "";
                    _this.ntData['net_wt'] = "";
                    _this.ntData['piece'] = 1;
                    _this.ntData['size'] = '';
                    _this.ntData['purname'] = '';
                }
                console.log(_this.ntData);
            }
        });
    };
    // ./Non Tag
    // Home Bill
    AddEstiItemPage.prototype.getHomeStockByTag = function () {
        var _this = this;
        console.log('clicked');
        var tag_code = this.hbData['tag_code'];
        console.log(tag_code);
        console.log(tag_code && tag_code.trim() != '' && tag_code.length > 0);
        if (tag_code && tag_code.trim() != '' && tag_code.length > 0) {
            var loader_2 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_2.present();
            var postData = { "type": "byTag", "searchTxt": tag_code, "searchField": "tag_code", "id_branch": this.id_branch };
            this.retail.getHomeStock(postData).then(function (data) {
                if (data.status) {
                    _this.msg = data.msg;
                    _this.errorMsg = "";
                    setTimeout(function () {
                        _this.msg = "";
                    }, _this.common.msgTimeout);
                    data.homeStock['stock_gross_wt'] = data.homeStock['gross_wt'];
                    data.homeStock['stock_less_wt'] = data.homeStock['less_wt'];
                    data.homeStock['stock_net_wt'] = data.homeStock['net_wt'];
                    var detail = { itemData: data.homeStock, metalRate: _this.metalRate, tax_details: _this.tax_details, item_type: _this.item_type };
                    _this.hbData = _this.retail.calculateSaleValue(detail);
                }
                else {
                    _this.hbData = { 'charge_value': 0, 'mc_type': '1', 'id_charge': '', 'chargecode': '', "tag_code": "", "tag_code1": "", "tag_code2": "", "is_partly_sold": 0, "stone_details": [], 'allcharges': [] };
                    _this.msg = "";
                    _this.errorMsg = data.msg;
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, _this.common.msgTimeout);
                }
                loader_2.dismiss();
            });
        }
    };
    AddEstiItemPage.prototype.hbIsPartlySold = function (is_partly_sold) {
        //alert(is_partly_sold);
    };
    AddEstiItemPage.prototype.checkcode = function () {
        var _this = this;
        var temp = this.hbData['allcharges'].filter(function (data) { return data['id_charge'] == _this.hbData['id_charge']; });
        this.hbData['chargecode'] = temp[0]['code_charge'];
        this.hbData['charge_value'] = temp[0]['value_charge'];
        this.calcSaleValue('');
    };
    AddEstiItemPage.prototype.hbProdSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.retail.getDesigns({ "type": "active", "id_product": this.hbData['pro_id'], "last_id": -1 }).then(function (data) {
            _this.hbDesigns = data;
            if (_this.hbDesigns.length == 1) {
                _this.hbData['design_no'] = _this.hbDesigns[0].design_no;
                _this.hbData['design_name'] = _this.hbDesigns[0].label;
            }
            else {
                _this.hbData['design_name'] = '';
                _this.hbData['design_no'] = '';
            }
            loader.dismiss();
        });
        // }  
        // if(this.hbPurities.length == 0) {
        // let loader = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
        this.retail.getAllPurities(this.hbData['pro_id']).then(function (data) {
            _this.hbPurities = data;
            if (_this.hbPurities.length == 1) {
                _this.hbData['purity'] = _this.hbPurities[0].id_purity;
                _this.hbData['purname'] = _this.hbPurities[0].label;
                _this.hbData['metal_type'] = _this.hbPurities[0].rate_field;
                _this.hbData['market_metal_type'] = _this.hbPurities[0].market_rate_field;
                // this.hbProdSelected();
                _this.calcSaleValue('');
            }
            else {
                _this.hbData['purity'] = '';
                _this.hbData['purname'] = '';
            }
            // loader.dismiss();
        });
        // }  
    };
    AddEstiItemPage.prototype.hbdesignSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getsubdesigns({ "id_product": this.hbData['pro_id'], "design_no": this.hbData['design_no'] }).then(function (data) {
            _this.hbsubDesigns = data;
            if (_this.hbsubDesigns.length == 1) {
                _this.hbData['sub_design_no'] = _this.hbsubDesigns[0].id_sub_design;
                _this.hbData['sub_design_name'] = _this.hbsubDesigns[0].label;
            }
            else {
                _this.hbData['sub_design_no'] = '';
                _this.hbData['sub_design_name'] = '';
            }
            loader.dismiss();
        });
        // }  
    };
    AddEstiItemPage.prototype.openMasSearch = function (master) {
        var _this = this;
        this.errorMsg = "";
        if (master == 'Product') {
            var loader_3 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_3.present();
            if (this.ret_settings['subproduct_required'] == 1) {
                var filter_by = (this.ret_settings['collections_required'] == 1 ? "collection" : "category");
                var collection_id = (this.item_type == "home_bill" ? this.hbData['collection'] : this.ntData['collection']);
                if (collection_id > 0) {
                    this.retail.getProductTreeList({ "filter_by": filter_by, "id": collection_id }).then(function (data) {
                        if (_this.item_type == "home_bill") {
                            _this.hbProducts = data;
                        }
                        loader_3.dismiss();
                        _this.openMasModal({ 'searchArr': data, page: master, listType: "tree" }, master);
                    });
                }
                else {
                    loader_3.dismiss();
                    this.errorMsg = "Collection required !!";
                    setTimeout(function () {
                        _this.errorMsg = "";
                    }, this.common.msgTimeout);
                }
            }
            else {
                if (this.hbProducts.length == 0) {
                    this.retail.getProducts({ "type": "active", "id_category": "", "last_id": -1 }).then(function (data) {
                        _this.hbProducts = data;
                        loader_3.dismiss();
                        _this.openMasModal({ 'searchArr': _this.hbProducts, page: master, listType: "normal" }, master);
                    });
                }
                else {
                    loader_3.dismiss();
                    this.openMasModal({ 'searchArr': this.hbProducts, page: master, listType: "normal" }, master);
                }
            }
        }
        else if (master == 'Design') {
            if (this.hbData['pro_id']) {
                this.openMasModal({ 'searchArr': this.hbDesigns, page: master, listType: "normal" }, master);
            }
        }
        else if (master == 'subDesign') {
            if (this.hbData['design_no']) {
                this.openMasModal({ 'searchArr': this.hbsubDesigns, page: master, listType: "normal" }, master);
            }
        }
        else if (master == 'Purity') {
            if (this.hbData['pro_id']) {
                this.openMasModal({ 'searchArr': this.hbPurities, page: master, listType: "normal" }, master);
            }
        }
    };
    AddEstiItemPage.prototype.opennon = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__["a" /* MasSearchPage */], { 'searchArr': this.ntPurities, page: 'Purity', listType: "normal" });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.ntData['purity'] = data.id_purity;
                _this.ntData['purname'] = data.label;
                _this.ntData['metal_type'] = data.rate_field;
                _this.ntData['market_metal_type'] = data.market_rate_field;
                _this.calcSaleValue('');
            }
        });
    };
    AddEstiItemPage.prototype.openMasModal = function (data, master) {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__["a" /* MasSearchPage */], data);
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                if (master == 'Design') {
                    _this.hbData['design_no'] = data.design_no;
                    _this.hbData['design_name'] = data.label;
                    _this.hbdesignSelected();
                }
                else if (master == 'subDesign') {
                    _this.hbData['sub_design_no'] = data.id_sub_design;
                    _this.hbData['sub_design_name'] = data.label;
                }
                else if (master == 'Product') {
                    if (_this.item_type == "non_tag") {
                        _this.ntData['product'] = data.pro_id;
                        _this.ntData['product_name'] = (data.parent_prods_name != null ? data.parent_prods_name + ',' + data.label : data.label);
                        _this.productSelected(data.pro_id);
                    }
                    else {
                        _this.hbData['pro_id'] = data.pro_id;
                        _this.hbData['tax_group_id'] = data.tax_group_id;
                        _this.hbData['tax_percentage'] = data.tax_percentage;
                        _this.hbData['calculation_based_on'] = data.calculation_based_on;
                        // this.hbData['metal_type'] = data.metal_type;
                        _this.hbData['product_name'] = (data.parent_prods_name != null ? data.parent_prods_name + ',' + data.label : data.label);
                        _this.hbProdSelected();
                    }
                }
                else if (master == 'Purity') {
                    _this.hbData['purity'] = data.id_purity;
                    _this.hbData['purname'] = data.label;
                    _this.hbData['metal_type'] = data.rate_field;
                    _this.hbData['market_metal_type'] = data.market_rate_field;
                    _this.calcSaleValue('');
                }
            }
        });
    };
    // ./Home Bill
    // Old Metal
    AddEstiItemPage.prototype.calcOldmetalValue2 = function (changedInput) {
        var _this = this;
        this.omData['other_stone_wt'] = 0;
        this.omData['other_stone_price'] = 0;
        if (changedInput == 'id_category') {
            var cat = this.oldMetalCat.filter(function (i) { return i.id_category == _this.omData['id_category']; });
            this.omData['category'] = cat[0].cat_name;
            var metaltype = this.oldMetalTypes.filter(function (i) { return i.id_metal == _this.omData['id_category']; });
            this.metalCatTypes = metaltype;
            if (this.metalCatTypes.length == 1) {
                this.omData['id_old_metal_type'] = this.metalCatTypes[0]['id_metal_type'];
            }
            else {
                this.omData['id_old_metal_type'] = '';
            }
            //  let metaltype =  this.oldfullrates.filter((i: any) => i.id_metal == this.omData['id_category']);
            // this.oldrates = metaltype;
            // this.oldcategory = [];
            // this.omData['rate']  = 0;
        }
        else if (changedInput == 'id_purpose') {
            this.omData['purpose'] = (this.omData['id_purpose'] == 1 ? "Cash" : "Exchange");
        }
        console.log(this.omData['rate']);
        if (changedInput == 'stone') {
            var stData = this.calcStoneDetail();
            this.omData['other_stone_wt'] = stData['stone_wt'];
            this.omData['other_stone_price'] = stData['stone_price'];
        }
        this.omData['stone_details'] = this.stone_details;
        var gross_wt = this.retail.setAsNumber(this.omData['gross_wt']);
        var dust_wt = this.retail.setAsNumber(this.omData['dust_wt']);
        var stone_wt = this.retail.setAsNumber(this.omData['stone_wt']);
        var other_stone_wt = this.retail.setAsNumber(this.omData['other_stone_wt']);
        var other_stone_price = this.retail.setAsNumber(this.omData['other_stone_price']);
        var rate_per_grm = this.retail.setAsNumber(this.omData['rate']);
        var wast_wgt = this.retail.setAsNumber(this.omData['wastage_wt']);
        var wast_percent = this.retail.setAsNumber(this.omData['wastage']);
        var net_wt = parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt)).toFixed(3));
        console.log(net_wt);
        if (changedInput == 'wastage_wt') {
            // let net_wt 			= parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
            //let wast_percent= ((net_wt * (wast_wgt / 100)));
            var wast_percent_1 = parseFloat((((wast_wgt) * 100) / net_wt).toFixed(3));
            this.omData['wastage'] = wast_percent_1;
            net_wt = parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
            var amount = Math.round((net_wt * rate_per_grm) + (other_stone_price));
            this.omData['net_wt'] = net_wt;
            this.omData['amount'] = amount;
        }
        else {
            var wast_wgt_1 = parseFloat((net_wt * (wast_percent / 100)).toFixed(2));
            this.omData['wastage_wt'] = wast_wgt_1;
            console.log(this.omData['wastage']);
            net_wt = parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt_1)).toFixed(3));
            var amount = Math.round((net_wt * rate_per_grm) + (other_stone_price));
            this.omData['net_wt'] = net_wt;
            this.omData['amount'] = amount;
        }
        // else{
        //   net_wt 			= parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
        //   let amount 	= Math.round((net_wt*rate_per_grm)+(other_stone_price));
        //   this.omData['net_wt']  = net_wt;
        //   this.omData['amount']  = amount;
        // }
        console.log(this.omData);
    };
    AddEstiItemPage.prototype.calcOldmetalValue = function (changedInput) {
        var _this = this;
        //  this.checking();
        this.omData['other_stone_wt'] = 0;
        this.omData['other_stone_price'] = 0;
        if (changedInput == 'id_category') {
            var cat = this.oldMetalCat.filter(function (i) { return i.id_category == _this.omData['id_category']; });
            this.omData['category'] = cat[0].cat_name;
            // let metaltype =  this.oldMetalTypes.filter((i: any) => i.id_metal == this.omData['id_category']);
            // this.metalCatTypes = metaltype;
            var metaltype = this.oldfullrates.filter(function (i) { return i.id_metal == _this.omData['id_category']; });
            this.oldrates = metaltype;
            console.log(this.metalCatTypes);
            this.omData['id_old_metal_type'] = this.oldrates.length > 0 ? this.oldrates[0]['id_metal'] : '';
            metaltype = this.oldfullcategory.filter(function (i) { return i.id_metal == _this.omData['id_old_metal_type']; });
            this.oldcategory = metaltype;
            this.omData['id_old_metal_cat_type'] = this.oldcategory.length > 0 ? this.oldcategory[0]['id_old_metal_cat'] : '';
            // this.oldcategory = [];
            // this.omData['rate']  = 0;
        }
        else if (changedInput == 'id_old_metal_type') {
            console.log(this.oldfullcategory);
            console.log(this.omData['id_old_metal_type']);
            var metaltype = this.oldfullcategory.filter(function (i) { return i.id_metal == _this.omData['id_old_metal_type']; });
            this.oldcategory = metaltype;
            var metaltype1 = this.oldfullrates.filter(function (i) { return i.id_metal == _this.omData['id_category']; });
            this.oldamount = metaltype1[0].rate;
            console.log(this.oldamount);
        }
        else if (changedInput == 'id_old_metal_cat_type') {
            var metaltype = this.oldfullcategory.filter(function (i) { return i.id_old_metal_cat == _this.omData['id_old_metal_cat_type']; });
            this.omData['rate'] = this.oldamount - this.oldamount * metaltype[0].old_metal_perc / 100;
            this.omData['rate'] = Math.round(Math.ceil(this.omData['rate'] / 10)) * 10;
            console.log(this.omData['rate']);
        }
        else if (changedInput == 'id_purpose') {
            this.omData['purpose'] = (this.omData['id_purpose'] == 1 ? "Cash" : "Exchange");
        }
        console.log(this.omData['rate']);
        // if(changedInput == 'stone')
        // {
        var stData = this.calcStoneDetail();
        // this.omData['other_stone_wt'] = stData['stone_wt']; 
        // this.omData['other_stone_price'] = stData['stone_price'];  
        this.omData['stone_price'] = stData['stone_price'];
        this.omData['stone_details'] = this.stone_details;
        this.omData['stone_wt'] = stData['stone_wt'];
        this.omData['other_stone_wt'] = stData['stone_wt'];
        this.omData['other_stone_price'] = stData['stone_price'];
        // }
        this.omData['stone_details'] = this.stone_details;
        var gross_wt = this.retail.setAsNumber(this.omData['gross_wt']);
        var dust_wt = this.retail.setAsNumber(this.omData['dust_wt']);
        var stone_wt = this.retail.setAsNumber(this.omData['stone_wt']);
        var other_stone_wt = this.retail.setAsNumber(this.omData['other_stone_wt']);
        var other_stone_price = this.retail.setAsNumber(this.omData['other_stone_price']);
        var rate_per_grm = this.retail.setAsNumber(this.omData['rate']);
        var wast_wgt = this.retail.setAsNumber(this.omData['wastage_wt']);
        var wast_percent = this.retail.setAsNumber(this.omData['wastage']);
        var net_wt = parseFloat(((gross_wt) - (dust_wt) - (other_stone_wt)).toFixed(3));
        console.log(net_wt);
        if (changedInput == 'wastage_wt') {
            // let net_wt 			= parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
            //let wast_percent= ((net_wt * (wast_wgt / 100)));
            var wast_percent_2 = parseFloat((((wast_wgt) * 100) / net_wt).toFixed(3));
            this.omData['wastage'] = wast_percent_2;
            net_wt = parseFloat(((gross_wt) - (dust_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
            var amount = Math.round((net_wt * rate_per_grm) + (other_stone_price));
            this.omData['net_wt'] = net_wt;
            this.omData['amount'] = amount;
        }
        else {
            var wast_wgt_2 = parseFloat((net_wt * (wast_percent / 100)).toFixed(3));
            this.omData['wastage_wt'] = wast_wgt_2;
            console.log(this.omData['wastage']);
            net_wt = parseFloat(((gross_wt) - (dust_wt) - (other_stone_wt) - (wast_wgt_2)).toFixed(3));
            var amount = Math.round((net_wt * rate_per_grm) + (other_stone_price));
            this.omData['net_wt'] = net_wt;
            this.omData['amount'] = amount;
        }
        // else{
        //   net_wt 			= parseFloat(((gross_wt) - (dust_wt) - (stone_wt) - (other_stone_wt) - (wast_wgt)).toFixed(3));
        //   let amount 	= Math.round((net_wt*rate_per_grm)+(other_stone_price));
        //   this.omData['net_wt']  = net_wt;
        //   this.omData['amount']  = amount;
        // }
        console.log(this.omData);
    };
    // ./Old Metal
    AddEstiItemPage.prototype.addother = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_6__other_other__["a" /* OtherPage */], { "stoneMasData": this.stoneMasData, "action": "add", "stone_details": this.other });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.tagData['othermetal_details'] = data;
                _this.other = data;
                _this.tagData['othermetal_charges'] = 0;
                data.forEach(function (element) {
                    _this.tagData['othermetal_charges'] += element['price'];
                });
                _this.calcSaleValue('');
                console.log(data);
            }
        });
    };
    // Stone Details
    AddEstiItemPage.prototype.addStone = function () {
        var _this = this;
        var gross = 0;
        if (this.item_type == 'old_metal') {
            gross = this.omData['gross_wt'];
        }
        else if (this.item_type == 'home_bill') {
            gross = this.hbData['gross_wt'];
        }
        else if (this.item_type == 'tag') {
            gross = this.tagData['gross_wt'];
        }
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_add_stone_detail_add_stone_detail__["a" /* AddStoneDetailPage */], { "stoneMasData": this.stoneMasData, "action": "add", "stone_details": this.stone_details, "ptype": this.item_type, 'gross': gross });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.stone_details = data;
                if (_this.item_type == 'old_metal') {
                    _this.calcOldmetalValue('');
                }
                else if (_this.item_type == 'home_bill') {
                    _this.hbData['stone_details'] = _this.stone_details;
                    _this.calcSaleValue('');
                }
                else if (_this.item_type == 'tag') {
                    // this.hbData['stone_details'] = this.stone_details;
                    _this.calcSaleValue('');
                }
                console.log(data);
            }
        });
        /*let addRow = true;
        this.stone_details.forEach( i => {
          if(i['stone_id'] == ''){
            addRow = false;
          }
        })
        if(addRow){
          this.stone_details.push({"stone_id" : "", "stone_pcs" : "1", "stone_wt" : "0", "st_price" : "0"});
        }
        else{
          setTimeout(()=>{
            this.stnErrMsg = "Invalid stone detail..";
          },this.common.msgTimeout);
        }
        console.log(this.stone_details) ;*/
    };
    AddEstiItemPage.prototype.deleteStone = function (idx) {
        this.stone_details.splice(idx, 1);
        this.calcOldmetalValue('stone');
    };
    // ./Stone Details
    /*getCatPurities(id_category){
      let loader = this.load.create({
        content: 'Please Wait',
        spinner: 'bubbles',
      });
      loader.present();
      this.retail.getCatPurities(postData).then(data=>{
        loader.dismiss();
      })
    }*/
    AddEstiItemPage.prototype.ionViewDidLoad = function () {
    };
    AddEstiItemPage.prototype.next = function (data) {
        this.homeback = data;
    };
    AddEstiItemPage.prototype.back = function (data) {
        this.homeback = data;
    };
    AddEstiItemPage.prototype.oldnext = function (data) {
        this.oldback = data;
    };
    AddEstiItemPage.prototype.oback = function (data) {
        this.oldback = data;
    };
    AddEstiItemPage.prototype.nnext = function (data) {
        this.nonback = data;
    };
    AddEstiItemPage.prototype.nback = function (data) {
        this.nonback = data;
    };
    AddEstiItemPage.prototype.checkingtagretail_max_wastage_percent = function () {
        if (parseInt(this.tagData['retail_max_wastage_percent']) > 100) {
            this.cd.detectChanges();
            this.tagData['retail_max_wastage_percent'] = '';
            this.tagData['wastage_wt'] = '';
            this.cd.detectChanges();
            this.content.resize();
            this.calcSaleValue('');
        }
        else {
            this.calcSaleValue('');
        }
    };
    AddEstiItemPage.prototype.checkingtagless_wt = function () {
        console.log(parseInt(this.tagData['less_wt']) > parseInt(this.tagData['net_wt']));
        if (parseInt(this.tagData['less_wt']) > parseInt(this.tagData['net_wt'])) {
            this.cd.detectChanges();
            this.tagData['less_wt'] = '';
            this.cd.detectChanges();
            this.content.resize();
            this.calcSaleValue('');
        }
        else {
            this.calcSaleValue('');
        }
    };
    AddEstiItemPage.prototype.checkingnonless_wt = function () {
        var _this = this;
        console.log(parseInt(this.ntData['less_wt']) > parseInt(this.ntData['net_wt']));
        if (parseInt(this.ntData['less_wt']) > parseInt(this.ntData['net_wt'])) {
            this.cd.detectChanges();
            this.ntData['less_wt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.ntData['less_wt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcSaleValue('');
        }
        else {
            this.calcSaleValue('');
        }
    };
    AddEstiItemPage.prototype.checkingnonretail_max_wastage_percent = function () {
        var _this = this;
        if (parseInt(this.ntData['retail_max_wastage_percent']) > 100) {
            this.cd.detectChanges();
            this.ntData['retail_max_wastage_percent'] = '';
            this.ntData['wast_wgt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.ntData['retail_max_wastage_percent'] = '';
                _this.ntData['wast_wgt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcSaleValue('wast');
        }
        else {
            this.calcSaleValue('wast');
        }
    };
    AddEstiItemPage.prototype.checkingnonwast_wgt = function () {
        var _this = this;
        if (parseInt(this.ntData['wast_wgt']) > parseInt(this.ntData['net_wt'])) {
            this.cd.detectChanges();
            this.ntData['retail_max_wastage_percent'] = '';
            this.ntData['wast_wgt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.ntData['retail_max_wastage_percent'] = '';
                _this.ntData['wast_wgt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcSaleValue('wastage_wt');
        }
        else {
            this.calcSaleValue('wastage_wt');
        }
    };
    AddEstiItemPage.prototype.checkinghome = function () {
        var _this = this;
        if (parseInt(this.hbData['wast_wgt']) > parseInt(this.hbData['net_wt'])) {
            this.cd.detectChanges();
            this.hbData['retail_max_wastage_percent'] = '';
            this.hbData['wast_wgt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.hbData['retail_max_wastage_percent'] = '';
                _this.hbData['wast_wgt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcSaleValue('');
        }
        if (parseInt(this.hbData['retail_max_wastage_percent']) > 100) {
            this.cd.detectChanges();
            this.hbData['retail_max_wastage_percent'] = '';
            this.hbData['wast_wgt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.hbData['retail_max_wastage_percent'] = '';
                _this.hbData['wast_wgt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcSaleValue('');
        }
    };
    AddEstiItemPage.prototype.checkingwastage = function () {
        var _this = this;
        if (parseInt(this.omData['wastage']) > 100) {
            this.cd.detectChanges();
            this.omData['wastage'] = '';
            this.omData['wastage_wt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.omData['wastage'] = '';
                _this.omData['wastage_wt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcOldmetalValue('wastage');
        }
        else {
            this.calcOldmetalValue('wastage');
        }
    };
    AddEstiItemPage.prototype.checkingwastage_wt = function () {
        var _this = this;
        if (parseInt(this.omData['wastage_wt']) > parseInt(this.omData['net_wt'])) {
            this.cd.detectChanges();
            this.omData['wastage'] = '';
            this.omData['wastage_wt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.omData['wastage'] = '';
                _this.omData['wastage_wt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcOldmetalValue('wastage_wt');
        }
        else {
            this.calcOldmetalValue('wastage_wt');
        }
    };
    AddEstiItemPage.prototype.checkingstone_wt = function () {
        var _this = this;
        if (parseInt(this.omData['stone_wt']) > parseInt(this.omData['net_wt'])) {
            this.cd.detectChanges();
            this.omData['stone_wt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.omData['stone_wt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcOldmetalValue('stone_wt');
        }
        else {
            this.calcOldmetalValue('stone_wt');
        }
    };
    AddEstiItemPage.prototype.checkingdust_wt = function () {
        var _this = this;
        console.log(parseInt(this.omData['dust_wt']) > parseInt(this.omData['net_wt']));
        if (parseInt(this.omData['dust_wt']) > parseInt(this.omData['net_wt'])) {
            this.cd.detectChanges();
            this.omData['dust_wt'] = '';
            this.cd.detectChanges();
            setTimeout(function () {
                _this.cd.detectChanges();
                _this.omData['dust_wt'] = '';
                _this.cd.detectChanges();
            }, 100);
            this.content.resize();
            this.calcOldmetalValue('dust_wt');
        }
        else {
            this.calcOldmetalValue('dust_wt');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", typeof (_a = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]) === "function" && _a || Object)
    ], AddEstiItemPage.prototype, "content", void 0);
    AddEstiItemPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-add-esti-item',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-esti-item\add-esti-item.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Add Item\n    </ion-title>\n    <ion-buttons end >\n        <button  ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n        <button *ngIf="item_type != \'tag\' && item_type != \'non_tag\' " end ion-button icon-only (click)="clear()"><ion-icon name="trash"></ion-icon></button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n  <!-- <div style="text-align: end;">\n    <button style="    height: 32px;\n    border-radius: 6px;\n    width: 77px;" ion-button color="danger" (click)="clear()"><ion-icon name="trash"></ion-icon>Clear</button>\n\n  </div> -->\n\n   <div *ngIf="item_type == \'tag\'">\n     <!-- <ion-row *ngIf="tagData.image != \'\'">\n      <ion-col offset-4 col-4 align="center">\n        <img src="{{tagData.image}}" imageViewer="{{tagData.image}}" onerror="this.onerror=null;this.src=\'assets/no-img.png\';">\n      </ion-col>\n     </ion-row> -->\n     <ion-row>\n      <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">    -->\n         <!-- <ion-item no-padding>  -->\n            <!-- <ion-label color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n            <ion-input type="text" [(ngModel)]="tagData[\'tag_code\']"></ion-input> \n            <button item-right ion-button margin-top color="light" (click)="getTagData(tagData[\'tag_code\'])"><ion-icon name="ios-search"></ion-icon></button> -->\n            <!-- <ion-label style="margin-bottom: 5px;" color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n            <div class="row">\n              <div class="col" col-3 style="margin: auto;" >\n                <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" id="one1" type="text"   [(ngModel)]="tagData[\'tag_code1\']" onKeyPress="if(this.value.length==7) return false;" (ngModelChange)="append()" >\n\n                </div>\n                <div class="col" col-1 style="margin: auto;font-weight: bold;">\n                  <hr>\n                  </div>\n\n                <div class="col" col-6 style="margin: auto;" >\n                  <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" id="two1" type="number"  [(ngModel)]="tagData[\'tag_code2\']" onKeyPress="if(this.value.length==5) return false;" (ngModelChange)="append()" > \n\n                </div>\n                <div class="col" style="margin: auto;" col-2>\n                  <button style="" item-right ion-button  color="light" (click)="getTagData(tagData[\'tag_code\'])"><ion-icon name="ios-search"></ion-icon></button>\n\n                </div>\n            </div> -->\n            <!-- </ion-item> -->\n      <!-- </ion-col> -->\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" *ngIf="ret_settings.collections_required == 1">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Collection</ion-label>\n          <ion-input type="text" [(ngModel)]="tagData[\'collection_name\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Product</ion-label>\n           <ion-input type="text" [(ngModel)]="tagData[\'product_name\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Order No</ion-label>\n           <ion-input type="text" [(ngModel)]="tagData[\'order_no\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Purity</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'purname\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Size</ion-label>\n           <ion-input type="text" [(ngModel)]="tagData[\'size\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Pieces</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'piece\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item  no-lines>\n           <ion-label color="label-color" stacked>Partly Sale <span class="required">*</span></ion-label>\n           <ion-checkbox [(ngModel)]="tagData[\'is_partial\']" (ionChange)="partlySale()"></ion-checkbox>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Gross Wgt(g) <span class="required">*</span></ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'gross_wt\']" (ionChange)="calcSaleValue()" [readonly]="!tagData[\'is_partial\'] || tagData[\'is_partial\'] == 0"></ion-input>\n         </ion-item>\n         <p align="right" *ngIf="tagData[\'is_partial\']" class="input-err">{{tagData[\'actual_gross_wt\']}}</p>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n          <ion-label color="label-color" stacked>Less Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="tagData[\'less_wt\']" (ngModelChange)="checkingtagless_wt()" readonly></ion-input>\n         </ion-item>\n         <p align="right" *ngIf="tagData[\'is_partial\']" class="input-err">{{tagData[\'actual_less_wt\']}}</p>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Net Wgt(g) <span class="required">*</span></ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'net_wt\']" readonly></ion-input>\n         </ion-item>\n         <p align="right" *ngIf="tagData[\'is_partial\']" class="input-err">{{tagData[\'actual_net_wt\']}}</p>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Wast %</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'retail_max_wastage_percent\']" (ngModelChange)="checkingtagretail_max_wastage_percent()"></ion-input>\n         </ion-item>\n         <p align="right"  class="input-err">Min :{{tagData[\'checkwas\']}}%</p>\n\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Wast Wgt(g)</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'wast_wgt\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Total MC()</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'mc_value\']" (ngModelChange)="calcSaleValue()"></ion-input>\n         </ion-item>\n      </ion-col>\n      <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Charges Amount()</ion-label>\n          <ion-input type="number" [(ngModel)]="tagData[\'charge_value\']" readonly></ion-input>\n        </ion-item>\n     </ion-col> -->\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Taxable Amount()</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'taxable\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>GST()</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'tax_price\']" readonly></ion-input>\n         </ion-item>\n      </ion-col>\n      <ion-col col-12 col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">\n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Amount()</ion-label>\n           <ion-input type="number" [(ngModel)]="tagData[\'sales_value\']" readonly></ion-input>\n         </ion-item>\n       </ion-col>\n     </ion-row>\n   </div>\n   <div *ngIf="item_type == \'non_tag\'">\n     <ion-row *ngIf="nonback == false">\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" *ngIf="ret_settings.collections_required == 1">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Collection <span class="required"> *</span></ion-label>\n            <ion-select [(ngModel)]="ntData[\'collection\']" placeholder="Collection" (ionChange)="collectionSelected(ntData[\'collection\'])">\n              <ion-option *ngFor="let c of nonTagStock.collections" [value]="c.id_collection">{{c.collection_name}}</ion-option>\n            </ion-select>\n          </ion-item>\n        </ion-col> \n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">\n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Product <span class="required"> *</span></ion-label>\n            <ion-select *ngIf="ret_settings.subproduct_required == 0" [(ngModel)]="ntData[\'product\']" placeholder="Product" (ngModelChange)="productSelected(ntData[\'product\'])">\n              <ion-option *ngFor="let p of products" [value]="p.pro_id">{{p.product_name}}</ion-option>\n            </ion-select>\n            <ion-input *ngIf="ret_settings.subproduct_required == 1" type="text" [(ngModel)]="ntData[\'product_name\']" readonly (click)="openMasSearch(\'Product\')"></ion-input>\n            <button *ngIf="ret_settings.subproduct_required == 1" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openMasSearch(\'Product\')" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n          </ion-item>\n        </ion-col> \n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Design <span class="required"> *</span></ion-label>\n           <ion-select [(ngModel)]="ntData[\'design\']" placeholder="Design" (ngModelChange)="setNTitemData(ntData[\'design\'])">\n             <ion-option *ngFor="let d of designs" [value]="d.design_no">{{d.design_name}}</ion-option>\n           </ion-select>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Purity</ion-label>\n            <ion-input  type="text" [(ngModel)]="ntData[\'purname\']" [readonly] (click)="opennon()"></ion-input> \n            <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="opennon()" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n          </ion-item>\n        </ion-col>\n         <!-- <ion-item no-padding>\n           <ion-label color="label-color" stacked>Purity</ion-label>\n           <ion-select [(ngModel)]="ntData[\'purity\']" placeholder="Purity">\n             <ion-option *ngFor="let purity of purities" [value]="purity">{{purity}}</ion-option>\n           </ion-select>\n         </ion-item> -->\n        \n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n          <ion-label color="label-color" stacked> <span class="required">Available Gross Wgt(g)</span></ion-label>\n          <ion-input type="number" [(ngModel)]="selectedNTStock[\'gross_wt\']" disabled></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Gross Wgt(g) <span class="required">*</span></ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'gross_wt\']" (ionChange)="calcSaleValue()"></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Less Wgt(g)</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'less_wt\']" (ionChange)="checkingnonless_wt()"></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Net Wgt(g) <span class="required">*</span></ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'net_wt\']" readonly></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Wast %</ion-label>\n            <ion-input type="number" [(ngModel)]="ntData[\'retail_max_wastage_percent\']" (ionChange)="checkingnonretail_max_wastage_percent(\'wast\')"></ion-input>\n          </ion-item>\n         </ion-col>\n         <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Wast Wgt(g)</ion-label>\n            <ion-input type="number" [(ngModel)]="ntData[\'wast_wgt\']" (ionChange)="checkingnonwast_wgt(\'wastage_wt\')"></ion-input>\n          </ion-item>\n         </ion-col>\n\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" style="text-align: end;">   \n          <button [disabled]=" ntData[\'net_wt\'] == \'\' ||  ntData[\'design\'] == \'\' ||  ntData[\'gross_wt\'] == \'\' ||  ntData[\'design\'] == undefined ||  ntData[\'net_wt\'] == undefined ||  ntData[\'gross_wt\'] == undefined" *ngIf="nonback == false" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="nnext(true)" >Next<ion-icon name="arrow-forward"></ion-icon></button>\n      </ion-col>\n        </ion-row>\n        <ion-row *ngIf="nonback == true">\n          <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n\n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Size</ion-label>\n            <ion-input type="number" [(ngModel)]="ntData[\'size\']"></ion-input>\n          </ion-item>\n         </ion-col>\n         <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Pieces</ion-label>\n            <ion-input type="number" [(ngModel)]="ntData[\'piece\']" [value]=1></ion-input>\n          </ion-item>\n         </ion-col>\n\n        \n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>MC Type</ion-label>\n           <ion-select interface="popover" [(ngModel)]="ntData[\'mc_type\']" placeholder="MC Type" (ionChange)="calcSaleValue()">\n             <ion-option [value]="1">Piece</ion-option>\n             <ion-option [value]="2">Gram</ion-option>\n           </ion-select>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>MC Value</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'mc_value\']" (ionChange)="calcSaleValue()"></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Total MC()</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'making_charge\']" readonly></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Taxable Amount()</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'taxable\']" [readonly]="ntData[\'calculation_based_on\'] != 3" (ngModelChange)="calcSaleValue()"></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>GST()</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'tax_price\']" readonly></ion-input>\n         </ion-item>\n        </ion-col>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n         <ion-item no-padding>\n           <ion-label color="label-color" stacked>Amount()</ion-label>\n           <ion-input type="number" [(ngModel)]="ntData[\'sales_value\']" readonly></ion-input>\n         </ion-item>\n        </ion-col>\n\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <button *ngIf="nonback == true" item-left ion-button clear color="dark" class="no-padding no-margin" (click)="nback(false)" ><ion-icon name="arrow-back"></ion-icon>Back</button>\n      </ion-col>\n     </ion-row>\n   </div>\n   <!-- ./ Non Tag -->\n\n   <!-- Home Bill -->\n   <div *ngIf="item_type == \'home_bill\'">\n    <ion-row *ngIf="homeback == false">\n\n      <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-lines>\n            <ion-label color="label-color" stacked>Is Partly Sold</ion-label>\n            <ion-checkbox [(ngModel)]="hbData[\'is_partly_sold\']" (ionChange)="hbIsPartlySold(hbData[\'is_partly_sold\'])"></ion-checkbox>\n        </ion-item>\n      </ion-col> -->\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col"  *ngIf="hbData[\'is_partly_sold\']">   \n        <!-- <ion-item no-padding> -->\n          <!-- <ion-label color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n          <ion-input type="text" [(ngModel)]="hbData[\'tag_code\']"></ion-input>\n          <button item-right color="primary" (tap)="getHomeStockByTag(hbData[\'tag_code\'])"><ion-icon name="ios-search"></ion-icon></button>\n        -->\n        <ion-label color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n\n        <div class="row">\n          <div class="col" col-3 style="margin: auto;" >\n            <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" id="one2" type="text"  [(ngModel)]="hbData[\'tag_code1\']" onKeyPress="if(this.value.length==7) return false;" (ngModelChange)="append()" >\n\n            </div>\n            <div class="col" col-1 style="margin: auto;font-weight: bold;">\n              <hr>\n            </div>\n\n            <div class="col" col-6 style="margin: auto;" >\n              <input  style="    border: 1px solid lightgray;height: 40px;width: -webkit-fill-available;" id="two2" type="number"  [(ngModel)]="hbData[\'tag_code2\']" onKeyPress="if(this.value.length==5) return false;" (ngModelChange)="append()" > \n\n            </div>\n            <div class="col" style="margin: auto;" col-2>\n              <button style="" item-right ion-button  color="light" (tap)="getHomeStockByTag(hbData[\'tag_code\'])"><ion-icon name="ios-search"></ion-icon></button>\n\n            </div>\n        </div>\n          <!-- </ion-item> -->\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" *ngIf="ret_settings.collections_required == 1">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Collection <span class="required"> *</span></ion-label>\n          <ion-select [(ngModel)]="hbData[\'collection\']" placeholder="Collection" *ngIf="!hbData[\'is_partly_sold\']">\n            <ion-option *ngFor="let c of collections" [value]="c.id_collection">{{c.collection_name}}</ion-option>\n          </ion-select>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'collection\']" readonly></ion-input>\n        </ion-item>\n      </ion-col> \n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Product</ion-label>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'product_name\']" readonly></ion-input>\n          <ion-input *ngIf="!hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'product_name\']" [readonly] (click)="openMasSearch(\'Product\')"></ion-input>\n          <button *ngIf="!hbData[\'is_partly_sold\']" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openMasSearch(\'Product\')" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Design</ion-label>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'design_name\']" readonly></ion-input>\n          <ion-input *ngIf="!hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'design_name\']" [readonly] (click)="openMasSearch(\'Design\')"></ion-input> \n          <button *ngIf="!hbData[\'is_partly_sold\']" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openMasSearch(\'Design\')" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n        </ion-item>\n      </ion-col>\n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Sub Design</ion-label>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'sub_design_name\']" readonly></ion-input>\n          <ion-input *ngIf="!hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'sub_design_name\']" [readonly] (click)="openMasSearch(\'subDesign\')"></ion-input> \n          <button *ngIf="!hbData[\'is_partly_sold\']" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openMasSearch(\'subDesign\')" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n        </ion-item>\n      </ion-col>\n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Gross Wgt(g) <span class="required">*</span></ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'gross_wt\']" step="0.0001" (ionChange)="calcSaleValue()"></ion-input>\n          <p class="input-err">Stock :{{hbData.stock_gross_wt}}</p>\n        </ion-item> \n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Less Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'less_wt\']" (ionChange)="calcSaleValue()" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Net Wgt(g) <span class="required">*</span></ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'net_wt\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      \n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Purity <span class="required">*</span></ion-label>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'purname\']" readonly></ion-input>\n          <ion-input *ngIf="!hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'purname\']" [readonly] (click)="openMasSearch(\'Purity\')"></ion-input> \n          <button *ngIf="!hbData[\'is_partly_sold\']" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openMasSearch(\'Purity\')" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n        </ion-item>\n      </ion-col>\n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Size</ion-label>\n          <ion-input type="text" [(ngModel)]="hbData[\'size\']" [readonly]="hbData[\'is_partly_sold\']"></ion-input>\n        </ion-item>\n      </ion-col>\n    \n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Other Charges</ion-label>\n          <ion-select  [(ngModel)]="hbData[\'id_charge\']" (ngModelChange)="checkcode()"  placeholder="Charges" >\n              <ion-option *ngFor="let b of hbData[\'allcharges\']" [value]="b[\'id_charge\']">{{b[\'code_charge\']}}</ion-option>\n          </ion-select>\n      </ion-item> \n      </ion-col>\n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" style="text-align: end;">   \n          <button [disabled]="hbData[\'gross_wt\'] == \'\' ||  hbData[\'net_wt\'] == \'\' || hbData[\'purname\'] == \'\' ||   hbData[\'gross_wt\'] == undefined ||  hbData[\'net_wt\'] == undefined ||  hbData[\'purname\'] == undefined" *ngIf="homeback == false" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="next(true)" >Next<ion-icon name="arrow-forward"></ion-icon></button>\n      </ion-col>\n     </ion-row>\n\n      <ion-row *ngIf="homeback == true">\n\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Pieces</ion-label>\n            <ion-input type="number" [(ngModel)]="hbData[\'piece\']" [value]=1 [readonly]="hbData[\'is_partly_sold\']"></ion-input>\n          </ion-item>\n        </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Wast %</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'retail_max_wastage_percent\']" (ngModelChange)="calcSaleValue(\'wast\')" [readonly]="hbData[\'is_partly_sold\']"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Wast Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'wast_wgt\']" (ngModelChange)="calcSaleValue(\'wastage_wt\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>MC Type</ion-label>\n          <ion-select interface="popover" [(ngModel)]="hbData[\'mc_type\']" placeholder="MC Type" (ionChange)="calcSaleValue()" *ngIf="!hbData[\'is_partly_sold\']">\n            <ion-option [value]="1">Piece</ion-option>\n            <ion-option [value]="2">Gram</ion-option>\n            <ion-option [value]="3">Percentage</ion-option>\n\n          </ion-select>\n          <ion-input *ngIf="hbData[\'is_partly_sold\']" type="text" [(ngModel)]="hbData[\'mc_type\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>MC Value</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'mc_value\']" (ionChange)="calcSaleValue()" [readonly]="hbData[\'is_partly_sold\']"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Total MC()</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'making_charge\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Taxable Amount()</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'taxable\']" (ngModelChange)="calcSaleValue()" [readonly]="hbData[\'calculation_based_on\'] != 3"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>GST()</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'tax_price\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Amount()</ion-label>\n          <ion-input type="number" [(ngModel)]="hbData[\'sales_value\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n\n      \n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n          <button *ngIf="homeback == true" item-left ion-button clear color="dark" class="no-padding no-margin" (click)="back(false)" ><ion-icon name="arrow-back"></ion-icon>Back</button>\n      </ion-col>\n    </ion-row>\n  </div>\n   <!-- Home Bill -->\n   <!-- Old Metal -->\n   <div *ngIf="item_type == \'old_metal\'">\n    <ion-row *ngIf="oldback == false">\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Metal<span class="required"> *</span></ion-label>\n          <ion-select interface="popover" [(ngModel)]="omData[\'id_category\']" (ionChange)="calcOldmetalValue(\'id_category\')" placeholder="Metal">\n            <ion-option *ngFor="let m of oldMetalCat" [value]="m.id_category">{{m.cat_name}}</ion-option>\n          </ion-select>\n        </ion-item>\n      </ion-col>\n      <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Metal Type<span class="required"> *</span></ion-label>\n          <ion-select interface="popover" [(ngModel)]="omData[\'id_old_metal_type\']" (ionChange)="calcOldmetalValue(\'id_old_metal_type\')" placeholder="Type">\n            <ion-option *ngFor="let c of metalCatTypes" [value]="c.id_metal_type">{{c.metal_type}}</ion-option>\n          </ion-select>\n        </ion-item>\n      </ion-col> -->\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col"> \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Metal Type<span class="required"> *</span></ion-label>\n          <ion-select [(ngModel)]="omData[\'id_old_metal_type\']" (ionChange)="calcOldmetalValue(\'id_old_metal_type\')" placeholder="Type">\n            <ion-option *ngFor="let c of oldrates" [value]="c.id_metal">{{c.metal}}</ion-option>\n          </ion-select>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Metal Category Type<span class="required"> *</span></ion-label>\n          <ion-select [(ngModel)]="omData[\'id_old_metal_cat_type\']" (ionChange)="calcOldmetalValue(\'id_old_metal_cat_type\')" placeholder="Type">\n            <ion-option *ngFor="let c of oldcategory" [value]="c.id_old_metal_cat">{{c.old_metal_cat}}</ion-option>\n          </ion-select>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Purpose <span class="required"> * </span></ion-label>\n          <ion-select interface="popover" [(ngModel)]="omData[\'id_purpose\']" (ionChange)="calcOldmetalValue(\'id_purpose\')" placeholder="Purpose" >\n            <ion-option [value]="1">Cash</ion-option>\n            <ion-option [value]="2">Exchange</ion-option>\n          </ion-select>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Gross Wgt(g) <span class="required">*</span></ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'gross_wt\']" (ngModelChange)="calcOldmetalValue(\'gross_wt\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Dust Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'dust_wt\']" (ngModelChange)="checkingdust_wt(\'dust_wt\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Pcs</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'old_pcs\']" ></ion-input>\n        </ion-item>\n      </ion-col>\n    \n     \n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col" style="text-align: end;">   \n        <button [disabled]="omData[\'id_category\'] == \'\' ||  omData[\'id_old_metal_type\'] == \'\' ||  omData[\'id_old_metal_cat_type\'] == \'\' ||  omData[\'id_purpose\'] == \'\' ||  omData[\'gross_wt\'] == \'\' || omData[\'id_category\'] == undefined ||  omData[\'id_old_metal_type\'] == undefined ||  omData[\'id_old_metal_cat_type\'] == undefined ||  omData[\'id_purpose\'] == undefined ||  omData[\'gross_wt\'] == undefined" *ngIf="oldback == false" item-right ion-button clear color="dark" class="no-padding no-margin" (click)="oldnext(true)" >Next<ion-icon name="arrow-forward"></ion-icon></button>\n    </ion-col>\n    </ion-row>\n    <ion-row *ngIf="oldback == true">\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Stone Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'stone_wt\']" (ngModelChange)="checkingstone_wt(\'stone_wt\')" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Purity <span class="required"> *</span></ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'purity\']" ></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Wast %</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'wastage\']" (ngModelChange)="checkingwastage(\'wastage\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Wast Wgt(g)</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'wastage_wt\']" (ngModelChange)="checkingwastage_wt(\'wastage_wt\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Net Wgt(g) <span class="required">*</span></ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'net_wt\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Rate() <span class="required">*</span></ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'rate\']" (ngModelChange)="calcOldmetalValue(\'rate\')"></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Amount()</ion-label>\n          <ion-input type="number" [(ngModel)]="omData[\'amount\']" readonly></ion-input>\n        </ion-item>\n      </ion-col>\n      <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n        <button *ngIf="oldback == true" item-left ion-button clear color="dark" class="no-padding no-margin" (click)="oback(false)" ><ion-icon name="arrow-back"></ion-icon>Back</button>\n    </ion-col>\n    </ion-row>\n  </div>\n   <!-- Old Metal -->\n   <!-- <div margin-top *ngIf="item_type == \'tag\'">\n    <ion-row>\n      <ion-col style="margin: auto" col-8>\n         <h5>Other Metal Detail</h5>\n      </ion-col>\n      <ion-col col-4>\n        <div float-right>\n            <button *ngIf="other.length == 0" ion-button icon-start outline small color="dark" (click)="addother()">\n              <ion-icon name="ios-add"></ion-icon>\n              Add\n            </button>\n            <button *ngIf="other.length != 0" ion-button icon-start outline small color="dark" (click)="addother()">\n              <ion-icon name="edit"></ion-icon>\n              Update\n            </button>\n        </div>\n      </ion-col>\n    </ion-row>\n    </div> -->\n\n  <div margin-top *ngIf="item_type == \'home_bill\' || item_type == \'old_metal\' || (item_type == \'tag\' && tagData[\'calculation_based_on\'] != 3)">\n    <ion-row>\n      <ion-col col-8>\n         <h5>Stone Detail</h5>\n      </ion-col>\n      <ion-col col-4>\n        <div float-right>\n            <button *ngIf="stone_details.length == 0" ion-button icon-start outline small color="dark" (click)="addStone()">\n              <ion-icon name="ios-add"></ion-icon>\n              Add\n            </button>\n            <button *ngIf="stone_details.length != 0" ion-button icon-start outline small color="dark" (click)="addStone()">\n              <ion-icon name="edit"></ion-icon>\n              Update\n            </button>\n        </div>\n      </ion-col>\n    </ion-row>\n    <!-- <ion-card class="errorMsg" padding *ngIf="stnErrMsg">\n        {{stnErrMsg}}\n    </ion-card> -->\n    <!-- <ion-list >\n      <div *ngFor="let st of stone_details; let i=index"  style="font-size:smaller">\n        <ion-row>\n          <ion-col col-3>\n            <ion-item no-padding>\n              <ion-label color="label-color" stacked>Stone <span class="required"> *</span></ion-label>\n              <ion-select [(ngModel)]="st[\'stone_id\']" placeholder="Stone" >\n                <ion-option *ngFor="let s of stones" [value]="s.stone_id">{{s.stone_name}}</ion-option>\n              </ion-select>\n            </ion-item>\n          </ion-col>\n          <ion-col col-2>\n            <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pieces</ion-label>\n              <ion-input type="number" [(ngModel)]="st[\'stone_pcs\']" [value] = "1"></ion-input>\n            </ion-item>\n          </ion-col>\n          <ion-col col-3>\n            <ion-item no-padding>\n              <ion-label color="label-color" stacked>Weight(g) <span class="required"> *</span></ion-label>\n              <ion-input type="number" [(ngModel)]="st[\'stone_wt\']" [value] = "0" (ionChange) = "calcOldmetalValue(\'stone\')"></ion-input>\n            </ion-item>\n          </ion-col>\n          <ion-col col-3>\n            <ion-item no-padding>\n              <ion-label color="label-color" stacked>Price() <span class="required"> *</span></ion-label>\n              <ion-input type="number" [(ngModel)]="st[\'stone_price\']" [value] = "0" (ionChange) = "calcOldmetalValue(\'stone\')"></ion-input>\n            </ion-item>\n          </ion-col>\n          <ion-col col-1>\n              <button margin-top ion-button small color="danger" outline (click)="deleteStone(i)"><ion-icon name="trash"></ion-icon></button>\n          </ion-col>\n        </ion-row> \n      </div>\n    </ion-list> -->\n  </div>\n\n\n\n  \n</ion-content>\n<ion-footer>\n    <ion-row *ngIf="action == \'add\'">\n      <ion-col col-6>\n        <button ion-button icon-start full color="primary" (click)="addItem(\'S\')">Save</button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button icon-start full color="secondary" (click)="addItem(\'SN\')">Save & New</button>\n      </ion-col>\n    </ion-row>\n    <ion-row *ngIf="action == \'edit\'">\n      <ion-col col-12>\n        <button ion-button icon-start full color="primary" [disabled]="terrorMsg != \'\' " (click)="updateItem(\'S\')">Update</button>\n      </ion-col>\n    </ion-row>\n</ion-footer>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-esti-item\add-esti-item.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [typeof (_b = typeof __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */]) === "function" && _b || Object, typeof (_c = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */]) === "function" && _c || Object, typeof (_d = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */]) === "function" && _d || Object, typeof (_e = typeof __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]) === "function" && _e || Object, typeof (_f = typeof __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]) === "function" && _f || Object, typeof (_g = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */]) === "function" && _g || Object, typeof (_h = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]) === "function" && _h || Object, typeof (_j = typeof __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */] !== "undefined" && __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]) === "function" && _j || Object])
    ], AddEstiItemPage);
    return AddEstiItemPage;
    var _a, _b, _c, _d, _e, _f, _g, _h, _j;
}());

//# sourceMappingURL=add-esti-item.js.map

/***/ }),

/***/ 179:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CusupdatePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__ = __webpack_require__(106);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/*
  Generated class for the Register page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var CusupdatePage = /** @class */ (function () {
    function CusupdatePage(navparam, datePicker, platform, builder, nav, events, menu, commonservice, toastCtrl, loadingCtrl, event, modal, common) {
        var _this = this;
        this.navparam = navparam;
        this.datePicker = datePicker;
        this.platform = platform;
        this.builder = builder;
        this.nav = nav;
        this.events = events;
        this.menu = menu;
        this.commonservice = commonservice;
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.type = "p";
        this.count = 0;
        this.animateClass = { 'zoom-in': true };
        this.countries = [];
        this.states = [];
        this.cities = [];
        this.submitted = false;
        this.isDisabled = false;
        this.errorMessage = '';
        this.typechecknew = 'password';
        this.showPassnew = false;
        this.typecheckconfirm = 'password';
        this.showPassconfirm = false;
        this.reg = /^[a-zA-Z ]*$/;
        this.emailPattern = "^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$";
        this.gstPattern = "^([0-9]{2}[a-zA-Z]{4}([a-zA-Z]{1}|[0-9]{1})[0-9]{4}[a-zA-Z]{1}([a-zA-Z]|[0-9]){3}){0,15}$";
        this.panPattern = "^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$";
        this.votterPattern = "^([a-zA-Z]){3}([0-9]){7}?$";
        this.rationPattern = "^([a-zA-Z0-9]){8,12}\s*$";
        this.pwd = false;
        this.accept = false;
        this.deviceid = JSON.parse(localStorage.getItem('DeviceData'));
        this.branch_name = '';
        this.branchid = '';
        this.branch_settings = '';
        this.is_branchwise_cus_reg = '';
        this.id_branch = '';
        this.details = { 'countryname': '', 'id_country': '', 'statename': '', 'id_state': '', 'cityname': '', 'id_city': '' };
        this.country = [];
        this.state = [];
        this.city = [];
        this.village = [];
        this.address1 = '';
        this.address2 = '';
        this.pincode = [];
        // religion: any = [];
        this.gender = [];
        this.cus_type = [];
        this.active = [];
        // date_of_birth: any = [];
        // date_of_wed: any = [];
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.typec = '';
        this.searchdata = '';
        this.selected = 0;
        this.showinput = false;
        console.log(this.empData);
        console.log(this.empData['id_branch']);
        this.nav = nav;
        this.menu = menu;
        this.platform = platform;
        this.registerForm = builder.group({
            'firstname': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required])],
            'relation_name': [''],
            'relation_type': [''],
            'mobile': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(10), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(10)])],
            'email': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.emailPattern)])],
            // 'passwd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            // 'cpasswd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            'address1': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required]), this.address1 != null ? this.address1['address1'] : null],
            'address2': this.address2 != null ? this.address1['address2'] : null,
            'pincode': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(6)]), this.pincode != null ? this.pincode['pincode'] : null],
            'religion': this.religion != null ? this.religion['religion'] : null,
            'gender': this.gender != null ? this.gender['gender'] : null,
            'cus_type': this.cus_type != null ? this.cus_type['cus_type'] : null,
            'active': this.active != null ? this.active['active'] : null,
            'date_of_birth': this.date_of_birth != null ? this.date_of_birth['date_of_birth'] : null,
            'date_of_wed': this.date_of_wed != null ? this.date_of_wed['date_of_wed'] : null,
            'countryname': this.details['countryname'],
            'id_country': this.details['id_country'],
            'statename': this.details['statename'],
            'id_state': this.details['id_state'],
            'cityname': this.details['cityname'],
            'id_city': this.details['id_city'],
            'id_customer': this.navparam.get('id'),
            // 'village_name': ['', this.village_name != null ? this.village_name['village_name'] : null],
            // 'id_village': this.details['id_village'],
            //  'branchname': ['', Validators.compose([Validators.required]), this.branchname != null ? this.branchname['branchname'] : null],
            'id_branch': this.empData['id_branch'] != null ? this.empData['id_branch'] : null,
            'id_employee': this.empData['emp_code'],
            // 'nominee_name': this.nominee_name != null ? this.nominee_name['nominee_name'] : null,
            // 'nominee_relationship': this.nominee_relationship != null ? this.nominee_relationship['nominee_relationship'] : null,
            // 'nominee_mobile': this.nominee_mobile != null ? this.nominee_mobile['nominee_mobile'] : null,
            'company_name': this.company_name != null ? this.company_name['company_name'] : null,
            'gst_number': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]), this.gst_number != null ? this.gst_number['gst_number'] : null],
            // 'gst_number': ['',this.gst_number != null ? this.gst_number['gst_number'] : null],
            'pan': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.panPattern)]), this.pan != null ? this.pan['pan'] : null],
            // 'voterid': ['', Validators.compose([ Validators.pattern(this.votterPattern)]),this.voterid != null ? this.voterid['voterid'] : null],
            // 'rationcard': ['', Validators.compose([ Validators.pattern(this.rationPattern)]),this.rationcard != null ? this.rationcard['rationcard'] : null],
            //'pan': this.pan != null ? this.pan['pan'] : null,
            // 'voterid': this.voterid != null ? this.voterid['voterid'] : null,
            //'rationcard': this.rationcard != null ? this.rationcard['rationcard'] : null,
            // 'comments': this.comments != null ? this.comments['comments'] : null,
            'marital_status': this.marital_status != null ? this.marital_status['marital_status'] : null,
            'spouse_name': this.spouse_name != null ? this.spouse_name['spouse_name'] : null,
            'spouse_dob': this.spouse_dob != null ? this.spouse_dob['spouse_dob'] : null,
            //  'spouse_wed': this.spouse_wed != null ? this.spouse_wed['spouse_wed'] : null,
            'childrendata': new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
        });
        //  this.add();
        this.firstname = this.registerForm.controls['firstname'];
        this.relation_name = this.registerForm.controls['relation_name'];
        this.relation_type = this.registerForm.controls['relation_type'];
        this.mobile = this.registerForm.controls['mobile'];
        this.email = this.registerForm.controls['email'];
        // this.passwd = this.registerForm.controls['passwd'];
        // this.cpasswd = this.registerForm.controls['cpasswd'];
        this.address1 = this.registerForm.controls['address1'];
        this.address2 = this.registerForm.controls['address2'];
        this.pincode = this.registerForm.controls['pincode'];
        this.religion = this.registerForm.controls['religion'];
        this.gender = this.registerForm.controls['gender'];
        this.cus_type = this.registerForm.controls['cus_type'];
        this.active = this.registerForm.controls['active'];
        this.date_of_birth = this.registerForm.controls['date_of_birth'];
        this.date_of_wed = this.registerForm.controls['date_of_wed'];
        this.countryname = this.registerForm.controls['countryname'];
        this.statename = this.registerForm.controls['statename'];
        this.cityname = this.registerForm.controls['cityname'];
        // this.village_name = this.registerForm.controls['village_name'];
        this.id_country = this.registerForm.controls['id_country'];
        this.id_state = this.registerForm.controls['id_state'];
        this.id_city = this.registerForm.controls['id_city'];
        // this.id_village = this.registerForm.controls['id_village'];
        // this.branchname = this.registerForm.controls['branchname'];
        this.id_branch = this.empData['id_branch'];
        // this.nominee_name = this.registerForm.controls['nominee_name'];
        // this.nominee_relationship = this.registerForm.controls['nominee_relationship'];
        // this.nominee_mobile = this.registerForm.controls['nominee_mobile'];
        this.company_name = this.registerForm.controls['company_name'];
        // this.nominee_name = this.registerForm.controls['nominee_name'];
        this.gst_number = this.registerForm.controls['gst_number'];
        this.pan = this.registerForm.controls['pan'];
        // this.voterid = this.registerForm.controls['voterid'];
        // this.rationcard = this.registerForm.controls['rationcard'];
        // this.comments = this.registerForm.controls['comments'];
        this.marital_status = this.registerForm.controls['marital_status'];
        this.spouse_name = this.registerForm.controls['spouse_name'];
        this.spouse_dob = this.registerForm.controls['spouse_dob'];
        //  this.spouse_wed = this.registerForm.controls['spouse_wed'];
        this.registerForm.get("marital_status").valueChanges.subscribe(function (selectedValue) {
            console.log(' changed');
            _this.onSelectChange(selectedValue);
            console.log(selectedValue);
        });
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getcountry().then(function (data) {
            _this.country = data;
            _this.commonservice.getcustomer({ 'id_cus': _this.navparam.get('id') }).then(function (res) {
                _this.registerForm.controls['firstname'].setValue(res['cusdetails']['firstname']);
                _this.registerForm.controls['relation_name'].setValue(res['cusdetails']['relation_name']);
                _this.registerForm.controls['relation_type'].setValue(res['cusdetails']['relation_type']);
                _this.registerForm.controls['email'].setValue(res['cusdetails']['email']);
                _this.registerForm.controls['mobile'].setValue(res['cusdetails']['mobile']);
                _this.registerForm.controls['address1'].setValue(res['cusdetails']['address1']);
                _this.registerForm.controls['address2'].setValue(res['cusdetails']['address2']);
                _this.registerForm.controls['pincode'].setValue(res['cusdetails']['pincode']);
                _this.registerForm.controls['cus_type'].setValue(res['cusdetails']['cus_type']);
                _this.registerForm.controls['active'].setValue(res['cusdetails']['active']);
                _this.registerForm.controls['countryname'].setValue(res['cusdetails']['country']);
                _this.registerForm.controls['statename'].setValue(res['cusdetails']['state']);
                _this.registerForm.controls['cityname'].setValue(res['cusdetails']['city']);
                _this.registerForm.controls['id_country'].setValue(res['cusdetails']['id_country']);
                _this.registerForm.controls['id_state'].setValue(res['cusdetails']['id_state']);
                _this.registerForm.controls['id_city'].setValue(res['cusdetails']['id_city']);
                _this.registerForm.controls['gst_number'].setValue(res['cusdetails']['gst_number']);
                _this.registerForm.controls['pan'].setValue(res['cusdetails']['pan']);
                _this.registerForm.controls['gender'].setValue(res['cusdetails']['gender']);
                _this.registerForm.controls['spouse_name'].setValue(res['cusdetails']['spouse_name']);
                _this.registerForm.controls['spouse_dob'].setValue(res['cusdetails']['spouse_dob']);
                _this.registerForm.controls['date_of_birth'].setValue(res['cusdetails']['date_of_birth']);
                _this.registerForm.controls['date_of_wed'].setValue(res['cusdetails']['date_of_wed']);
                _this.registerForm.controls['religion'].setValue(res['cusdetails']['religion']);
                _this.registerForm.controls['marital_status'].setValue(res['cusdetails']['marital_status']);
                if (res['cusdetails']['marital_status'] != '1') {
                    // this.add();
                    if (res['cusdetails']['childrens'].length > 0) {
                        res['cusdetails']['childrens'].forEach(function (element) {
                            var childForm = _this.builder.group({
                                'child_name': element['children_name'],
                                'child_dob': element['children_dob']
                            });
                            _this.childrendata = _this.registerForm.get('childrendata');
                            _this.childrendata.push(childForm);
                        });
                    }
                    else {
                        _this.add();
                    }
                    console.log(_this.childrendata);
                    console.log(_this.registerForm.value);
                }
                _this.registerForm.controls['spouse_name'].setValue(res['cusdetails']['spouse_name']);
                _this.registerForm.controls['spouse_dob'].setValue(res['cusdetails']['spouse_dob']);
                _this.common.getstate(res['cusdetails']['id_country']).then(function (data) {
                    _this.state = data;
                });
                _this.common.getcity(res['cusdetails']['id_state']).then(function (data) {
                    _this.city = data;
                });
                loader.dismiss();
            });
        });
        this.common.getVillages().then(function (data) {
            _this.village = data;
            console.log(_this.village);
        });
    }
    CusupdatePage.prototype.newchild = function () {
        return this.builder.group({
            'child_name': this.child_name != null ? this.child_name['child_name'] : null,
            'child_dob': this.child_dob != null ? this.child_dob['child_dob'] : null
        });
    };
    CusupdatePage.prototype.add = function () {
        this.childrendata = this.registerForm.get('childrendata');
        this.childrendata.push(this.newchild());
    };
    CusupdatePage.prototype.delete = function (i) {
        this.childrendata.removeAt(i);
    };
    CusupdatePage.prototype.checkIfMatchingPasswords = function (passwordKey, passwordConfirmationKey) {
        var _this = this;
        console.log('1111111');
        return function (group) {
            var passwordInput = group.controls[passwordKey], passwordConfirmationInput = group.controls[passwordConfirmationKey];
            if (passwordInput.value !== passwordConfirmationInput.value) {
                // this.errorMessage = 'PasswordMismatch';
                _this.pwd = true;
                return passwordConfirmationInput.setErrors({ notEquivalent: true });
            }
            else {
                // this.errorMessage = '';
                _this.pwd = false;
                return passwordConfirmationInput.setErrors(null);
            }
        };
    };
    CusupdatePage.prototype.ionViewDidLoad = function () {
    };
    CusupdatePage.prototype.typecheck = function (data) {
        this.typec = data;
        // let loader = this.loadingCtrl.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
        // this.commonservice.createCustomer({'search':this.searchdata,'type':data}).then(res => {
        //   loader.dismiss();
        // },err=>{
        //   loader.dismiss();
        // });
    };
    CusupdatePage.prototype.segmentChanged = function (e) {
        this.content.scrollToTop();
    };
    CusupdatePage.prototype.next = function (e) {
        this.type = 'o';
        this.content.scrollToTop();
    };
    CusupdatePage.prototype.validateCaptilize = function (e, type) {
        console.log(e['value']);
        console.log(type);
        console.log((e['value']).toUpperCase());
        if (type == 'gstno') {
            this.registerForm.controls['gst_number'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['gst_number'].value.length > 15) {
                var v = this.registerForm.controls['gst_number'].value.slice(0, 15);
                this.registerForm.controls['gst_number'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'pancard') {
            this.registerForm.controls['pan'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['pan'].value.length > 10) {
                var v = this.registerForm.controls['pan'].value.slice(0, 10);
                this.registerForm.controls['pan'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'voter') {
            this.registerForm.controls['voterid'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['voterid'].value.length > 10) {
                var v = this.registerForm.controls['voterid'].value.slice(0, 10);
                this.registerForm.controls['voterid'].setValue(v.toUpperCase());
            }
        }
        else {
            if (type == 'ration') {
                this.registerForm.controls['rationcard'].setValue(e['value'].toUpperCase());
            }
        }
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    CusupdatePage.prototype.ionViewWillEnter = function () {
        var user = false;
        this.events.publish('user:created', user);
    };
    CusupdatePage.prototype.shownewPassword = function () {
        this.showPassnew = !this.showPassnew;
        if (this.showPassnew) {
            this.typechecknew = 'text';
        }
        else {
            this.typechecknew = 'password';
        }
    };
    CusupdatePage.prototype.showconfirmPassword = function () {
        this.showPassconfirm = !this.showPassconfirm;
        if (this.showPassconfirm) {
            this.typecheckconfirm = 'text';
        }
        else {
            this.typecheckconfirm = 'password';
        }
    };
    CusupdatePage.prototype.birth = function (type, index) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.details['date_of_birth'] = yy + "-" + mmm + "-" + ddd;
            _this.details['spouse_dob'] = yy + "-" + mmm + "-" + ddd;
            _this.details['child_dob'] = yy + "-" + mmm + "-" + ddd;
            if (type == 'common') {
                _this.registerForm.controls['date_of_birth'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else if (type == 'spouse') {
                _this.registerForm.controls['spouse_dob'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else {
                // this.registerForm.controls['child_dob'].setValue(yy + "-" + mmm + "-" + ddd);
                _this.registerForm.get('childrendata').at(index).get('child_dob').patchValue(yy + "-" + mmm + "-" + ddd);
            }
        });
    };
    CusupdatePage.prototype.wed = function (type) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            _this.details.date_of_wed = yy + "-" + mmm + "-" + ddd;
            //  this.details.spouse_wed = yy + "-" + mmm + "-" + ddd;
            // this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
            _this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
        });
    };
    CusupdatePage.prototype.onSelectChange = function (selectedValue) {
        console.log(selectedValue);
        this.selected = selectedValue;
        console.log(this.selected);
    };
    CusupdatePage.prototype.onSubmit = function (values) {
        var _this = this;
        console.log(this.registerForm);
        console.log(values);
        /*     var proceed = (this.branch_settings == 1 && this.is_branchwise_cus_reg == 1) ? true : false;
            console.log(proceed);
         */
        if (this.registerForm.get('firstname').valid) {
            if (this.registerForm.get('email').valid) {
                if (this.registerForm.get('mobile').valid) {
                    // if (this.registerForm.get('passwd').valid && this.registerForm.get('cpasswd').valid && this.registerForm.controls['passwd'].value == this.registerForm.controls['cpasswd'].value) {
                    if (this.registerForm.controls['pincode'].valid) {
                        if (this.registerForm.controls['address1'].valid) {
                            if (this.registerForm.controls['gst_number'].valid) {
                                if (this.registerForm.controls['pan'].valid) {
                                    //   if(this.registerForm.controls['voterid'].valid){
                                    //     if(this.registerForm.controls['rationcard'].valid){
                                    this.errorMessage = 'Doing Register...';
                                    this.isDisabled = true;
                                    var loader_1 = this.loadingCtrl.create({
                                        content: 'Please Wait',
                                        spinner: 'bubbles',
                                    });
                                    loader_1.present();
                                    var postData = Object.assign({}, values);
                                    console.log(JSON.stringify(postData));
                                    this.commonservice.updatecustomer(JSON.stringify(postData)).then(function (res) {
                                        if (res) {
                                            console.log(res);
                                            if (res['status']) {
                                                var toast = _this.toastCtrl.create({
                                                    message: res.msg,
                                                    duration: 6000
                                                });
                                                toast.present();
                                                // this.nav.pop();
                                                // this.nav.setRoot(HomePage, { data: this.registerForm.value, page: 'new' });
                                            }
                                            else {
                                                var toast = _this.toastCtrl.create({
                                                    message: res.msg,
                                                    duration: 6000
                                                });
                                                toast.present();
                                                _this.errorMessage = res.msg;
                                                _this.isDisabled = false;
                                            }
                                            loader_1.dismiss();
                                        }
                                    }, function (error) {
                                        _this.isDisabled = false;
                                        loader_1.dismiss();
                                    });
                                    // }
                                    // else {
                                    //   console.log('ration');
                                    //   let toast = this.toastCtrl.create({
                                    //     message: 'Please Enter Correct RationCard',
                                    //     position: 'bottom',
                                    //     duration: 6000
                                    //   });
                                    //   toast.present();
                                    // }
                                    // }
                                    // else {
                                    //   console.log('voter id');
                                    //   let toast = this.toastCtrl.create({
                                    //     message: 'Please Enter Correct VoterCard',
                                    //     position: 'bottom',
                                    //     duration: 6000
                                    //   });
                                    //   toast.present();
                                    // }
                                }
                                else {
                                    console.log('pan');
                                    var toast = this.toastCtrl.create({
                                        message: 'Please Enter Correct PanCard',
                                        position: 'bottom',
                                        duration: 6000
                                    });
                                    toast.present();
                                }
                            }
                            else {
                                console.log('gst');
                                var toast = this.toastCtrl.create({
                                    message: 'Please Enter Correct Gst Number',
                                    position: 'bottom',
                                    duration: 6000
                                });
                                toast.present();
                            }
                        }
                        else {
                            console.log('village');
                            var toast = this.toastCtrl.create({
                                message: 'Please Enter Address',
                                position: 'bottom',
                                duration: 6000
                            });
                            toast.present();
                        }
                    }
                    else {
                        console.log('tc');
                        var toast = this.toastCtrl.create({
                            message: 'Enter Valid Pincode',
                            position: 'bottom',
                            duration: 6000
                        });
                        toast.present();
                    }
                    // }
                    // else {
                    //   if (this.registerForm.controls['passwd'].value != this.registerForm.controls['cpasswd'].value) {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Password and Confirm Password Mismatch',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    //   else {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Minimum 8 to 16 Characters Only Allowed',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    // }
                }
                else {
                    var toast = this.toastCtrl.create({
                        message: ' Enter Valid Mobile Number',
                        position: 'bottom',
                        duration: 6000
                    });
                    toast.present();
                }
            }
            else {
                var toast = this.toastCtrl.create({
                    message: 'Enter Valid Email Id',
                    position: 'bottom',
                    duration: 6000
                });
                toast.present();
            }
        }
        else {
            var toast = this.toastCtrl.create({
                message: 'FirstName Must Contain Alphabets Only',
                position: 'bottom',
                duration: 6000
            });
            toast.present();
        }
    };
    CusupdatePage.prototype.scrollToTop = function () {
        this.content.scrollToTop();
    };
    CusupdatePage.prototype.getmodal = function (name, details) {
        var _this = this;
        var mod = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__["a" /* CountrymodelPage */], { data: details, name: name });
        mod.present();
        mod.onDidDismiss(function (dataa, name) {
            if (dataa != undefined) {
                var loader_2 = _this.loadingCtrl.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_2.present();
                if (name == 'Country') {
                    _this.common.getstate(dataa['id_country']).then(function (data) {
                        _this.registerForm.controls['countryname'].setValue(dataa['name']);
                        _this.registerForm.controls['id_country'].setValue(dataa['id_country']);
                        _this.state = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'State') {
                    _this.common.getcity(dataa['id_state']).then(function (data) {
                        _this.registerForm.controls['statename'].setValue(dataa['name']);
                        _this.registerForm.controls['id_state'].setValue(dataa['id_state']);
                        _this.city = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'City') {
                    _this.registerForm.controls['cityname'].setValue(dataa['name']);
                    _this.registerForm.controls['id_city'].setValue(dataa['id_city']);
                    loader_2.dismiss();
                }
                if (name == 'Village') {
                    _this.registerForm.controls['village_name'].setValue(dataa['village_name']);
                    _this.registerForm.controls['id_village'].setValue(dataa['id_village']);
                    loader_2.dismiss();
                }
            }
        });
    };
    CusupdatePage.prototype.usertypecheck = function () {
        console.log('******');
        if (this.registerForm.controls["cus_type"].value == '2') {
            console.log(11111);
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
        else if (this.registerForm.controls["cus_type"].value == '1') {
            console.log(22222);
            // this.registerForm.controls['gst_number'].clearValidators();
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
    };
    CusupdatePage.prototype.texto = function (event) {
        console.log(event);
        var NUMBER_REGEXP = /^[a-zA-Z ]*$/;
        var newValue = event.target.value;
        var regExp = new RegExp(NUMBER_REGEXP);
        console.log(regExp);
        var withNoDigits = event.target.value.replace(/[0-9]/g, '');
        this.registerForm.controls['firstname'].setValue(withNoDigits);
        //  if (!regExp.test(newValue)) {
        //   let v:any = this.registerForm.controls['firstname'].value.slice(0, -1);
        //   this.registerForm.controls['firstname'].setValue(v);
        //  }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], CusupdatePage.prototype, "content", void 0);
    CusupdatePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-cusupdate',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cusupdate\cusupdate.html"*/'<ion-header>\n  <ion-navbar>\n    <!-- <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button> -->\n    <ion-title  style="text-align: center;\n    margin-right: 15%;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content text-center padding>\n    <!-- <ion-row>\n        <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">   \n          <ion-item no-padding> \n            <ion-label color="label-color" stacked>Search Phone No or Estimation No <span class="required">*</span></ion-label>\n            <ion-input type="text" [(ngModel)]="searchdata"></ion-input> \n            <button [ngClass]="typec == \'1\' ? \'enable\':\'disable\'" item-right ion-button margin-top color="light" (click)="typecheck(\'1\')"><ion-icon name="phone-portrait"></ion-icon></button>\n            <button [ngClass]="typec == \'2\' ? \'enable\':\'disable\'" item-right ion-button margin-top color="light" (click)="typecheck(\'2\')"><ion-icon name="calculator"></ion-icon></button>\n          </ion-item>\n        </ion-col>\n        </ion-row> -->\n    <!-- <ion-segment [(ngModel)]="type" mode="ios" color="label-color">\n        <ion-segment-button value="p">\n            Personal\n        </ion-segment-button>\n        <ion-segment-button value="o">\n            Others\n        </ion-segment-button>\n    </ion-segment> -->\n    <h5>Edit Customer</h5>\n    <form [formGroup]="registerForm" novalidate padding>\n\n        <span>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n                <ion-input type="text" [formControl]="firstname" onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123)"></ion-input>\n            </ion-item> -->\n            <ion-label style="text-align: left;" color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n            <input type="text" style="font-size: 1.6rem;\n            font-weight: normal;color: #000;padding-top: 10px;\n    padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n    \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relation Type</ion-label>\n                <ion-select [formControl]="relation_type">\n                    <ion-option value="1">S/O</ion-option>\n                    <ion-option value="2">D/O</ion-option>\n                    <ion-option value="3">W/O</ion-option>\n                </ion-select>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relation Name</ion-label>\n                <ion-input type="text" [formControl]="relation_name"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n                </ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Email</ion-label>\n                <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n            </ion-item>\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Gender</ion-label>\n                <ion-select [formControl]="gender">\n                    <ion-option value="0">Male</ion-option>\n                    <ion-option value="1">Female</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Marital Status</ion-label>\n                <ion-select  [formControl]="marital_status">\n                    <ion-option value="1">Single</ion-option>\n                    <ion-option value="2">Married</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>\n\n            <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Spouse Name</ion-label>\n                <ion-input type="text" placeholder="Spouse Name" [formControl]="spouse_name"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Spouse DOB</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_dob" displayFormat="DD-MM-YYYY" placeholder="Spouse DOB"\n                    (tap)="birth(\'spouse\',\'\')"></ion-input>\n            </ion-item>\n\n        <!--     <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Wedding Date</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_wed" displayFormat="DD-MM-YYYY" placeholder="Wedding date"\n                    (tap)="wed(\'spouse\')"></ion-input>\n            </ion-item> -->\n\n            <div formArrayName="childrendata" *ngIf="(selected == 2 || selected == 3)">\n                <ion-label  color="label-color" align="left" stacked>Add Childrens  </ion-label>\n                <div *ngFor="let p of registerForm.get(\'childrendata\').controls; let i = index;">\n                    <div [formGroupName]="i">\n                        <ion-row no-padding>\n                            <ion-col col-5>\n                                <ion-input type="text" formControlName="child_name" placeholder="name"\n                                    style="border-bottom: 1px solid gray;"></ion-input>\n                            </ion-col>\n                            <ion-col col-5>\n                                <ion-input readonly="true" class="ion_datetime" formControlName="child_dob" displayFormat="DD-MM-YYYY" placeholder="DOB" \n                                (tap)="birth(\'child\',i)" style="border-bottom: 1px solid gray;"></ion-input>\n                            </ion-col>\n                            <ion-col col-1 style="margin: auto;">\n                                <ion-icon (click)="add(i)"\n                                    style="color: red;text-transform: initial;float: right;font-size: 2rem;" name="add">\n                                </ion-icon>\n                            </ion-col>\n                            <ion-col col-1 style="margin: auto;" *ngIf="i != 0">\n                                <ion-icon (click)="delete(i)"\n                                    style="color: red;text-transform: initial;float: right;font-size: 2rem;"\n                                    name="trash"></ion-icon>\n                            </ion-col>\n                        </ion-row>\n                    </div>\n                </div>\n            </div>   \n\n\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Email</ion-label>\n                <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n            </ion-item>  -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item>   -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n                <ion-input type="text" [formControl]="address1"></ion-input>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 2</ion-label>\n                <ion-input type="text" [formControl]="address2"></ion-input>\n            </ion-item>  \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n                <ion-input  (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname"></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Country\',country)" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n            </ion-item>   \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n                <ion-input  (tap)="getmodal(\'State\',state)" [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'State\',state)" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n            </ion-item>   \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label> \n                <ion-input  (tap)="getmodal(\'City\',city)" [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'City\',city)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n            </ion-item> \n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Village</ion-label> \n                <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n            </ion-item>          -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n            </ion-item>  \n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Select Religion</ion-label>\n                <ion-select [formControl]="religion">\n                    <ion-option value="1">Hindu</ion-option>\n                    <ion-option value="2">Muslim</ion-option>\n                    <ion-option value="3">Christian</ion-option>\n\n                </ion-select>\n            </ion-item>   -->\n             <!--<ion-item no-padding>\n                <ion-label color="label-color" stacked>Gender</ion-label>\n                <ion-select [formControl]="gender">\n                    <ion-option value="0">Male</ion-option>\n                    <ion-option value="1">Female</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>   -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Customer Type</ion-label>\n                <ion-select [formControl]="cus_type" (ionChange)="usertypecheck()">\n                    <ion-option value="1">Individual</ion-option>\n                    <ion-option value="2">Company</ion-option>    \n                </ion-select>\n            </ion-item>   \n            <ion-item *ngIf="registerForm.controls[\'cus_type\'].value == 2" no-padding>\n              <ion-label color="label-color" stacked>GST Number </ion-label>\n              <ion-input type="text" [formControl]="gst_number"  maxlength="15" (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n            <ion-label color="label-color" stacked>Pancard No </ion-label>\n            <ion-input type="text" [formControl]="pan" maxlength="10" (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n        </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n                <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_birth" displayFormat="DD-MM-YYYY" (tap)="birth(\'common\',\'\')"></ion-input>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n                <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_wed" displayFormat="DD-MM-YYYY" (tap)="wed()"></ion-input>\n            </ion-item>         \n\n<!--         <ion-row style="padding-left: 10px;padding-right: 0; position: relative; font-weight: normal;" *ngIf="branchSettings[\'settings\'][\'branch_settings\'] == 1 && branchSettings[\'settings\'][\'is_branchwise_cus_reg\'] == 1 ">\n          <ion-col col-10 style="margin: auto;">\n              <ion-input [formControl]="branchname" (tap)="openmodal()" type="text" readonly=\'true\' placeholder="Select Branch" style="font-size: medium;"></ion-input>\n          </ion-col>\n          <ion-col col-2>\n              <ion-icon (tap)="openmodal()" style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n          </ion-col>\n      </ion-row> --> \n\n  </span>\n\n        <!-- <span *ngIf="type == \'o\'"> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Nominee Name </ion-label>\n                <ion-input type="text" [formControl]="nominee_name" ></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relationship </ion-label>\n                <ion-input type="text" [formControl]="nominee_relationship" ></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Mobile </ion-label>\n                <ion-input type="number" [formControl]="nominee_mobile" placeholder="10 Digit Mobile Number" maxlength="10"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Company Name </ion-label>\n                <ion-input type="text" [formControl]="company_name" ></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>GST Number </ion-label>\n                <ion-input type="text" [formControl]="gst_number"  maxlength="15" (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n            </ion-item>\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pancard No </ion-label>\n                <ion-input type="text" [formControl]="pan" maxlength="10" (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Voter ID No </ion-label>\n                <ion-input type="text" [formControl]="voterid"  maxlength="10" (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Rationcard No </ion-label>\n                <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Comments </ion-label>\n                <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n            </ion-item>\n        </span> -->\n\n\n        <!-- <ion-row style="border: none !important;" *ngIf="type == \'o\'">\n            <ion-col style="text-align: -webkit-center !important;">\n                <button (click)="onSubmit(registerForm.value)" ion-button class="joinbtn" block color="dark">\n                  Submit</button>\n            </ion-col>\n        </ion-row> -->\n\n    </form>\n\n</ion-content>\n<ion-footer>\n    <!-- <button ion-button *ngIf="type != \'o\'" icon-start full class="theme-btn" (click)="next($event)">Next</button> -->\n    <button ion-button  icon-start full class="theme-btn" (click)="onSubmit(registerForm.value)">Save</button>\n</ion-footer>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cusupdate\cusupdate.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormBuilder */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]])
    ], CusupdatePage);
    return CusupdatePage;
}());

//# sourceMappingURL=cusupdate.js.map

/***/ }),

/***/ 180:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AddQuickCus; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__home_home__ = __webpack_require__(31);
// import { Component } from '@angular/core';
// import { IonicPage, NavController, NavParams,ViewController,LoadingController,ModalController,ToastController } from 'ionic-angular';
// import { CommonProvider } from '../../../providers/common';
// import { CusSearchPage } from '../customer/customer'; 
// import { CountrymodelPage } from '../countrymodel/countrymodel';
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
// /**
//  * Generated class for the AddQuickCus page.
//  *
//  * See https://ionicframework.com/docs/components/#navigation for more info on
//  * Ionic pages and navigation.
//  */
// // @IonicPage()
// @Component({
//   selector: 'page-add-quick-cus',
//template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-quick-cus\add-quick-cus.html"*/'<!-- <ion-header>\n  <ion-navbar>\n    <ion-title>\n      Customer Detail\n      <ion-icon style="float: right;" name="close-circle" (click)="close()"></ion-icon>\n    </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n \n  <br/>\n  <div align="center">\n      <ion-note >New Customer? Fill below details to create customer</ion-note>\n  </div>\n  \n  <ion-row>\n    <ion-col text-wrap offset-1 col-10>\n        <ion-item no-padding *ngIf="askBranch == 1">\n          <ion-label color="label-color" stacked>Branch <span class="required">*</span></ion-label>\n          <ion-select [(ngModel)]="cusData[\'id_branch\']">\n            <ion-option *ngFor="let b of branches" [value]="b.id_branch">{{b.name}}</ion-option>\n          </ion-select>\n          <ion-icon style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n        </ion-item>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>First Name <span class="required">*</span></ion-label>\n          <ion-input type="text" [(ngModel)]="cusData[\'firstname\']" required [readonly]="cusData[\'id_customer\'] > 0"></ion-input>\n        </ion-item>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Mobile <span class="required">*</span></ion-label>\n          <ion-input type="tel" [(ngModel)]="cusData[\'mobile\']"  required [readonly]="cusData[\'id_customer\'] > 0"  maxlength="10"></ion-input>\n        </ion-item>\n       \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>City</ion-label> \n          <ion-input [(ngModel)]="cusData[\'cityname\']" type="text" readonly=\'true\'></ion-input>\n          <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'City\',city)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n      </ion-item> \n        <ion-item no-padding>\n            <ion-label color="label-color" stacked>Area</ion-label> \n            <ion-input type="text"  (tap)="getmodal(\'Village\',village)" [(ngModel)]="cusData[\'village_name\']" readonly=\'true\'></ion-input>\n            <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n        </ion-item> \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Customer Type</ion-label>\n          <ion-select interface="popover" [(ngModel)]="cusData[\'cus_type\']" (ionChange)="usertypecheck()">\n              <ion-option value="1">Individual</ion-option>\n              <ion-option value="2">Company</ion-option>    \n          </ion-select>\n        </ion-item>\n        <ion-item *ngIf="cusData[\'cus_type\'] == 2" no-padding>\n          <ion-label color="label-color" stacked>GST Number </ion-label>\n          <ion-input type="text" [(ngModel)]="cusData[\'gst_number\']"  maxlength="15" (ionChange)="validateCaptilize(cusData[\'gst_number\'])"></ion-input>\n      </ion-item>\n    </ion-col>\n  </ion-row> \n</ion-content>\n\n<ion-footer *ngIf="cusData[\'id_customer\'] != \'\' || cusData[\'mobile\'] != \'\' ">\n  <button ion-button icon-start full class="theme-btn" (click)="proceed()">Proceed</button>\n</ion-footer> -->\n<ion-header>\n  <ion-navbar>\n      <!-- <button ion-button menuToggle>\n          <ion-icon name="menu"></ion-icon>\n      </button> -->\n      <ion-title style="text-align: center !important;\n" >\n<img class="header-logo" src=\'assets/img/header-final.svg\' />\n        <ion-icon style="float: right;color: black;margin-top: 10px;" name="close-circle" (click)="close()"></ion-icon>\n\n      </ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content text-center padding>\n  <ion-segment [(ngModel)]="type" (ngModelChange)="checkseg()" mode="ios" color="label-color">\n      <ion-segment-button value="p">\n          Personal\n      </ion-segment-button>\n      <ion-segment-button value="o">\n          Business\n      </ion-segment-button>\n  </ion-segment>\n\n  <form [formGroup]="registerForm" novalidate padding>\n\n      <span *ngIf="type == \'p\'">\n          <!-- <ion-item no-padding> -->\n            <ion-label style="text-align: left;" color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n            <input type="text" style="font-size: 1.6rem;\n            font-weight: normal;color: #000;padding-top: 10px;\n    padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n    \n          <!-- </ion-item> -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relation Type</ion-label>\n              <ion-select [formControl]="relation_type">\n                  <ion-option value="1">S/O</ion-option>\n                  <ion-option value="2">D/O</ion-option>\n                  <ion-option value="3">W/O</ion-option>\n              </ion-select>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relation Name</ion-label>\n              <ion-input type="text" [formControl]="relation_name"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n              </ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Email</ion-label>\n              <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Marital Status</ion-label>\n              <ion-select (ionChange)="onSelectChange($event)" [formControl]="marital_status">\n                  <ion-option value="1">Single</ion-option>\n                  <ion-option value="2">Married</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>\n\n          <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Spouse Name</ion-label>\n              <ion-input type="text" placeholder="Spouse Name" [formControl]="spouse_name"></ion-input>\n          </ion-item>\n\n          <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Spouse DOB</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_dob" displayFormat="DD-MM-YYYY" placeholder="Spouse DOB"\n                  (tap)="birth(\'spouse\',\'\')"></ion-input>\n          </ion-item>\n\n       <!--    <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Wedding Date</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_wed" displayFormat="DD-MM-YYYY" placeholder="Wedding date"\n                  (tap)="wed(\'spouse\')"></ion-input>\n          </ion-item> -->\n\n          <div formArrayName="childrendata" *ngIf="(selected == 2 || selected == 3)">\n              <ion-label  color="label-color" align="left" stacked>Add Childrens  </ion-label>\n              <div *ngFor="let p of registerForm.get(\'childrendata\').controls; let i = index;">\n                  <div [formGroupName]="i">\n                      <ion-row no-padding>\n                          <ion-col col-5>\n                              <ion-input type="text" formControlName="child_name" placeholder="name"\n                                  style="border-bottom: 1px solid gray;"></ion-input>\n                          </ion-col>\n                          <ion-col col-5>\n                              <ion-input readonly="true" class="ion_datetime" formControlName="child_dob" displayFormat="DD-MM-YYYY" placeholder="DOB" \n                              (tap)="birth(\'child\',i)" style="border-bottom: 1px solid gray;"></ion-input>\n                          </ion-col>\n                          <ion-col col-1 style="margin: auto;">\n                              <ion-icon (click)="add(i)"\n                                  style="color: red;text-transform: initial;float: right;font-size: 2rem;" name="add">\n                              </ion-icon>\n                          </ion-col>\n                          <ion-col col-1 style="margin: auto;" *ngIf="i != 0">\n                              <ion-icon (click)="delete(i)"\n                                  style="color: red;text-transform: initial;float: right;font-size: 2rem;"\n                                  name="trash"></ion-icon>\n                          </ion-col>\n                      </ion-row>\n                  </div>\n              </div>\n          </div>\n          <!--   </ion-item> -->\n\n\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item>   -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="address1"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 2</ion-label>\n              <ion-input type="text" [formControl]="address2"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n              <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n              </ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'Country\',country)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'State\',state)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'City\',city)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Village</ion-label> \n              <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n          </ion-item>          -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Select Religion</ion-label>\n              <ion-select interface="popover" [formControl]="religion">\n                  <ion-option value="1">Hindu</ion-option>\n                  <ion-option value="2">Muslim</ion-option>\n                  <ion-option value="3">Christian</ion-option>\n              </ion-select>\n          </ion-item> -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Customer Type</ion-label>\n              <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                  <ion-option value="1" >Individual</ion-option>\n              </ion-select>\n          </ion-item>    -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_birth" displayFormat="DD-MM-YYYY"\n                  (tap)="birth(\'common\',\'\')"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_wed" displayFormat="DD-MM-YYYY"\n                  (tap)="wed(\'common\',\'\')"></ion-input>\n          </ion-item>\n\n          <!--         <ion-row style="padding-left: 10px;padding-right: 0; position: relative; font-weight: normal;" *ngIf="branchSettings[\'settings\'][\'branch_settings\'] == 1 && branchSettings[\'settings\'][\'is_branchwise_cus_reg\'] == 1 ">\n        <ion-col col-10 style="margin: auto;">\n            <ion-input [formControl]="branchname" (tap)="openmodal()" type="text" readonly=\'true\' placeholder="Select Branch" style="font-size: medium;"></ion-input>\n        </ion-col>\n        <ion-col col-2>\n            <ion-icon (tap)="openmodal()" style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n        </ion-col>\n    </ion-row> -->\n\n\n          <!-- <ion-item no-padding>\n      <ion-label color="label-color" stacked>Company Name </ion-label>\n      <ion-input type="text" [formControl]="company_name" ></ion-input>\n  </ion-item>\n\n  <ion-item no-padding>\n      <ion-label color="label-color" stacked>GST Number </ion-label>\n      <ion-input type="text" [formControl]="gst_number"  maxlength="15" (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n  </ion-item> -->\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pancard No </ion-label>\n              <ion-input type="text" [formControl]="pan" maxlength="10"\n                  (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n          </ion-item>\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Voter ID No </ion-label>\n              <ion-input type="text" [formControl]="voterid" maxlength="10"\n                  (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n          </ion-item>\n          <!-- \n  <ion-item no-padding>\n      <ion-label color="label-color" stacked>Rationcard No </ion-label>\n      <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n  </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Comments </ion-label>\n              <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n          </ion-item>\n      </span>\n\n      <span *ngIf="type == \'o\'">\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="firstname"></ion-input>\n          </ion-item> -->\n          <ion-label style="text-align: left;" color="label-color" stacked>Company Name<span class="required"> *</span></ion-label>\n          <input type="text" style="font-size: 1.6rem;\n          font-weight: normal;color: #000;padding-top: 10px;\n  padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n  \n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Last Name</ion-label>\n              <ion-input type="text" [formControl]="lastname"></ion-input>\n          </ion-item>  -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n              </ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Email</ion-label>\n              <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item>   -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="address1"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 2</ion-label>\n              <ion-input type="text" [formControl]="address2"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n              <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n              </ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'Country\',country)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'State\',state)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'City\',city)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Village</ion-label> \n              <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n          </ion-item>          -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Select Religion</ion-label>\n              <ion-select interface="popover" [formControl]="religion">\n                  <ion-option value="1">Hindu</ion-option>\n                  <ion-option value="2">Muslim</ion-option>\n                  <ion-option value="3">Christian</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Customer Type</ion-label>\n              <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                  <ion-option value="2" >Company</ion-option>    \n              </ion-select>\n          </ion-item>    -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n              <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_birth" displayFormat="DD-MM-YYYY" (tap)="birth()"></ion-input>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n              <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_wed" displayFormat="DD-MM-YYYY" (tap)="wed()"></ion-input>\n          </ion-item>    -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Nominee Name </ion-label>\n              <ion-input type="text" [formControl]="nominee_name" ></ion-input>\n          </ion-item>\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relationship </ion-label>\n              <ion-input type="text" [formControl]="nominee_relationship" ></ion-input>\n          </ion-item> -->\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile </ion-label>\n              <ion-input type="number" [formControl]="nominee_mobile" placeholder="10 Digit Mobile Number" maxlength="10"></ion-input>\n          </ion-item> -->\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Company Name </ion-label>\n              <ion-input type="text" [formControl]="company_name"></ion-input>\n          </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>GST Number<span class="required"> *</span> </ion-label>\n              <ion-input type="text" [formControl]="gst_number" maxlength="15"\n                  (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n          </ion-item>\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pancard No </ion-label>\n              <ion-input type="text" [formControl]="pan" maxlength="10"\n                  (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n          </ion-item>\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Voter ID No </ion-label>\n              <ion-input type="text" [formControl]="voterid"  maxlength="10" (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n          </ion-item> -->\n          <!-- \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Rationcard No </ion-label>\n              <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n          </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Comments </ion-label>\n              <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n          </ion-item>\n      </span>\n\n\n      <!-- <ion-row style="border: none !important;" *ngIf="type == \'o\'">\n          <ion-col style="text-align: -webkit-center !important;">\n              <button (click)="onSubmit(registerForm.value)" ion-button class="joinbtn" block color="dark">\n                Submit</button>\n          </ion-col>\n      </ion-row> -->\n\n  </form>\n\n</ion-content>\n<ion-footer>\n  <!-- <button ion-button *ngIf="type != \'o\'" icon-start full class="theme-btn" (click)="next($event)">Next</button> -->\n  <button ion-button icon-start full class="theme-btn" (click)="onSubmit(registerForm.value)">Save</button>\n</ion-footer>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-quick-cus\add-quick-cus.html"*/,
//   providers: [CommonProvider]
// })
// export class AddQuickCus {
//   page;
//   empData = JSON.parse(localStorage.getItem('empDetail'));
//   askBranch = 0;
//   loggedInBranch;
//   branches = [];
//   cusData = {"cus_type" : 0,'mobile':''};
//   errorMsg = "";  
//   village = [];
//   city: any = [];
//   gstPattern:any = /^([0-9]{2}[a-zA-Z]{4}([a-zA-Z]{1}|[0-9]{1})[0-9]{4}[a-zA-Z]{1}([a-zA-Z]|[0-9]){3}){0,15}$/;
//   result  = true;
//   // regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
//   constructor(public toast:ToastController,public load:LoadingController, public common:CommonProvider,public viewCtrl: ViewController,public navCtrl: NavController, public navParams: NavParams,  public modal: ModalController) {
//     this.common.getVillages().then(data => {
//       this.village = data;
//       console.log(this.village);
//     })
//     this.common.getcity('35').then(data => {
//       this.city = data;
//       this.cusData['cityname'] = 'Palani';
//       this.cusData['id_city'] = '4065'; 
//     })
//     this.page = this.navParams.get('page');
//     this.loggedInBranch = this.empData['id_branch']; 
//     console.log(this.loggedInBranch)
//     console.log(this.navParams.get('askBranch'))
//     console.log(this.empData['branch_settings'])
//     if(this.page == "esti"){
//       this.askBranch = this.navParams.get('askBranch');
//       this.branches = this.navParams.get('branches');
//     }else{
//       let loader = this.load.create({
//         content: 'Please Wait',
//         spinner: 'bubbles',
//       });
//       loader.present();  
//       if((this.loggedInBranch == 0 || this.loggedInBranch == '' || this.loggedInBranch == null) && this.empData['branch_settings'] == 1){
//         this.askBranch = 1;
//         this.common.getbranch().then(data=>{
//           this.branches = data;
//           loader.dismiss();
//         })
//       }else{
//         loader.dismiss();
//       }
//     }
//   }
//   close(){
//     this.viewCtrl.dismiss();
//   }
//   proceed(){
//     if(this.cusData['mobile'].length == 10){
//     if(this.cusData['id_customer'] > 0){
//       this.viewCtrl.dismiss(this.cusData);
//     }else{
//       this.createQuickCus();
//     }
//   }
//   else{
//     this.errorMsg = "Please Enter Valid Mobile Number";
//     setTimeout(()=>{
//       this.errorMsg = "";
//     },this.common.msgTimeout);
//   }
//   }
//   createQuickCus(){
//     console.log(this.result)
//     if(this.result){
//       let loader = this.load.create({
//         content: 'Please Wait',
//         spinner: 'bubbles',
//       });
//       loader.present();  
//       this.cusData['id_branch'] = this.loggedInBranch;
//       this.common.createQuickCustomer(this.cusData).then(res => {
//         if (res) {
//           if (res.success) {
//             console.log(res.response)
//             this.cusData = res.response;
//             this.viewCtrl.dismiss(this.cusData);
//           } else {
//             this.errorMsg = res.message;
//             setTimeout(()=>{
//               this.errorMsg = "";
//             },this.common.msgTimeout);
//           }
//           loader.dismiss();
//         }
//       }, error => { 
//         loader.dismiss();
//       });
//     }
//       else {
//         console.log('gst');
//         let toast = this.toast.create({
//           message: 'Please Enter Correct Gst Number',
//           position: 'bottom',
//           duration: 6000
//         });
//         toast.present();
//     }
//   }
//   openCusModal() {
//     let modal = this.modal.create(CusSearchPage)
//     modal.present();
//     modal.onDidDismiss(mData => {
//       if(mData != null){
//         this.cusData = mData;
//         this.cusData['customer'] = mData['label'];
//       }
//     });
//   }
//   getmodal(name, details) {
//     let mod = this.modal.create(CountrymodelPage, { data: details, name: name })
//     mod.present();
//     mod.onDidDismiss((mData, name) => {
//       if (mData != undefined) {
//         let loader = this.load.create({
//           content: 'Please Wait',
//           spinner: 'bubbles',
//         });
//         loader.present();
//         if (name == 'Village') {
//           this.cusData['village_name'] = mData['village_name'];
//           this.cusData['id_village'] = mData['id_village']; 
//           loader.dismiss();
//         }
//         if (name == 'City') {
//           this.cusData['cityname'] = mData['name'];
//           this.cusData['id_city'] = mData['id_city']; 
//           console.log(this.cusData['cityname'])
//           loader.dismiss();
//         }
//       }
//     });
//   }
//   ionViewDidLoad() {
//     console.log('ionViewDidLoad AddQuickCus');
//   }
//   validateCaptilize(e) {
//       this.cusData['gst_number'] = e.toUpperCase();
//       this.usertypecheck();
//   }
//   usertypecheck(){
//     console.log('******')
//     if(this.cusData['cus_type'] == 2){
//        this.result = this.gstPattern.test(this.cusData['gst_number']);
//     }
//     else if(this.cusData['cus_type'] == 1){
//       this.result = true;
//     }
//   }
// }







/*
  Generated class for the Register page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var AddQuickCus = /** @class */ (function () {
    function AddQuickCus(viewCtrl, datePicker, platform, builder, nav, events, menu, commonservice, toastCtrl, loadingCtrl, event, modal, common) {
        var _this = this;
        this.viewCtrl = viewCtrl;
        this.datePicker = datePicker;
        this.platform = platform;
        this.builder = builder;
        this.nav = nav;
        this.events = events;
        this.menu = menu;
        this.commonservice = commonservice;
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.type = "p";
        this.count = 0;
        this.animateClass = { 'zoom-in': true };
        this.countries = [];
        this.states = [];
        this.cities = [];
        this.submitted = false;
        this.isDisabled = false;
        this.errorMessage = '';
        this.typechecknew = 'password';
        this.showPassnew = false;
        this.typecheckconfirm = 'password';
        this.showPassconfirm = false;
        this.reg = /^[a-zA-Z ]*$/;
        this.emailPattern = "^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$";
        this.gstPattern = "^([0-9]{2}[a-zA-Z]{4}([a-zA-Z]{1}|[0-9]{1})[0-9]{4}[a-zA-Z]{1}([a-zA-Z]|[0-9]){3}){0,15}$";
        this.panPattern = "^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$";
        this.votterPattern = "^([a-zA-Z]){3}([0-9]){7}?$";
        this.rationPattern = "^([a-zA-Z0-9]){8,12}\s*$";
        this.pwd = false;
        this.accept = false;
        this.deviceid = JSON.parse(localStorage.getItem('DeviceData'));
        this.branch_name = '';
        this.branchid = '';
        this.branch_settings = '';
        this.is_branchwise_cus_reg = '';
        this.id_branch = '';
        this.details = { 'countryname': 'India', 'id_country': '101', 'statename': 'Tamil Nadu', 'id_state': '35', 'cityname': 'Palani', 'id_city': '4065' };
        this.country = [];
        this.state = [];
        this.city = [];
        this.village = [];
        this.address1 = '';
        this.address2 = '';
        this.pincode = [];
        this.religion = [];
        this.gender = [];
        this.cus_type = [];
        this.date_of_birth = [];
        this.date_of_wed = [];
        this.selected = 0;
        this.showinput = false;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        console.log(this.empData);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idcity']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['cityname']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idstate']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['statename']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idcountry']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['countryname']);
        this.nav = nav;
        this.menu = menu;
        this.platform = platform;
        this.registerForm = builder.group({
            'firstname': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required])],
            'relation_name': [''],
            'relation_type': [''],
            'mobile': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(10), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(10)])],
            'email': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.emailPattern)])],
            // 'passwd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            // 'cpasswd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            'address1': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required]), this.address1 != null ? this.address1['address1'] : null],
            'address2': this.address2 != null ? this.address1['address2'] : null,
            'pincode': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(6)]), this.pincode != null ? this.pincode['pincode'] : null],
            'religion': this.religion != null ? this.religion['religion'] : null,
            'gender': this.gender != null ? this.gender['gender'] : null,
            // 'cus_type': this.cus_type != null ? this.cus_type['cus_type'] : null,
            'cus_type': 1,
            'date_of_birth': this.date_of_birth != null ? this.date_of_birth['date_of_birth'] : null,
            'date_of_wed': this.date_of_wed != null ? this.date_of_wed['date_of_wed'] : null,
            'countryname': this.details['countryname'],
            'id_country': this.details['id_country'],
            'statename': this.details['statename'],
            'id_state': this.details['id_state'],
            'cityname': this.details['cityname'],
            'id_city': this.details['id_city'],
            'village_name': ['', this.village_name != null ? this.village_name['village_name'] : null],
            'id_village': this.details['id_village'],
            //  'branchname': ['', Validators.compose([Validators.required]), this.branchname != null ? this.branchname['branchname'] : null],
            'id_branch': this.empData['id_branch'] != null ? this.empData['id_branch'] : null,
            'nominee_name': this.nominee_name != null ? this.nominee_name['nominee_name'] : null,
            'nominee_relationship': this.nominee_relationship != null ? this.nominee_relationship['nominee_relationship'] : null,
            'nominee_mobile': this.nominee_mobile != null ? this.nominee_mobile['nominee_mobile'] : null,
            'company_name': this.company_name != null ? this.company_name['company_name'] : null,
            'gst_number': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]), this.gst_number != null ? this.gst_number['gst_number'] : null],
            'pan': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.panPattern)]), this.pan != null ? this.pan['pan'] : null],
            'voterid': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.votterPattern)]), this.voterid != null ? this.voterid['voterid'] : null],
            'rationcard': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.rationPattern)]), this.rationcard != null ? this.rationcard['rationcard'] : null],
            //'pan': this.pan != null ? this.pan['pan'] : null,
            // 'voterid': this.voterid != null ? this.voterid['voterid'] : null,
            //'rationcard': this.rationcard != null ? this.rationcard['rationcard'] : null,
            'comments': this.comments != null ? this.comments['comments'] : null,
            'marital_status': this.marital_status != null ? this.marital_status['marital_status'] : null,
            'spouse_name': this.spouse_name != null ? this.spouse_name['spouse_name'] : null,
            'spouse_dob': this.spouse_dob != null ? this.spouse_dob['spouse_dob'] : null,
            //  'spouse_wed': this.spouse_wed != null ? this.spouse_wed['spouse_wed'] : null,
            childrendata: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
        });
        this.add();
        this.firstname = this.registerForm.controls['firstname'];
        this.relation_name = this.registerForm.controls['relation_name'];
        this.relation_type = this.registerForm.controls['relation_type'];
        this.mobile = this.registerForm.controls['mobile'];
        this.email = this.registerForm.controls['email'];
        // this.passwd = this.registerForm.controls['passwd'];
        // this.cpasswd = this.registerForm.controls['cpasswd'];
        this.address1 = this.registerForm.controls['address1'];
        this.address2 = this.registerForm.controls['address2'];
        this.pincode = this.registerForm.controls['pincode'];
        this.religion = this.registerForm.controls['religion'];
        this.gender = this.registerForm.controls['gender'];
        this.cus_type = this.registerForm.controls['cus_type'];
        this.date_of_birth = this.registerForm.controls['date_of_birth'];
        this.date_of_wed = this.registerForm.controls['date_of_wed'];
        this.countryname = this.registerForm.controls['countryname'];
        this.statename = this.registerForm.controls['statename'];
        this.cityname = this.registerForm.controls['cityname'];
        this.village_name = this.registerForm.controls['village_name'];
        this.id_country = this.registerForm.controls['id_country'];
        this.id_state = this.registerForm.controls['id_state'];
        this.id_city = this.registerForm.controls['id_city'];
        this.id_village = this.registerForm.controls['id_village'];
        this.branchname = this.registerForm.controls['branchname'];
        this.id_branch = this.empData['id_branch'];
        this.nominee_name = this.registerForm.controls['nominee_name'];
        this.nominee_relationship = this.registerForm.controls['nominee_relationship'];
        this.nominee_mobile = this.registerForm.controls['nominee_mobile'];
        this.company_name = this.registerForm.controls['company_name'];
        this.nominee_name = this.registerForm.controls['nominee_name'];
        this.gst_number = this.registerForm.controls['gst_number'];
        this.pan = this.registerForm.controls['pan'];
        this.voterid = this.registerForm.controls['voterid'];
        this.rationcard = this.registerForm.controls['rationcard'];
        this.comments = this.registerForm.controls['comments'];
        this.marital_status = this.registerForm.controls['marital_status'];
        this.spouse_name = this.registerForm.controls['spouse_name'];
        this.spouse_dob = this.registerForm.controls['spouse_dob'];
        //   this.spouse_wed = this.registerForm.controls['spouse_wed'];
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getcountry().then(function (data) {
            _this.country = data;
            _this.common.getstate(_this.details['id_country']).then(function (data) {
                _this.registerForm.controls['countryname'].setValue(_this.details['countryname']);
                _this.registerForm.controls['id_country'].setValue(_this.details['id_country']);
                _this.state = data;
                _this.common.getcity(_this.details['id_state']).then(function (data) {
                    _this.registerForm.controls['statename'].setValue(_this.details['statename']);
                    _this.registerForm.controls['id_state'].setValue(_this.details['id_state']);
                    _this.registerForm.controls['cityname'].setValue(_this.details['cityname']);
                    _this.registerForm.controls['id_city'].setValue(_this.details['id_city']);
                    _this.city = data;
                    loader.dismiss();
                });
            });
        });
        this.common.getVillages().then(function (data) {
            _this.village = data;
            console.log(_this.village);
        });
    }
    AddQuickCus.prototype.newchild = function () {
        return this.builder.group({
            'child_name': this.child_name != null ? this.child_name['child_name'] : null,
            'child_dob': this.child_dob != null ? this.child_dob['child_dob'] : null
        });
    };
    AddQuickCus.prototype.add = function () {
        this.childrendata = this.registerForm.get('childrendata');
        this.childrendata.push(this.newchild());
    };
    AddQuickCus.prototype.delete = function (i) {
        this.childrendata.removeAt(i);
    };
    AddQuickCus.prototype.checkIfMatchingPasswords = function (passwordKey, passwordConfirmationKey) {
        var _this = this;
        console.log('1111111');
        return function (group) {
            var passwordInput = group.controls[passwordKey], passwordConfirmationInput = group.controls[passwordConfirmationKey];
            if (passwordInput.value !== passwordConfirmationInput.value) {
                // this.errorMessage = 'PasswordMismatch';
                _this.pwd = true;
                return passwordConfirmationInput.setErrors({ notEquivalent: true });
            }
            else {
                // this.errorMessage = '';
                _this.pwd = false;
                return passwordConfirmationInput.setErrors(null);
            }
        };
    };
    AddQuickCus.prototype.ionViewDidLoad = function () {
    };
    AddQuickCus.prototype.segmentChanged = function (e) {
        this.content.scrollToTop();
    };
    AddQuickCus.prototype.next = function (e) {
        this.type = 'o';
        this.content.scrollToTop();
    };
    AddQuickCus.prototype.validateCaptilize = function (e, type) {
        console.log(e['value']);
        console.log(type);
        console.log((e['value']).toUpperCase());
        if (type == 'gstno') {
            this.registerForm.controls['gst_number'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['gst_number'].value.length > 15) {
                var v = this.registerForm.controls['gst_number'].value.slice(0, 15);
                this.registerForm.controls['gst_number'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'pancard') {
            this.registerForm.controls['pan'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['pan'].value.length > 10) {
                var v = this.registerForm.controls['pan'].value.slice(0, 10);
                this.registerForm.controls['pan'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'voter') {
            this.registerForm.controls['voterid'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['voterid'].value.length > 10) {
                var v = this.registerForm.controls['voterid'].value.slice(0, 10);
                this.registerForm.controls['voterid'].setValue(v.toUpperCase());
            }
        }
        else {
            if (type == 'ration') {
                this.registerForm.controls['rationcard'].setValue(e['value'].toUpperCase());
            }
        }
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    AddQuickCus.prototype.ionViewWillEnter = function () {
        var user = false;
        this.events.publish('user:created', user);
    };
    AddQuickCus.prototype.shownewPassword = function () {
        this.showPassnew = !this.showPassnew;
        if (this.showPassnew) {
            this.typechecknew = 'text';
        }
        else {
            this.typechecknew = 'password';
        }
    };
    AddQuickCus.prototype.showconfirmPassword = function () {
        this.showPassconfirm = !this.showPassconfirm;
        if (this.showPassconfirm) {
            this.typecheckconfirm = 'text';
        }
        else {
            this.typecheckconfirm = 'password';
        }
    };
    AddQuickCus.prototype.birth = function (type, index) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.details['date_of_birth'] = yy + "-" + mmm + "-" + ddd;
            _this.details['spouse_dob'] = yy + "-" + mmm + "-" + ddd;
            _this.details['child_dob'] = yy + "-" + mmm + "-" + ddd;
            if (type == 'common') {
                _this.registerForm.controls['date_of_birth'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else if (type == 'spouse') {
                _this.registerForm.controls['spouse_dob'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else {
                _this.registerForm.get('childrendata').at(index).get('child_dob').patchValue(yy + "-" + mmm + "-" + ddd);
            }
            // console.log( this.productdet.due_date)
        });
    };
    AddQuickCus.prototype.wed = function (type) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.details.date_of_wed = yy + "-" + mmm + "-" + ddd;
            //  this.details.spouse_wed = yy + "-" + mmm + "-" + ddd;
            // this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
            _this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
            // console.log( this.productdet.due_date)
        });
    };
    AddQuickCus.prototype.onSelectChange = function (selectedValue) {
        console.log(selectedValue);
        this.selected = selectedValue;
        console.log(this.selected);
    };
    AddQuickCus.prototype.onSubmit = function (values) {
        var _this = this;
        console.log(this.registerForm);
        console.log(values);
        /*     var proceed = (this.branch_settings == 1 && this.is_branchwise_cus_reg == 1) ? true : false;
            console.log(proceed);
         */
        if (this.registerForm.get('firstname').valid) {
            if (this.registerForm.get('email').valid) {
                if (this.registerForm.get('mobile').valid) {
                    // if (this.registerForm.get('passwd').valid && this.registerForm.get('cpasswd').valid && this.registerForm.controls['passwd'].value == this.registerForm.controls['cpasswd'].value) {
                    if (this.registerForm.controls['pincode'].valid) {
                        if (this.registerForm.controls['address1'].valid) {
                            if (this.registerForm.controls['gst_number'].valid) {
                                if (this.registerForm.controls['pan'].valid) {
                                    if (this.registerForm.controls['voterid'].valid) {
                                        if (this.registerForm.controls['rationcard'].valid) {
                                            this.errorMessage = 'Doing Register...';
                                            this.isDisabled = true;
                                            var loader_1 = this.loadingCtrl.create({
                                                content: 'Please Wait',
                                                spinner: 'bubbles',
                                            });
                                            loader_1.present();
                                            var postData = Object.assign({}, values);
                                            console.log(JSON.stringify(postData));
                                            this.commonservice.createCustomer(JSON.stringify(postData)).then(function (res) {
                                                if (res) {
                                                    console.log(res);
                                                    if (res['status']) {
                                                        var toast = _this.toastCtrl.create({
                                                            message: res.msg,
                                                            duration: 6000
                                                        });
                                                        toast.present();
                                                        _this.viewCtrl.dismiss(res.response);
                                                    }
                                                    else {
                                                        var toast = _this.toastCtrl.create({
                                                            message: res.msg,
                                                            duration: 6000
                                                        });
                                                        toast.present();
                                                        _this.errorMessage = res.msg;
                                                        _this.isDisabled = false;
                                                    }
                                                    loader_1.dismiss();
                                                }
                                            }, function (error) {
                                                _this.isDisabled = false;
                                                loader_1.dismiss();
                                            });
                                        }
                                        else {
                                            console.log('ration');
                                            var toast = this.toastCtrl.create({
                                                message: 'Please Enter Correct RationCard',
                                                position: 'bottom',
                                                duration: 6000
                                            });
                                            toast.present();
                                        }
                                    }
                                    else {
                                        console.log('voter id');
                                        var toast = this.toastCtrl.create({
                                            message: 'Please Enter Correct VoterCard',
                                            position: 'bottom',
                                            duration: 6000
                                        });
                                        toast.present();
                                    }
                                }
                                else {
                                    console.log('pan');
                                    var toast = this.toastCtrl.create({
                                        message: 'Please Enter Correct PanCard',
                                        position: 'bottom',
                                        duration: 6000
                                    });
                                    toast.present();
                                }
                            }
                            else {
                                console.log('gst');
                                var toast = this.toastCtrl.create({
                                    message: 'Please Enter Correct Gst Number',
                                    position: 'bottom',
                                    duration: 6000
                                });
                                toast.present();
                            }
                        }
                        else {
                            console.log('village');
                            var toast = this.toastCtrl.create({
                                message: 'Please Enter Address',
                                position: 'bottom',
                                duration: 6000
                            });
                            toast.present();
                        }
                    }
                    else {
                        console.log('tc');
                        var toast = this.toastCtrl.create({
                            message: 'Enter Valid Pincode',
                            position: 'bottom',
                            duration: 6000
                        });
                        toast.present();
                    }
                    // }
                    // else {
                    //   if (this.registerForm.controls['passwd'].value != this.registerForm.controls['cpasswd'].value) {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Password and Confirm Password Mismatch',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    //   else {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Minimum 8 to 16 Characters Only Allowed',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    // }
                }
                else {
                    var toast = this.toastCtrl.create({
                        message: ' Enter Valid Mobile Number',
                        position: 'bottom',
                        duration: 6000
                    });
                    toast.present();
                }
            }
            else {
                var toast = this.toastCtrl.create({
                    message: 'Enter Valid Email Id',
                    position: 'bottom',
                    duration: 6000
                });
                toast.present();
            }
        }
        else {
            var toast = this.toastCtrl.create({
                message: 'FirstName Must Contain Alphabets Only',
                position: 'bottom',
                duration: 6000
            });
            toast.present();
        }
    };
    AddQuickCus.prototype.scrollToTop = function () {
        this.content.scrollToTop();
    };
    AddQuickCus.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    AddQuickCus.prototype.getmodal = function (name, details) {
        var _this = this;
        var mod = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__["a" /* CountrymodelPage */], { data: details, name: name });
        mod.present();
        mod.onDidDismiss(function (dataa, name) {
            if (dataa != undefined) {
                var loader_2 = _this.loadingCtrl.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_2.present();
                if (name == 'Country') {
                    _this.common.getstate(dataa['id_country']).then(function (data) {
                        _this.registerForm.controls['countryname'].setValue(dataa['name']);
                        _this.registerForm.controls['id_country'].setValue(dataa['id_country']);
                        _this.state = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'State') {
                    _this.common.getcity(dataa['id_state']).then(function (data) {
                        _this.registerForm.controls['statename'].setValue(dataa['name']);
                        _this.registerForm.controls['id_state'].setValue(dataa['id_state']);
                        _this.city = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'City') {
                    _this.registerForm.controls['cityname'].setValue(dataa['name']);
                    _this.registerForm.controls['id_city'].setValue(dataa['id_city']);
                    loader_2.dismiss();
                }
                if (name == 'Village') {
                    _this.registerForm.controls['village_name'].setValue(dataa['village_name']);
                    _this.registerForm.controls['id_village'].setValue(dataa['id_village']);
                    loader_2.dismiss();
                }
            }
        });
    };
    AddQuickCus.prototype.goto = function () {
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_6__home_home__["a" /* HomePage */]);
    };
    AddQuickCus.prototype.typecheck = function () {
        if (this.registerForm.controls["cus_type"].value == '2') {
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
        else if (this.registerForm.controls["cus_type"].value == '1') {
            // this.registerForm.controls['gst_number'].clearValidators();
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
    };
    AddQuickCus.prototype.checkseg = function () {
        if (this.type == 'o') {
            this.registerForm.controls['cus_type'].setValue(2);
            this.typecheck();
        }
        else {
            this.registerForm.controls['cus_type'].setValue(1);
            this.typecheck();
        }
    };
    AddQuickCus.prototype.texto = function (event) {
        console.log(event);
        var NUMBER_REGEXP = /^[a-zA-Z ]*$/;
        var newValue = event.target.value;
        var regExp = new RegExp(NUMBER_REGEXP);
        console.log(regExp);
        var withNoDigits = event.target.value.replace(/[0-9]/g, '');
        this.registerForm.controls['firstname'].setValue(withNoDigits);
        //  if (!regExp.test(newValue)) {
        //   let v:any = this.registerForm.controls['firstname'].value.slice(0, -1);
        //   this.registerForm.controls['firstname'].setValue(v);
        //  }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], AddQuickCus.prototype, "content", void 0);
    AddQuickCus = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-add-quick-cus',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-quick-cus\add-quick-cus.html"*/'<!-- <ion-header>\n  <ion-navbar>\n    <ion-title>\n      Customer Detail\n      <ion-icon style="float: right;" name="close-circle" (click)="close()"></ion-icon>\n    </ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n \n  <br/>\n  <div align="center">\n      <ion-note >New Customer? Fill below details to create customer</ion-note>\n  </div>\n  \n  <ion-row>\n    <ion-col text-wrap offset-1 col-10>\n        <ion-item no-padding *ngIf="askBranch == 1">\n          <ion-label color="label-color" stacked>Branch <span class="required">*</span></ion-label>\n          <ion-select [(ngModel)]="cusData[\'id_branch\']">\n            <ion-option *ngFor="let b of branches" [value]="b.id_branch">{{b.name}}</ion-option>\n          </ion-select>\n          <ion-icon style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n        </ion-item>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>First Name <span class="required">*</span></ion-label>\n          <ion-input type="text" [(ngModel)]="cusData[\'firstname\']" required [readonly]="cusData[\'id_customer\'] > 0"></ion-input>\n        </ion-item>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Mobile <span class="required">*</span></ion-label>\n          <ion-input type="tel" [(ngModel)]="cusData[\'mobile\']"  required [readonly]="cusData[\'id_customer\'] > 0"  maxlength="10"></ion-input>\n        </ion-item>\n       \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>City</ion-label> \n          <ion-input [(ngModel)]="cusData[\'cityname\']" type="text" readonly=\'true\'></ion-input>\n          <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'City\',city)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n      </ion-item> \n        <ion-item no-padding>\n            <ion-label color="label-color" stacked>Area</ion-label> \n            <ion-input type="text"  (tap)="getmodal(\'Village\',village)" [(ngModel)]="cusData[\'village_name\']" readonly=\'true\'></ion-input>\n            <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n        </ion-item> \n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Customer Type</ion-label>\n          <ion-select interface="popover" [(ngModel)]="cusData[\'cus_type\']" (ionChange)="usertypecheck()">\n              <ion-option value="1">Individual</ion-option>\n              <ion-option value="2">Company</ion-option>    \n          </ion-select>\n        </ion-item>\n        <ion-item *ngIf="cusData[\'cus_type\'] == 2" no-padding>\n          <ion-label color="label-color" stacked>GST Number </ion-label>\n          <ion-input type="text" [(ngModel)]="cusData[\'gst_number\']"  maxlength="15" (ionChange)="validateCaptilize(cusData[\'gst_number\'])"></ion-input>\n      </ion-item>\n    </ion-col>\n  </ion-row> \n</ion-content>\n\n<ion-footer *ngIf="cusData[\'id_customer\'] != \'\' || cusData[\'mobile\'] != \'\' ">\n  <button ion-button icon-start full class="theme-btn" (click)="proceed()">Proceed</button>\n</ion-footer> -->\n<ion-header>\n  <ion-navbar>\n      <!-- <button ion-button menuToggle>\n          <ion-icon name="menu"></ion-icon>\n      </button> -->\n      <ion-title style="text-align: center !important;\n" >\n<img class="header-logo" src=\'assets/img/header-final.svg\' />\n        <ion-icon style="float: right;color: black;margin-top: 10px;" name="close-circle" (click)="close()"></ion-icon>\n\n      </ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content text-center padding>\n  <ion-segment [(ngModel)]="type" (ngModelChange)="checkseg()" mode="ios" color="label-color">\n      <ion-segment-button value="p">\n          Personal\n      </ion-segment-button>\n      <ion-segment-button value="o">\n          Business\n      </ion-segment-button>\n  </ion-segment>\n\n  <form [formGroup]="registerForm" novalidate padding>\n\n      <span *ngIf="type == \'p\'">\n          <!-- <ion-item no-padding> -->\n            <ion-label style="text-align: left;" color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n            <input type="text" style="font-size: 1.6rem;\n            font-weight: normal;color: #000;padding-top: 10px;\n    padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n    \n          <!-- </ion-item> -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relation Type</ion-label>\n              <ion-select [formControl]="relation_type">\n                  <ion-option value="1">S/O</ion-option>\n                  <ion-option value="2">D/O</ion-option>\n                  <ion-option value="3">W/O</ion-option>\n              </ion-select>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relation Name</ion-label>\n              <ion-input type="text" [formControl]="relation_name"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n              </ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Email</ion-label>\n              <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Marital Status</ion-label>\n              <ion-select (ionChange)="onSelectChange($event)" [formControl]="marital_status">\n                  <ion-option value="1">Single</ion-option>\n                  <ion-option value="2">Married</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>\n\n          <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Spouse Name</ion-label>\n              <ion-input type="text" placeholder="Spouse Name" [formControl]="spouse_name"></ion-input>\n          </ion-item>\n\n          <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Spouse DOB</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_dob" displayFormat="DD-MM-YYYY" placeholder="Spouse DOB"\n                  (tap)="birth(\'spouse\',\'\')"></ion-input>\n          </ion-item>\n\n       <!--    <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n              <ion-label color="label-color" stacked>Wedding Date</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_wed" displayFormat="DD-MM-YYYY" placeholder="Wedding date"\n                  (tap)="wed(\'spouse\')"></ion-input>\n          </ion-item> -->\n\n          <div formArrayName="childrendata" *ngIf="(selected == 2 || selected == 3)">\n              <ion-label  color="label-color" align="left" stacked>Add Childrens  </ion-label>\n              <div *ngFor="let p of registerForm.get(\'childrendata\').controls; let i = index;">\n                  <div [formGroupName]="i">\n                      <ion-row no-padding>\n                          <ion-col col-5>\n                              <ion-input type="text" formControlName="child_name" placeholder="name"\n                                  style="border-bottom: 1px solid gray;"></ion-input>\n                          </ion-col>\n                          <ion-col col-5>\n                              <ion-input readonly="true" class="ion_datetime" formControlName="child_dob" displayFormat="DD-MM-YYYY" placeholder="DOB" \n                              (tap)="birth(\'child\',i)" style="border-bottom: 1px solid gray;"></ion-input>\n                          </ion-col>\n                          <ion-col col-1 style="margin: auto;">\n                              <ion-icon (click)="add(i)"\n                                  style="color: red;text-transform: initial;float: right;font-size: 2rem;" name="add">\n                              </ion-icon>\n                          </ion-col>\n                          <ion-col col-1 style="margin: auto;" *ngIf="i != 0">\n                              <ion-icon (click)="delete(i)"\n                                  style="color: red;text-transform: initial;float: right;font-size: 2rem;"\n                                  name="trash"></ion-icon>\n                          </ion-col>\n                      </ion-row>\n                  </div>\n              </div>\n          </div>\n          <!--   </ion-item> -->\n\n\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item>   -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="address1"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 2</ion-label>\n              <ion-input type="text" [formControl]="address2"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n              <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n              </ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'Country\',country)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'State\',state)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'City\',city)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Village</ion-label> \n              <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n          </ion-item>          -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Select Religion</ion-label>\n              <ion-select interface="popover" [formControl]="religion">\n                  <ion-option value="1">Hindu</ion-option>\n                  <ion-option value="2">Muslim</ion-option>\n                  <ion-option value="3">Christian</ion-option>\n              </ion-select>\n          </ion-item> -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Customer Type</ion-label>\n              <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                  <ion-option value="1" >Individual</ion-option>\n              </ion-select>\n          </ion-item>    -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_birth" displayFormat="DD-MM-YYYY"\n                  (tap)="birth(\'common\',\'\')"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n              <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_wed" displayFormat="DD-MM-YYYY"\n                  (tap)="wed(\'common\',\'\')"></ion-input>\n          </ion-item>\n\n          <!--         <ion-row style="padding-left: 10px;padding-right: 0; position: relative; font-weight: normal;" *ngIf="branchSettings[\'settings\'][\'branch_settings\'] == 1 && branchSettings[\'settings\'][\'is_branchwise_cus_reg\'] == 1 ">\n        <ion-col col-10 style="margin: auto;">\n            <ion-input [formControl]="branchname" (tap)="openmodal()" type="text" readonly=\'true\' placeholder="Select Branch" style="font-size: medium;"></ion-input>\n        </ion-col>\n        <ion-col col-2>\n            <ion-icon (tap)="openmodal()" style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n        </ion-col>\n    </ion-row> -->\n\n\n          <!-- <ion-item no-padding>\n      <ion-label color="label-color" stacked>Company Name </ion-label>\n      <ion-input type="text" [formControl]="company_name" ></ion-input>\n  </ion-item>\n\n  <ion-item no-padding>\n      <ion-label color="label-color" stacked>GST Number </ion-label>\n      <ion-input type="text" [formControl]="gst_number"  maxlength="15" (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n  </ion-item> -->\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pancard No </ion-label>\n              <ion-input type="text" [formControl]="pan" maxlength="10"\n                  (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n          </ion-item>\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Voter ID No </ion-label>\n              <ion-input type="text" [formControl]="voterid" maxlength="10"\n                  (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n          </ion-item>\n          <!-- \n  <ion-item no-padding>\n      <ion-label color="label-color" stacked>Rationcard No </ion-label>\n      <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n  </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Comments </ion-label>\n              <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n          </ion-item>\n      </span>\n\n      <span *ngIf="type == \'o\'">\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="firstname"></ion-input>\n          </ion-item> -->\n          <ion-label style="text-align: left;" color="label-color" stacked>Company Name<span class="required"> *</span></ion-label>\n          <input type="text" style="font-size: 1.6rem;\n          font-weight: normal;color: #000;padding-top: 10px;\n  padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n  \n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Last Name</ion-label>\n              <ion-input type="text" [formControl]="lastname"></ion-input>\n          </ion-item>  -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n              </ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Email</ion-label>\n              <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n              <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n              <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n          </ion-item>   -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n              <ion-input type="text" [formControl]="address1"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Address 2</ion-label>\n              <ion-input type="text" [formControl]="address2"></ion-input>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n              <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n              </ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'Country\',country)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'State\',state)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n              <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                  (click)="getmodal(\'City\',city)">\n                  <ion-icon name="arrow-dropdown"></ion-icon>\n              </button>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Village</ion-label> \n              <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n              <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n          </ion-item>          -->\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n              <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n          </ion-item>\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Select Religion</ion-label>\n              <ion-select interface="popover" [formControl]="religion">\n                  <ion-option value="1">Hindu</ion-option>\n                  <ion-option value="2">Muslim</ion-option>\n                  <ion-option value="3">Christian</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Gender</ion-label>\n              <ion-select [formControl]="gender">\n                  <ion-option value="0">Male</ion-option>\n                  <ion-option value="1">Female</ion-option>\n                  <ion-option value="3">Others</ion-option>\n              </ion-select>\n          </ion-item>   -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Customer Type</ion-label>\n              <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                  <ion-option value="2" >Company</ion-option>    \n              </ion-select>\n          </ion-item>    -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n              <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_birth" displayFormat="DD-MM-YYYY" (tap)="birth()"></ion-input>\n          </ion-item> \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n              <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_wed" displayFormat="DD-MM-YYYY" (tap)="wed()"></ion-input>\n          </ion-item>    -->\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Nominee Name </ion-label>\n              <ion-input type="text" [formControl]="nominee_name" ></ion-input>\n          </ion-item>\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Relationship </ion-label>\n              <ion-input type="text" [formControl]="nominee_relationship" ></ion-input>\n          </ion-item> -->\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Mobile </ion-label>\n              <ion-input type="number" [formControl]="nominee_mobile" placeholder="10 Digit Mobile Number" maxlength="10"></ion-input>\n          </ion-item> -->\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Company Name </ion-label>\n              <ion-input type="text" [formControl]="company_name"></ion-input>\n          </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>GST Number<span class="required"> *</span> </ion-label>\n              <ion-input type="text" [formControl]="gst_number" maxlength="15"\n                  (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n          </ion-item>\n\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Pancard No </ion-label>\n              <ion-input type="text" [formControl]="pan" maxlength="10"\n                  (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n          </ion-item>\n\n          <!-- <ion-item no-padding>\n              <ion-label color="label-color" stacked>Voter ID No </ion-label>\n              <ion-input type="text" [formControl]="voterid"  maxlength="10" (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n          </ion-item> -->\n          <!-- \n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Rationcard No </ion-label>\n              <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n          </ion-item> -->\n\n          <ion-item no-padding>\n              <ion-label color="label-color" stacked>Comments </ion-label>\n              <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n          </ion-item>\n      </span>\n\n\n      <!-- <ion-row style="border: none !important;" *ngIf="type == \'o\'">\n          <ion-col style="text-align: -webkit-center !important;">\n              <button (click)="onSubmit(registerForm.value)" ion-button class="joinbtn" block color="dark">\n                Submit</button>\n          </ion-col>\n      </ion-row> -->\n\n  </form>\n\n</ion-content>\n<ion-footer>\n  <!-- <button ion-button *ngIf="type != \'o\'" icon-start full class="theme-btn" (click)="next($event)">Next</button> -->\n  <button ion-button icon-start full class="theme-btn" (click)="onSubmit(registerForm.value)">Save</button>\n</ion-footer>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-quick-cus\add-quick-cus.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormBuilder */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]])
    ], AddQuickCus);
    return AddQuickCus;
}());

//# sourceMappingURL=add-quick-cus.js.map

/***/ }),

/***/ 181:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BluetoothPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_bluetooth_serial__ = __webpack_require__(390);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__home_home__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the BluetoothPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var BluetoothPage = /** @class */ (function () {
    function BluetoothPage(load, toastCtrl, alertCtrl, bluetoothSerial, navCtrl, navParams) {
        this.load = load;
        this.toastCtrl = toastCtrl;
        this.alertCtrl = alertCtrl;
        this.bluetoothSerial = bluetoothSerial;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.listToggle = false;
        this.pairedDeviceID = 0;
        this.dataSend = "";
        this.dataSend = this.navParams.get('file');
        this.checkBluetoothEnabled();
    }
    BluetoothPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad BluetoothPage');
    };
    BluetoothPage.prototype.checkBluetoothEnabled = function () {
        var _this = this;
        this.bluetoothSerial.isEnabled().then(function (success) {
            _this.listPairedDevices();
        }, function (error) {
            console.log(error);
            _this.showError("Please Enable Bluetooth");
        });
    };
    BluetoothPage.prototype.listPairedDevices = function () {
        var _this = this;
        this.bluetoothSerial.list().then(function (success) {
            _this.pairedList = success;
            _this.listToggle = true;
            console.log(success);
        }, function (error) {
            console.log(error);
            _this.showError("Please Enable Bluetooth");
            _this.listToggle = false;
        });
    };
    BluetoothPage.prototype.selectDevice = function () {
        console.log(this.pairedList);
        console.log(this.pairedDeviceID);
        var connectedDevice = this.pairedList[this.pairedDeviceID];
        if (!connectedDevice.address) {
            this.showError('Select Paired Device to connect');
            return;
        }
        var address = connectedDevice.address;
        var name = connectedDevice.name;
        this.connect(address);
    };
    BluetoothPage.prototype.connect = function (address) {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        console.log(address);
        // Attempt to connect device with specified address, call app.deviceConnected if success
        this.bluetoothSerial.connect(address).subscribe(function (success) {
            console.log(success);
            _this.deviceConnected();
            loader.dismiss();
            _this.showToast("Successfully Connected");
        }, function (error) {
            console.log(error);
            loader.dismiss();
            _this.showError("Error:Connecting to Device");
        });
    };
    BluetoothPage.prototype.deviceConnected = function () {
        var _this = this;
        // Subscribe to data receiving as soon as the delimiter is read
        this.bluetoothSerial.subscribe('\n').subscribe(function (success) {
            _this.handleData(success);
            _this.showToast("Connected Successfullly");
            console.log(success);
        }, function (error) {
            console.log(error);
            _this.showError(error);
        });
    };
    BluetoothPage.prototype.deviceDisconnected = function () {
        // Unsubscribe from data receiving
        this.bluetoothSerial.disconnect();
        this.showToast("Device Disconnected");
    };
    BluetoothPage.prototype.handleData = function (data) {
        this.showToast(data);
    };
    BluetoothPage.prototype.sendData = function () {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.bluetoothSerial.write(this.dataSend['est_printable']).then(function (success) {
            loader.dismiss();
            _this.showToast(success);
            console.log(success);
        }, function (error) {
            console.log(error);
            loader.dismiss();
            _this.showError(error);
        });
    };
    BluetoothPage.prototype.showError = function (error) {
        var alert = this.alertCtrl.create({
            title: 'Error',
            subTitle: error,
            buttons: ['Dismiss']
        });
        alert.present();
    };
    BluetoothPage.prototype.showToast = function (msj) {
        var toast = this.toastCtrl.create({
            message: msj,
            duration: 1000
        });
        toast.present();
    };
    BluetoothPage.prototype.goto = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_3__home_home__["a" /* HomePage */]);
    };
    BluetoothPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-bluetooth',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\bluetooth\bluetooth.html"*/'<!--\n  Generated template for the BluetoothPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title style="text-align: center;\n    margin-right: 15%;" (click)="goto()"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n  <!-- <ion-toolbar text-center *ngIf="page_type == \'print\'">\n      <ion-title>Print Estimation</ion-title>\n  </ion-toolbar> -->\n</ion-header>\n\n\n<ion-content padding>\n  <ion-row>\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Bluetooth Devices  <ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n  <ion-row>\n    <ion-col>\n      <ion-list radio-group [(ngModel)]="pairedDeviceID" *ngIf="listToggle">\n        <ion-item *ngFor="let i of pairedList;let j=index">\n          <ion-label style="color: black ;">{{i.name}}</ion-label>\n          <ion-radio value="{{j}}" ></ion-radio>\n        </ion-item>\n      </ion-list>\n    </ion-col>\n  </ion-row>\n  <ion-row>\n    <ion-col col-4>\n      <button ion-button  class="submit-button" (click)="listPairedDevices()">\n        <ion-icon name="refresh"></ion-icon>&nbsp;Refresh </button>\n    </ion-col>\n    <ion-col col-4>\n      <button ion-button  class="submit-button" *ngIf="listToggle" (click)="selectDevice()">\n        <ion-icon name="bluetooth"></ion-icon>&nbsp;Connect </button>\n    </ion-col>\n    <ion-col col-4>\n      <button ion-button  class="submit-button" (click)="sendData()">\n        <ion-icon name="send"></ion-icon>&nbsp;Print\n      </button>\n    </ion-col>\n  </ion-row>\n\n\n \n  \n  <!-- <ion-list>\n    <ion-item>\n      <ion-label floating>Type The Data You want to Send</ion-label>\n      <ion-input type="text" name="datasend" [(ngModel)]="dataSend"></ion-input>\n    </ion-item>\n  </ion-list> -->\n  <!-- <button ion-button full class="submit-button" (click)="sendData()">\n    <ion-icon name="send"></ion-icon>&nbsp;Send Data Via Bluetooth\n  </button> -->\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\bluetooth\bluetooth.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_bluetooth_serial__["a" /* BluetoothSerial */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], BluetoothPage);
    return BluetoothPage;
}());

//# sourceMappingURL=bluetooth.js.map

/***/ }),

/***/ 182:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CusRegisterPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__home_home__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/*
  Generated class for the Register page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var CusRegisterPage = /** @class */ (function () {
    function CusRegisterPage(datePicker, platform, builder, nav, events, menu, commonservice, toastCtrl, loadingCtrl, event, modal, common) {
        var _this = this;
        this.datePicker = datePicker;
        this.platform = platform;
        this.builder = builder;
        this.nav = nav;
        this.events = events;
        this.menu = menu;
        this.commonservice = commonservice;
        this.toastCtrl = toastCtrl;
        this.loadingCtrl = loadingCtrl;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.type = "p";
        this.count = 0;
        this.animateClass = { 'zoom-in': true };
        this.countries = [];
        this.states = [];
        this.cities = [];
        this.submitted = false;
        this.isDisabled = false;
        this.errorMessage = '';
        this.typechecknew = 'password';
        this.showPassnew = false;
        this.typecheckconfirm = 'password';
        this.showPassconfirm = false;
        this.reg = /^[a-zA-Z ]*$/;
        this.emailPattern = "^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$";
        this.gstPattern = "^([0-9]{2}[a-zA-Z]{4}([a-zA-Z]{1}|[0-9]{1})[0-9]{4}[a-zA-Z]{1}([a-zA-Z]|[0-9]){3}){0,15}$";
        this.panPattern = "^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$";
        this.votterPattern = "^([a-zA-Z]){3}([0-9]){7}?$";
        this.rationPattern = "^([a-zA-Z0-9]){8,12}\s*$";
        this.pwd = false;
        this.accept = false;
        this.deviceid = JSON.parse(localStorage.getItem('DeviceData'));
        this.branch_name = '';
        this.branchid = '';
        this.branch_settings = '';
        this.is_branchwise_cus_reg = '';
        this.id_branch = '';
        this.details = { 'countryname': 'India', 'id_country': '101', 'statename': 'Tamil Nadu', 'id_state': '35', 'cityname': 'Palani', 'id_city': '4065' };
        this.country = [];
        this.state = [];
        this.city = [];
        this.village = [];
        this.address1 = '';
        this.address2 = '';
        this.pincode = [];
        this.religion = [];
        this.gender = [];
        this.cus_type = [];
        this.date_of_birth = [];
        this.date_of_wed = [];
        this.selected = 0;
        this.showinput = false;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        console.log(this.empData);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idcity']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['cityname']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idstate']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['statename']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['idcountry']);
        console.log(JSON.parse(localStorage.getItem('empDetail'))['countryname']);
        this.nav = nav;
        this.menu = menu;
        this.platform = platform;
        this.registerForm = builder.group({
            'firstname': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required])],
            'relation_name': [''],
            'relation_type': [''],
            'mobile': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(10), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(10)])],
            'email': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.emailPattern)])],
            // 'passwd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            // 'cpasswd': ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(16)])],
            'address1': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required]), this.address1 != null ? this.address1['address1'] : null],
            'address2': this.address2 != null ? this.address1['address2'] : null,
            'pincode': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(6)]), this.pincode != null ? this.pincode['pincode'] : null],
            'religion': this.religion != null ? this.religion['religion'] : null,
            'gender': this.gender != null ? this.gender['gender'] : null,
            // 'cus_type': this.cus_type != null ? this.cus_type['cus_type'] : null,
            'cus_type': 1,
            'date_of_birth': this.date_of_birth != null ? this.date_of_birth['date_of_birth'] : null,
            'date_of_wed': this.date_of_wed != null ? this.date_of_wed['date_of_wed'] : null,
            'countryname': this.details['countryname'],
            'id_country': this.details['id_country'],
            'statename': this.details['statename'],
            'id_state': this.details['id_state'],
            'cityname': this.details['cityname'],
            'id_city': this.details['id_city'],
            'village_name': ['', this.village_name != null ? this.village_name['village_name'] : null],
            'id_village': this.details['id_village'],
            //  'branchname': ['', Validators.compose([Validators.required]), this.branchname != null ? this.branchname['branchname'] : null],
            'id_branch': this.empData['id_branch'] != null ? this.empData['id_branch'] : null,
            'nominee_name': this.nominee_name != null ? this.nominee_name['nominee_name'] : null,
            'nominee_relationship': this.nominee_relationship != null ? this.nominee_relationship['nominee_relationship'] : null,
            'nominee_mobile': this.nominee_mobile != null ? this.nominee_mobile['nominee_mobile'] : null,
            'company_name': this.company_name != null ? this.company_name['company_name'] : null,
            'gst_number': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]), this.gst_number != null ? this.gst_number['gst_number'] : null],
            'pan': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.panPattern)]), this.pan != null ? this.pan['pan'] : null],
            'voterid': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.votterPattern)]), this.voterid != null ? this.voterid['voterid'] : null],
            'rationcard': ['', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.rationPattern)]), this.rationcard != null ? this.rationcard['rationcard'] : null],
            //'pan': this.pan != null ? this.pan['pan'] : null,
            // 'voterid': this.voterid != null ? this.voterid['voterid'] : null,
            //'rationcard': this.rationcard != null ? this.rationcard['rationcard'] : null,
            'comments': this.comments != null ? this.comments['comments'] : null,
            'marital_status': this.marital_status != null ? this.marital_status['marital_status'] : null,
            'spouse_name': this.spouse_name != null ? this.spouse_name['spouse_name'] : null,
            'spouse_dob': this.spouse_dob != null ? this.spouse_dob['spouse_dob'] : null,
            //  'spouse_wed': this.spouse_wed != null ? this.spouse_wed['spouse_wed'] : null,
            childrendata: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
        });
        this.add();
        this.firstname = this.registerForm.controls['firstname'];
        this.relation_name = this.registerForm.controls['relation_name'];
        this.relation_type = this.registerForm.controls['relation_type'];
        this.mobile = this.registerForm.controls['mobile'];
        this.email = this.registerForm.controls['email'];
        // this.passwd = this.registerForm.controls['passwd'];
        // this.cpasswd = this.registerForm.controls['cpasswd'];
        this.address1 = this.registerForm.controls['address1'];
        this.address2 = this.registerForm.controls['address2'];
        this.pincode = this.registerForm.controls['pincode'];
        this.religion = this.registerForm.controls['religion'];
        this.gender = this.registerForm.controls['gender'];
        this.cus_type = this.registerForm.controls['cus_type'];
        this.date_of_birth = this.registerForm.controls['date_of_birth'];
        this.date_of_wed = this.registerForm.controls['date_of_wed'];
        this.countryname = this.registerForm.controls['countryname'];
        this.statename = this.registerForm.controls['statename'];
        this.cityname = this.registerForm.controls['cityname'];
        this.village_name = this.registerForm.controls['village_name'];
        this.id_country = this.registerForm.controls['id_country'];
        this.id_state = this.registerForm.controls['id_state'];
        this.id_city = this.registerForm.controls['id_city'];
        this.id_village = this.registerForm.controls['id_village'];
        this.branchname = this.registerForm.controls['branchname'];
        this.id_branch = this.empData['id_branch'];
        this.nominee_name = this.registerForm.controls['nominee_name'];
        this.nominee_relationship = this.registerForm.controls['nominee_relationship'];
        this.nominee_mobile = this.registerForm.controls['nominee_mobile'];
        this.company_name = this.registerForm.controls['company_name'];
        this.nominee_name = this.registerForm.controls['nominee_name'];
        this.gst_number = this.registerForm.controls['gst_number'];
        this.pan = this.registerForm.controls['pan'];
        this.voterid = this.registerForm.controls['voterid'];
        this.rationcard = this.registerForm.controls['rationcard'];
        this.comments = this.registerForm.controls['comments'];
        this.marital_status = this.registerForm.controls['marital_status'];
        this.spouse_name = this.registerForm.controls['spouse_name'];
        this.spouse_dob = this.registerForm.controls['spouse_dob'];
        //   this.spouse_wed = this.registerForm.controls['spouse_wed'];
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getcountry().then(function (data) {
            _this.country = data;
            _this.common.getstate(_this.details['id_country']).then(function (data) {
                _this.registerForm.controls['countryname'].setValue(_this.details['countryname']);
                _this.registerForm.controls['id_country'].setValue(_this.details['id_country']);
                _this.state = data;
                _this.common.getcity(_this.details['id_state']).then(function (data) {
                    _this.registerForm.controls['statename'].setValue(_this.details['statename']);
                    _this.registerForm.controls['id_state'].setValue(_this.details['id_state']);
                    _this.registerForm.controls['cityname'].setValue(_this.details['cityname']);
                    _this.registerForm.controls['id_city'].setValue(_this.details['id_city']);
                    _this.city = data;
                    loader.dismiss();
                });
            });
        });
        this.common.getVillages().then(function (data) {
            _this.village = data;
            console.log(_this.village);
        });
    }
    CusRegisterPage.prototype.newchild = function () {
        return this.builder.group({
            'child_name': this.child_name != null ? this.child_name['child_name'] : null,
            'child_dob': this.child_dob != null ? this.child_dob['child_dob'] : null
        });
    };
    CusRegisterPage.prototype.add = function () {
        this.childrendata = this.registerForm.get('childrendata');
        this.childrendata.push(this.newchild());
    };
    CusRegisterPage.prototype.delete = function (i) {
        this.childrendata.removeAt(i);
    };
    CusRegisterPage.prototype.checkIfMatchingPasswords = function (passwordKey, passwordConfirmationKey) {
        var _this = this;
        console.log('1111111');
        return function (group) {
            var passwordInput = group.controls[passwordKey], passwordConfirmationInput = group.controls[passwordConfirmationKey];
            if (passwordInput.value !== passwordConfirmationInput.value) {
                // this.errorMessage = 'PasswordMismatch';
                _this.pwd = true;
                return passwordConfirmationInput.setErrors({ notEquivalent: true });
            }
            else {
                // this.errorMessage = '';
                _this.pwd = false;
                return passwordConfirmationInput.setErrors(null);
            }
        };
    };
    CusRegisterPage.prototype.ionViewDidLoad = function () {
    };
    CusRegisterPage.prototype.segmentChanged = function (e) {
        this.content.scrollToTop();
    };
    CusRegisterPage.prototype.next = function (e) {
        this.type = 'o';
        this.content.scrollToTop();
    };
    CusRegisterPage.prototype.validateCaptilize = function (e, type) {
        console.log(e['value']);
        console.log(type);
        console.log((e['value']).toUpperCase());
        if (type == 'gstno') {
            this.registerForm.controls['gst_number'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['gst_number'].value.length > 15) {
                var v = this.registerForm.controls['gst_number'].value.slice(0, 15);
                this.registerForm.controls['gst_number'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'pancard') {
            this.registerForm.controls['pan'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['pan'].value.length > 10) {
                var v = this.registerForm.controls['pan'].value.slice(0, 10);
                this.registerForm.controls['pan'].setValue(v.toUpperCase());
            }
        }
        else if (type == 'voter') {
            this.registerForm.controls['voterid'].setValue(e['value'].toUpperCase());
            if (this.registerForm.controls['voterid'].value.length > 10) {
                var v = this.registerForm.controls['voterid'].value.slice(0, 10);
                this.registerForm.controls['voterid'].setValue(v.toUpperCase());
            }
        }
        else {
            if (type == 'ration') {
                this.registerForm.controls['rationcard'].setValue(e['value'].toUpperCase());
            }
        }
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    CusRegisterPage.prototype.ionViewWillEnter = function () {
        var user = false;
        this.events.publish('user:created', user);
    };
    CusRegisterPage.prototype.shownewPassword = function () {
        this.showPassnew = !this.showPassnew;
        if (this.showPassnew) {
            this.typechecknew = 'text';
        }
        else {
            this.typechecknew = 'password';
        }
    };
    CusRegisterPage.prototype.showconfirmPassword = function () {
        this.showPassconfirm = !this.showPassconfirm;
        if (this.showPassconfirm) {
            this.typecheckconfirm = 'text';
        }
        else {
            this.typecheckconfirm = 'password';
        }
    };
    CusRegisterPage.prototype.birth = function (type, index) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.details['date_of_birth'] = yy + "-" + mmm + "-" + ddd;
            _this.details['spouse_dob'] = yy + "-" + mmm + "-" + ddd;
            _this.details['child_dob'] = yy + "-" + mmm + "-" + ddd;
            if (type == 'common') {
                _this.registerForm.controls['date_of_birth'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else if (type == 'spouse') {
                _this.registerForm.controls['spouse_dob'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            else {
                _this.registerForm.get('childrendata').at(index).get('child_dob').patchValue(yy + "-" + mmm + "-" + ddd);
                // this.registerForm.controls['child_dob'].setValue(yy + "-" + mmm + "-" + ddd);
            }
            // console.log( this.productdet.due_date)
        });
    };
    CusRegisterPage.prototype.wed = function (type) {
        var _this = this;
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.details.date_of_wed = yy + "-" + mmm + "-" + ddd;
            //  this.details.spouse_wed = yy + "-" + mmm + "-" + ddd;
            // this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
            _this.registerForm.controls['date_of_wed'].setValue(yy + "-" + mmm + "-" + ddd);
            // console.log( this.productdet.due_date)
        });
    };
    CusRegisterPage.prototype.onSelectChange = function (selectedValue) {
        console.log(selectedValue);
        this.selected = selectedValue;
        console.log(this.selected);
    };
    CusRegisterPage.prototype.onSubmit = function (values) {
        var _this = this;
        console.log(this.registerForm);
        console.log(values);
        /*     var proceed = (this.branch_settings == 1 && this.is_branchwise_cus_reg == 1) ? true : false;
            console.log(proceed);
         */
        if (this.registerForm.get('firstname').valid) {
            if (this.registerForm.get('email').valid) {
                if (this.registerForm.get('mobile').valid) {
                    // if (this.registerForm.get('passwd').valid && this.registerForm.get('cpasswd').valid && this.registerForm.controls['passwd'].value == this.registerForm.controls['cpasswd'].value) {
                    if (this.registerForm.controls['pincode'].valid) {
                        if (this.registerForm.controls['address1'].valid) {
                            if (this.registerForm.controls['gst_number'].valid) {
                                if (this.registerForm.controls['pan'].valid) {
                                    if (this.registerForm.controls['voterid'].valid) {
                                        if (this.registerForm.controls['rationcard'].valid) {
                                            this.errorMessage = 'Doing Register...';
                                            this.isDisabled = true;
                                            var loader_1 = this.loadingCtrl.create({
                                                content: 'Please Wait',
                                                spinner: 'bubbles',
                                            });
                                            loader_1.present();
                                            var postData = Object.assign({}, values);
                                            console.log(JSON.stringify(postData));
                                            this.commonservice.createCustomer(JSON.stringify(postData)).then(function (res) {
                                                if (res) {
                                                    console.log(res);
                                                    if (res['status']) {
                                                        var toast = _this.toastCtrl.create({
                                                            message: res.msg,
                                                            duration: 6000
                                                        });
                                                        toast.present();
                                                        _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_6__home_home__["a" /* HomePage */], { data: _this.registerForm.value, page: 'new' });
                                                    }
                                                    else {
                                                        var toast = _this.toastCtrl.create({
                                                            message: res.msg,
                                                            duration: 6000
                                                        });
                                                        toast.present();
                                                        _this.errorMessage = res.msg;
                                                        _this.isDisabled = false;
                                                    }
                                                    loader_1.dismiss();
                                                }
                                            }, function (error) {
                                                _this.isDisabled = false;
                                                loader_1.dismiss();
                                            });
                                        }
                                        else {
                                            console.log('ration');
                                            var toast = this.toastCtrl.create({
                                                message: 'Please Enter Correct RationCard',
                                                position: 'bottom',
                                                duration: 6000
                                            });
                                            toast.present();
                                        }
                                    }
                                    else {
                                        console.log('voter id');
                                        var toast = this.toastCtrl.create({
                                            message: 'Please Enter Correct VoterCard',
                                            position: 'bottom',
                                            duration: 6000
                                        });
                                        toast.present();
                                    }
                                }
                                else {
                                    console.log('pan');
                                    var toast = this.toastCtrl.create({
                                        message: 'Please Enter Correct PanCard',
                                        position: 'bottom',
                                        duration: 6000
                                    });
                                    toast.present();
                                }
                            }
                            else {
                                console.log('gst');
                                var toast = this.toastCtrl.create({
                                    message: 'Please Enter Correct Gst Number',
                                    position: 'bottom',
                                    duration: 6000
                                });
                                toast.present();
                            }
                        }
                        else {
                            console.log('village');
                            var toast = this.toastCtrl.create({
                                message: 'Please Enter Address',
                                position: 'bottom',
                                duration: 6000
                            });
                            toast.present();
                        }
                    }
                    else {
                        console.log('tc');
                        var toast = this.toastCtrl.create({
                            message: 'Enter Valid Pincode',
                            position: 'bottom',
                            duration: 6000
                        });
                        toast.present();
                    }
                    // }
                    // else {
                    //   if (this.registerForm.controls['passwd'].value != this.registerForm.controls['cpasswd'].value) {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Password and Confirm Password Mismatch',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    //   else {
                    //     let toast = this.toastCtrl.create({
                    //       message: 'Minimum 8 to 16 Characters Only Allowed',
                    //       position: 'bottom',
                    //       duration: 6000
                    //     });
                    //     toast.present();
                    //   }
                    // }
                }
                else {
                    var toast = this.toastCtrl.create({
                        message: ' Enter Valid Mobile Number',
                        position: 'bottom',
                        duration: 6000
                    });
                    toast.present();
                }
            }
            else {
                var toast = this.toastCtrl.create({
                    message: 'Enter Valid Email Id',
                    position: 'bottom',
                    duration: 6000
                });
                toast.present();
            }
        }
        else {
            var toast = this.toastCtrl.create({
                message: 'FirstName Must Contain Alphabets Only',
                position: 'bottom',
                duration: 6000
            });
            toast.present();
        }
    };
    CusRegisterPage.prototype.scrollToTop = function () {
        this.content.scrollToTop();
    };
    CusRegisterPage.prototype.getmodal = function (name, details) {
        var _this = this;
        var mod = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_countrymodel_countrymodel__["a" /* CountrymodelPage */], { data: details, name: name });
        mod.present();
        mod.onDidDismiss(function (dataa, name) {
            if (dataa != undefined) {
                var loader_2 = _this.loadingCtrl.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_2.present();
                if (name == 'Country') {
                    _this.common.getstate(dataa['id_country']).then(function (data) {
                        _this.registerForm.controls['countryname'].setValue(dataa['name']);
                        _this.registerForm.controls['id_country'].setValue(dataa['id_country']);
                        _this.state = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'State') {
                    _this.common.getcity(dataa['id_state']).then(function (data) {
                        _this.registerForm.controls['statename'].setValue(dataa['name']);
                        _this.registerForm.controls['id_state'].setValue(dataa['id_state']);
                        _this.city = data;
                        loader_2.dismiss();
                    });
                }
                if (name == 'City') {
                    _this.registerForm.controls['cityname'].setValue(dataa['name']);
                    _this.registerForm.controls['id_city'].setValue(dataa['id_city']);
                    loader_2.dismiss();
                }
                if (name == 'Village') {
                    _this.registerForm.controls['village_name'].setValue(dataa['village_name']);
                    _this.registerForm.controls['id_village'].setValue(dataa['id_village']);
                    loader_2.dismiss();
                }
            }
        });
    };
    CusRegisterPage.prototype.goto = function () {
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_6__home_home__["a" /* HomePage */]);
    };
    CusRegisterPage.prototype.typecheck = function () {
        if (this.registerForm.controls["cus_type"].value == '2') {
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
        else if (this.registerForm.controls["cus_type"].value == '1') {
            // this.registerForm.controls['gst_number'].clearValidators();
            this.registerForm.controls["gst_number"].setValidators([__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].pattern(this.gstPattern)]);
            this.registerForm.controls['gst_number'].updateValueAndValidity();
        }
    };
    CusRegisterPage.prototype.checkseg = function () {
        if (this.type == 'o') {
            this.registerForm.controls['cus_type'].setValue(2);
            this.typecheck();
        }
        else {
            this.registerForm.controls['cus_type'].setValue(1);
            this.typecheck();
        }
    };
    CusRegisterPage.prototype.texto = function (event) {
        console.log(event);
        var NUMBER_REGEXP = /^[a-zA-Z ]*$/;
        var newValue = event.target.value;
        var regExp = new RegExp(NUMBER_REGEXP);
        console.log(regExp);
        var withNoDigits = event.target.value.replace(/[0-9]/g, '');
        this.registerForm.controls['firstname'].setValue(withNoDigits);
        //  if (!regExp.test(newValue)) {
        //   let v:any = this.registerForm.controls['firstname'].value.slice(0, -1);
        //   this.registerForm.controls['firstname'].setValue(v);
        //  }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], CusRegisterPage.prototype, "content", void 0);
    CusRegisterPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-cus-register',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cus-register\cus-register.html"*/'<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle>\n            <ion-icon name="menu"></ion-icon>\n        </button>\n        <ion-title style="text-align: center !important;\n    margin-right: 15% !important;" (click)="goto()"><img class="header-logo" src=\'assets/img/header-final.svg\' />\n        </ion-title>\n    </ion-navbar>\n</ion-header>\n\n\n<ion-content text-center padding>\n    <ion-segment [(ngModel)]="type" (ngModelChange)="checkseg()" mode="ios" color="label-color">\n        <ion-segment-button value="p">\n            Personal\n        </ion-segment-button>\n        <ion-segment-button value="o">\n            Business\n        </ion-segment-button>\n    </ion-segment>\n\n    <form [formGroup]="registerForm" novalidate padding>\n\n        <span *ngIf="type == \'p\'">\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n                </ion-input>\n            </ion-item>\n\n            <ion-label style="text-align: left;" color="label-color" stacked>First Name<span class="required"> *</span></ion-label>\n            <input type="text" style="font-size: 1.6rem;\n            font-weight: normal;color: #000;padding-top: 10px;\n    padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n      <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relation Type</ion-label>\n                <ion-select [formControl]="relation_type">\n                    <ion-option value="1">S/O</ion-option>\n                    <ion-option value="2">D/O</ion-option>\n                    <ion-option value="3">W/O</ion-option>\n                </ion-select>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relation Name</ion-label>\n                <ion-input type="text" [formControl]="relation_name"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Email</ion-label>\n                <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Gender</ion-label>\n                <ion-select [formControl]="gender">\n                    <ion-option value="0">Male</ion-option>\n                    <ion-option value="1">Female</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Marital Status</ion-label>\n                <ion-select (ionChange)="onSelectChange($event)" [formControl]="marital_status">\n                    <ion-option value="1">Single</ion-option>\n                    <ion-option value="2">Married</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>\n\n            <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Spouse Name</ion-label>\n                <ion-input type="text" placeholder="Spouse Name" [formControl]="spouse_name"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Spouse DOB</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_dob" displayFormat="DD-MM-YYYY" placeholder="Spouse DOB"\n                    (tap)="birth(\'spouse\',\'\')"></ion-input>\n            </ion-item>\n\n         <!--    <ion-item no-padding *ngIf="selected == 2 || selected == 3 ">\n                <ion-label color="label-color" stacked>Wedding Date</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="spouse_wed" displayFormat="DD-MM-YYYY" placeholder="Wedding date"\n                    (tap)="wed(\'spouse\')"></ion-input>\n            </ion-item> -->\n\n            <div formArrayName="childrendata" *ngIf="(selected == 2 || selected == 3)">\n                <ion-label  color="label-color" align="left" stacked>Add Childrens  </ion-label>\n                <div *ngFor="let p of registerForm.get(\'childrendata\').controls; let i = index;">\n                    <div [formGroupName]="i">\n                        <ion-row no-padding>\n                            <ion-col col-5>\n                                <ion-input type="text" formControlName="child_name" placeholder="name"\n                                    style="border-bottom: 1px solid gray;"></ion-input>\n                            </ion-col>\n                            <ion-col col-5>\n                                <ion-input readonly="true" class="ion_datetime" formControlName="child_dob" displayFormat="DD-MM-YYYY" placeholder="DOB" \n                                (tap)="birth(\'child\',i)" style="border-bottom: 1px solid gray;"></ion-input>\n                            </ion-col>\n                            <ion-col col-1 style="margin: auto;">\n                                <ion-icon (click)="add(i)"\n                                    style="color: red;text-transform: initial;float: right;font-size: 2rem;" name="add">\n                                </ion-icon>\n                            </ion-col>\n                            <ion-col col-1 style="margin: auto;" *ngIf="i != 0">\n                                <ion-icon (click)="delete(i)"\n                                    style="color: red;text-transform: initial;float: right;font-size: 2rem;"\n                                    name="trash"></ion-icon>\n                            </ion-col>\n                        </ion-row>\n                    </div>\n                </div>\n            </div>\n            <!--   </ion-item> -->\n\n\n\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item>   -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n                <ion-input type="text" [formControl]="address1"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 2</ion-label>\n                <ion-input type="text" [formControl]="address2"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n                <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n                </ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'Country\',country)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'State\',state)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'City\',city)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Village</ion-label> \n                <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n            </ion-item>          -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n            </ion-item>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Select Religion</ion-label>\n                <ion-select interface="popover" [formControl]="religion">\n                    <ion-option value="1">Hindu</ion-option>\n                    <ion-option value="2">Muslim</ion-option>\n                    <ion-option value="3">Christian</ion-option>\n                </ion-select>\n            </ion-item> -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Gender</ion-label>\n                <ion-select [formControl]="gender">\n                    <ion-option value="0">Male</ion-option>\n                    <ion-option value="1">Female</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>   -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Customer Type</ion-label>\n                <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                    <ion-option value="1" >Individual</ion-option>\n                </ion-select>\n            </ion-item>    -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_birth" displayFormat="DD-MM-YYYY"\n                    (tap)="birth(\'common\',\'\')"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n                <ion-input readonly="true" class="ion_datetime" [formControl]="date_of_wed" displayFormat="DD-MM-YYYY"\n                    (tap)="wed(\'common\')"></ion-input>\n            </ion-item>\n\n            <!--         <ion-row style="padding-left: 10px;padding-right: 0; position: relative; font-weight: normal;" *ngIf="branchSettings[\'settings\'][\'branch_settings\'] == 1 && branchSettings[\'settings\'][\'is_branchwise_cus_reg\'] == 1 ">\n          <ion-col col-10 style="margin: auto;">\n              <ion-input [formControl]="branchname" (tap)="openmodal()" type="text" readonly=\'true\' placeholder="Select Branch" style="font-size: medium;"></ion-input>\n          </ion-col>\n          <ion-col col-2>\n              <ion-icon (tap)="openmodal()" style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n          </ion-col>\n      </ion-row> -->\n\n\n            <!-- <ion-item no-padding>\n        <ion-label color="label-color" stacked>Company Name </ion-label>\n        <ion-input type="text" [formControl]="company_name" ></ion-input>\n    </ion-item>\n\n    <ion-item no-padding>\n        <ion-label color="label-color" stacked>GST Number </ion-label>\n        <ion-input type="text" [formControl]="gst_number"  maxlength="15" (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n    </ion-item> -->\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pancard No </ion-label>\n                <ion-input type="text" [formControl]="pan"\n                    (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Voter ID No </ion-label>\n                <ion-input type="text" [formControl]="voterid" maxlength="10"\n                    (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n            </ion-item>\n            <!-- \n    <ion-item no-padding>\n        <ion-label color="label-color" stacked>Rationcard No </ion-label>\n        <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n    </ion-item> -->\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Comments </ion-label>\n                <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n            </ion-item>\n        </span>\n\n        <span *ngIf="type == \'o\'">\n            <!-- <ion-item no-padding> -->\n                <ion-label style="text-align: left;" color="label-color" stacked>Company Name<span class="required"> *</span></ion-label>\n                <input type="text" style="font-size: 1.6rem;\n                font-weight: normal;color: #000;padding-top: 10px;\n    padding-bottom: 10px;margin: 5px 0px;width: calc(100% - 0px - 0px);border:none !important;background:transparent;    border-bottom: 1px solid lightgray !important;"   [formControl]="firstname" (keyup)="texto($event)"/>\n            <!-- </ion-item> -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Last Name</ion-label>\n                <ion-input type="text" [formControl]="lastname"></ion-input>\n            </ion-item>  -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Mobile<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="mobile" placeholder="10 Digit Mobile Number" maxlength="10">\n                </ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Email</ion-label>\n                <ion-input type="email" [formControl]="email" placeholder="youremailid@domain.com"></ion-input>\n            </ion-item>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="passwd" type="{{typechecknew}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassnew" ion-button clear color="dark" type="button" item-right (click)="shownewPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Confirm Password<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="cpasswd" type="{{typecheckconfirm}}"></ion-input>\n                <button style="padding: 0px !important" *ngIf="!showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()"> <ion-icon style="background:none !important;"  name="eye"></ion-icon></button>\n                <button style="padding: 0px !important" *ngIf="showPassconfirm" ion-button clear color="dark" type="button" item-right (click)="showconfirmPassword()">  <ion-icon style="background:none !important;" name="eye-off"></ion-icon></button>\n            </ion-item>   -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 1<span class="required"> *</span></ion-label>\n                <ion-input type="text" [formControl]="address1"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Address 2</ion-label>\n                <ion-input type="text" [formControl]="address2"></ion-input>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Country<span class="required"> *</span></ion-label>\n                <ion-input (tap)="getmodal(\'Country\',country)" type="text" readonly=\'true\' [formControl]="countryname">\n                </ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'Country\',country)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>State<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="statename" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'State\',state)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>City<span class="required"> *</span></ion-label>\n                <ion-input [formControl]="cityname" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin"\n                    (click)="getmodal(\'City\',city)">\n                    <ion-icon name="arrow-dropdown"></ion-icon>\n                </button>\n            </ion-item>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Village</ion-label> \n                <ion-input [formControl]="village_name" (tap)="getmodal(\'Village\',village)" type="text" readonly=\'true\'></ion-input>\n                <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="getmodal(\'Village\',village)" ><ion-icon name="arrow-dropdown"></ion-icon></button> \n            </ion-item>          -->\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pincode<span class="required"> *</span></ion-label>\n                <ion-input type="tel" [formControl]="pincode" maxlength="6"></ion-input>\n            </ion-item>\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Select Religion</ion-label>\n                <ion-select interface="popover" [formControl]="religion">\n                    <ion-option value="1">Hindu</ion-option>\n                    <ion-option value="2">Muslim</ion-option>\n                    <ion-option value="3">Christian</ion-option>\n                </ion-select>\n            </ion-item>   -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Gender</ion-label>\n                <ion-select [formControl]="gender">\n                    <ion-option value="0">Male</ion-option>\n                    <ion-option value="1">Female</ion-option>\n                    <ion-option value="3">Others</ion-option>\n                </ion-select>\n            </ion-item>   -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Customer Type</ion-label>\n                <ion-select interface="popover" [formControl]="cus_type" (ionChange)="typecheck()">\n                    <ion-option value="2" >Company</ion-option>    \n                </ion-select>\n            </ion-item>    -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Birth</ion-label>\n                <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_birth" displayFormat="DD-MM-YYYY" (tap)="birth()"></ion-input>\n            </ion-item> \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Date Of Wed</ion-label>\n                <ion-input readonly="true" class="ion_datetime"  [formControl]="date_of_wed" displayFormat="DD-MM-YYYY" (tap)="wed()"></ion-input>\n            </ion-item>    -->\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Nominee Name </ion-label>\n                <ion-input type="text" [formControl]="nominee_name" ></ion-input>\n            </ion-item>\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Relationship </ion-label>\n                <ion-input type="text" [formControl]="nominee_relationship" ></ion-input>\n            </ion-item> -->\n\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Mobile </ion-label>\n                <ion-input type="number" [formControl]="nominee_mobile" placeholder="10 Digit Mobile Number" maxlength="10"></ion-input>\n            </ion-item> -->\n\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Company Name </ion-label>\n                <ion-input type="text" [formControl]="company_name"></ion-input>\n            </ion-item> -->\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>GST Number<span class="required"> *</span> </ion-label>\n                <ion-input type="text" [formControl]="gst_number" maxlength="15"\n                    (ionChange)="validateCaptilize(gst_number,\'gstno\')"></ion-input>\n            </ion-item>\n\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pancard No </ion-label>\n                <ion-input type="text" [formControl]="pan" maxlength="10"\n                    (ionChange)="validateCaptilize(pan,\'pancard\')"></ion-input>\n            </ion-item>\n\n            <!-- <ion-item no-padding>\n                <ion-label color="label-color" stacked>Voter ID No </ion-label>\n                <ion-input type="text" [formControl]="voterid"  maxlength="10" (ionChange)="validateCaptilize(voterid,\'voter\')"></ion-input>\n            </ion-item> -->\n            <!-- \n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Rationcard No </ion-label>\n                <ion-input type="text" [formControl]="rationcard" maxlength="15" (ionChange)="validateCaptilize(rationcard,\'ration\')"></ion-input>\n            </ion-item> -->\n\n            <ion-item no-padding>\n                <ion-label color="label-color" stacked>Comments </ion-label>\n                <ion-textarea [formControl]="comments" placeholder="Enter a description"></ion-textarea>\n            </ion-item>\n        </span>\n\n\n        <!-- <ion-row style="border: none !important;" *ngIf="type == \'o\'">\n            <ion-col style="text-align: -webkit-center !important;">\n                <button (click)="onSubmit(registerForm.value)" ion-button class="joinbtn" block color="dark">\n                  Submit</button>\n            </ion-col>\n        </ion-row> -->\n\n    </form>\n\n</ion-content>\n<ion-footer>\n    <!-- <button ion-button *ngIf="type != \'o\'" icon-start full class="theme-btn" (click)="next($event)">Next</button> -->\n    <button ion-button icon-start full class="theme-btn" (click)="onSubmit(registerForm.value)">Save</button>\n</ion-footer>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cus-register\cus-register.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormBuilder */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]])
    ], CusRegisterPage);
    return CusRegisterPage;
}());

//# sourceMappingURL=cus-register.js.map

/***/ }),

/***/ 183:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CategoryPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__products_products__ = __webpack_require__(392);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CategoryPage = /** @class */ (function () {
    function CategoryPage(navCtrl, navParams, load, retailService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.load = load;
        this.retailService = retailService;
        this.categories = [];
        this.last_id = 0;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        console.log(this.empData);
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'last_id': this.last_id
        };
        this.retailService.getCategories(postData).then(function (data) {
            _this.categories = data;
            console.log(_this.categories);
            loader.dismiss();
        });
    }
    CategoryPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.categories);
        this.last_id = this.categories[this.categories.length - 1]['id_ret_category'];
        console.log(this.last_id);
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'last_id': this.last_id
        };
        this.retailService.getCategories(postData).then(function (data) {
            console.log(data);
            for (var index = 0; index < data.length; index++) {
                _this.categories.push(data[index]);
            }
            infiniteScroll.complete();
        });
    };
    CategoryPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CategoryPage');
    };
    CategoryPage.prototype.openProduct = function (id_ret_category) {
        console.log(id_ret_category);
        console.log(this.categories);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__products_products__["a" /* ProductsPage */], { 'id_category': id_ret_category, 'data': this.categories });
    };
    CategoryPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-category',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\category\category.html"*/'<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>Categories</ion-title> \n    </ion-navbar> \n</ion-header> \n\n\n<ion-content padding-vertical> \n    <ion-grid no-padding>\n        <ion-row *ngIf="categories.length > 0" text-center>\n            <ion-col text-wrap col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4  *ngFor="let item of categories; let i=index" class="custom-2col" [ngClass]="animateClass" (click)="openProduct(item.id_ret_category)">\n                <ion-card>\n                    <img class="full-image" src=\'{{item.image}}\' onerror="this.onerror=null;this.src=\'assets/no-img.png\';" imageCache/>\n                    <ion-item text-center no-margin>\n                        <h5 class="text-small theme-color">{{item.name}}</h5>\n                    </ion-item>\n                </ion-card> \n            </ion-col>\n        </ion-row> \n    </ion-grid> \n    <ion-row *ngIf="categories.length == 0 " style="text-align: center;">\n        <ion-col>\n            <h4>No Products Found</h4>\n        </ion-col>\n    </ion-row>\n\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\category\category.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]])
    ], CategoryPage);
    return CategoryPage;
}());

//# sourceMappingURL=category.js.map

/***/ }),

/***/ 184:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EditorPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_toast__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_transfer__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_android_permissions__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_crop__ = __webpack_require__(395);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__design_detail_design_detail__ = __webpack_require__(78);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











//import { CartPage } from '../../pages/cart/cart';


// import interact from 'interactjs'
//import { ImageResizer, ImageResizerOptions } from '@ionic-native/image-resizer';
//import { getBase64Strings } from 'exif-rotate-js/lib';
//import { Caman } from '../../assets/edit.js';


/**
 * Generated class for the DesignDetailPage page.
 *
 * See http://ionicframework.com/docs/components/#navigation for more info
 * on Ionic pages and navigation.
 */
var EditorPage = /** @class */ (function () {
    function EditorPage(cd, keyboard, key, viewCtrl, renderer, crop, androidPermissions, imagePicker, common, retail, navCtrl, platform, navParams, loadingCtrl, toastCtrl, event, toast, actionSheetCtrl, camera, transfer, ftransfer, file, http, filePath, alertCtrl) {
        var _this = this;
        this.cd = cd;
        this.keyboard = keyboard;
        this.key = key;
        this.viewCtrl = viewCtrl;
        this.renderer = renderer;
        this.crop = crop;
        this.androidPermissions = androidPermissions;
        this.imagePicker = imagePicker;
        this.common = common;
        this.retail = retail;
        this.navCtrl = navCtrl;
        this.platform = platform;
        this.navParams = navParams;
        this.loadingCtrl = loadingCtrl;
        this.toastCtrl = toastCtrl;
        this.event = event;
        this.toast = toast;
        this.actionSheetCtrl = actionSheetCtrl;
        this.camera = camera;
        this.transfer = transfer;
        this.ftransfer = ftransfer;
        this.file = file;
        this.http = http;
        this.filePath = filePath;
        this.alertCtrl = alertCtrl;
        this.tt = '';
        this.currentColour = '#1abc9c';
        this.brushSize = 5;
        this.targetPaths = [];
        this.filenames = [];
        this.deletephotos = [];
        this.sample_images = [];
        this.lastImage = null;
        this.isShown = false;
        this.count = 1;
        this.date = new Date().toISOString();
        this.draw = false;
        this.receive = '';
        this.text = [];
        this.temp = 10;
        this.write = false;
        this.un = [];
        this.und = [];
        this.fshow = false;
        this.cshow = false;
        this.ushow = false;
        this.bshow = false;
        this.rshow = false;
        this.angleInDegrees = 0;
        this.scrol = false;
        this.ffile = '';
        this.temp1 = 30;
        this.d = false;
        this.finalimg = this.navParams.get('images');
        this.progress = 0;
        this.show = false;
        this.d = this.navParams.get('direct');
        console.log(this.d);
        this.deletephotos = [];
        localStorage.setItem('dp', null);
        this.availableColours = [
            // '#1abc9c',
            // '#3498db',
            // '#9b59b6',
            // '#e67e22',
            '#e74c3c'
        ];
        platform.ready().then(function () {
            platform.registerBackButtonAction(function () {
                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_14__design_detail_design_detail__["a" /* DesignDetailPage */]);
            });
        });
        window.addEventListener('keyboardWillHide', function (data) {
            _this.fshow = false;
            console.log(data);
            console.log(_this.tt);
        });
    }
    EditorPage.prototype.clean = function () {
        this.temp1 = 30;
        this.text = [];
        var self = this;
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var img = new Image();
        canvas.width = window.innerWidth;
        img.onload = function () {
            var ct = document.getElementById('measure');
            ct.appendChild(img);
            var wrh = img.width / img.height;
            var newWidth = canvas.width;
            var newHeight = newWidth / wrh;
            if (newHeight > canvas.height) {
                newHeight = canvas.height;
                newWidth = newHeight * wrh;
            }
            ct.removeChild(img);
            canvas.height = newHeight;
            console.log(canvas.width);
            if (self.navParams.get('direct') == true) {
                canvas.height = canvas.width;
                canvas.width = canvas.width;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.width);
            }
            else {
                ctx.drawImage(img, 0, 0, canvas.width, newHeight);
            }
        };
        img.src = this.finalimg;
    };
    EditorPage.prototype.rotate = function () {
        this.fshow = false;
        this.cshow = false;
        this.bshow = false;
        this.ushow = false;
        this.draw = false;
        this.write = false;
        if (this.rshow == false) {
            this.rshow = true;
        }
        var self = this;
        this.temp1 = 30;
        this.text = [];
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var img = new Image();
        img.src = this.finalimg;
        self.angleInDegrees += 90;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.save(); //save canvas state
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate(self.angleInDegrees * Math.PI / 180);
        ctx.translate(-canvas.width / 2, -canvas.height / 2);
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
        ctx.restore();
    };
    EditorPage.prototype.openk = function () {
        window.Keyboard.show();
    };
    EditorPage.prototype.undo = function () {
        this.fshow = false;
        this.cshow = false;
        this.bshow = false;
        this.rshow = false;
        this.draw = false;
        if (this.ushow == false) {
            this.ushow = true;
        }
        this.temp1 = 30;
        this.text = [];
        var self = this;
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var img = new Image();
        canvas.width = window.innerWidth;
        img.onload = function () {
            var ct = document.getElementById('measure');
            ct.appendChild(img);
            var wrh = img.width / img.height;
            var newWidth = canvas.width;
            var newHeight = newWidth / wrh;
            if (newHeight > canvas.height) {
                newHeight = canvas.height;
                newWidth = newHeight * wrh;
            }
            ct.removeChild(img);
            canvas.height = newHeight;
            if (self.navParams.get('direct') == true) {
                canvas.height = canvas.width;
                canvas.width = canvas.width;
                ctx.drawImage(img, 0, 0, canvas.width, canvas.width);
            }
            else {
                ctx.drawImage(img, 0, 0, canvas.width, newHeight);
            }
        };
        console.log(this.un);
        this.un.pop();
        if (this.un.length > 0) {
            img.src = this.un[this.un.length - 1];
            console.log(this.un);
        }
        else {
            console.log(this.finalimg);
            img.src = this.finalimg;
        }
    };
    EditorPage.prototype.ionViewWillEnter = function () {
        console.log('ionViewWillEnter ', this.finalimg);
        this.viewCtrl.showBackButton(false);
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var img = new Image();
        img.src = this.finalimg;
        canvas.width = window.innerWidth;
        var self = this;
        img.onload = function () {
            var ct = document.getElementById('measure');
            ct.appendChild(img);
            var wrh = img.width / img.height;
            var newWidth = canvas.width;
            var newHeight = newWidth / wrh;
            if (newHeight > canvas.height) {
                console.log(333333333333);
                newHeight = canvas.height;
                newWidth = newHeight * wrh;
            }
            ct.removeChild(img);
            console.log(canvas.height);
            console.log(newHeight);
            console.log(newWidth);
            canvas.height = newHeight;
            console.log(newHeight);
            console.log(canvas.width);
            if (self.navParams.get('direct') == true) {
                canvas.height = canvas.width;
                canvas.width = canvas.width;
                self.editt();
            }
            else {
                ctx.drawImage(img, 0, 0, canvas.width, newHeight);
            }
        };
        img.src = this.finalimg;
        this.receive = this.finalimg;
    };
    EditorPage.prototype.check = function (value) {
        console.log(1111);
        this.msg = value;
        this.tt = value;
        this.write = true;
    };
    EditorPage.prototype.find = function () {
        console.log(22222);
        this.ushow = false;
        this.cshow = false;
        this.bshow = false;
        this.rshow = false;
        this.msg = '';
        if (this.fshow == false) {
            this.fshow = true;
        }
        this.write = true;
        this.draw = false;
    };
    EditorPage.prototype.settext = function () {
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        ctx.save();
        var stringTitle = document.getElementById('title').value;
        this.text.push(stringTitle);
        console.log(this.text.length);
        if (this.text.length > 1) {
            console.log(true);
            this.temp1 = this.temp1 + 30;
        }
        ctx.font = '20px sans-serif';
        ctx.fillStyle = '#ff0000';
        var text_title = stringTitle;
        ctx.fillText(stringTitle, this.temp, this.temp1);
        this.key.close();
    };
    EditorPage.prototype.Gray = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        canvas.height = 420;
        canvas.width = window.innerWidth;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'grayscale(100%)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.Contrast = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        // canvas.width = 700;
        canvas.height = 420;
        canvas.width = window.innerWidth;
        // canvas.width = 500;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'contrast(200%)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.Blur = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        // canvas.width = 700;
        canvas.height = 420;
        canvas.width = window.innerWidth;
        // canvas.width = 500;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'hue-rotate(90deg)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.Sepia = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        // canvas.width = 700;
        canvas.height = 420;
        canvas.width = window.innerWidth;
        // canvas.width = 500;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'sepia(100%)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.Invert = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        // canvas.width = 700;
        canvas.height = 420;
        canvas.width = window.innerWidth;
        // canvas.width = 500;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'invert(100%)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.Saturate = function () {
        this.draw = false;
        document.getElementById('title').value = '';
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext('2d');
        var background = new Image();
        background.src = this.receive;
        console.log(canvas.width);
        // canvas.width = 700;
        canvas.height = 420;
        canvas.width = window.innerWidth;
        // canvas.width = 500;
        console.log(canvas.height);
        // Make sure the image is loaded first otherwise nothing will draw.
        background.onload = function () {
            console.log('ssss');
            ctx.filter = 'saturate(8)';
            ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
        };
    };
    EditorPage.prototype.ngAfterViewInit = function () {
        this.canvasElement = this.canvas.nativeElement;
        this.renderer.setElementAttribute(this.canvasElement, 'width', this.platform.width() + '');
        this.renderer.setElementAttribute(this.canvasElement, 'height', this.platform.height() + '');
    };
    EditorPage.prototype.changeColour = function (colour) {
        this.fshow = false;
        this.cshow = false;
        this.ushow = false;
        this.rshow = false;
        if (this.bshow == false) {
            this.bshow = true;
        }
        this.draw = true;
        this.write = false;
        this.currentColour = colour;
    };
    EditorPage.prototype.edit = function () {
        var _this = this;
        this.fshow = false;
        this.ushow = false;
        this.bshow = false;
        this.rshow = false;
        if (this.cshow == false) {
            this.cshow = true;
        }
        var option = {
            quality: 100,
            autoCropArea: 1
            // targetHeight: 800,
            // targetWidth: 800,
        };
        this.crop.crop(this.finalimg, option)
            .then(function (newImage) {
            console.log('0000000000' + newImage);
            console.log('4444444');
            console.log(newImage);
            _this.receive = newImage;
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext('2d');
            var background = new Image();
            background.src = _this.receive;
            _this.finalimg = _this.receive;
            console.log(_this.finalimg);
            // console.log(canvas.width)
            // canvas.width = 700;
            // canvas.height = 420;
            canvas.width = window.innerWidth;
            console.log(canvas.height);
            console.log(canvas.width);
            var self = _this;
            // Make sure the image is loaded first otherwise nothing will draw.
            background.onload = function () {
                console.log('ssss');
                if (self.navParams.get('direct') == true) {
                    canvas.height = canvas.width;
                    canvas.width = canvas.width;
                    ctx.drawImage(background, 0, 0, canvas.width, canvas.width);
                }
                else {
                    ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
                }
            };
            console.log('new image path is: ' + newImage);
        }, function (error) { return console.error('Error cropping image', error); });
    };
    EditorPage.prototype.editt = function () {
        var _this = this;
        this.fshow = false;
        this.ushow = false;
        this.bshow = false;
        this.rshow = false;
        if (this.cshow == false) {
            this.cshow = true;
        }
        var option = {
            quality: 100,
            autoCropArea: 1
            // targetHeight: 800,
            // targetWidth: 800,
        };
        this.crop.crop(this.finalimg, option)
            .then(function (newImage) {
            console.log('0000000000' + newImage);
            //     this.filePath.resolveNativePath( newImage )
            //  .then( filePath => {
            console.log('4444444');
            console.log(newImage);
            _this.receive = newImage;
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext('2d');
            var background = new Image();
            background.src = _this.receive;
            _this.finalimg = _this.receive;
            console.log(_this.finalimg);
            // console.log(canvas.width)
            // canvas.width = 700;
            // canvas.height = 420;
            canvas.width = window.innerWidth;
            console.log(canvas.height);
            console.log(canvas.width);
            var self = _this;
            // Make sure the image is loaded first otherwise nothing will draw.
            background.onload = function () {
                console.log('ssss');
                if (self.navParams.get('direct') == true) {
                    canvas.height = canvas.width;
                    canvas.width = canvas.width;
                    ctx.drawImage(background, 0, 0, canvas.width, canvas.width);
                }
                else {
                    ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
                }
            };
            //  } );  
            console.log('new image path is: ' + newImage);
        }, function (error) {
            _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_14__design_detail_design_detail__["a" /* DesignDetailPage */]);
            console.error('Error cropping image', error);
        });
    };
    EditorPage.prototype.save = function () {
        this.converted_image = this.canvasElement.toDataURL('image/png');
        this.writeFile(this.converted_image, this.createFileName());
    };
    //here is the method is used to write a file in storage  
    EditorPage.prototype.writeFile = function (base64Data, fileName) {
        var _this = this;
        var contentType = this.getContentType(base64Data);
        var DataBlob = this.base64toBlob(base64Data, contentType);
        // here iam mentioned this line this.file.externalRootDirectory is a native pre-defined file path storage. You can change a file path whatever pre-defined method.  
        var filePath = cordova.file.dataDirectory;
        this.file.writeFile(filePath, fileName, DataBlob, contentType).then(function (success) {
            console.log(success['nativeURL']);
            var currentName = success['nativeURL'].substr(success['nativeURL'].lastIndexOf('/') + 1);
            var correctPath = success['nativeURL'].substr(0, success['nativeURL'].lastIndexOf('/') + 1);
            console.log("File Writed Successfully", success);
            console.log(currentName);
            console.log(correctPath);
            _this.targetPaths.push(success['nativeURL']);
            _this.filenames.push(currentName);
            // this.copyFileToLocalDir( correctPath, currentName, this.createFileName() );
            _this.uploadImage(currentName);
        }).catch(function (err) {
            console.log("Error Occured While Writing File", err);
        });
    };
    //here is the method is used to get content type of an bas64 data  
    EditorPage.prototype.getContentType = function (base64Data) {
        var block = base64Data.split(";");
        var contentType = block[0].split(":")[1];
        return contentType;
    };
    //here is the method is used to convert base64 data to blob data  
    EditorPage.prototype.base64toBlob = function (b64Data, contentType) {
        contentType = contentType || '';
        var sliceSize = 512;
        var byteCharacters = atob(b64Data.replace(/^data:image\/(png|jpeg|jpg);base64,/, ''));
        var byteArrays = [];
        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            var slice = byteCharacters.slice(offset, offset + sliceSize);
            var byteNumbers = new Array(slice.length);
            for (var i = 0; i < slice.length; i++) {
                byteNumbers[i] = slice.charCodeAt(i);
            }
            var byteArray = new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
        }
        var blob = new Blob(byteArrays, {
            type: contentType
        });
        return blob;
    };
    EditorPage.prototype.changeSize = function (size) {
        this.brushSize = size;
    };
    EditorPage.prototype.handleStart = function (ev) {
        console.log(ev);
        console.log(this.draw);
        console.log(this.write);
        console.log(document.getElementById('title').value);
        if (this.draw == false) {
            console.log('insideone');
            if (document.getElementById('title').value) {
                console.log('insidetwo');
                var canvasPosition = this.canvasElement.getBoundingClientRect();
                this.lastX = ev.touches[0].pageX - canvasPosition.x;
                this.lastY = ev.touches[0].pageY - canvasPosition.y;
                var canvas = document.getElementById("canvas");
                var ctx = canvas.getContext('2d');
                ctx.save();
                console.log(document.getElementById('title').value);
                var stringTitle = document.getElementById('title').value;
                this.text.push(stringTitle);
                console.log(canvas.width);
                var array = stringTitle.split(" ");
                console.log(array);
                // if(this.text.length > 1){
                //     console.log(true)
                //     this.temp1 = this.temp1 + 30;
                // }
                ctx.font = 'bold 20px sans-serif';
                ctx.fillStyle = '#ff0000';
                var text_title = stringTitle;
                for (var i = 0; i < array.length; i++) {
                    if (i == 0) {
                        console.log('insidethree');
                        ctx.fillText(array[i], this.lastX, this.lastY);
                        document.getElementById('title').value = '';
                        this.tt = '';
                        this.msg = '';
                    }
                    else {
                        console.log('insidefour');
                        this.lastY = this.lastY + 20;
                        ctx.fillText(array[i], this.lastX, this.lastY);
                        document.getElementById('title').value = '';
                        this.tt = '';
                        this.msg = '';
                    }
                }
                // array = '';
                // (<HTMLInputElement>document.getElementById('title')).value = '';
                this.write = false;
                // ctx.restore();
                this.key.close();
                this.un.push(this.canvasElement.toDataURL('image/png'));
            }
        }
        if (this.draw == true) {
            var canvasPosition = this.canvasElement.getBoundingClientRect();
            this.lastX = ev.touches[0].pageX - canvasPosition.x;
            this.lastY = ev.touches[0].pageY - canvasPosition.y;
        }
    };
    EditorPage.prototype.end = function (ev) {
        var test = document.getElementById('title').value;
        if (this.draw == true) {
            this.un.push(this.canvasElement.toDataURL('image/png'));
        }
        console.log(ev);
        console.log(this.un);
    };
    EditorPage.prototype.readc = function () {
        console.log(this.write);
        if (this.write == true) {
            return true;
        }
        else {
            return false;
        }
    };
    EditorPage.prototype.handleMove = function (ev) {
        console.log(ev);
        if (this.draw == true) {
            var canvasPosition = this.canvasElement.getBoundingClientRect();
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext('2d');
            var currentX = ev.touches[0].pageX - canvasPosition.x;
            var currentY = ev.touches[0].pageY - canvasPosition.y;
            ctx.beginPath();
            ctx.lineJoin = "round";
            ctx.moveTo(this.lastX, this.lastY);
            ctx.lineTo(currentX, currentY);
            ctx.closePath();
            ctx.strokeStyle = this.currentColour;
            ctx.lineWidth = this.brushSize;
            ctx.stroke();
            this.lastX = currentX;
            this.lastY = currentY;
        }
    };
    EditorPage.prototype.clearCanvas = function () {
        this.draw = false;
        var ctx = this.canvasElement.getContext('2d');
        ctx.clearRect(0, 0, this.canvasElement.width, this.canvasElement.height);
        this.clean();
        document.getElementById('title').value = '';
    };
    EditorPage.prototype.load = function () {
        this.loader = this.loadingCtrl.create({
            content: "Uploading..."
        });
        this.loader.present();
    };
    EditorPage.prototype.ionViewDidLoad = function () {
    };
    EditorPage.prototype.deletePhoto = function (index) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: 'Sure you want to delete this photo? There is no undo!',
            message: '',
            buttons: [
                {
                    text: 'No',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                }, {
                    text: 'Yes',
                    handler: function () {
                        console.log('Agree clicked');
                        _this.targetPaths.splice(index, 1);
                        _this.filenames.splice(index, 1);
                        _this.deletephotos.push(_this.filenames[index]);
                        _this.lastImage == '';
                    }
                }
            ]
        });
        confirm.present();
    };
    EditorPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        _this.loadgallery();
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EditorPage.prototype.loadgallery = function () {
        var _this = this;
        var options = {
            maximumImagesCount: 1,
            width: 500,
            height: 500,
            quality: 80,
        };
        this.imagePicker.getPictures(options).then(function (results) {
            console.log(results);
            for (var i = 0; i < results.length; i++) {
                var option = {
                    quality: 100,
                };
                _this.crop.crop(results[i], option)
                    .then(function (newImage) {
                    console.log('0000000000' + newImage);
                    _this.filePath.resolveNativePath(newImage)
                        .then(function (filePath) {
                        console.log('4444444');
                        console.log(filePath);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        var currentName = filePath.substr(filePath.lastIndexOf('/') + 1);
                        _this.copyFileToLocalDirg(correctPath, currentName, _this.createFileName(), i);
                        //  if (this.count == 1) {
                        _this.load();
                        //     this.count ++;
                        // }
                    });
                    console.log('new image path is: ' + newImage);
                }, function (error) { return console.error('Error cropping image', error); });
            }
            ;
        });
    };
    EditorPage.prototype.takePicture = function (sourceType) {
        var _this = this;
        // Create options for the Camera Dialog
        var options = {
            quality: 50,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
            allowEdit: true
        };
        // Get the data of an image
        if (this.platform.is('android') && sourceType === this.camera.PictureSourceType.CAMERA) {
            this.camera.getPicture(options).then(function (imagePath) {
                console.log("#### getPicture ####");
                if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.CAMERA) {
                    var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);
                    var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);
                    _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName());
                    // this.uploadImage();                    
                }
            }, function (err) {
                _this.presentToast('Error while selecting image.');
            });
        }
    };
    // Create a new name for the image
    EditorPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    EditorPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName) {
        var _this = this;
        console.log("#### copyFileToLocalDir ####");
        console.log("namePath/correctPath : " + namePath);
        console.log("currentName : " + currentName);
        console.log("createdFileName : " + newFileName);
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            _this.lastImage = newFileName;
            _this.targetPaths.push(_this.pathForImage(_this.lastImage));
            _this.filenames.push(_this.lastImage);
            console.log("targetPaths : ");
            console.log(_this.targetPaths);
            console.log("filenames : ");
            console.log(_this.filenames);
            _this.uploadImage('');
        }, function (error) {
            _this.presentToast('Error while storing file.');
        });
    };
    EditorPage.prototype.copyFileToLocalDirg = function (namePath, currentName, newFileName, i) {
        var _this = this;
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            _this.lastImage = newFileName;
            _this.targetPaths.push(_this.pathForImage(_this.lastImage));
            _this.filenames.push(_this.lastImage);
            _this.uploadImageg(i);
        }, function (error) {
            _this.presentToast('Error while storing file.');
        });
    };
    EditorPage.prototype.presentToast = function (text) {
        var toast = this.toastCtrl.create({
            message: text,
            duration: 3000,
            position: 'middle'
        });
        toast.present();
    };
    // Always get the accurate path to your apps folder
    EditorPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    EditorPage.prototype.uploadImageg = function (i) {
        var _this = this;
        // Destination URL
        var url = __WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/uploadImg';
        // File for Upload
        var targetPath = this.pathForImage(this.lastImage);
        console.log(targetPath);
        // File name only
        var filename = this.lastImage;
        var options = {
            fileKey: "cusproduct",
            fileName: filename,
            chunkedMode: false,
            mimeType: "multipart/form-data",
            params: { 'fileName': filename },
            headers: { 'Authorization': 'Basic ' + btoa(this.common.getAuthUserName() + ':' + this.common.getAuthUserPwd()) }
        };
        var fileTransfer = this.transfer.create();
        // Use the FileTransfer to upload the image
        fileTransfer.upload(targetPath, url, options).then(function (data) {
            console.log(data);
            var result = JSON.parse(data.response);
            _this.sample_images = _this.filenames;
            var count = 1;
            if (count == 1) {
                _this.loader.dismissAll();
                count++;
                _this.presentToast('Images succesfully uploaded.');
            }
        }, function (err) {
            _this.loader.dismissAll();
            var indexp = _this.targetPaths.indexOf(_this.lastImage);
            var indexf = _this.targetPaths.indexOf(_this.lastImage);
            _this.targetPaths.splice(indexp, 1);
            _this.filenames.splice(indexf, 1);
            _this.presentToast('Error while uploading file.');
        });
    };
    EditorPage.prototype.uploadImage = function (name) {
        var _this = this;
        console.log("#### uploadImage ####");
        // Destination URL
        var url = __WEBPACK_IMPORTED_MODULE_2__providers_common__["a" /* BaseAPIURL */] + 'admin_app_api/uploadImg';
        this.show = true;
        // File for Upload
        var targetPath = this.targetPaths[0];
        // File name only
        // var filename = this.lastImage;
        var options = {
            fileKey: "file",
            fileName: name,
            chunkedMode: false,
            mimeType: "multipart/form-data",
            params: { 'fileName': name, 'type': 'wishlist_img' },
            headers: { 'Authorization': 'Basic ' + btoa(this.common.getAuthUserName() + ':' + this.common.getAuthUserPwd()) }
        };
        var fileTransfer = this.transfer.create();
        // let loader = this.loadingCtrl.create( {
        //     content: "Uploading..."
        // } );
        // loader.present();
        console.log(options);
        console.log(this.targetPaths);
        console.log(targetPath);
        console.log(encodeURI(url));
        fileTransfer.upload(targetPath, encodeURI(url), options).then(function (data) {
            console.log(data);
            // loader.dismissAll();
            _this.presentToast('Image succesfully uploaded.');
            _this.sample_images = _this.filenames;
            // loader.dismissAll();
            if (_this.navParams.get('direct') == true) {
                localStorage.setItem('dip', JSON.stringify(_this.targetPaths[0]));
                localStorage.setItem('din', JSON.stringify(_this.filenames[0]));
                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_14__design_detail_design_detail__["a" /* DesignDetailPage */], { 'state': true });
            }
            else {
                localStorage.setItem('dip', '');
                localStorage.setItem('din', '');
                _this.navCtrl.pop();
                _this.event.publish('img', _this.sample_images[0]);
                _this.event.publish('tar', _this.targetPaths[0]);
                _this.event.publish('file', _this.filenames[0]);
                console.log(_this.targetPaths);
                console.log(_this.filenames);
                _this.presentToast('Image succesfully uploaded.');
            }
        }, function (err) {
            // loader.dismissAll() 
            _this.presentToast('Error while uploading Image.');
            var indexp = _this.targetPaths.indexOf(_this.lastImage);
            var indexf = _this.targetPaths.indexOf(_this.lastImage);
            _this.targetPaths.splice(indexp, 1);
            _this.filenames.splice(indexf, 1);
            _this.navCtrl.pop();
            _this.event.publish('err', indexp);
            _this.event.publish('errr', indexf);
        });
        fileTransfer.onProgress(function (data) {
            console.log(data);
            _this.progress = Math.round((data.loaded / data.total) * 100);
            _this.refresh();
            console.log(_this.progress);
        });
        var temp = { 'name': name, 'image': this.converted_image, 'message': this.msg, 'type': 'wishlist_img' };
        console.log(temp);
        /*this.retail.uploadImg(temp).then(data =>{
            this.sample_images = this.filenames;
            loader.dismissAll();
            if(this.navParams.get('direct') == true){
                localStorage.setItem('dip',JSON.stringify(this.targetPaths[0]))
                localStorage.setItem('din',JSON.stringify(this.filenames[0]))
                this.navCtrl.setRoot(DesignDetailPage,{'state':true});
            }
            else{
                localStorage.setItem('dip','')
                localStorage.setItem('din','')
                this.navCtrl.pop();
                this.event.publish('img', this.sample_images[0]);
                this.event.publish('tar', this.targetPaths[0]);
                this.event.publish('file', this.filenames[0]);
                console.log(this.targetPaths)
                console.log(this.filenames)
                this.presentToast( 'Image succesfully uploaded.' );
            }
        },err=>{
            loader.dismissAll()
            const indexp:number = this.targetPaths.indexOf(this.lastImage);
            const indexf:number = this.targetPaths.indexOf(this.lastImage);
            this.targetPaths.splice( indexp, 1 );
            this.filenames.splice( indexf, 1 );
            this.navCtrl.pop();
            this.event.publish('err', indexp);
            this.event.publish('errr', indexf);
            this.presentToast( 'Error while uploading file.' );
        })*/
    };
    EditorPage.prototype.goback = function () {
        console.log('goback');
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_14__design_detail_design_detail__["a" /* DesignDetailPage */]);
    };
    EditorPage.prototype.refresh = function () {
        console.log('refresheed');
        this.cd.detectChanges();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])('myCanvas'),
        __metadata("design:type", Object)
    ], EditorPage.prototype, "canvas", void 0);
    EditorPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-editor',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\img-editor\editor.html"*/'<!--\n  Generated template for the EditorPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header> \n  <ion-navbar>\n      <ion-toolbar id="top-toolbar">\n        \n        <ion-row>\n          \n          <ion-col  *ngIf="d == undefined"  col-4 (click)="goback()">\n            <ion-buttons  (click)="goback()" left>\n              <ion-icon  style="color: white !important;    margin-top: 5px;font-size: 1.8em !important" name="arrow-back"></ion-icon> \n            </ion-buttons>\n          </ion-col>\n        \n          <ion-col *ngIf="d == true"  col-2 (click)="goback()">\n            <ion-buttons  (click)="goback()" left>\n              <ion-icon  style="color: white !important;    margin-top: 5px;font-size: 1.8em !important" name="arrow-back"></ion-icon> \n            </ion-buttons>\n          </ion-col> \n            \n          <ion-col col-2>\n            <ion-buttons right>\n              <button [ngClass]="ushow == false ? \'one\':\'two\'"  ion-button icon-only  (click)="undo()">\n                <ion-icon style="color: white !important;"  name="ios-undo"></ion-icon>\n              </button>\n            </ion-buttons>      \n          </ion-col>\n        \n          <ion-col col-2>\n            <ion-buttons right>\n              <button [ngClass]="cshow == false ? \'one\':\'two\'" ion-button icon-only  (click)="edit()">\n                <ion-icon  style="color: white !important;" name="crop"></ion-icon>\n              </button>\n            </ion-buttons>\n          </ion-col>\n\n          <ion-col *ngIf="d == true" col-2>\n            <ion-buttons right>\n              <button [ngClass]="rshow == false ? \'one\':\'two\'"  ion-button icon-only  (click)="rotate()">\n                <ion-icon style="color: white !important;"  name="refresh"></ion-icon>\n              </button>\n            </ion-buttons>\n          </ion-col>\n\n          <ion-col col-2 *ngIf="fshow == false" >\n            <div right  style="height: 31px !important;margin-right: 42px;" (tap)="find()">\n              <!-- <input  (keyup) ="check($event.target.value)" style="    text-align: center;width:40px !important;background:#ffe135 !important;border:none !important;\n              width: -webkit-fill-available;border: 1px solid;margin-top:2px;height: 30px;position: absolute !important;color: #ffe135 !important;\n              margin-bottom: 6px;"  type="text" id="title"/> -->\n              <input  type="text" (keyup) ="check($event.target.value)" class="inputText" id="title" />\n              <span class="floating-label">T</span> \n              <!-- <ion-icon style="position: relative !important;font-size: 1.8em !important"  name="create"></ion-icon> -->\n            </div>\n          </ion-col>\n\n          <ion-col col-2 *ngIf="fshow == true" > \n            <div right  style="height: 31px !important;margin-right: 42px;" (tap)="find()">\n                <!-- <input  (keyup) ="check($event.target.value)" style="    text-align: center;width:40px !important;background:#ffe135 !important;border:none !important;\n                width: -webkit-fill-available;border: 1px solid;margin-top:2px;height: 30px;position: absolute !important;color: #ffe135 !important;\n                margin-bottom: 6px;"  type="text" id="title"/> -->\n                <input  type="text" (keyup) ="check($event.target.value)" class="inputTextt" id="title" />\n                <span class="floating-label">T</span>\n                <!-- <ion-icon style="position: relative !important;font-size: 1.8em !important"  name="create"></ion-icon> -->\n            </div>\n          </ion-col>\n\n          <ion-col col-2> \n            <ion-buttons right>\n              <button  [ngClass]="bshow == false ? \'one\':\'two\'" *ngFor="let colour of availableColours" icon-only ion-button (click)="changeColour(colour)">\n                <ion-icon  style="color: white !important;" name="brush"></ion-icon>\n              </button>\n            </ion-buttons>\n          </ion-col> \n\n        </ion-row>\n\n        </ion-toolbar>\n  </ion-navbar>\n  \n</ion-header>\n  \n<ion-content>\n    <!-- <canvas  id="canvas" #myCanvas (touchstart)="handleStart($event)" (touchmove)="handleMove($event)"> -->\n    <canvas  style="background:white !important" id="canvas"   #myCanvas (touchstart)="handleStart($event)" (touchmove)="handleMove($event)" (touchend)="end($event)" width="360" height="360"></canvas>\n    <!-- <canvas [ngClass]="scrol == false ? \'onee\': \'twoo\'"   id="canvas"   #myCanvas (touchstart)="handleStart($event)" (touchmove)="handleMove($event)" (touchend)="end($event)"></canvas> -->\n    <div id="measure"></div>\n    <!-- </canvas>	 -->\n    <ion-row >\n      <ion-col no-padding col-12 style="font-weight: bold;" (tap)="find()">\n        <!-- <input  (keyup) ="check($event.target.value)" style="    text-align: center;\n        width: -webkit-fill-available;border: 1px solid;margin-top:2px;height: 30px;\n        margin-bottom: 4px;"  type="text" id="title" placeholder="Search"/> -->\n      </ion-col> \n    </ion-row>        \n</ion-content>\n  \n<ion-footer text-center no-border transparent>\n  <ion-row no-padding> \n    <ion-col col-10>\n      <ion-item style="background-color: transparent !important;color:red !important">\n        <ion-input name="ProductName" [readonly]= \'readc()\' [(ngModel)]="msg" placeholder="Add a caption..."></ion-input> \n      </ion-item> \n    </ion-col> \n    <ion-col col-2> \n    <ion-fab bottom right #fab >\n      <button ion-fab  (click)="save()">\n        <ion-icon name="send"></ion-icon>\n      </button>\n    </ion-fab>\n    </ion-col>\n  </ion-row>\n  <div *ngIf="show == true"  style="text-align: center;    margin-top: 5px;">\n    Upload Progress : \n  </div>\n  <div *ngIf="show == true" class="progress-outer">\n    <div class="progress-inner" [style.width]="progress + \'%\'">\n        {{progress}}%\n    </div>\n  </div>\n</ion-footer>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\img-editor\editor.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["V" /* Renderer */], __WEBPACK_IMPORTED_MODULE_12__ionic_native_crop__["a" /* Crop */], __WEBPACK_IMPORTED_MODULE_11__ionic_native_android_permissions__["a" /* AndroidPermissions */], __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__["a" /* ImagePicker */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_toast__["a" /* Toast */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_transfer__["a" /* Transfer */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_9__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], EditorPage);
    return EditorPage;
}());

//# sourceMappingURL=editor.js.map

/***/ }),

/***/ 186:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EcatalogPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modal_filter_filter__ = __webpack_require__(396);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__design_detail_design_detail__ = __webpack_require__(78);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var EcatalogPage = /** @class */ (function () {
    function EcatalogPage(modal, navCtrl, navParams, load, retail) {
        this.modal = modal;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.load = load;
        this.retail = retail;
        this.designData = [];
        this.last_id = 0;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
    }
    EcatalogPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'last_id': this.last_id
        };
        this.retail.getECatalog(postData).then(function (data) {
            _this.designData = data;
            loader.dismiss();
        });
        // this.retail.getEcatalogFilters().then(result => {
        //   let res = result.responseData; 
        //   this.filters = res.filters;
        //   this.filter_options = res.filter_options;
        //   this.filterargs = res.filterargs; 
        //   let obj = {filters:res.filters,filter_options:res.filter_options,filterargs:res.filterargs};
        //   localStorage.setItem( 'resetFilterData',JSON.stringify( obj ) );
        //   this.openFilter();
        // }); 
    };
    EcatalogPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        this.last_id = this.designData[this.designData.length - 1]['design_no'];
        console.log(this.last_id);
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'last_id': this.last_id
        };
        this.retail.getECatalog(postData).then(function (data) {
            for (var index = 0; index < data.length; index++) {
                _this.designData.push(data[index]);
            }
            infiniteScroll.complete();
        });
    };
    EcatalogPage.prototype.openDesign = function (design_no) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__design_detail_design_detail__["a" /* DesignDetailPage */], { 'design_no': design_no });
    };
    EcatalogPage.prototype.openFilter = function () {
        var _this = this;
        var data = { 'filters': this.filters, 'filter_options': this.filter_options, 'filterargs': this.filterargs };
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_3__modal_filter_filter__["a" /* FilterPage */], data, { enableBackdropDismiss: false });
        modal.present();
        modal.onDidDismiss(function (data) {
            console.log(data);
            var loader = _this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader.present();
            var postData = {
                'id_employee': _this.empData['uid'] != null ? _this.empData['uid'] : null,
                'type': 'active',
                'last_id': _this.last_id
            };
            _this.retail.getECatalog(postData).then(function (data) {
                _this.designData = data;
                loader.dismiss();
            });
        });
    };
    EcatalogPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-ecatalog',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\e-catalog\e-catalog.html"*/'<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>E-Catalog</ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="openFilter()">\n                <ion-icon name="funnel"></ion-icon>\n            </button>\n        </ion-buttons> \n    </ion-navbar> \n</ion-header> \n\n<ion-content padding-vertical> \n    <ion-grid no-padding>\n        <ion-row *ngIf="designData.length > 0" text-center>\n            <ion-col text-wrap col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4  *ngFor="let item of designData; let i=index" class="custom-2col" [ngClass]="animateClass" (click)="openDesign(item.design_no)">\n                <ion-card>\n                    <img class="full-image" src=\'{{item.image}}\' onerror="this.onerror=null;this.src=\'assets/no-img.png\';" imageCache/>\n                    <ion-item text-center no-margin>\n                        <h5 class="text-small theme-color">{{item.design_name}}</h5>\n                        <p class="text-xsmall"> {{item.product_name}}</p>\n                        <p class="text-xsmall" *ngIf="item.collection_name != null"> {{item.collection_name}}</p>\n                    </ion-item>\n                </ion-card> \n            </ion-col>\n        </ion-row> \n    </ion-grid>\n    \n    <ion-row *ngIf="designData.length == 0 " style="text-align: center;">\n        <ion-col>\n            <h4>No Products Found</h4>\n        </ion-col>\n    </ion-row>\n\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\e-catalog\e-catalog.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]])
    ], EcatalogPage);
    return EcatalogPage;
}());

//# sourceMappingURL=e-catalog.js.map

/***/ }),

/***/ 187:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StockCodeEntryPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_chooser__ = __webpack_require__(76);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_path__ = __webpack_require__(35);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


// import { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';








/*
  Generated class for the StockCodeEntry page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var StockCodeEntryPage = /** @class */ (function () {
    function StockCodeEntryPage(navParams, navCtrl, load, printer, nav, events, commonservice, retail, toast, event, modal, common, fileOpener, transfer, file, filePath, fileChooser, platform) {
        this.navParams = navParams;
        this.navCtrl = navCtrl;
        this.load = load;
        this.printer = printer;
        this.nav = nav;
        this.events = events;
        this.commonservice = commonservice;
        this.retail = retail;
        this.toast = toast;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.fileOpener = fileOpener;
        this.transfer = transfer;
        this.file = file;
        this.filePath = filePath;
        this.fileChooser = fileChooser;
        this.platform = platform;
        this.fileTransfer = this.transfer.create();
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.scannerOn = false;
        this.settings = [];
        this.ret_settings = [];
        this.stock = [];
        this.tags = [];
        this.tagMsg = "";
        this.tagErrorMsg = "";
        this.tag_code = "";
        this.nav = nav;
        this.loggedInBranch = this.empData['id_branch'];
    }
    StockCodeEntryPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.common.getCurrencyAndSettings({ "id_branch": this.loggedInBranch }).then(function (data) {
            _this.settings = data.settings;
            _this.ret_settings = data.ret_settings;
            _this.events.publish('settings:loaded', true);
            _this.events.publish('ret_settings:loaded', true);
            loader.dismiss();
        });
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    StockCodeEntryPage.prototype.ionViewWillEnter = function () {
    };
    StockCodeEntryPage.prototype.getTagData = function (tag_code) {
        var _this = this;
        if (tag_code.length > 0) {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            var postData = { "type": 'stockEntry', "searchTxt": tag_code, "searchField": "tag_code" };
            this.retail.getTagData(postData).then(function (data) {
                if (data.status) {
                    var tagAvailable = false;
                    _this.tags.forEach(function (tag) {
                        if (tag.tag_code == data.tagData.tag_code) {
                            tagAvailable = true;
                        }
                    });
                    if (tagAvailable) {
                        var toastMsg = _this.toast.create({
                            message: data.msg,
                            duration: _this.common.toastTimeout,
                            position: 'center'
                        });
                        toastMsg.present();
                    }
                    else {
                        _this.tags.push(data.tagData);
                    }
                }
                else {
                    _this.tags = [];
                    var toastMsg = _this.toast.create({
                        message: data.msg,
                        duration: _this.common.toastTimeout,
                        position: 'center'
                    });
                    toastMsg.present();
                }
                loader_1.dismiss();
            });
        }
        else {
            var toastMsg = this.toast.create({
                message: "Enter Tag Code",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    StockCodeEntryPage.prototype.deleteItem = function (item_type, idx) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        this.tags.splice(idx, 1);
        var toastMsg = this.toast.create({
            message: "Tag removed from list",
            duration: this.common.toastTimeout,
            position: 'center'
        });
        toastMsg.present();
        loader.dismiss();
    };
    StockCodeEntryPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-stock-entry',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\stock-entry\stock-entry.html"*/'<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title style="text-align: center !important;\n    margin-right: 15% !important;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n<!-- Estimation Create Block  -->\n  <ion-content>  <!-- [ngClass]="{\'qr-scanner-open\' : scannerOn }"  -->\n    <ion-grid padding> \n          <ion-row>\n            <ion-col text-wrap>\n				<ion-item no-padding>\n				  <ion-label color="label-color" stacked>Stock Code <span class="required">*</span></ion-label>\n				  <ion-input type="text" [(ngModel)]="stock[\'stock_code\']" required></ion-input>\n				</ion-item>\n			</ion-col>\n          </ion-row> \n          <ion-row>\n            <ion-col no-padding text-wrap col-12>\n              <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Tags  <ion-badge color="light" float-right></ion-badge></div>\n            </ion-col>\n            <!-- <ion-col text-wrap>\n              <span float-right>\n                  <button ion-button icon-start outline small color="secondary" (click)="openItemAddModal(\'tag\',\'\',\'add\')">\n                    <ion-icon name="ios-add"></ion-icon> ADD\n                  </button>\n                  <button ion-button icon-start outline small color="dark" (click)="openQRScanner(\'tag\')">\n                    <ion-icon name="ios-qr-scanner"></ion-icon> SCAN\n                  </button>\n              </span>\n            </ion-col> -->\n          </ion-row>\n		  <ion-row>\n			<ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">   \n				<ion-item no-padding> \n					<ion-label color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n					<ion-input type="text" [(ngModel)]="tag_code"></ion-input> \n					<button item-right ion-button margin-top color="light" (click)="getTagData(tag_code)"><ion-icon name="ios-search"></ion-icon></button>\n				</ion-item>\n			</ion-col>\n		  </ion-row>\n          <ion-card class="errorMsg" padding *ngIf="tagErrorMsg">\n            {{tagErrorMsg}}\n          </ion-card>\n          <ion-card class="msg" padding *ngIf="tagMsg">\n            {{tagMsg}}\n          </ion-card>\n          <ion-list>\n            <ion-item-sliding margin-top #tags *ngFor="let t of tags;let i of index;">\n              <ion-item class="no-padding">\n                <ion-row> \n                  <ion-col text-wrap col class="theme-color-secondary">\n                    {{t.tag_code}} \n                  </ion-col>\n                  <ion-col text-wrap col-9 col-md-2 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 1" style="font-size: 11px !important;">\n                    <span *ngIf="t.collection_name != null">{{t.collection_name}} <b> | </b> </span>\n                    {{t.product_name}}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col theme-color-secondary" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n                    {{t.product_name}}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Purity </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.purname}} \n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Pcs </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.piece}} \n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Size </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.size}} \n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Gross wgt </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.gross_wt}} \n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Less wgt </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.less_wt}}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Net Wgt </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.net_wt}}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Wast ({{t.retail_max_wastage_percent}} %)  </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.wast_wgt}}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">MC </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.making_charge | number:\'1.2-2\' }}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Taxable </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.taxable | number:\'1.2-2\' }}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Tax </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    {{t.tax_price | number:\'1.2-2\' }}\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <p class="text-small">Amount </p>\n                  </ion-col>\n                  <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n                    <b>{{t.sales_value | number:\'1.2-2\' }}</b>\n                  </ion-col>\n                  <ion-col text-wrap col-4 col-md-3 class="custom-2col" *ngIf="t.image != \'\'">\n                    <img src="{{t.image}}" imageViewer="{{t.image}}" >\n                  </ion-col>\n                </ion-row>\n              </ion-item>\n              <ion-item-options side="right">\n                <button ion-button *ngIf="esti_type != \'summary\'" color="primary" (click)="openItemAddModal(\'tag\',i,\'edit\')"><ion-icon name="create"></ion-icon></button>\n                <button ion-button color="danger" (click)="deleteItem(\'tag\',i)"><ion-icon name="trash"></ion-icon></button>\n              </ion-item-options>\n            </ion-item-sliding>\n          </ion-list> \n		 \n      <br/>\n      <br/>\n      <br/>\n    </ion-grid> \n  </ion-content>\n  <ion-footer *ngIf="page_type == \'create\'">\n    <ion-fab left bottom *ngIf="!scannerOn"> \n      <button ion-fab mini color="primary" (click)="openEstiBasicDetailModal()"><ion-icon name="person"></ion-icon></button>\n    </ion-fab>\n    <button ion-button *ngIf="!scannerOn && esti_type == \'summary\'" icon-start full class="theme-btn" (click)="createEsti()">Save</button>\n    <button *ngIf="scannerOn" ion-button icon-start full class="warning" (click)="closeScanner()">Close Scanner</button>  \n  </ion-footer>  \n<!-- ./Estimation Create Block  -->\n \n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\stock-entry\stock-entry.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__["a" /* Printer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_file_chooser__["a" /* FileChooser */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], StockCodeEntryPage);
    return StockCodeEntryPage;
}());

//# sourceMappingURL=stock-entry.js.map

/***/ }),

/***/ 188:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EmpSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the CustomPopupPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var EmpSearchPage = /** @class */ (function () {
    function EmpSearchPage(keyboard, event, navCtrl, renderer, viewCtrl, navParams) {
        this.keyboard = keyboard;
        this.event = event;
        this.navCtrl = navCtrl;
        this.renderer = renderer;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.details = [];
        this.empData = [];
        this.input = '';
        this.renderer.setElementClass(viewCtrl.pageRef().nativeElement, 'countrymodel', true);
        this.empData = this.navParams.get('empData');
        this.details = this.navParams.get('empData');
    }
    EmpSearchPage.prototype.selected = function (temp) {
        this.viewCtrl.dismiss(temp);
    };
    EmpSearchPage.prototype.dismiss = function (temp) {
        this.viewCtrl.dismiss();
    };
    EmpSearchPage.prototype.search = function () {
        var _this = this;
        if (!this.input.trim().length || !this.keyboard.isOpen()) {
            this.details = this.navParams.get('data');
            return;
        }
        this.details = this.empData.filter(function (item) { return item['emp_name'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    EmpSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-employee',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\employee\employee.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Choose Employee\n    </ion-title>\n    <ion-buttons end>\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n    <ion-searchbar [(ngModel)]="input" placeholder="Search Employee" (ionChange)="search()"></ion-searchbar>\n    <ion-list>\n        <ion-item *ngFor="let data of details" (click)="selected(data)">\n            <span *ngIf="data[\'emp_name\']">  {{data[\'emp_name\']}} </span>\n        </ion-item>\n    </ion-list>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\employee\employee.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["V" /* Renderer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], EmpSearchPage);
    return EmpSearchPage;
}());

//# sourceMappingURL=employee.js.map

/***/ }),

/***/ 199:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 199;

/***/ }),

/***/ 243:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 243;

/***/ }),

/***/ 31:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HomePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__login_login__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__estimation_estimation__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cus_register_cus_register__ = __webpack_require__(182);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__category_category__ = __webpack_require__(183);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__e_catalog_e_catalog__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__wishlist_wishlist__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__stock_entry_stock_entry__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__modal_employee_employee__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__branch_branch__ = __webpack_require__(397);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var HomePage = /** @class */ (function () {
    function HomePage(common, view, navParams, nav, modalCtrl, events, loadingCtrl) {
        var _this = this;
        this.common = common;
        this.view = view;
        this.navParams = navParams;
        this.nav = nav;
        this.modalCtrl = modalCtrl;
        this.events = events;
        this.loadingCtrl = loadingCtrl;
        this.myInput = '';
        this.showSpinner = true;
        this.showdash = false;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.versionData = JSON.parse(localStorage.getItem('versionData'));
        this.metalRate = [];
        this.settings = [];
        this.dash_esti = [];
        this.dash_om = [];
        this.pages = [];
        this.currency = { 'currency': { 'reg_existing': 0 } };
        this.empid = '';
        this.empname = '';
        this.bid = '';
        this.bnamename = '';
        this.employees = [];
        this.branches = [];
        var empdata = JSON.parse(localStorage.getItem('empDetail'));
        this.pages = empdata.menus;
        console.log(this.pages);
        this.common.getbranch().then(function (data) {
            _this.branches = data;
        });
    }
    HomePage_1 = HomePage;
    HomePage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.common.getCurrencyAndSettings({ "id_branch": this.empData['id_branch'] }).then(function (data) {
            _this.metalRate = data.metal_rates;
            _this.settings = data.settings;
            localStorage.setItem('currencyAndSettings', JSON.stringify(data));
        });
        var postData = { "id_branch": this.empData['id_branch'], "id_employee": this.empData['uid'] };
        this.common.getRetDashboard(postData).then(function (data) {
            _this.dash_esti = data.esti_sale;
            _this.dash_om = data.esti_old_metal;
        });
        this.common.getBranchEmployees(this.empData['id_branch']).then(function (data) {
            _this.employees = data;
        });
    };
    HomePage.prototype.ngAfterViewInit = function () {
    };
    HomePage.prototype.openEmpModal = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_11__modal_employee_employee__["a" /* EmpSearchPage */], { "empData": this.employees });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.empid = data.id_employee;
                _this.empname = data.emp_name;
                _this.empData['username'] = data.emp_name;
                _this.empData['emp_code'] = data.id_employee;
            }
        });
    };
    HomePage.prototype.openbranchodal = function () {
        var _this = this;
        var modal = this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_12__branch_branch__["a" /* BranchPage */], { "branch": this.branches });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.bid = data.id_branch;
                _this.bnamename = data.name;
                _this.empData['branch_name'] = data.name;
                // this.empData['id_branch'] = data.id_branch;
            }
        });
    };
    HomePage.prototype.openPage = function (pageData) {
        var pageName = pageData.component;
        console.log(pageName);
        if (pageName == 'LoginPage') {
            this.nav.push(__WEBPACK_IMPORTED_MODULE_3__login_login__["a" /* LoginPage */]);
        }
        else if (pageName == 'HomePage') {
            this.nav.setRoot(HomePage_1);
        }
        else if (pageName == 'EstiPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_4__estimation_estimation__["a" /* EstiPage */], { "page_type": pageData.page, 'empname': this.empname, 'empid': this.empid, 'bname': this.bnamename, 'bid': this.bid });
        }
        else if (pageName == 'CusRegisterPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_5__cus_register_cus_register__["a" /* CusRegisterPage */]);
        }
        else if (pageName == 'CategoryPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_6__category_category__["a" /* CategoryPage */]);
        }
        else if (pageName == 'Ecatalog') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_7__e_catalog_e_catalog__["a" /* EcatalogPage */]);
        }
        else if (pageName == "WishlistPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_8__wishlist_wishlist__["a" /* WishlistPage */]);
        }
        else if (pageName == "CartPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_9__cart_cart__["a" /* CartPage */]);
        }
        else if (pageName == "StockCodeEntryPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_10__stock_entry_stock_entry__["a" /* StockCodeEntryPage */]);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], HomePage.prototype, "content", void 0);
    HomePage = HomePage_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-home',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\home\home.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <!-- <ion-title><img class="header-logo" src=\'assets/img/homeheader.svg\'/></ion-title> -->\n\n    <ion-title style="text-align: center;margin-right: 15%;\n\n    "><img  class="header-logo" src=\'assets/img/header-final.svg\'/>\n\n    <!-- <ion-badge style="float: right;background-color: red;margin-top: 10px;">Test</ion-badge> -->\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n<ion-content>    \n\n  <!-- Row 1 -->\n\n  <ion-row margin>\n\n    <ion-col style="overflow: hidden;\n\n    white-space: nowrap !important;\n\n    text-overflow: ellipsis;font-weight: bold !important;\n\n    text-align: center !important;"  (click)="openEmpModal()" text-wrap col-sm-12 col-md-6 col-lg-6 col-xl-6 text-uppercase>\n\n      <div style="padding: 5px;border: 1px solid lightgray;border-radius: 6px;\n\n      overflow: hidden;\n\n    white-space: nowrap !important;\n\n    text-overflow: ellipsis;font-weight: bold !important;\n\n      ">\n\n      <ion-icon name="person" color="theme-color"></ion-icon> {{empData[\'username\']}} - {{empData[\'emp_code\']}}\n\n\n\n      </div>\n\n    </ion-col>\n\n    <ion-col style="overflow: hidden;\n\n    white-space: nowrap !important;\n\n    text-overflow: ellipsis;font-weight: bold !important;\n\n    text-align: center !important;" (click)="openbranchodal()" text-wrap col-sm-12 col-md-6 col-lg-6 col-xl-6 *ngIf="empData[\'branch_name\'] != \'\'" text-right>\n\n      <div style="padding: 5px;border: 1px solid lightgray;    border-radius: 6px;\n\n          border-radius: 6px;overflow: hidden;\n\n    white-space: nowrap !important;\n\n    text-overflow: ellipsis;font-weight: bold !important;\n\n\n\n      ">\n\n      <ion-icon name="pin" color="theme-color"></ion-icon>  {{empData[\'branch_name\']}}\n\n\n\n      </div>\n\n    </ion-col>\n\n  </ion-row>\n\n  <!-- ./Row 1 -->\n\n\n\n  <!-- Row 2 --> \n\n  <div padding class="dash-card-1">\n\n    <small style="font-weight: 800;">TODAY\'S RATE</small>\n\n    <ion-row text-center>\n\n      <ion-col no-padding text-wrap col-sm-6 col-md-6 col-lg-6 col-xl-6>\n\n        <p class="smaller">{{versionData.comp.short_code}} Gold 22KT/G</p>\n\n        <span [innerHTML]="settings.curr_symb_html"></span> <span class="rate">{{metalRate[\'goldrate_22ct\']}}</span>\n\n        <span *ngIf="settings.enableSilver_rateDisc > 0">\n\n      <br/>\n\n      <p class="smaller" *ngIf="metalRate[\'mjdmagoldrate_22ct\'] > 0">Market Gold 22KT/G</p>\n\n      <span *ngIf="metalRate[\'mjdmagoldrate_22ct\'] > 0"><span [innerHTML]="settings.curr_symb_html"></span> <span class="rate">{{metalRate[\'mjdmagoldrate_22ct\']}}</span></span>       \n\n    </span>		\n\n      </ion-col>\n\n      <ion-col no-padding text-wrap col-sm-6 col-md-6 col-lg-6 col-xl-6>\n\n        <p class="smaller">{{versionData.comp.short_code}} Silver / G</p>\n\n        <span [innerHTML]="settings.curr_symb_html"></span> <span class="rate">{{metalRate[\'silverrate_1gm\']}}</span>\n\n        <span *ngIf="settings.enableGoldrateDisc > 0"> \n\n          <br/>\n\n          <p class="smaller" *ngIf="metalRate[\'mjdmasilverrate_1gm\'] > 0">Market Silver/G</p>\n\n          <span *ngIf="metalRate[\'mjdmasilverrate_1gm\'] > 0"><span [innerHTML]="settings.curr_symb_html"></span> <span class="rate">{{metalRate[\'mjdmasilverrate_1gm\']}}</span></span>\n\n        </span>	\n\n      </ion-col>\n\n    </ion-row>\n\n  </div>\n\n  <!-- ./Row 2 --> \n\n  \n\n  <!-- Row 3 -->\n\n  \n\n  <!-- ./Row 3 -->\n\n\n\n  <!-- Row 4 -->\n\n\n\n    \n\n  <ion-row   *ngIf="empData[\'branch_id\'] == 0" align="center">\n\n    <!-- ESTIMATED - SALE -->\n\n    <ion-col col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 class="custom-2col">\n\n      <!-- <img class="dash-img-icon" src=\'assets/icon/esti.svg\' /> -->\n\n      <div class="dash-card-2">\n\n        <p class="dash-card-title theme-color">ESTIMATION - SALE</p>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Created</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_esti[\'created\']}}</span> \n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num">{{dash_esti[\'created_wgt\']}} g </span><br/>\n\n            <span class="smaller">Weight</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_esti[\'created_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Converted</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_esti[\'sold\']}}</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n              <span class="dash-num">{{dash_esti[\'sold_wgt\']}} g </span><br/>\n\n              <span class="smaller">Weight</span><br/>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_esti[\'sold_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n      </div> \n\n    </ion-col>   \n\n\n\n\n\n     <!-- ESTIMATED - SALE -->\n\n     <!-- <ion-col col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 class="custom-2col">\n\n      <div class="dash-card-2">\n\n        <p class="dash-card-title theme-color">ESTIMATION - SALE SILVER</p>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Created</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_esti[\'created\']}}</span> \n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num">{{dash_esti[\'created_wgt\']}} g </span><br/>\n\n            <span class="smaller">Weight</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_esti[\'created_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Converted</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_esti[\'sold\']}}</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n              <span class="dash-num">{{dash_esti[\'sold_wgt\']}} g </span><br/>\n\n              <span class="smaller">Weight</span><br/>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_esti[\'sold_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n      </div> \n\n    </ion-col>   -->\n\n\n\n    <!-- ESTIMATION - OLD METAL -->\n\n    <ion-col col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 class="custom-2col">\n\n      <!-- <img class="dash-img-icon" src=\'assets/icon/old_metal.svg\' /> -->\n\n      <div class="dash-card-2">\n\n        <p class="dash-card-title theme-color">ESTIMATION - OLD METAL</p>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Created</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_om[\'created\']}}</span> \n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num">{{dash_om[\'created_wgt\']}} g </span><br/>\n\n            <span class="smaller">Weight</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_om[\'created_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n        <ion-row text-center>\n\n          <ion-col col-3>\n\n            <span float-left>Converted</span>\n\n          </ion-col>\n\n          <ion-col col-1>\n\n            <span class="theme-color" float-right>{{dash_om[\'purchased\']}}</span>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n              <span class="dash-num">{{dash_om[\'purch_wgt\']}} g </span><br/>\n\n              <span class="smaller">Weight</span><br/>\n\n          </ion-col>\n\n          <ion-col col-4 class="no-padding no-marign">            \n\n            <span class="dash-num"><span [innerHTML]="settings.curr_symb_html"></span>{{dash_om[\'purch_amt\']}} </span><br/>\n\n            <span class="smaller">Amount</span>\n\n          </ion-col>\n\n        </ion-row>\n\n      </div> \n\n    </ion-col>\n\n\n\n  </ion-row>\n\n  <!-- ./Row 3 -->\n\n\n\n    <!-- Row 4 -->\n\n    <!-- CUSTOMER FEEDBACK-->\n\n    <!-- <ion-row>\n\n      <ion-col col-6 push-3 col-sm-4 col-md-4 col-lg-3 col-xl-3 class="custom-2col">\n\n          <div class="dash-card-2">\n\n            <ion-row text-center>\n\n              <ion-col col-12  class="no-padding no-marign">\n\n                <img class="dash-img-icon" src=\'assets/icon/cus_feedback.svg\' />\n\n              </ion-col>\n\n            </ion-row>\n\n            <p class="dash-card-title">CUSTOMER <br/> FEEDBACK</p>\n\n          </div>\n\n      </ion-col> \n\n    </ion-row> -->\n\n    <!-- ./Row 4 -->\n\n\n\n    <ion-row text-center margin>\n\n      <ion-col class="dash-icon-card" no-padding text-wrap col-sm-4 col-md-4 col-lg-4 col-xl-4 *ngFor="let p of pages" [hidden]="p.show_in_dash == 0" (click)="openPage(p)">\n\n        <ion-icon name="{{p.icon}}" class="dash-icons" color="theme-color"></ion-icon>\n\n        <br/><small>{{p.title}}</small>\n\n      </ion-col>\n\n  </ion-row>\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\home\home.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */]])
    ], HomePage);
    return HomePage;
    var HomePage_1;
}());

//# sourceMappingURL=home.js.map

/***/ }),

/***/ 387:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OtpPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__login_login__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__home_home__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the OtpPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var OtpPage = /** @class */ (function () {
    function OtpPage(event, nav, toast, load, common, navCtrl, navParams) {
        this.event = event;
        this.nav = nav;
        this.toast = toast;
        this.load = load;
        this.common = common;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.temp = { "sys_otp": '', "sys_otp_exp": "", "input_otp": "" };
        this.msg = '';
        this.page = this.navParams.get('page');
        this.postdata = '';
        this.userdet = this.navParams.get('userdet');
        this.otpDetails = this.navParams.get('otpDetail');
        console.log("OTP Page : " + this.page);
        console.log(this.userdet);
        console.log(this.otpDetails);
    }
    OtpPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad OtpPage');
    };
    OtpPage.prototype.sign = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__login_login__["a" /* LoginPage */]);
    };
    OtpPage.prototype.submit = function () {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        if (this.navParams.get('page') == 'loginOTP') {
            this.postdata = {
                'username': this.userdet['username'],
                'password': this.userdet['password'],
                'sys_otp_exp': this.otpDetails['otp']['sys_otp_exp'],
                'input_otp': this.temp['input_otp'],
                'sys_otp': this.otpDetails['otp']['otp_code'],
                'id_branch': this.userdet['id_branch']
            };
            this.common.verifyLoginOTP(this.postdata).then(function (data) {
                var ctrl = _this.toast.create({
                    message: data['msg'],
                    duration: _this.common.toastTimeout,
                    position: 'bottom'
                });
                ctrl.present();
                if (data.result) {
                    if (data.type == "logged") {
                        localStorage.setItem('userdet', JSON.stringify(_this.userdet)); // Login details
                        localStorage.setItem('empDetail', JSON.stringify(data.empdata)); // Employee Details
                        localStorage.setItem('logstatus', JSON.stringify(true));
                        _this.event.publish('user:changed', true, data.empdata);
                        loader.dismiss();
                        _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_4__home_home__["a" /* HomePage */]);
                    }
                }
                else {
                    _this.msg = data['msg'];
                    loader.dismiss();
                }
            });
        }
        else {
            this.msg = "Invalid Page";
            loader.dismiss();
        }
    };
    OtpPage.prototype.resend = function () {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        /*if (this.navParams.get('page') == 'old') {
           this.common.generateotp(this.navParams.get('data'), '').then(data => {
    
            this.temp['sysotp'] = data['otp']
            this.temp['last_otp_expiry'] = data['expiry']
            loader.dismiss();
          })
        }*/
    };
    OtpPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-otp',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\otp\otp.html"*/'<!--\n  Generated template for the OtpPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<!-- <ion-header>\n\n  <ion-navbar>\n    <ion-title>otp</ion-title>\n  </ion-navbar>\n\n</ion-header> -->\n\n\n<ion-content padding text-center class="loginbg">\n    <img style="width: 100px !important;height:100px ;margin-top: 20% !important;" src=\'assets/img/IntroducingLogo.png\' />\n    <ion-grid>\n        <ion-row> \n            <ion-col col-sm-12 col-md-6 offset-md-3 col-lg-6 offset-lg-3 col-xl-6 offset-xl-3>\n                <ion-card class="errorMsg" padding *ngIf="msg">\n                    {{msg}}\n                </ion-card>\n                <div margin>\n                    <ion-item >\n                        <ion-label color="label-color" stacked>OTP <span class="required"> *</span></ion-label>\n                        <ion-input type="number" [(ngModel)]="temp[\'input_otp\']" placeholder="Enter 6 digit OTP" minlength="6" maxlength="6"></ion-input>\n                    </ion-item>  \n                </div>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n\n    <ion-row margin>\n        <ion-col >\n            <button (click)="submit()" ion-button icon-start full class="theme-btn" type="submit">\n            Submit</button>\n        </ion-col>\n    </ion-row>\n\n    <!--     <ion-row style="border: none !important;">\n        <ion-col style="text-align: -webkit-center !important;">\n            <button (click)="resend()" ion-button class="joinbtn" block color="dark">\n          Resend OTP</button>\n        </ion-col>\n    </ion-row> -->\n\n\n    <!--     <button (click)="submit()" style="background: #ffab08;" ion-button class="button-login" block color="dark" type="submit">\n    Submit</button>\n    <br>\n    <button (click)="resend()" style="background: #ffab08;" ion-button class="button-login" block color="dark" type="submit">\n    Resend OTP</button>\n    <br> -->\n\n    <p *ngIf="page!=\'fixedrate\' || page!=\'existing\'" (click)="sign()" style="text-align: center;font-weight: normal;color: #2e2e2e;">Click here to Sign In</p>\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\otp\otp.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], OtpPage);
    return OtpPage;
}());

//# sourceMappingURL=otp.js.map

/***/ }),

/***/ 388:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AddStoneDetailPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the AddStoneDetailPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var AddStoneDetailPage = /** @class */ (function () {
    function AddStoneDetailPage(toast, load, retail, common, viewCtrl, navParams) {
        var _this = this;
        this.toast = toast;
        this.load = load;
        this.retail = retail;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.stoneData = [{ "is_apply_in_lwt": 0, "lwt": false, "stone_id": 0, "stone_pcs": 0, "stone_wt": 0, "stone_price": 0 }];
        this.stoneSelected = { "rate_type": "1" };
        this.tagstoneData = [
            {
                amount: 0,
                is_apply_in_lwt: 0,
                pieces: 0,
                rate_per_gram: 0,
                stone_cal_type: 0,
                stone_id: 0,
                stone_type: 0,
                tag_id: 0,
                uom_id: 0,
                wt: 0,
                lwt: false
            }
        ];
        this.fixed_rate_type = "";
        this.stoneMasData = [];
        this.stones = [];
        this.uom = [];
        this.cut = [];
        this.clarity = [];
        this.color = [];
        this.shape = [];
        this.proceedSave = false;
        this.ptype = "";
        this.gross = 0;
        this.page = this.navParams.get('page');
        this.ptype = this.navParams.get('ptype');
        this.gross = this.navParams.get('gross');
        this.stoneMasData = this.navParams.get('stoneMasData');
        console.log(this.stoneMasData);
        console.log(this.navParams.get('stone_details'));
        if (this.navParams.get('stone_details').length > 0 && this.ptype == 'tag') {
            this.tagstoneData = this.navParams.get('stone_details');
            this.tagstoneData.forEach(function (element, index) {
                _this.tagstoneData[index]['lwt'] = _this.tagstoneData[index]['is_apply_in_lwt'] == 1 ? true : false;
            });
        }
        else if (this.navParams.get('stone_details').length > 0 && this.ptype != 'tag') {
            this.stoneData = this.navParams.get('stone_details');
            this.stoneData.forEach(function (element, index) {
                _this.stoneData[index]['lwt'] = _this.stoneData[index]['is_apply_in_lwt'] == 1 ? true : false;
            });
        }
        if (this.stoneMasData) {
            this.stones = this.stoneMasData;
            this.uom = this.stoneMasData;
            this.cut = this.stoneMasData;
            this.clarity = this.stoneMasData;
            this.color = this.stoneMasData;
            this.shape = this.stoneMasData;
        }
        this.action = this.navParams.get('action');
    }
    AddStoneDetailPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    AddStoneDetailPage.prototype.updateStone = function (submitType) {
        var _this = this;
        if (this.ptype == 'tag') {
            this.viewCtrl.dismiss(this.tagstoneData);
        }
        else {
            this.viewCtrl.dismiss(this.stoneData);
        }
        // Alert Message Timeout
        setTimeout(function () {
            _this.errorMsg = "";
        }, this.common.msgTimeout);
    };
    AddStoneDetailPage.prototype.addStone = function (submitType) {
        var _this = this;
        console.log(this.stoneData);
        console.log(this.gross);
        if (this.ptype != 'tag') {
            for (var index = 0; index < this.stoneData.length; index++) {
                console.log(this.stoneData[index]);
                if (this.stoneData[index].stone_id > 0 && this.stoneData[index].stone_pcs > 0 && this.stoneData[index].stone_price > 0 && this.stoneData[index].stone_wt > 0) {
                    var stData = this.calcStoneDetail();
                    if (stData['stone_wt'] < this.gross) {
                        if (this.stoneData.length - 1 == index) {
                            if (this.ptype == 'tag') {
                                this.viewCtrl.dismiss(this.tagstoneData);
                            }
                            else {
                                this.viewCtrl.dismiss(this.stoneData);
                            }
                        }
                    }
                    else {
                        var ctrl = this.toast.create({
                            message: "Please Enter Valid Stone Weight ",
                            duration: this.common.toastTimeout,
                            position: 'bottom'
                        });
                        ctrl.present();
                        break;
                    }
                }
                else {
                    var ctrl = this.toast.create({
                        message: "* Fields are Mandatory",
                        duration: this.common.toastTimeout,
                        position: 'bottom'
                    });
                    ctrl.present();
                    break;
                }
            }
            // Alert Message Timeout
            setTimeout(function () {
                _this.errorMsg = "";
            }, this.common.msgTimeout);
        }
        if (this.ptype == 'tag') {
            for (var index = 0; index < this.tagstoneData.length; index++) {
                console.log(this.tagstoneData[index]);
                if (this.tagstoneData[index].stone_id > 0 && this.tagstoneData[index].pieces > 0 && this.tagstoneData[index].amount > 0 && this.tagstoneData[index].wt > 0) {
                    var stData = this.calcStoneDetail();
                    if (stData['wt'] < this.gross) {
                        if (this.tagstoneData.length - 1 == index) {
                            if (this.ptype == 'tag') {
                                this.viewCtrl.dismiss(this.tagstoneData);
                            }
                            else {
                                this.viewCtrl.dismiss(this.stoneData);
                            }
                        }
                    }
                    else {
                        var ctrl = this.toast.create({
                            message: "Please Enter Valid Stone Weight ",
                            duration: this.common.toastTimeout,
                            position: 'bottom'
                        });
                        ctrl.present();
                        break;
                    }
                }
                else {
                    var ctrl = this.toast.create({
                        message: "* Fields are Mandatory",
                        duration: this.common.toastTimeout,
                        position: 'bottom'
                    });
                    ctrl.present();
                    break;
                }
            }
            // Alert Message Timeout
            setTimeout(function () {
                _this.errorMsg = "";
            }, this.common.msgTimeout);
        }
    };
    AddStoneDetailPage.prototype.stoneChanged = function () {
        // this.stoneData['rate'] = 0;
        // this.stoneData['stone_price'] = 0;
        // if(this.stoneData['stone_id'] > 0){
        //   let filterData =  this.stones.filter((s: any) => s.stone_id == this.stoneData['stone_id']);
        //   this.stoneSelected = filterData[0];
        //   this.stoneData['rate'] = parseFloat(this.stoneSelected['rate_type']) == 1 ? parseFloat(this.stoneSelected['fixed_rate']) : "";
        //   this.fixed_rate_type = parseFloat(this.stoneSelected['fixed_rate_type']) == 1 ? "Per Gram" : (parseFloat(this.stoneSelected['fixed_rate_type']) == 2 ? "Per Piece" : "" );
        // }
    };
    AddStoneDetailPage.prototype.calcStoneValue = function () {
        // let stn_price:any = 0; 
        // if(this.stoneData['stone_id'] > 0 && this.stoneData['stone_pcs'] > 0 && this.stoneData['stone_wt'] > 0 && this.stoneData['stone_price'] > 0  ){
        //   this.proceedSave = true; 
        // }else{
        //   this.proceedSave = false;
        // }
        // if(this.stoneData['stone_id'] > 0 && this.stoneData['stone_pcs'] > 0 && this.stoneData['stone_wt'] > 0 && this.stoneData['stone_price'] > 0){
        // let rate_type = parseFloat(this.stoneSelected['rate_type']);
        // let fixed_rate_type = parseFloat(this.stoneSelected['fixed_rate_type']);
        // Rate Type => 1-Fixed, 2 - Rate From Master, 3 - Manual
        // if(rate_type == 1 || rate_type == 3)	
        // {
        //   if(fixed_rate_type == 1) //Fixed Rate Type => 1-Per Gram,2-Per Piece
        //   {
        //     stn_price = this.stoneData['rate']*parseFloat(this.stoneData['stone_wt']); 
        //   }
        //   else{
        //     stn_price = this.stoneData['rate']*parseFloat(this.stoneData['stone_pcs']); 
        //   }
        // }
        // else if(rate_type == 2)
        // {
        //   console.log(this.stoneData['rate_details']);
        //   this.stoneData['rate_details'].forEach( rate => {
        //     if(rate.cent_from <= this.stoneData['stone_wt'] && this.stoneData['stone_wt'] <= rate.cent_to)
        //     {
        //       this.stoneData['rate'] = rate.rate;
        //       stn_price = parseFloat(rate.rate)*parseFloat(this.stoneData['stone_wt']);
        //     }
        //   })
        // }
        // }
        // this.stoneData['stone_price'] = parseFloat(stn_price) + parseFloat(this.stoneData['certif_charge']);
    };
    AddStoneDetailPage.prototype.add = function () {
        if (this.ptype == 'tag') {
            this.tagstoneData.push({
                amount: 0,
                is_apply_in_lwt: 0,
                pieces: 0,
                rate_per_gram: 0,
                stone_cal_type: 0,
                stone_id: 0,
                stone_type: 0,
                tag_id: 0,
                uom_id: 0,
                wt: 0,
                lwt: false
            });
        }
        else {
            this.stoneData.push({ "is_apply_in_lwt": 0, "lwt": false, "stone_id": 0, "stone_pcs": 0, "stone_wt": 0, "stone_price": 0 });
        }
    };
    AddStoneDetailPage.prototype.remove = function (i) {
        if (this.ptype == 'tag') {
            if (this.tagstoneData.length > 1) {
                this.tagstoneData.splice(i, 1);
            }
            else if (this.tagstoneData.length == 1) {
                this.tagstoneData.splice(i, 1);
                this.tagstoneData.push({
                    amount: 0,
                    is_apply_in_lwt: 0,
                    pieces: 0,
                    rate_per_gram: 0,
                    stone_cal_type: 0,
                    stone_id: 0,
                    stone_type: 0,
                    tag_id: 0,
                    uom_id: 0,
                    wt: 0,
                    lwt: false
                });
            }
        }
        else {
            if (this.stoneData.length > 1) {
                this.stoneData.splice(i, 1);
            }
            else if (this.stoneData.length == 1) {
                this.stoneData.splice(i, 1);
                this.stoneData.push({ "is_apply_in_lwt": 0, "lwt": false, "stone_id": 0, "stone_pcs": 0, "stone_wt": 0, "stone_price": 0 });
            }
        }
    };
    AddStoneDetailPage.prototype.checkt = function (index) {
        this.tagstoneData[index]['is_apply_in_lwt'] = this.tagstoneData[index]['lwt'] == true ? 1 : 0;
    };
    AddStoneDetailPage.prototype.checko = function (index) {
        this.stoneData[index]['is_apply_in_lwt'] = this.stoneData[index]['lwt'] == true ? 1 : 0;
    };
    AddStoneDetailPage.prototype.tot = function (i) {
        this.tagstoneData[i]['amount'] = this.tagstoneData[i]['amount'] * this.tagstoneData[i]['wt'];
    };
    AddStoneDetailPage.prototype.calcStoneDetail = function () {
        var _this = this;
        if (this.ptype == 'tag') {
            var data_1 = { "wt": 0, "amount": 0 };
            this.tagstoneData.forEach(function (i, index) {
                if (_this.tagstoneData[index]['lwt']) {
                    _this.tagstoneData[index]['is_apply_in_lwt'] = 1;
                }
                else {
                    _this.tagstoneData[index]['is_apply_in_lwt'] = 0;
                }
                data_1['wt'] = data_1['wt'] + Number(i['wt']);
                data_1['amount'] = data_1['amount'] + Number(i['amount']);
            });
            return data_1;
        }
        else {
            var data_2 = { "stone_wt": 0, "stone_price": 0 };
            this.stoneData.forEach(function (i, index) {
                if (_this.stoneData[index]['lwt']) {
                    _this.stoneData[index]['is_apply_in_lwt'] = 1;
                }
                else {
                    _this.stoneData[index]['is_apply_in_lwt'] = 0;
                }
                data_2['stone_wt'] = data_2['stone_wt'] + Number(i['stone_wt']);
                data_2['stone_price'] = data_2['stone_price'] + Number(i['stone_price']);
            });
            return data_2;
        }
    };
    AddStoneDetailPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-add-stone-detail',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-stone-detail\add-stone-detail.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Add Stone\n    </ion-title>\n    <ion-buttons end *ngIf="action == \'add\'">\n      <!-- <button ion-button icon-only (click)="add()">\n        <ion-icon item-right name="add"></ion-icon>\n    </button> -->\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content no-padding>\n  <div *ngIf="ptype == \'tag\'">\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n     <ion-row>\n      <ion-col col-2>\n        <ion-label color="label-color" stacked>LWT</ion-label>\n\n     </ion-col>\n       <ion-col col-3>\n        <ion-label color="label-color" stacked>Stone <span class="required"> *</span></ion-label>\n\n       </ion-col>\n    \n      <ion-col >\n        <ion-label color="label-color" stacked>Pcs <span class="required"> *</span></ion-label>\n\n      </ion-col>\n      <ion-col >\n        <ion-label color="label-color" stacked>Wgt <span class="required"> *</span></ion-label>\n\n      </ion-col>\n    \n      <ion-col col-3>\n        <ion-label color="label-color" stacked>Price <span class="required"> *</span></ion-label>\n\n      </ion-col>\n    </ion-row>\n     <ion-row *ngFor="let s of tagstoneData;let i = index;">\n       <ion-col style="margin: auto;" col-1>\n        <ion-checkbox  [(ngModel)]="tagstoneData[i][\'lwt\']" (ngModelChange)="checkt(i)"></ion-checkbox>\n\n       </ion-col>\n      <ion-col col-3 >\n          <ion-select style="border: 1px solid lightgrey;" [(ngModel)]="tagstoneData[i][\'stone_id\']" placeholder="Stone"  >\n            <ion-option *ngFor="let s of stones" [value]="s.stone_id">{{s.stone_name}}</ion-option>\n          </ion-select>\n      </ion-col>\n      <ion-col >\n          <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="tagstoneData[i][\'pieces\']"   ></ion-input>\n      </ion-col>\n      <ion-col >\n        <ion-row no-padding>\n          <ion-col col-12 no-padding >\n              <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="tagstoneData[i][\'wt\']"  ></ion-input>\n          </ion-col>\n       \n        </ion-row>\n      </ion-col>\n      \n      <ion-col col-3 >\n          <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="tagstoneData[i][\'amount\']"></ion-input>\n      </ion-col>\n \n      <div  style="    width: 100%;">\n        <ion-icon style="float: right;" (click)="remove(i)" name="remove"></ion-icon>\n\n        <ion-icon style="float: right;" (click)="add()" name="add"></ion-icon>\n      </div>\n\n\n     </ion-row>\n     </div>\n\n\n     <div *ngIf="ptype != \'tag\'">\n      <ion-card class="errorMsg" padding *ngIf="errorMsg">\n        {{errorMsg}}\n      </ion-card>\n      <ion-card class="msg" padding *ngIf="msg">\n        {{msg}}\n      </ion-card>\n         <ion-row>\n          <ion-col col-2>\n            <ion-label color="label-color" stacked>LWT</ion-label>\n    \n         </ion-col>\n           <ion-col col-3>\n            <ion-label color="label-color" stacked>Stone <span class="required"> *</span></ion-label>\n    \n           </ion-col>\n        \n          <ion-col >\n            <ion-label color="label-color" stacked>Pcs <span class="required"> *</span></ion-label>\n    \n          </ion-col>\n          <ion-col >\n            <ion-label color="label-color" stacked>Wgt <span class="required"> *</span></ion-label>\n    \n          </ion-col>\n        \n          <ion-col col-3>\n            <ion-label color="label-color" stacked>Price <span class="required"> *</span></ion-label>\n    \n          </ion-col>\n        </ion-row>\n         <ion-row *ngFor="let s of stoneData;let i = index;">\n           <ion-col style="margin: auto;" col-1>\n            <ion-checkbox  [(ngModel)]="stoneData[i][\'lwt\']" (ngModelChange)="checko(i)"></ion-checkbox>\n    \n           </ion-col>\n          <ion-col col-3 >\n              <ion-select style="border: 1px solid lightgrey;" [(ngModel)]="stoneData[i][\'stone_id\']" placeholder="Stone"  >\n                <ion-option *ngFor="let s of stones" [value]="s.stone_id">{{s.stone_name}}</ion-option>\n              </ion-select>\n          </ion-col>\n          <ion-col >\n              <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'stone_pcs\']"   ></ion-input>\n          </ion-col>\n          <ion-col >\n            <ion-row no-padding>\n              <ion-col col-12 no-padding >\n                  <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'stone_wt\']"  ></ion-input>\n              </ion-col>\n           \n            </ion-row>\n          </ion-col>\n          \n          <ion-col col-3 >\n              <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'stone_price\']" ></ion-input>\n          </ion-col>\n     \n          <div  style="    width: 100%;">\n            <ion-icon style="float: right;" (click)="remove(i)" name="remove"></ion-icon>\n    \n            <ion-icon style="float: right;" (click)="add()" name="add"></ion-icon>\n          </div>\n    \n    \n         </ion-row>\n         </div>\n\n</ion-content>\n<ion-footer>\n    <ion-row *ngIf="action == \'add\'">\n      <ion-col col-6>\n        <button ion-button icon-start full color="danger" (click)="dismiss()">Close</button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button icon-start full color="primary" (click)="addStone(\'S\')">Save</button>\n      </ion-col>\n    </ion-row>\n    <ion-row *ngIf="action == \'edit\'">\n      <ion-col col-12>\n        <button ion-button icon-start full color="primary" (click)="updateItem(\'S\')">Update</button>\n      </ion-col>\n    </ion-row>\n</ion-footer>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\add-stone-detail\add-stone-detail.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], AddStoneDetailPage);
    return AddStoneDetailPage;
}());

//# sourceMappingURL=add-stone-detail.js.map

/***/ }),

/***/ 389:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OtherPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the AddStoneDetailPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var OtherPage = /** @class */ (function () {
    function OtherPage(load, retail, common, viewCtrl, navParams) {
        this.load = load;
        this.retail = retail;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navParams = navParams;
        this.stoneData = [{ "metal_id": 0, "stone_pcs": 0, "stone_wt": 0, "price": 0 }];
        this.stoneSelected = { "rate_type": "1" };
        this.fixed_rate_type = "";
        this.stoneMasData = [];
        this.stones = [];
        this.uom = [];
        this.cut = [];
        this.clarity = [];
        this.color = [];
        this.shape = [];
        this.proceedSave = false;
        this.page = this.navParams.get('page');
        this.stoneMasData = this.navParams.get('stoneMasData');
        console.log(this.navParams.get('stone_details'));
        // this.common.othermetal().then(data=>{
        //   this.stones = data;
        // })
        this.stones = [{ 'metal_id': 1, 'metal_name': 'ring', 'price': 100 }, { 'metal_id': 2, 'metal_name': 'bangle', 'price': 200 }];
        if (this.navParams.get('stone_details').length > 0) {
            this.stoneData = this.navParams.get('stone_details');
        }
        this.action = this.navParams.get('action');
    }
    OtherPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    OtherPage.prototype.updateStone = function (submitType) {
        var _this = this;
        this.viewCtrl.dismiss(this.stoneData);
        // Alert Message Timeout
        setTimeout(function () {
            _this.errorMsg = "";
        }, this.common.msgTimeout);
    };
    OtherPage.prototype.addStone = function (submitType) {
        var _this = this;
        console.log(this.stoneData);
        this.viewCtrl.dismiss(this.stoneData);
        // Alert Message Timeout
        setTimeout(function () {
            _this.errorMsg = "";
        }, this.common.msgTimeout);
    };
    OtherPage.prototype.stoneChanged = function () {
    };
    OtherPage.prototype.calcStoneValue = function () {
    };
    OtherPage.prototype.add = function () {
        this.stoneData.push({ "metal_id": 0, "stone_pcs": 0, "stone_wt": 0, "price": 0 });
    };
    OtherPage.prototype.remove = function (i) {
        if (this.stoneData.length > 1) {
            this.stoneData.splice(i, 1);
        }
        else if (this.stoneData.length == 1) {
            this.stoneData.splice(i, 1);
            this.stoneData.push({ "metal_id": 0, "stone_pcs": 0, "stone_wt": 0, "price": 0 });
        }
    };
    OtherPage.prototype.calp = function (i, j) {
        console.log(i);
        console.log(j);
        this.stoneData[i]['price'] = this.stones.filter(function (data) { return data['metal_id'] == j; })[0]['price'];
    };
    OtherPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-other',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\other\other.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Add Other Metal\n    </ion-title>\n    <ion-buttons end *ngIf="action == \'add\'">\n      <!-- <button ion-button icon-only (click)="add()">\n        <ion-icon item-right name="add"></ion-icon>\n    </button> -->\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content no-padding>\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n     <ion-row>\n       <ion-col col-6>\n        <ion-label color="label-color" stacked>Metal <span class="required"> *</span></ion-label>\n\n       </ion-col>\n    \n      <!-- <ion-col col-3>\n        <ion-label color="label-color" stacked>Pieces <span class="required"> *</span></ion-label>\n\n      </ion-col>\n      <ion-col col-3>\n        <ion-label color="label-color" stacked>Weight <span class="required"> *</span></ion-label>\n\n      </ion-col> -->\n    \n      <ion-col col-6>\n        <ion-label color="label-color" stacked>Price <span class="required"> *</span></ion-label>\n\n      </ion-col>\n    </ion-row>\n     <ion-row *ngFor="let s of stoneData;let i = index;">\n      <ion-col col-6 >\n        <!-- <ion-item no-padding> -->\n          <ion-select style="border: 1px solid lightgrey;" [(ngModel)]="stoneData[i][\'metal_id\']" (ngModelChange)="calp(i,stoneData[i][\'metal_id\'])" placeholder="Metal"  >\n            <ion-option *ngFor="let st of stones;let j = index;" [value]="st.metal_id">{{st.metal_name}}</ion-option>\n          </ion-select>\n        <!-- </ion-item> -->\n      </ion-col>\n      <!-- <ion-col col-3 >\n          <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'stone_pcs\']"   ></ion-input>\n      </ion-col>\n      <ion-col col-3 >\n        <ion-row no-padding>\n          <ion-col col-12 no-padding >\n              <ion-input style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'stone_wt\']"  ></ion-input>\n          </ion-col>\n         \n        </ion-row>\n      </ion-col> -->\n      \n      <ion-col col-6 >\n          <ion-input readonly style="border: 1px solid lightgrey;" type="number" [(ngModel)]="stoneData[i][\'price\']" ></ion-input>\n      </ion-col>\n    \n      <div  style="    width: 100%;">\n        <ion-icon style="float: right;" (click)="remove(i)" name="remove"></ion-icon>\n\n        <ion-icon style="float: right;" (click)="add()" name="add"></ion-icon>\n      </div>\n\n\n     </ion-row>\n</ion-content>\n<ion-footer>\n    <ion-row *ngIf="action == \'add\'">\n      <ion-col col-6>\n        <button ion-button icon-start full color="danger" (click)="dismiss()">Close</button>\n      </ion-col>\n      <ion-col col-6>\n        <button ion-button icon-start full color="primary" (click)="addStone(\'S\')">Save</button>\n      </ion-col>\n    </ion-row>\n    <ion-row *ngIf="action == \'edit\'">\n      <ion-col col-12>\n        <button ion-button icon-start full color="primary" (click)="updateItem(\'S\')">Update</button>\n      </ion-col>\n    </ion-row>\n</ion-footer>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\other\other.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], OtherPage);
    return OtherPage;
}());

//# sourceMappingURL=other.js.map

/***/ }),

/***/ 391:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GiftPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modal_customer_customer__ = __webpack_require__(54);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the giftPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var GiftPage = /** @class */ (function () {
    function GiftPage(cd, comman, event, toastCtrl, alertCtrl, load, modal, navCtrl, navParams, renderer, viewCtrl) {
        this.cd = cd;
        this.comman = comman;
        this.event = event;
        this.toastCtrl = toastCtrl;
        this.alertCtrl = alertCtrl;
        this.load = load;
        this.modal = modal;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.renderer = renderer;
        this.viewCtrl = viewCtrl;
        this.details = [];
        this.adderror = null;
        this.ferror = null;
        this.ani = false;
        this.fields = [{ 'slip_no': '', 'slip_amt': '' }];
        this.idcus = this.navParams.get('id_customer');
        console.log(this.details);
        this.fields = this.navParams.get('chit');
        console.log(this.fields);
    }
    GiftPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad giftPage');
    };
    GiftPage.prototype.submit = function () {
        console.log(this.fields);
        for (var index = 0; index < this.fields.length; index++) {
            if (this.fields[index]['slip_no'] == '' || this.fields[index]['slip_amt'] == '') {
                this.ferror = false;
                break;
            }
            else {
                this.ferror = null;
            }
        }
        if (this.ferror != false) {
            this.event.publish('gift', { 'fields': this.fields, 'idcus': this.idcus });
            this.navCtrl.pop();
            console.log('success');
        }
    };
    GiftPage.prototype.removefield = function (i) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Are You Sure Want to Delete?',
            buttons: [
                {
                    text: 'No',
                    role: 'cancel',
                    handler: function () {
                        console.log('Cancel clicked');
                    }
                },
                {
                    text: 'Yes',
                    handler: function () {
                        console.log('yes clicked');
                        _this.fields.splice(i, 1);
                        _this.ferror = null;
                        if (_this.fields.length == 0) {
                            _this.fields = [{ 'slip_no': '', 'slip_amt': '' }];
                        }
                    }
                }
            ]
        });
        alert.present();
    };
    GiftPage.prototype.addfield = function (i) {
        if (this.fields[i]['slip_no'] != '' && this.fields[i]['slip_amt'] != '') {
            this.fields.push({ 'slip_no': '', 'slip_amt': '' });
        }
        else {
            this.ferror = false;
        }
    };
    GiftPage.prototype.upper = function (data, i) {
        var _this = this;
        if (this.idcus != '') {
            this.fields[i]['slip_no'] = data.toUpperCase();
            this.comman.getslip({ 'id_customer': this.idcus, 'slip_no': this.fields[i]['slip_no'] }).then(function (data) {
                if (data['status']) {
                    _this.fields[i]['slip_amt'] = data['result']['utilized_amount'];
                }
                else {
                    var toastMsg = _this.toastCtrl.create({
                        message: data['msg'],
                        duration: 1000,
                        position: 'middle'
                    });
                    toastMsg.present();
                }
            }, function (err) {
            });
        }
        else {
            var toastMsg = this.toastCtrl.create({
                message: 'Please Select Customer',
                duration: 1000,
                position: 'middle'
            });
            toastMsg.present();
            // this.fields[i]['slip_no'] = '';
            // this.cd.detectChanges();
            this.fields = [{ 'slip_no': '', 'slip_amt': '' }];
            this.ani = true;
            this.cd.detectChanges();
            console.log(this.fields);
        }
    };
    GiftPage.prototype.fvalid = function (i) {
        if (this.fields[i]['slip_no'] == '' && this.fields[i]['slip_no'] == '' || this.fields[i]['slip_amt'] == '') {
            this.ferror = false;
        }
        else {
            this.ferror = null;
        }
    };
    GiftPage.prototype.openEstiBasicDetailModal = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_3__modal_customer_customer__["a" /* CusSearchPage */], { 'show': 'true' });
        modal.present();
        modal.onDidDismiss(function (mData) {
            console.log(mData);
            if (mData != null) {
                _this.idcus = mData['id_customer'];
                // this.empSelected();
            }
            else {
            }
        });
    };
    GiftPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-gift',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\gift\gift.html"*/'<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title style="text-align: center !important;\n    margin-right: 15% !important;"><img class="header-logo" src=\'assets/img/header-final.svg\'/>\n  \n  </ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content >\n\n  <ion-row>\n    <ion-col no-padding text-wrap col-10>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Chit Details  <ion-badge color="light" float-right></ion-badge>\n      </div>\n    </ion-col>\n    <ion-col no-padding text-wrap col-2>\n\n    <button style="float: right" [ngClass]="ani == true ? \'show\' : \'\' " ion-fab mini color="primary" (click)="openEstiBasicDetailModal()"><ion-icon name="person"></ion-icon></button>\n  </ion-col>\n\n    </ion-row>\n   \n\n\n  <ion-row style="    margin-top: 10px;" >\n    <ion-col col-5 style="font-weight: bold;">\n      Slip No\n      </ion-col>\n      <ion-col col-5 style="font-weight: bold;">\n         Amount\n\n      </ion-col>\n      </ion-row>\n\n      <ion-row style="    margin-top: 10px;" *ngFor="let f of fields;let i = index;">\n        <ion-col col-5 style="border: 1px solid #aea6a6;">\n\n          <ion-input placeholder="Enter No" type="text" [(ngModel)]="f[\'slip_no\']" (ionChange)="upper(f[\'slip_no\'],i)"></ion-input>\n\n        </ion-col>\n          <ion-col col-5 style="border: 1px solid #aea6a6;">\n                <ion-input  type="number" [(ngModel)]="f[\'slip_amt\']" (ionChange)="fvalid(i)"  placeholder="Enter Amount" readonly></ion-input>  \n              </ion-col>\n        <ion-col col-1>\n          <ion-icon *ngIf="i == fields.length - 1"  name="add" (click)="addfield(i)"></ion-icon>\n\n        </ion-col>\n        <ion-col col-1>\n          <ion-icon  *ngIf="i != 0"  name="remove" (click)="removefield(i)"></ion-icon>\n\n        </ion-col>\n      </ion-row>\n\n               <p *ngIf="ferror == false" style="color: red;">Enter Valid Details</p>\n\n<div style="text-align: center;">\n  <button (click)="submit()" style="border-radius: 20px !important;background: #86354d;margin-top: 15px;" ion-button>Done</button>\n  </div>\n\n</ion-content>\n\n<!-- <ion-footer style="text-align: center;">\n  <ion-fab left bottom [ngClass]="ani == true ? \'show\' : \'\' " > \n    <button [ngClass]="ani == true ? \'show\' : \'\' " ion-fab mini color="primary" (click)="openEstiBasicDetailModal()"><ion-icon name="person"></ion-icon></button>\n  </ion-fab>\n  </ion-footer> -->'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\gift\gift.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["V" /* Renderer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */]])
    ], GiftPage);
    return GiftPage;
}());

//# sourceMappingURL=gift.js.map

/***/ }),

/***/ 392:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProductsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__designs_designs__ = __webpack_require__(393);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




// @IonicPage()
var ProductsPage = /** @class */ (function () {
    function ProductsPage(navCtrl, load, navParams, retailService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.load = load;
        this.navParams = navParams;
        this.retailService = retailService;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.categoryitems = this.navParams.get('data');
        this.id_ret_category = this.navParams.get('id_category');
        this.products = [];
        this.last_id = 0;
        console.log(this.categoryitems);
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_category': this.id_ret_category,
            'last_id': this.last_id
        };
        this.retailService.getProducts(postData).then(function (data) {
            _this.products = data;
            console.log(_this.products);
            loader.dismiss();
        });
    }
    ProductsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad ProductsPage');
    };
    ProductsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.products);
        this.last_id = this.products[this.products.length - 1]['pro_id'];
        console.log(this.last_id);
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_category': this.id_ret_category,
            'last_id': this.last_id
        };
        this.retailService.getProducts(postData).then(function (data) {
            console.log(data);
            for (var index = 0; index < data.length; index++) {
                _this.products.push(data[index]);
            }
            infiniteScroll.complete();
        });
    };
    ProductsPage.prototype.openDesign = function (pro_id) {
        console.log(pro_id);
        console.log(this.products);
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__designs_designs__["a" /* DesignsPage */], { 'id_product': pro_id, 'id_category': this.id_ret_category,
            'data': this.products });
    };
    ProductsPage.prototype.ionViewWillEnter = function () {
        var user = true;
        //  this.events.publish('user:created', user);
    };
    ProductsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-products',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\products\products.html"*/'<!--\n  Generated template for the ProductsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>Products</ion-title> \n    </ion-navbar> \n</ion-header> \n\n<ion-content>\n    <ion-grid no-padding>\n        <ion-row *ngIf="products.length > 0" text-center>\n            <ion-col text-wrap col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4  *ngFor="let item of products; let i=index" class="custom-2col" [ngClass]="animateClass" (click)="openDesign(item.pro_id)">\n                <ion-card>\n                    <img class="full-image" src=\'{{item.image}}\' onerror="this.onerror=null;this.src=\'assets/no-img.png\';" imageCache/>\n                    <ion-item text-center no-margin>\n                        <h5 class="text-small theme-color">{{item.product_name}}</h5>\n                    </ion-item>\n                </ion-card> \n            </ion-col>\n        </ion-row> \n    </ion-grid>  \n\n    <ion-row *ngIf="products.length == 0 " style="text-align: center;">\n        <ion-col>\n            <h4>{{errormsg}}</h4>\n        </ion-col>\n    </ion-row>\n\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\products\products.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]])
    ], ProductsPage);
    return ProductsPage;
}());

//# sourceMappingURL=products.js.map

/***/ }),

/***/ 393:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DesignsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__subdesign_subdesign__ = __webpack_require__(394);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




// @IonicPage()
var DesignsPage = /** @class */ (function () {
    function DesignsPage(navCtrl, load, navParams, retailService) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.load = load;
        this.navParams = navParams;
        this.retailService = retailService;
        this.id_product = this.navParams.get('id_product');
        this.id_ret_category = this.navParams.get('id_category');
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.designs = {};
        this.last_id = 0;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_product': this.id_product,
            'last_id': this.last_id
        };
        this.retailService.getDesigns(postData).then(function (data) {
            _this.designs = data;
            console.log(_this.designs);
            loader.dismiss();
        });
    }
    DesignsPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DesignsPage');
    };
    DesignsPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.designs);
        this.last_id = this.designs[this.designs.length - 1]['design_no'];
        console.log(this.last_id);
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_product': this.id_product,
            'last_id': this.last_id
        };
        this.retailService.getDesigns(postData).then(function (data) {
            console.log(data);
            for (var index = 0; index < data.length; index++) {
                _this.designs.push(data[index]);
            }
            infiniteScroll.complete();
        });
    };
    // openDesign(design_no){ 
    //   this.navCtrl.push(DesignDetailPage,{'design_no':design_no,'type':'view_only'})  
    // }
    DesignsPage.prototype.opensubDesign = function (design_no) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__subdesign_subdesign__["a" /* SubdesignPage */], { 'id_category': this.id_ret_category,
            'id_product': this.id_product,
            'design_no': design_no, 'type': 'view_only' });
    };
    DesignsPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-designs',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designs\designs.html"*/'<!--\n  Generated template for the DesignsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>Designs</ion-title> \n    </ion-navbar> \n</ion-header> \n\n\n<ion-content padding-vertical> \n    <ion-grid no-padding>\n        <ion-row *ngIf="designs.length > 0" text-center>\n            <ion-col text-wrap col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4  *ngFor="let item of designs; let i=index" class="custom-2col" [ngClass]="animateClass" (click)="opensubDesign(item.design_no)">\n                <ion-card>\n                    <img class="full-image" src=\'{{item.image}}\' onerror="this.onerror=null;this.src=\'assets/no-img.png\';" imageCache/>\n                    <ion-item text-center no-margin>\n                        <h5 class="text-small theme-color">{{item.design_name}}</h5>\n                    </ion-item>\n                </ion-card> \n            </ion-col>\n        </ion-row> \n    </ion-grid> \n\n    <ion-row *ngIf="designs.length == 0 " style="text-align: center;">\n        <ion-col>\n            <h4>{{errormsg}}</h4>\n        </ion-col>\n    </ion-row>\n\n    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n        <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n    </ion-infinite-scroll>\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designs\designs.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]])
    ], DesignsPage);
    return DesignsPage;
}());

//# sourceMappingURL=designs.js.map

/***/ }),

/***/ 394:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SubdesignPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__design_detail_design_detail__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_common__ = __webpack_require__(10);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// @IonicPage()
var SubdesignPage = /** @class */ (function () {
    function SubdesignPage(comman, navCtrl, load, navParams, retailService) {
        var _this = this;
        this.comman = comman;
        this.navCtrl = navCtrl;
        this.load = load;
        this.navParams = navParams;
        this.retailService = retailService;
        this.id_product = this.navParams.get('id_product');
        this.design = this.navParams.get('design_no');
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.designs = {};
        this.last_id = 0;
        this.id_ret_category = this.navParams.get('id_category');
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_product': this.id_product,
            'last_id': this.last_id,
            'design_no': this.design
        };
        this.comman.getsubdesigns(postData).then(function (data) {
            _this.designs = data;
            console.log(_this.designs);
            loader.dismiss();
        });
    }
    SubdesignPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad DesignsPage');
    };
    SubdesignPage.prototype.doInfinite = function (infiniteScroll) {
        var _this = this;
        console.log(this.designs);
        this.last_id = this.designs[this.designs.length - 1]['id_sub_design'];
        console.log(this.last_id);
        var postData = {
            'id_employee': this.empData['uid'] != null ? this.empData['uid'] : null,
            'type': 'active',
            'id_product': this.id_product,
            'last_id': this.last_id,
            'design_no': this.design
        };
        this.comman.getsubdesigns(postData).then(function (data) {
            console.log(data);
            for (var index = 0; index < data.length; index++) {
                _this.designs.push(data[index]);
            }
            infiniteScroll.complete();
        });
    };
    SubdesignPage.prototype.openDesign = function (design_no) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__design_detail_design_detail__["a" /* DesignDetailPage */], { 'id_category': this.id_ret_category, 'id_product': this.id_product, 'design_no': this.design, 'id_sub_design': design_no, 'type': 'edit' });
    };
    SubdesignPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-subdesign',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesign\subdesign.html"*/'<!--\n  Generated template for the DesignsPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n      <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n      <ion-title>SubDesigns</ion-title> \n  </ion-navbar> \n</ion-header> \n\n\n<ion-content padding-vertical> \n  <ion-grid no-padding>\n      <ion-row *ngIf="designs.length > 0" text-center>\n          <ion-col text-wrap col-6 col-sm-6 col-md-4 col-lg-4 col-xl-4  *ngFor="let item of designs; let i=index" class="custom-2col" [ngClass]="animateClass" (click)="openDesign(item.id_sub_design)">\n              <ion-card>\n                  <img class="full-image" src=\'{{item.default_image}}\' onerror="this.onerror=null;this.src=\'assets/no-img.png\';" imageCache/>\n                  <ion-item text-center no-margin>\n                      <h5 class="text-small theme-color">{{item.label}}</h5>\n                  </ion-item>\n              </ion-card> \n          </ion-col>\n      </ion-row> \n  </ion-grid> \n\n  <ion-row *ngIf="designs.length == 0 " style="text-align: center;">\n      <ion-col>\n          <h4>{{errormsg}}</h4>\n      </ion-col>\n  </ion-row>\n\n  <!-- <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n      <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n  </ion-infinite-scroll> -->\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesign\subdesign.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]])
    ], SubdesignPage);
    return SubdesignPage;
}());

//# sourceMappingURL=subdesign.js.map

/***/ }),

/***/ 396:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FilterPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the CategoryComponent component.
 *
 * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html
 * for more info on Angular Components.
 */
var FilterPage = /** @class */ (function () {
    function FilterPage(navParams, loadingCtrl, modalCtrl, viewCtrl, retail, common) {
        this.navParams = navParams;
        this.loadingCtrl = loadingCtrl;
        this.modalCtrl = modalCtrl;
        this.viewCtrl = viewCtrl;
        this.retail = retail;
        this.common = common;
        this.animateItems = [];
        this.categoryItems = [];
        this.filters = this.navParams.get('filters');
        this.filter_options = this.navParams.get('filter_options');
        this.filterargs = this.navParams.get('filterargs');
    }
    FilterPage.prototype.showfilterOptions = function (filter_id) {
        this.filterargs = { 'id_filter': filter_id, 'show': 1 };
    };
    FilterPage.prototype.get_filterAndOptions = function (filter_id, option_id) {
        this.filterargs = { 'id_filter': filter_id, 'show': 1 };
    };
    FilterPage.prototype.reset_filter = function () {
        var resetData = JSON.parse(localStorage.getItem('resetFilterData'));
        this.filters = resetData.filters;
        console.log(resetData.filters);
        this.filter_options = resetData.filter_options;
        this.filterargs = resetData.filterargs;
        console.log(JSON.parse(localStorage.getItem('resetFilterData')));
    };
    FilterPage.prototype.apply_filter = function () {
        var obj = { filters: this.filters, filter_options: this.filter_options, filterargs: this.filterargs };
        localStorage.setItem('appliedFilter', JSON.stringify(obj));
        console.log(JSON.parse(localStorage.getItem('appliedFilter')));
        this.viewCtrl.dismiss({ filters: this.filters, filter_options: this.filter_options, filterargs: this.filterargs });
    };
    FilterPage.prototype.dismiss_modal = function () {
        var appliedFilter = JSON.parse(localStorage.getItem('appliedFilter'));
        if (appliedFilter != null && appliedFilter != undefined) {
            this.filters = appliedFilter.filters;
            this.filter_options = appliedFilter.filter_options;
            this.filterargs = appliedFilter.filterargs;
            console.log('dismiss_modal');
            console.log(JSON.parse(localStorage.getItem('appliedFilter')));
        }
        this.viewCtrl.dismiss();
    };
    FilterPage.prototype.ionViewWillEnter = function () {
        console.log(' ngOnInit filter modal');
        console.log(JSON.parse(localStorage.getItem('appliedFilter')));
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FilterPage.prototype, "data", void 0);
    FilterPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'filter',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\filter\filter.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>Filter</ion-title>\n    <ion-buttons end>\n      <button  ion-button (click)="dismiss_modal()">\n        <ion-icon name="close"></ion-icon>\n      </button>\n    </ion-buttons> \n  </ion-navbar>\n</ion-header>\n<ion-grid has-header has-footer>\n  <ion-row>\n    <ion-col>\n      <ion-scroll scrollX="true" scrollY="true" style="bottom: 1%;top:1%;height:100% !important;">\n        <ion-list>\n          <ion-item  *ngFor="let item of filters | myfilter:{show:1}; let idx = index"  (tap)="showfilterOptions(item.id_filter)">\n            <ion-label> {{item.filter_head}}</ion-label>\n                </ion-item>\n        </ion-list>\n      </ion-scroll> \n    </ion-col>\n    <ion-col>\n      <ion-scroll scrollX="true" scrollY="true" style="height: 500px !important;"> \n        <ion-list>\n          <ion-item *ngFor="let item of filter_options  | myfilter:filterargs; let idx = index" >\n            <ion-label>{{item.filter}}</ion-label>\n            <ion-checkbox  [(ngModel)]="item.is_selected" (ionChange)="get_filterAndOptions(item.id_filter,item.id_opt)" ></ion-checkbox> \n          </ion-item>\n        </ion-list>\n      </ion-scroll> \n    </ion-col>	\n   </ion-row>\n </ion-grid>\n\n<ion-footer>\n  <ion-toolbar color="primary">\n    <ion-buttons>\n      <button ion-button (click)="reset_filter()"> Reset </button>\n    </ion-buttons>\n    <ion-buttons  end>\n      <button ion-button (click)="apply_filter()"> Apply </button>\n    </ion-buttons>\n  </ion-toolbar>\n</ion-footer>\n\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\filter\filter.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]])
    ], FilterPage);
    return FilterPage;
}());

//# sourceMappingURL=filter.js.map

/***/ }),

/***/ 397:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BranchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the BranchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var BranchPage = /** @class */ (function () {
    function BranchPage(viewCtrl, navCtrl, navParams) {
        var _this = this;
        this.viewCtrl = viewCtrl;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.branch = [];
        this.sebranch = [];
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.branch = this.navParams.get('branch');
        this.sebranch = this.navParams.get('branch');
        console.log(this.empData['branch_id']);
        if (this.empData['branch_id'] != 0) {
            var temp = this.empData['branch_id'];
            var spl = temp.split(',');
            console.log(spl);
            var final_1 = [];
            spl.forEach(function (element) {
                var two = _this.branch.filter(function (data) { return data['id_branch'] == element; });
                final_1.push(two[0]);
            });
            this.branch = final_1;
            this.sebranch = final_1;
            console.log(final_1);
        }
    }
    BranchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad BranchPage');
    };
    BranchPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    BranchPage.prototype.selected = function (data) {
        this.viewCtrl.dismiss(data);
    };
    BranchPage.prototype.getCus = function (input) {
        console.log(input.target.value);
        console.log(this.sebranch);
        this.branch = this.sebranch.filter(function (item) { return item['name'].toUpperCase().includes(input.target.value.toUpperCase()); });
    };
    BranchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-branch',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\branch\branch.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Choose Branch\n    </ion-title>\n    <ion-buttons end>\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <ion-searchbar (ionInput)="getCus($event)"></ion-searchbar>\n  <ion-list>\n    <ion-item *ngFor="let b of branch" (click)="selected(b)">\n      {{ b.name }}\n    </ion-item>\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\branch\branch.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], BranchPage);
    return BranchPage;
}());

//# sourceMappingURL=branch.js.map

/***/ }),

/***/ 398:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IntroimgPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the IntroimgPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var IntroimgPage = /** @class */ (function () {
    function IntroimgPage(navCtrl, navParams, viewCtrl) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.viewCtrl = viewCtrl;
        this.popupimage = this.navParams.get('image');
        console.log("000", this.navParams.get('image'));
    }
    IntroimgPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad IntroimgPage');
    };
    IntroimgPage.prototype.close = function () {
        this.viewCtrl.dismiss();
    };
    IntroimgPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-introimg',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\introimg\introimg.html"*/'<!--\n  Generated template for the IntroimgPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n\n<!-- <ion-header>\n\n  <ion-navbar>\n    <ion-row>\n      <ion-col col-8>\n      <ion-title style="padding-top: 10px !important; text-align: right !important;">Welcome</ion-title>\n    </ion-col>\n  <ion-col col-4>\n      <button style="background:transparent !important;float:right" (click)="close()" ion-button>Close</button>\n    </ion-col>\n    </ion-row>\n    </ion-navbar>\n\n</ion-header> -->\n\n<ion-content>\n\n    <ion-icon name="ios-close-outline" (click)="close()" style="float: right !important;font-size: 30px !important;position: absolute !important;">\n    </ion-icon>\n    <img [src]="popupimage[\'popupimg\']" style="max-width: 100%;border: 0;height: 100%;width: 100%;min-width: 100%;">\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\introimg\introimg.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */]])
    ], IntroimgPage);
    return IntroimgPage;
}());

//# sourceMappingURL=introimg.js.map

/***/ }),

/***/ 399:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MaintenancePage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the MaintenancePage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
var MaintenancePage = /** @class */ (function () {
    function MaintenancePage(navCtrl, navParams, menu) {
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.menu = menu;
        this.maintaindata = {};
        this.maintaindata = this.navParams.get(("maintainData"))['comp'];
        console.log(this.maintaindata);
    }
    MaintenancePage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad MaintenancePage');
    };
    MaintenancePage.prototype.ionViewDidEnter = function () {
        this.menu.swipeEnable(false);
        // If you have more than one side menu, use the id like below
        // this.menu.swipeEnable(false, 'menu1');
    };
    MaintenancePage.prototype.ionViewWillLeave = function () {
        // Don't forget to return the swipe to normal, otherwise 
        // the rest of the pages won't be able to swipe to open menu
        this.menu.swipeEnable(true);
        // If you have more than one side menu, use the id like below
        // this.menu.swipeEnable(true, 'menu1');
    };
    MaintenancePage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-maintenance',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\maintenance\maintenance.html"*/'<!--\n  Generated template for the MaintenancePage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<!-- <ion-header>\n\n  <ion-navbar>\n    <ion-title>maintenance</ion-title>\n  </ion-navbar>\n\n</ion-header> -->\n\n\n\n<!-- <ion-content text-center padding>\n<ion-card>\n  \n   {{maintaindata[\'text\']}}\n    {{maintaindata[\'company_name\']}}<br>\n    {{maintaindata[\'address1\']}}<br>\n    {{maintaindata[\'address2\']}} <br>\n    {{maintaindata[\'city\']}} -  {{maintaindata[\'pincode\']}}\n\n</ion-card>\n</ion-content> -->\n\n\n\n<ion-content fullscreen>\n    <ion-row style="text-align: center !important;">\n        <ion-col>\n            <img src="assets/img/IntroducingLogo.png" style="width: 100px !important;height:100px;;margin-top: 15% !important;">\n        </ion-col>\n    </ion-row>\n\n    <ion-card style="margin-top: 70px !important; position: fixed !important;">\n        <ion-item style="text-align: center !important;">\n\n            <h2>Under Maintenance !!</h2><br>\n            <p>{{maintaindata[\'maintenance_text\']}}</p>\n            <hr>\n        </ion-item>\n\n\n\n        <ion-card-content style="text-align: center !important;">\n            <p>{{maintaindata[\'company_name\']}}</p>\n            <p>{{maintaindata[\'address1\']}}</p>\n            <p>{{maintaindata[\'address2\']}}</p>\n            <p>{{maintaindata[\'city\']}}</p>\n            <p>{{maintaindata[\'pincode\']}}</p>\n            <p>{{maintaindata[\'email\']}}</p>\n            <a style="text-align: justify !important;font-weight: bolder !important; color: #387ef5 !important;text-decoration: none !important;" href="tel:{{maintaindata[\'phone1\']}}">{{maintaindata[\'phone1\']}}</a>\n            <!--  <p>{{maintaindata[\'phone1\']}}</p> -->\n            <p>{{maintaindata[\'website\']}}</p>\n        </ion-card-content>\n\n        <!--         <ion-row>\n          <ion-col>\n            <button ion-button icon-left clear small>\n              <ion-icon name="thumbs-up"></ion-icon>\n              <div>12 Likes</div>\n            </button>\n          </ion-col>\n          <ion-col>\n            <button ion-button icon-left clear small>\n              <ion-icon name="text"></ion-icon>\n              <div>4 Comments</div>\n            </button>\n          </ion-col>\n          <ion-col center text-center>\n            <ion-note>\n              11h ago\n            </ion-note>\n          </ion-col>\n        </ion-row> -->\n\n    </ion-card>\n\n</ion-content>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\maintenance\maintenance.html"*/,
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */]])
    ], MaintenancePage);
    return MaintenancePage;
}());

//# sourceMappingURL=maintenance.js.map

/***/ }),

/***/ 400:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EdittagPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modal_add_esti_item_add_esti_item__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__modal_esti_basic_detail_esti_basic_detail__ = __webpack_require__(401);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_opener__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_chooser__ = __webpack_require__(76);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_ionic_cordova_plugin_ratio_crop__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_transfer__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_barcode_scanner__ = __webpack_require__(77);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


// import { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';















var EdittagPage = /** @class */ (function () {
    function EdittagPage(barcodeScanner, transfer1, crop, camera, actionSheetCtrl, navParams, navCtrl, load, printer, nav, events, commonservice, retail, toast, event, modal, common, fileOpener, transfer, file, filePath, fileChooser, platform) {
        this.barcodeScanner = barcodeScanner;
        this.transfer1 = transfer1;
        this.crop = crop;
        this.camera = camera;
        this.actionSheetCtrl = actionSheetCtrl;
        this.navParams = navParams;
        this.navCtrl = navCtrl;
        this.load = load;
        this.printer = printer;
        this.nav = nav;
        this.events = events;
        this.commonservice = commonservice;
        this.retail = retail;
        this.toast = toast;
        this.event = event;
        this.modal = modal;
        this.common = common;
        this.fileOpener = fileOpener;
        this.transfer = transfer;
        this.file = file;
        this.filePath = filePath;
        this.fileChooser = fileChooser;
        this.platform = platform;
        this.fileTransfer = this.transfer.create();
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.esti_type = 'tag';
        this.page_type = "create";
        this.branches = [];
        this.employees = [];
        this.askBranch = 0;
        this.selectedCusData = [];
        this.nonTagStock = [];
        this.settings = [];
        this.ret_settings = [];
        this.tagMsg = "";
        this.tagErrorMsg = "";
        this.scannerOn = false;
        this.ntMsg = "";
        this.ntErrorMsg = "";
        this.hbMsg = "";
        this.hbErrorMsg = "";
        this.purities = [];
        this.collections = [];
        this.omErrorMsg = "";
        this.ombMsg = "";
        this.oldMetalCat = [];
        this.stoneMasData = [];
        this.esti = { "cus_id": "", "customer": "", "id_branch": "", "id_employee": "", "emp_name": "", "is_tag": false, "is_non_tag": false, "is_home_bill": false, "is_old_metal": false, "tag": [], "non_tag": [], "home_bill": [], "old_metal": [] };
        this.tot_purch_wgt = 0;
        this.tot_purch_rate = 0;
        this.tot_sale_wgt = 0;
        this.tot_sale_rate = 0;
        this.total_esti_value = 0;
        this.oldMetalTypes = [];
        this.estiDetail = {};
        this.dataCheckList = { "empData": false, "taxGroup": false, "branch": false, "settings": false };
        this.tagData = { "tag_code": "", "is_partial": 0, "stone_details": [] };
        this.nav = nav;
        this.page_type = this.navParams.get('page_type');
        this.loggedInBranch = this.empData['id_branch'];
        this.esti['id_log'] = this.empData['id_log'];
        /*this.retail.getHomeStock({"type":"all", "searchTxt":"", "searchField":"", "id_branch":this.esti['id_branch']}).then(data=>{
          this.homeBillStock = data;
        })*/
    }
    EdittagPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        // let loader = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
        // let loader2 = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader2.present();
        // let loader3 = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader3.present();
        var loader4 = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader4.present();
        this.retail.getAllTaxGroupItems().then(function (data) {
            _this.taxGroupItems = data;
            _this.events.publish('taxGroup:loaded', true);
            _this.dataCheckList['taxGroup'] = true;
            _this.common.getCurrencyAndSettings({ "id_branch": _this.esti['id_branch'] }).then(function (data) {
                _this.metalRate = data.metal_rates;
                _this.settings = data.settings;
                _this.ret_settings = data.ret_settings;
                _this.events.publish('settings:loaded', true);
                _this.events.publish('ret_settings:loaded', true);
                _this.dataCheckList['settings'] = true;
                loader4.dismiss();
            });
        });
        // if((this.loggedInBranch == 0 || this.loggedInBranch == '' || this.loggedInBranch == null) && this.empData['branch_settings'] == 1){
        //   this.askBranch = 1;
        //   this.common.getbranch().then(data=>{
        //     this.branches = data;
        //     this.events.publish('branch:loaded', true);
        //     this.dataCheckList['branch'] = true;
        //     loader.dismiss();
        //   })
        // }else{
        //   this.esti['id_branch'] = this.loggedInBranch;
        //   this.estiDetail['id_branch'] = this.loggedInBranch;
        //   this.events.publish('branch:loaded', true);
        //   this.dataCheckList['branch'] = true;
        //   loader.dismiss();
        // }
        // this.common.getBranchEmployees(this.empData['id_branch']).then(data=>{
        //   this.employees = data;
        //   this.openEstiBasicDetailModal();
        //   this.events.publish('empData:loaded', true);
        //   this.dataCheckList['empData'] = true;
        //   loader2.dismiss();
        // })    
        // this.retail.getAllTaxGroupItems().then(data=>{
        //   this.taxGroupItems = data;
        //   this.events.publish('taxGroup:loaded', true);
        //   this.dataCheckList['taxGroup'] = true;
        //   loader3.dismiss();
        // })
        // this.common.getCurrencyAndSettings({"id_branch":this.esti['id_branch']}).then(data=>{
        //   this.metalRate = data.metal_rates;
        //   this.settings = data.settings;
        //   this.ret_settings = data.ret_settings;
        //   this.events.publish('settings:loaded', true);
        //   this.events.publish('ret_settings:loaded', true);
        //   this.dataCheckList['settings'] = true;
        //   loader4.dismiss();
        // })     
    };
    /* for footer as hide in default. it's assigned in app.components.ts */
    EdittagPage.prototype.ionViewWillEnter = function () {
    };
    EdittagPage.prototype.estiTypeChanged = function (ev) {
        var _this = this;
        var type = ev._value;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        if (type != 'tag' && type != 'summary') {
            if ((this.stoneMasData).length == 0) {
                this.retail.getAllStoneMaters({ "id_branch": this.esti['id_branch'] }).then(function (data) {
                    _this.stoneMasData = data;
                    loader.dismiss();
                });
            }
            if (type == 'non_tag') {
                this.retail.getNonTagItems({ "id_branch": this.esti['id_branch'] }).then(function (data) {
                    _this.nonTagStock = data;
                    loader.dismiss();
                });
            }
            else if (type == 'home_bill') {
                if ((this.purities).length == 0) {
                    this.retail.getAllPurities("").then(function (data) {
                        _this.purities = data;
                        loader.dismiss();
                    });
                }
                else {
                    loader.dismiss();
                }
                if ((this.collections).length == 0 && this.ret_settings['collections_required'] == 1) {
                    this.retail.getCollections({ "type": "active", "last_id": -1 }).then(function (data) {
                        _this.collections = data;
                        loader.dismiss();
                    });
                }
                else {
                    loader.dismiss();
                }
            }
            else if (type == 'old_metal') {
                this.retail.getOldMetalType().then(function (data) {
                    _this.oldMetalTypes = data;
                    loader.dismiss();
                });
            }
            else {
                loader.dismiss();
            }
        }
        else {
            loader.dismiss();
        }
        this.calcEstiSummary();
    };
    EdittagPage.prototype.empSelected = function () {
        var _this = this;
        var emp = { "allowed_old_met_pur": "" };
        this.employees.forEach(function (e) {
            if (_this.esti['id_employee'] == e.id_employee) {
                emp = e;
            }
        });
        if (emp.allowed_old_met_pur != '') {
            var categories = emp.allowed_old_met_pur;
            var catArr = categories.split(",");
            catArr.forEach(function (cat) {
                var categoryArr = cat.split("-");
                _this.oldMetalCat.push({ "id_category": categoryArr[0], "cat_name": categoryArr[1] });
            });
        }
    };
    EdittagPage.prototype.openEstiBasicDetailModal = function () {
        var _this = this;
        var data = { "askBranch": this.askBranch, employees: this.employees, selectedCusData: this.selectedCusData, esti: this.esti, branches: this.branches };
        console.log(data);
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_6__modal_esti_basic_detail_esti_basic_detail__["a" /* EstiBasicDetailPage */], data, { enableBackdropDismiss: false });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.selectedCusData = data.selectedCusData;
                _this.esti['cus_id'] = data.cus_id;
                _this.esti['customer'] = data.customer;
                _this.empSelected();
            }
        });
    };
    EdittagPage.prototype.openItemAddModal = function (type, item, action) {
        var _this = this;
        var idx = -1;
        var estiData = [];
        if (action == 'edit') {
            estiData = item;
            idx = this.esti[type].indexOf(item);
        }
        var data = { type: type, action: action, ret_settings: this.ret_settings, esti: estiData, id_branch: this.esti['id_branch'], metal_rates: this.metalRate, taxGroupItems: this.taxGroupItems, nonTagStock: this.nonTagStock, homeBillStock: this.homeBillStock, purities: this.purities, collections: this.collections, oldMetalCat: this.oldMetalCat, stoneMasData: this.stoneMasData, oldMetalTypes: this.oldMetalTypes };
        console.log(data);
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__modal_add_esti_item_add_esti_item__["a" /* AddEstiItemPage */], data, { enableBackdropDismiss: false });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                if (data.item_data != null) {
                    // ADD
                    if (action == 'add') {
                        var addItem_1 = true;
                        if (type == "tag") {
                            _this.esti[type].forEach(function (item) {
                                if (item.tag_id == data.item_data.tag_id) {
                                    addItem_1 = false;
                                    _this.tagMsg = "";
                                    _this.tagErrorMsg = "Tag Already exist..";
                                    setTimeout(function () {
                                        _this.tagErrorMsg = "";
                                    }, _this.common.msgTimeout);
                                }
                            });
                        }
                        if (addItem_1) {
                            _this.esti[type].push(data.item_data);
                        }
                    }
                    // UPDATE 
                    if (action == 'edit' && idx >= 0) {
                        console.log(_this.esti[type][idx]);
                        _this.esti[type][idx] = data.item_data;
                        console.log(estiData);
                    }
                }
                _this.calcEstiSummary();
                if (data.submitType == 'SN') {
                    _this.openItemAddModal(type, '', 'add');
                }
            }
            else if (action == 'edit' && idx >= 0) {
                console.log(estiData);
                _this.esti[type][idx] = estiData;
            }
        });
    };
    EdittagPage.prototype.calcEstiSummary = function () {
        var _this = this;
        console.log(this.esti);
        this.tot_sale_wgt = 0;
        this.tot_sale_rate = 0;
        this.tot_purch_wgt = 0;
        this.tot_purch_rate = 0;
        this.esti['tag'].forEach(function (tag) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(tag.net_wt);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(tag.sales_value);
        });
        this.esti['non_tag'].forEach(function (non_tag) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(non_tag.net_wt);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(non_tag.sales_value);
        });
        this.esti['home_bill'].forEach(function (home_bill) {
            _this.tot_sale_wgt = Number(_this.tot_sale_wgt) + Number(home_bill.net_wt);
            _this.tot_sale_rate = Number(_this.tot_sale_rate) + Number(home_bill.sales_value);
        });
        this.esti['old_metal'].forEach(function (old_metal) {
            _this.tot_purch_wgt = Number(_this.tot_purch_wgt) + Number(old_metal.net_wt);
            _this.tot_purch_rate = Number(_this.tot_purch_rate) + Number(old_metal.amount);
        });
        this.total_esti_value = Number(this.tot_sale_rate) - Number(this.tot_purch_rate);
    };
    /*openBarcodeScanner(){
      this.barcodeScanner.scan().then(barcodeData => {
        if(barcodeData){
          console.log(barcodeData);
          this.getTagByID(barcodeData);
        }
       }).catch(err => {
           console.log('Error', err);
       });
    }*/
    EdittagPage.prototype.closeScanner = function () {
        this.scannerOn = false;
        // this.scanSub.unsubscribe();
        // this.qrScanner.hide().then();
        // this.qrScanner.destroy().then();    
    };
    EdittagPage.prototype.openQRScanner = function () {
        var _this = this;
        this.scannerOn = true;
        console.log("QR Scanner");
        this.barcodeScanner.scan().then(function (barcodeData) {
            _this.scannerOn = false;
            if (barcodeData['text'] != '') {
                _this.getTagByID(barcodeData['text']);
            }
        }, function (err) {
            console.log(err);
        });
        // console.log("QR Scanner");
        // // Optionally request the permission early
        // this.qrScanner.prepare()
        // .then((status: QRScannerStatus) => {
        //   console.log("Then");
        //   if (status.authorized) {
        //     console.log("authorized");
        //     // start scanning
        //     this.scannerOn = true;
        //     this.qrScanner.show().then();  
        //     this.scanSub = this.qrScanner.scan().subscribe((text: string) => {
        //       console.log('Scanned something', text); 
        //       // Hide and unsubscribe from scanner
        //       this.qrScanner.hide().then();
        //       this.qrScanner.destroy().then();
        //       this.scanSub.unsubscribe();
        //       this.scannerOn = false;
        //       if(text != ''){
        //         this.getTagByID(text);
        //       }
        //     }); 
        //   } 
        //   else if (status.denied) {
        //     console.log("camera permission was permanently denied");
        //     // camera permission was permanently denied
        //     // you must use QRScanner.openSettings() method to guide the user to the settings page
        //     // then they can grant the permission from there
        //     this.qrScanner.openSettings();
        //   } 
        //   else {
        //     console.log("Camera Access permission denied. Kindly enable to Scan QR");
        //     // permission was denied, but not permanently. You can ask for permission again at a later time.
        //     alert('Camera Access permission denied. Kindly enable to Scan QR.');
        //   }
        // })
        // .catch((e: any) => console.log('Error is', e));
    };
    // Tag Item
    EdittagPage.prototype.getTagData = function (tag_code) {
        var _this = this;
        // Search Tag
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = { "type": 'EstiTag', "searchTxt": tag_code, "searchField": "tag_code", "id_branch": this.loggedInBranch };
        this.retail.getTagData(postData).then(function (data) {
            if (data.status) {
                _this.tagMsg = data.msg;
                _this.tagErrorMsg = "";
                setTimeout(function () {
                    _this.tagMsg = "";
                }, _this.common.msgTimeout);
                data.tagData['actual_gross_wt'] = data.tagData['gross_wt'];
                data.tagData['actual_less_wt'] = data.tagData['less_wt'];
                data.tagData['actual_net_wt'] = data.tagData['net_wt'];
                var detail = { itemData: data.tagData, metalRate: _this.metalRate, tax_details: _this.taxGroupItems, item_type: "tag" };
                var tagItem_1 = _this.retail.calculateSaleValue(detail);
                var addItem_2 = true;
                _this.esti['tag'].forEach(function (item) {
                    if (item.tag_id == tagItem_1.tag_id) {
                        _this.tagMsg = "";
                        addItem_2 = false;
                        _this.tagErrorMsg = "Tag Already exist..";
                        setTimeout(function () {
                            _this.tagErrorMsg = "";
                        }, _this.common.msgTimeout);
                    }
                });
                if (addItem_2) {
                    _this.esti['is_tag'] = true;
                    _this.esti['tag'].push(tagItem_1);
                }
                // copy x
                var y = Object.assign({}, _this.esti['tag']);
                console.log(y);
                _this.esti['tag'].reverse();
                console.log(_this.esti['tag']);
            }
            else {
                _this.tagMsg = "";
                _this.tagErrorMsg = data.msg;
                setTimeout(function () {
                    _this.tagErrorMsg = "";
                }, _this.common.msgTimeout);
            }
            loader.dismiss();
        }, function (err) {
            loader.dismiss();
        });
    };
    EdittagPage.prototype.getTagByID = function (tagData) {
        var _this = this;
        if (tagData != '') {
            var istagId = (tagData.search("/") > 0 ? true : false);
            var isTagCode = (tagData.search("-") > 0 ? true : false);
            if (istagId) {
                var tId = tagData.split("/");
                var searchTxt = (tId.length >= 2 ? tId[0] : "");
                var searchField = "tag_id";
            }
            else if (isTagCode) {
                var searchTxt = tagData;
                var searchField = "tag_code";
            }
            // Search Tag
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            var postData = { "searchTxt": searchTxt, "searchField": searchField, "id_branch": this.loggedInBranch };
            this.retail.getTagData(postData).then(function (data) {
                if (data.status) {
                    _this.tagMsg = data.msg;
                    _this.tagErrorMsg = "";
                    setTimeout(function () {
                        _this.tagMsg = "";
                    }, _this.common.msgTimeout);
                    data.tagData['actual_gross_wt'] = data.tagData['gross_wt'];
                    data.tagData['actual_less_wt'] = data.tagData['less_wt'];
                    data.tagData['actual_net_wt'] = data.tagData['net_wt'];
                    var detail = { itemData: data.tagData, metalRate: _this.metalRate, tax_details: _this.taxGroupItems, item_type: "tag" };
                    var tagItem_2 = _this.retail.calculateSaleValue(detail);
                    var addItem_3 = true;
                    _this.esti['tag'].forEach(function (item) {
                        if (item.tag_id == tagItem_2.tag_id) {
                            _this.tagMsg = "";
                            addItem_3 = false;
                            _this.tagErrorMsg = "Tag Already exist..";
                            setTimeout(function () {
                                _this.tagErrorMsg = "";
                            }, _this.common.msgTimeout);
                        }
                    });
                    if (addItem_3) {
                        _this.esti['is_tag'] = true;
                        _this.esti['tag'].push(tagItem_2);
                    }
                    var y = Object.assign({}, _this.esti['tag']);
                    console.log(y);
                    _this.esti['tag'].reverse();
                    console.log(_this.esti['tag']);
                }
                else {
                    _this.tagMsg = "";
                    _this.tagErrorMsg = data.msg;
                    setTimeout(function () {
                        _this.tagErrorMsg = "";
                    }, _this.common.msgTimeout);
                }
                loader_1.dismiss();
            }, function (err) {
                loader_1.dismiss();
            });
        }
    };
    EdittagPage.prototype.deleteItem = function (item_type, idx) {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        if (item_type == 'tag') {
            this.esti[item_type].splice(idx, 1);
            this.tagErrorMsg = "";
            this.tagMsg = "Tag removed from estimation..";
            setTimeout(function () {
                _this.tagMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'non_tag') {
            this.esti[item_type].splice(idx, 1);
            this.ntErrorMsg = "";
            this.ntMsg = "Non-Tag item removed from estimation..";
            setTimeout(function () {
                _this.ntMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'home_bill') {
            this.esti[item_type].splice(idx, 1);
            this.hbErrorMsg = "";
            this.hbMsg = "Home Bill item removed from estimation..";
            setTimeout(function () {
                _this.hbMsg = "";
            }, this.common.msgTimeout);
        }
        if (item_type == 'old_metal') {
            this.esti[item_type].splice(idx, 1);
            this.omErrorMsg = "";
            this.ombMsg = "Old Metal item removed from estimation..";
            setTimeout(function () {
                _this.ombMsg = "";
            }, this.common.msgTimeout);
        }
        this.calcEstiSummary();
        loader.dismiss();
    };
    EdittagPage.prototype.createEsti = function () {
        var _this = this;
        this.esti['is_tag'] = ((this.esti['tag']).length > 0 ? true : false);
        this.esti['is_non_tag'] = ((this.esti['non_tag']).length > 0 ? true : false);
        this.esti['is_home_bill'] = ((this.esti['home_bill']).length > 0 ? true : false);
        this.esti['is_old_metal'] = ((this.esti['old_metal']).length > 0 ? true : false);
        console.log(this.esti);
        // Validate Postdata
        if (this.esti['cus_id'] == '' || this.esti['id_employee'] == '' || this.esti['id_branch'] == '') {
            var toastMsg = this.toast.create({
                message: "Please fill required fields",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
        else if (this.esti['is_tag'] || this.esti['is_non_tag'] || this.esti['is_home_bill'] || this.esti['is_old_metal']) {
            if (this.esti['tag'] || this.esti['non_tag'] || this.esti['home_bill'] || this.esti['old_metal']) {
                var loader_2 = this.load.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_2.present();
                this.esti['type'] = 1;
                this.esti['total_cost'] = this.total_esti_value;
                this.retail.createEstimation(this.esti).then(function (data) {
                    if (data.status) {
                        _this.tot_sale_wgt = 0;
                        _this.tot_sale_rate = 0;
                        _this.tot_purch_wgt = 0;
                        _this.tot_purch_rate = 0;
                        _this.total_esti_value = 0;
                        _this.selectedCusData = [];
                        _this.esti = { "cus_id": _this.esti['cus_id'], "customer": _this.esti['customer'], "id_branch": _this.esti['id_branch'], "id_employee": _this.esti['id_employee'], "emp_name": _this.esti['emp_name'], "is_tag": false, "is_non_tag": false, "is_home_bill": false, "is_old_metal": false, "tag": [], "non_tag": [], "home_bill": [], "old_metal": [] };
                        if (data.printURL != '') {
                            console.log(data.printURL);
                            _this.downloadfile(data.printURL, data.esti_name);
                        }
                    }
                    loader_2.dismiss();
                    var toastMsg = _this.toast.create({
                        message: data.msg,
                        duration: _this.common.toastTimeout,
                        position: 'center'
                    });
                    toastMsg.present();
                    _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_12__home_home__["a" /* HomePage */]);
                });
            }
            else {
                var toastMsg = this.toast.create({
                    message: "Minimum 1 estimation item is required",
                    duration: this.common.toastTimeout,
                    position: 'center'
                });
                toastMsg.present();
            }
        }
        else {
            var toastMsg = this.toast.create({
                message: "Invalid Estimation",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    EdittagPage.prototype.getEstiByEstiNo = function () {
        var _this = this;
        if (this.estiDetail['esti_no'] != '') {
            var loader_3 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_3.present();
            this.estiDetail['id_branch'] = this.loggedInBranch;
            this.retail.getEstiPrintURL(this.estiDetail).then(function (data) {
                if (data.status) {
                    if (data.printURL != '') {
                        console.log(data.printURL);
                        _this.downloadfile(data.printURL, data.esti_name);
                    }
                }
                loader_3.dismiss();
                var toastMsg = _this.toast.create({
                    message: data.msg,
                    duration: _this.common.toastTimeout,
                    position: 'center'
                });
                toastMsg.present();
            });
        }
        else {
            var toastMsg = this.toast.create({
                message: "Enter valid estimation number",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    EdittagPage.prototype.downloadfile = function (url, name) {
        var _this = this;
        console.log(url);
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log("Platform ready");
            if (_this.platform.is('android')) {
                console.log("Platform Android");
                _this.file.checkDir(_this.file.externalDataDirectory, _this.common.cmpShortName).then(function (data) {
                    console.log("Check directory IDO");
                    _this.file.checkDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0]).then(function (_) {
                        console.log("Check directory IDO " + date.toISOString().split('T')[0]);
                        _this.viewFile(url, name);
                    }).catch(function (er) {
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log("Create directory IDO " + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err) {
                            console.log(err);
                            console.log('Couldn\'t create directory');
                        });
                    });
                }).catch(function (err) {
                    _this.file.createDir(_this.file.externalDataDirectory, _this.common.cmpShortName, false).then(function (_) {
                        console.log('Create directory IDO');
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log('Create directory IDO / ' + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err1) {
                            console.log(err1);
                            console.log('Couldn\'t create directory');
                        });
                    }).catch(function (err2) {
                        console.log(err2);
                        console.log('Couldn\'t create directory');
                    });
                });
            }
        });
    };
    EdittagPage.prototype.viewFile = function (url, name) {
        var _this = this;
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date);
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log('platform ready viewFile');
            _this.file.resolveDirectoryUrl(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0]).then(function (resolvedDirectory) {
                console.log(resolvedDirectory);
                console.log("resolved  directory: " + resolvedDirectory.nativeURL);
                _this.file.checkFile(resolvedDirectory.nativeURL, name).then(function (data) {
                    console.log(data);
                    console.log(resolvedDirectory.nativeURL + name);
                    _this.fileOpener.open(resolvedDirectory.nativeURL + name, 'application/pdf')
                        .then(function () { return console.log('File is opened'); })
                        .catch(function (e) { return console.log('Error opening file', e); });
                }, function (err) {
                    console.log(err);
                    var loader = _this.load.create({
                        content: 'Please Wait',
                        spinner: 'bubbles',
                    });
                    loader.present();
                    var targetPath = _this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0] + '/' + name;
                    _this.fileTransfer.download(url, targetPath, true).then(function (entry) {
                        console.log('download complete: ' + entry.toURL());
                        loader.dismiss();
                        _this.fileOpener.open(entry.toURL(), 'application/pdf')
                            .then(function () { return console.log('File is opened'); })
                            .catch(function (e) { return console.log('Error opening file', e); });
                    }, function (error) {
                        loader.dismiss();
                        console.log(error);
                    });
                });
            }, function (err) {
                console.log(err);
            });
        });
    };
    EdittagPage.prototype.printEsti = function (content) {
        console.log(content);
        this.printer.isAvailable().then(function (onSuccess) {
            console.log("isAvailable - Success");
        }, function (onError) {
            console.log(onError);
            console.log("isAvailable - Error");
        });
        var options = {
            name: 'Estimation',
            //printerId: 'printer007',
            //duplex: true,
            //landscape: true,
            grayscale: true
        };
        this.printer.print(content, options).then(function (onSuccess) {
            console.log("print - Success");
        }, function (onError) {
            console.log("print - Error");
        });
    };
    EdittagPage.prototype.delete = function (index) {
        var _this = this;
        console.log(this.esti['tag']);
        if (this.esti['tag'][index]['id_tag_img'] != null && this.esti['tag'][index]['id_tag_img'] != '') {
            var loader_4 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_4.present();
            var postData = { "tagid": this.esti['tag'][index]['tag_id'], "imgid": this.esti['tag'][index]['id_tag_img'] };
            this.retail.deletetagimage(postData).then(function (data) {
                _this.esti['tag'][index]['image'] = '';
                _this.esti['tag'][index]['id_tag_img'] = null;
                loader_4.dismiss();
            }, function (err) {
                loader_4.dismiss();
            });
        }
        else {
            var toastMsg = this.toast.create({
                message: "Image not found.",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    EdittagPage.prototype.presentActionSheet = function (index) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.PHOTOLIBRARY, index);
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA, index);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    EdittagPage.prototype.takePicture = function (sourceType, index) {
        var _this = this;
        // Create options for the Camera Dialog
        var options = {
            quality: 75,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
        };
        var cropOptions = {
            quality: 100,
            widthRatio: -1,
            heightRatio: -1
        };
        this.loading();
        // Get the data of an image
        this.camera.getPicture(options).then(function (imagePath) {
            console.log(imagePath);
            if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.PHOTOLIBRARY) {
                console.log(imagePath);
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        console.log(333333333333333);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        //  let currentName = imagePath.substring( imagePath.lastIndexOf( '/' ) + 1, imagePath.lastIndexOf( '?' ) );
                        var currentName = filePath.substring(filePath.lastIndexOf('/') + 1);
                        _this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), index);
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
            else {
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        var currentName = filePath.substr(filePath.lastIndexOf('/') + 1);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        _this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), index);
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
        }, function (err) {
            _this.dismissLoader();
            console.log(err);
            console.log('Error while selecting image.');
        });
    };
    EdittagPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    // Create a new name for the image
    EdittagPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    EdittagPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName, index) {
        var _this = this;
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            console.log(_this.pathForImage(newFileName));
            _this.uploadImage(newFileName, index);
        }, function (error) {
            console.log(error);
        });
    };
    EdittagPage.prototype.uploadImage = function (name, index) {
        var _this = this;
        // Destination URL
        var url = 'https://srikrishnajewels.com/test_sknretail/admin/index.php/admin_app_api/uploadTagimage';
        var d = new Date(), n = d.getTime();
        // File for Upload
        var targetPath = this.pathForImage(name) + '?nocache=' + n;
        // File name only
        var filename = name;
        var options = {
            fileKey: "name",
            fileName: filename,
            chunkedMode: false,
            mimeType: "image/jpeg",
            params: {
                fileName: filename,
                tagid: this.esti['tag'][index]['tag_id'],
                imgid: this.esti['tag'][index]['id_tag_img']
            }
        };
        var fileTransfer = this.transfer1.create();
        var loader = this.load.create({
            content: "Uploading..."
        });
        loader.present();
        console.log(targetPath);
        console.log(encodeURI(url));
        console.log(options);
        console.log(url);
        // Use the FileTransfer to upload the image
        fileTransfer.upload(targetPath, encodeURI(url), options).then(function (data) {
            console.log(data);
            var result = JSON.parse(data.response);
            console.log(result);
            console.log(result['imageid']);
            loader.dismissAll();
            _this.esti['tag'][index]['image'] = _this.pathForImage(name);
            _this.esti['tag'][index]['id_tag_img'] = result['imageid'];
            var toastMsg = _this.toast.create({
                message: "Image succesfully uploaded.",
                duration: _this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }, function (err) {
            loader.dismissAll();
            console.log(err);
            var toastMsg = _this.toast.create({
                message: "Error while uploading Image.",
                duration: _this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        });
    };
    EdittagPage.prototype.loading = function () {
        this.loader = this.load.create({
            content: "Please Wait..."
        });
        this.loader.present();
    };
    EdittagPage.prototype.dismissLoader = function () {
        this.loader.dismiss();
    };
    EdittagPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-edittag',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\edittag\edittag.html"*/'<!--\n  Generated template for the EdittagPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title style="text-align: center !important;\n    margin-right: 15% !important;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content>\n  <ion-row>\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Tags  <ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n  <ion-row>\n    <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">   \n      <ion-item no-padding> \n        <ion-label color="label-color" stacked>Tag Code <span class="required">*</span></ion-label>\n        <ion-input type="text" [(ngModel)]="tag_code"></ion-input> \n        <button item-right ion-button margin-top color="light" (click)="getTagData(tag_code)"><ion-icon name="ios-search"></ion-icon></button>\n        <button item-right ion-button margin-top color="light" (click)="openQRScanner(\'tag\')"><ion-icon name="ios-qr-scanner"></ion-icon></button>\n\n        <!-- <button item-right ion-button icon-start outline small color="dark" (click)="openQRScanner(\'tag\')">\n          <ion-icon name="ios-qr-scanner"></ion-icon> \n        </button> -->\n      </ion-item>\n    </ion-col>\n    </ion-row>\n    <ion-card class="errorMsg" padding *ngIf="tagErrorMsg">\n      {{tagErrorMsg}}\n    </ion-card>\n    <ion-card class="msg" padding *ngIf="tagMsg">\n      {{tagMsg}}\n    </ion-card>\n \n    <ion-list style="border: 1px solid lightgray;\n    border-bottom: 1px solid gray;\n    margin: 10px;" *ngFor="let hb of  esti[\'tag\'];let i = index;">\n        <ion-item margin-top #tags  class="no-padding">\n          <ion-row> \n            <ion-col text-wrap col-7 col-md-3 class="custom-2col" >\n              <img style="height: 100px;width: auto;" src="{{hb.image}}" imageViewer="{{hb.image}}" onerror="this.src=\'assets/no-img.png\'" >\n            </ion-col>\n            <ion-col style="text-align: end;">\n              <button style="    width: 38px;" ion-button color="primary" (click)="presentActionSheet(i)"><ion-icon name="create"></ion-icon></button>\n              <button style="    width: 38px;" ion-button color="danger" (click)="delete(i)"><ion-icon name="trash"></ion-icon></button>\n            \n            </ion-col>\n            </ion-row>\n          <ion-row>\n            <ion-col text-wrap col-3 col-md-2 class="vip">\n              {{hb.tag_code}} \n            </ion-col>\n            <ion-col text-wrap col-12 col-md-12 class="vip" *ngIf="ret_settings[\'subproduct_required\'] == 1" style="font-size: 11px !important;">\n              <span *ngIf="hb.collection_name != null">{{hb.collection_name}} <b> | </b> </span>\n              {{hb.product_name}} <b> | </b> \n              {{hb.design_name}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="vip" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n              {{hb.product_name}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="vip" *ngIf="ret_settings[\'subproduct_required\'] == 0">\n              {{hb.design_name}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Purity </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.purname}} \n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Pcs </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.piece}} \n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Size </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.size}} \n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Gross wgt </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.gross_wt}} \n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Less wgt </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.less_wt}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Net Wgt </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.net_wt}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Wast ({{hb.retail_max_wastage_percehb}} %)  </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.wast_wgt}}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">MC </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.making_charge | number:\'1.2-2\' }}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Taxable </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.taxable | number:\'1.2-2\' }}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Tax </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              {{hb.tax_price | number:\'1.2-2\' }}\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <p class="text-small">Amount </p>\n            </ion-col>\n            <ion-col text-wrap col-3 col-md-2 class="custom-2col">\n              <b>{{hb.sales_value | number:\'1.2-2\' }}</b>\n            </ion-col>\n          </ion-row>\n\n          <!-- <p class="subtitles">Add Tag Photos</p>\n          <ion-row>\n            <ion-col col-9 style="margin: auto;">\n              <ion-row>\n             \n\n              </ion-row>\n            </ion-col>\n            <ion-col col-3 (click)="presentActionSheet()">\n              <button ion-button clear class="imageadd"><ion-icon name="add"></ion-icon></button>\n            </ion-col>\n          </ion-row> -->\n        </ion-item>\n      \n    </ion-list>\n</ion-content>\n<ion-footer >\n  <ion-fab center bottom style="left: 44% !important;" *ngIf="!scannerOn"> \n    <button ion-fab mini color="primary" style="    width: 95px !important;\n    border-radius: 10px !important;\n    background: red !important;" (click)="openQRScanner(\'tag\')"><ion-icon name="ios-qr-scanner"></ion-icon>SCAN</button>\n  </ion-fab>\n  <!-- <button *ngIf="scannerOn" ion-button icon-start full class="warning" (click)="closeScanner()">Close Scanner</button>   -->\n</ion-footer>  \n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\edittag\edittag.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_16__ionic_native_barcode_scanner__["a" /* BarcodeScanner */], __WEBPACK_IMPORTED_MODULE_15__ionic_native_transfer__["a" /* Transfer */], __WEBPACK_IMPORTED_MODULE_13_ionic_cordova_plugin_ratio_crop__["a" /* RatioCrop */], __WEBPACK_IMPORTED_MODULE_14__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_printer__["a" /* Printer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_4__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_9__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_11__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_file_chooser__["a" /* FileChooser */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], EdittagPage);
    return EdittagPage;
}());

//# sourceMappingURL=edittag.js.map

/***/ }),

/***/ 401:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EstiBasicDetailPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__customer_customer__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__employee_employee__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__add_quick_cus_add_quick_cus__ = __webpack_require__(180);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__home_home__ = __webpack_require__(31);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Generated class for the EstiBasicDetailPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var EstiBasicDetailPage = /** @class */ (function () {
    function EstiBasicDetailPage(load, app, common, viewCtrl, navCtrl, navParams, modal) {
        var _this = this;
        this.load = load;
        this.app = app;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.modal = modal;
        this.toggle = true;
        this.employees = [];
        this.askBranch = 0;
        this.selectedCusData = [];
        this.esti = [];
        this.branches = [];
        this.cusData = [];
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.askBranch = this.navParams.get('askBranch');
        console.log(this.askBranch);
        this.employees = this.navParams.get('employees');
        this.selectedCusData = this.navParams.get('selectedCusData');
        this.esti = this.navParams.get('esti');
        this.branches = this.navParams.get('branches');
        console.log(this.esti);
        var temp = this.employees.filter(function (data) { return data['id_employee'] == _this.empData['uid']; });
        if (temp.length > 0) {
            this.esti['id_employee'] = temp[0]['id_employee'];
            this.esti['emp_name'] = temp[0]['emp_name'];
        }
    }
    EstiBasicDetailPage.prototype.proceed = function () {
        this.viewCtrl.dismiss(this.esti);
    };
    EstiBasicDetailPage.prototype.openEmpModal = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__employee_employee__["a" /* EmpSearchPage */], { "empData": this.employees });
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.esti['id_employee'] = data.id_employee;
                _this.esti['emp_name'] = data.emp_name;
            }
        });
    };
    EstiBasicDetailPage.prototype.openCusModal = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_3__customer_customer__["a" /* CusSearchPage */]);
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                _this.esti['cus_id'] = data.id_customer;
                _this.esti['customer'] = data.label;
                _this.selectedCusData = data;
                _this.esti['selectedCusData'] = data;
            }
        });
    };
    EstiBasicDetailPage.prototype.openQuickCus = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__add_quick_cus_add_quick_cus__["a" /* AddQuickCus */]);
        modal.present();
        modal.onDidDismiss(function (data) {
            console.log(data);
            if (data != null) {
                _this.esti['cus_id'] = data.id_customer;
                _this.esti['customer'] = data.label;
                _this.selectedCusData = data;
                _this.esti['selectedCusData'] = data;
            }
        });
    };
    EstiBasicDetailPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad EstiBasicDetailPage');
    };
    EstiBasicDetailPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
        this.app.getRootNav().setRoot(__WEBPACK_IMPORTED_MODULE_6__home_home__["a" /* HomePage */]);
    };
    EstiBasicDetailPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-esti-basic-detail',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\esti-basic-detail\esti-basic-detail.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Estimation Basic Detail\n    </ion-title>\n    <ion-buttons end>\n      <button ion-button icon-only (click)="dismiss()">\n          <ion-icon item-right name="ios-close-outline"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-card class="errorMsg" padding *ngIf="errorMsg">\n    {{errorMsg}}\n  </ion-card>\n  <ion-card class="msg" padding *ngIf="msg">\n    {{msg}}\n  </ion-card>\n  <p align="center">Fill below details to create estimation</p>\n  <ion-row  *ngIf="askBranch == 1">\n    <ion-col text-wrap col-12>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Branch <span class="required">*</span></ion-label>\n          <ion-select [(ngModel)]="esti[\'id_branch\']">\n            <ion-option *ngFor="let b of branches" [value]="b.id_branch">{{b.name}}</ion-option>\n          </ion-select>\n          <ion-icon style="margin-top: 10px !important;" name="arrow-dropdown"></ion-icon>\n        </ion-item>\n    </ion-col>\n  </ion-row> \n  <ion-row>    \n    <ion-col text-wrap col-12>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Employee <span class="required">*</span></ion-label>\n          <ion-input type="text" [(ngModel)]="esti[\'emp_name\']" (tap)="openEmpModal()" readonly></ion-input>\n          <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openEmpModal()" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n        </ion-item>\n    </ion-col>\n  </ion-row> \n  <ion-row>\n    <ion-col text-wrap col-12>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>Estimation For <span class="required">*</span></ion-label>\n          <ion-select [(ngModel)]="esti[\'esti_for\']" [interface]="popover">\n            <ion-option [value]="1" selected>Customer</ion-option>\n            <!-- <ion-option [value]="2">Branch Transfer</ion-option> -->\n          </ion-select> \n        </ion-item>\n    </ion-col>\n  </ion-row>  \n  <ion-row>\n    <ion-col text-wrap col-12>\n        <ion-item no-padding>\n          <ion-label color="label-color" stacked>\n            Customer <span class="required">*</span> \n            <span *ngIf="selectedCusData.is_vip == 1" class="vip">\n              <ion-icon name="star" class="vip">V I P</ion-icon> \n            </span>\n            <span *ngIf="selectedCusData.accounts > 0" color="secondary">\n              <ion-icon name="checkmark-circle"  color="secondary">Chit</ion-icon> \n            </span>\n          </ion-label>\n          <ion-input type="text" [(ngModel)]="esti[\'customer\']" (tap)="openQuickCus()" readonly></ion-input>\n          <button item-right ion-button clear color="dark" class="no-padding no-margin" (click)="openQuickCus()" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n          {{village_name}}\n        </ion-item>\n    </ion-col>\n  </ion-row> \n</ion-content>\n\n<ion-footer *ngIf="this.esti[\'cus_id\'] != \'\' && this.esti[\'id_employee\'] != \'\' && this.esti[\'id_employee\'] != \'\' ">\n  <button ion-button icon-start full class="theme-btn" (click)="proceed()">Proceed</button>\n</ion-footer>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\esti-basic-detail\esti-basic-detail.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* App */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], EstiBasicDetailPage);
    return EstiBasicDetailPage;
}());

//# sourceMappingURL=esti-basic-detail.js.map

/***/ }),

/***/ 402:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EstimationlistPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_file_opener__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_chooser__ = __webpack_require__(76);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__bluetooth_bluetooth__ = __webpack_require__(181);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_printer__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__cusupdate_cusupdate__ = __webpack_require__(179);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













// import { CusupdatePage } from '../cusupdate/cusupdate';
/**
 * Generated class for the EstimationlistPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var EstimationlistPage = /** @class */ (function () {
    function EstimationlistPage(printer, retail, navParams, navCtrl, load, nav, commonservice, toast, modal, common, fileOpener, transfer, file, filePath, fileChooser, platform) {
        var _this = this;
        this.printer = printer;
        this.retail = retail;
        this.navParams = navParams;
        this.navCtrl = navCtrl;
        this.load = load;
        this.nav = nav;
        this.commonservice = commonservice;
        this.toast = toast;
        this.modal = modal;
        this.common = common;
        this.fileOpener = fileOpener;
        this.transfer = transfer;
        this.file = file;
        this.filePath = filePath;
        this.fileChooser = fileChooser;
        this.platform = platform;
        this.fileTransfer = this.transfer.create();
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.estiDetail = {};
        this.list = [];
        console.log(this.empData['id_branch']);
        console.log(this.empData['emp_code']);
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.commonservice.getlist({ 'id_branch': this.empData['id_branch'], 'emp_code': this.empData['emp_code'] }).then(function (res) {
            _this.list = res['estdetails'];
            loader.dismiss();
        }, function (err) {
            loader.dismiss();
        });
    }
    EstimationlistPage.prototype.edit = function (data) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_12__cusupdate_cusupdate__["a" /* CusupdatePage */], { 'id': data });
    };
    EstimationlistPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad EstimationlistPage');
    };
    EstimationlistPage.prototype.print = function (data) {
        this.nav.push(__WEBPACK_IMPORTED_MODULE_10__bluetooth_bluetooth__["a" /* BluetoothPage */], { 'file': data });
    };
    EstimationlistPage.prototype.getEstiByEstiNo = function (no) {
        var _this = this;
        if (no != '') {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            this.retail.getEstiPrintURL({
                "esti_no": no,
                "id_branch": this.empData['id_branch']
            }).then(function (data) {
                if (data.status) {
                    if (data.printURL != '') {
                        console.log(data.printURL);
                        _this.downloadfile(data.printURL, data.esti_name);
                    }
                }
                loader_1.dismiss();
                var toastMsg = _this.toast.create({
                    message: data.msg,
                    duration: _this.common.toastTimeout,
                    position: 'center'
                });
                toastMsg.present();
            });
        }
        else {
            var toastMsg = this.toast.create({
                message: "Enter valid estimation number",
                duration: this.common.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    EstimationlistPage.prototype.downloadfile = function (url, name) {
        var _this = this;
        console.log(url);
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log("Platform ready");
            if (_this.platform.is('android')) {
                console.log("Platform Android");
                _this.file.checkDir(_this.file.externalDataDirectory, _this.common.cmpShortName).then(function (data) {
                    console.log("Check directory IDO");
                    _this.file.checkDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0]).then(function (_) {
                        console.log("Check directory IDO " + date.toISOString().split('T')[0]);
                        _this.viewFile(url, name);
                    }).catch(function (er) {
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log("Create directory IDO " + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err) {
                            console.log(err);
                            console.log('Couldn\'t create directory');
                        });
                    });
                }).catch(function (err) {
                    _this.file.createDir(_this.file.externalDataDirectory, _this.common.cmpShortName, false).then(function (_) {
                        console.log('Create directory IDO');
                        _this.file.createDir(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/', date.toISOString().split('T')[0], false).then(function (_) {
                            console.log('Create directory IDO / ' + date.toISOString().split('T')[0]);
                            _this.viewFile(url, name);
                        }).catch(function (err1) {
                            console.log(err1);
                            console.log('Couldn\'t create directory');
                        });
                    }).catch(function (err2) {
                        console.log(err2);
                        console.log('Couldn\'t create directory');
                    });
                });
            }
        });
    };
    EstimationlistPage.prototype.viewFile = function (url, name) {
        var _this = this;
        var date = new Date();
        date.setDate(date.getDate());
        console.log(date);
        console.log(date.toISOString().split('T')[0]);
        this.platform.ready().then(function () {
            console.log('platform ready viewFile');
            _this.file.resolveDirectoryUrl(_this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0]).then(function (resolvedDirectory) {
                console.log(resolvedDirectory);
                console.log("resolved  directory: " + resolvedDirectory.nativeURL);
                _this.file.checkFile(resolvedDirectory.nativeURL, name).then(function (data) {
                    console.log(data);
                    console.log(resolvedDirectory.nativeURL + name);
                    _this.fileOpener.open(resolvedDirectory.nativeURL + name, 'application/pdf')
                        .then(function () { return console.log('File is opened'); })
                        .catch(function (e) { return console.log('Error opening file', e); });
                    // this.printEsti(resolvedDirectory.nativeURL+name,name);
                }, function (err) {
                    console.log(err);
                    var loader = _this.load.create({
                        content: 'Please Wait',
                        spinner: 'bubbles',
                    });
                    loader.present();
                    var targetPath = _this.file.externalDataDirectory + '' + _this.common.cmpShortName + '/' + date.toISOString().split('T')[0] + '/' + name;
                    _this.fileTransfer.download(url, targetPath, true).then(function (entry) {
                        console.log('download complete: ' + entry.toURL());
                        loader.dismiss();
                        _this.fileOpener.open(entry.toURL(), 'application/pdf')
                            .then(function () { return console.log('File is opened'); })
                            .catch(function (e) { return console.log('Error opening file', e); });
                        // this.printEsti(entry.toURL(),name);  
                    }, function (error) {
                        loader.dismiss();
                        console.log(error);
                    });
                });
            }, function (err) {
                console.log(err);
            });
        });
    };
    EstimationlistPage.prototype.goto = function () {
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_9__home_home__["a" /* HomePage */]);
    };
    EstimationlistPage.prototype.printEsti = function (content, ename) {
        console.log(content);
        console.log(ename);
        this.printer.isAvailable().then(function (onSuccess) {
            console.log("isAvailable - Success");
        }, function (onError) {
            console.log(onError);
            console.log("isAvailable - Error");
        });
        var options = {
            name: ename,
            //printerId: 'printer007',
            //duplex: true,
            //landscape: true,
            grayscale: true
        };
        this.printer.print(content, options).then(function (onSuccess) {
            console.log("print - Success");
        }, function (onError) {
            console.log("print - Error");
        });
    };
    EstimationlistPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-estimationlist',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\estimationlist\estimationlist.html"*/'<!--\n  Generated template for the EstimationlistPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<!-- <ion-header>\n\n  <ion-navbar>\n    <ion-title>Estimation List</ion-title>\n  </ion-navbar>\n\n</ion-header> -->\n<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title style="text-align: center !important;\n    margin-right: 15% !important;" (click)="goto()"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n<ion-content padding>\n  <ion-row>\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Estimation List  <ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n  <ion-row style="    margin-top: 10px;\n  border: 1px solid lightgrey;" *ngFor="let l of list">\n\n    <ion-col>\n      <div class="row">\n      <div class="col" style="    padding: 5px;font-weight: bold;">{{l[\'firstname\']}}\n        \n      </div>\n      <div  class="col" style="    padding: 5px;">  {{l[\'total_cost\']}}\n        <!-- <ion-icon (click)="edit(l[\'cus_id\'])" name="ios-create" style="float: right;"></ion-icon> -->\n\n       <!-- <ion-icon style="float: right;" (click)="print(l)" name="print"></ion-icon> -->\n      </div>\n      <!-- <div style="    padding: 5px;font-weight: bold;">{{l[\'totwt\']}} Grms\n      </div> -->\n    </div>\n    <div class="row">\n      <div  class="col" style="    padding: 5px;">{{l[\'mobile\']}}</div>\n\n    <div class="col"  style="    padding: 5px;">{{l[\'totwt\']}} grms\n\n    </div>\n  </div>\n      <div style="    padding: 5px;">\n        <ion-badge style="background: linear-gradient(to right, #630b23 0%, #630b23 75%, #630b23 100%);" *ngIf="l[\'has_converted_order\'] == 0">Open</ion-badge>\n        <ion-badge  style="background: green;" *ngIf="l[\'has_converted_order\'] == 1">Billed</ion-badge>\n        <ion-icon (click)="edit(l[\'cus_id\'])" name="ios-create" style="float: right;"></ion-icon>\n\n      </div>\n\n    </ion-col>\n    <ion-col  col-4 style="background-color: #630b23 !important;text-align: center;">\n      <div class="row">\n        <div class="col" style="border: 1px solid white;    margin-top: 10px;" col-8 (click)="getEstiByEstiNo(l[\'esti_no\'])">\n          <ion-icon style="margin: auto;color: gold;"  name="eye"></ion-icon>\n\n          <div style="color: white;font-weight: bold;">Esti.No</div>\n          <div style="color: white;">{{l[\'esti_no\']}}</div>\n          </div>\n          <div class="col" col-4 style="margin: auto;">\n            <ion-icon style="float: right;font-size: 1.5em !important;margin-top: 15px;color: gold;" (click)="print(l)" name="print"></ion-icon>\n\n          </div>\n\n      </div>\n     \n    </ion-col>\n  </ion-row>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\estimationlist\estimationlist.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_8__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_11__ionic_native_printer__["a" /* Printer */], __WEBPACK_IMPORTED_MODULE_8__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file_chooser__["a" /* FileChooser */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */]])
    ], EstimationlistPage);
    return EstimationlistPage;
}());

//# sourceMappingURL=estimationlist.js.map

/***/ }),

/***/ 403:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SubdesignlistPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_subdesignimg_subdesignimg__ = __webpack_require__(404);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the SubdesignlistPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var SubdesignlistPage = /** @class */ (function () {
    function SubdesignlistPage(load, toast, modal, comman, retail, navCtrl, navParams) {
        this.load = load;
        this.toast = toast;
        this.modal = modal;
        this.comman = comman;
        this.retail = retail;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.hbProducts = [];
        this.hbDesigns = [];
        this.hbsubDesigns = [];
        this.searchhbsubDesigns = [];
        this.input = '';
        this.hbData = {};
        this.show = false;
    }
    SubdesignlistPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad SubdesignlistPage');
    };
    SubdesignlistPage.prototype.ionViewWillEnter = function () {
        if (this.hbData.hasOwnProperty('design_no')) {
            this.hbdesignSelected();
        }
    };
    SubdesignlistPage.prototype.openMasSearch = function (master) {
        var _this = this;
        console.log(master);
        if (master == 'Design') {
            if (this.hbData['pro_id']) {
                this.openMasModal({ 'searchArr': this.hbDesigns, page: master, listType: "normal" }, master);
            }
        }
        else if (master == 'Product') {
            if (this.hbProducts.length == 0) {
                var loader_1 = this.load.create({
                    content: 'Please Wait',
                    spinner: 'bubbles',
                });
                loader_1.present();
                this.retail.getProducts({ "type": "active", "id_category": "", "last_id": -1 }).then(function (data) {
                    _this.hbProducts = data;
                    loader_1.dismiss();
                    _this.openMasModal({ 'searchArr': _this.hbProducts, page: master, listType: "normal" }, master);
                });
            }
            else {
                this.openMasModal({ 'searchArr': this.hbProducts, page: master, listType: "normal" }, master);
            }
        }
    };
    SubdesignlistPage.prototype.openMasModal = function (data, master) {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__["a" /* MasSearchPage */], data);
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                if (master == 'Design') {
                    _this.hbData['design_no'] = data.design_no;
                    _this.hbData['design_name'] = data.label;
                    _this.hbdesignSelected();
                    _this.show = true;
                }
                else if (master == 'Product') {
                    _this.hbData['pro_id'] = data.pro_id;
                    _this.hbData['tax_group_id'] = data.tax_group_id;
                    _this.hbData['tax_percentage'] = data.tax_percentage;
                    _this.hbData['calculation_based_on'] = data.calculation_based_on;
                    _this.hbData['metal_type'] = data.metal_type;
                    _this.hbData['product_name'] = (data.parent_prods_name != null ? data.parent_prods_name + ',' + data.label : data.label);
                    _this.hbProdSelected();
                }
            }
        });
    };
    SubdesignlistPage.prototype.hbProdSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.retail.getDesigns({ "type": "active", "id_product": this.hbData['pro_id'], "last_id": -1 }).then(function (data) {
            _this.hbDesigns = data;
            loader.dismiss();
        });
        // }  
    };
    SubdesignlistPage.prototype.hbdesignSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.comman.getsubdesigns({ "id_product": this.hbData['pro_id'], "design_no": this.hbData['design_no'] }).then(function (data) {
            _this.hbsubDesigns = data;
            _this.searchhbsubDesigns = data;
            loader.dismiss();
        });
        // }  
    };
    SubdesignlistPage.prototype.editdesign = function (data) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_subdesignimg_subdesignimg__["a" /* SubdesignimgPage */], { 'data': data });
    };
    SubdesignlistPage.prototype.search = function () {
        var _this = this;
        this.hbsubDesigns = this.searchhbsubDesigns.filter(function (item) { return item['label'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    SubdesignlistPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-subdesignlist',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesignlist\subdesignlist.html"*/'<!--\n  Generated template for the SubdesignlistPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title  style="text-align: center;\n    margin-right: 15%;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding>\n  <ion-row>\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Design List  <ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n  <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n    <ion-item (tap)="openMasSearch(\'Product\')" no-padding>\n      <ion-label color="label-color" stacked>Product</ion-label>\n      <ion-input readonly=\'true\' type="text" [(ngModel)]="hbData[\'product_name\']"  ></ion-input>\n      <button  item-right ion-button clear color="dark" class="no-padding no-margin"  ><ion-icon name="arrow-dropdown"></ion-icon></button>\n    </ion-item>\n  </ion-col>\n  <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n    <ion-item  (tap)="openMasSearch(\'Design\')" no-padding>\n      <ion-label color="label-color" stacked>Design</ion-label>\n      <ion-input readonly=\'true\'  type="text" [(ngModel)]="hbData[\'design_name\']" ></ion-input> \n      <button  item-right ion-button clear color="dark" class="no-padding no-margin" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n    </ion-item>\n  </ion-col>\n\n  <div *ngIf="show">\n\n    <ion-row >\n      <ion-col no-padding text-wrap col-12>\n        <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon>Sub Design List<ion-badge color="light" float-right></ion-badge></div>\n      </ion-col>\n      </ion-row>\n  \n      <ion-searchbar [(ngModel)]="input" placeholder="Search"\n      (ionChange)="search()"         \n      ></ion-searchbar> \n  \n      <ion-row style="    margin-top: 10px;\n      border: 1px solid lightgrey;" *ngFor="let l of hbsubDesigns" (click)="editdesign(l)"> \n    \n    <ion-col  col-3 style="text-align: center;margin: auto;">\n      <img style="height: 70px;\n      width: 80px;\n      object-fit: cover;\n      object-position: center;" src="{{l[\'default_image\']}}" imageViewer="{{l[\'default_image\']}}" onerror="this.src=\'assets/no-img.png\'" />  \n          </ion-col>\n        <ion-col>\n          <div style="    padding: 5px;">Id : <span style="font-weight: bold;">{{l[\'id_sub_design\']}}\n          </span>\n          <ion-icon name="ios-create" style="float: right;color: red;    font-size: 2em !important;"></ion-icon>\n\n        </div>\n\n          <div style="    padding: 5px;font-weight: bold;">{{l[\'label\']}}\n            <!-- <ion-icon name="ios-create" style="float: right;"></ion-icon> -->\n          </div>\n         \n    \n        </ion-col>\n        <!-- <ion-col (click)="getEstiByEstiNo(l[\'esti_no\'])" col-3 style="text-align: center;margin: auto;">\n          <img style="height: 80px;\n          width: auto;" src="{{l[\'stockqrcode\']}}" imageViewer="{{l[\'stockqrcode\']}}" onerror="this.src=\'assets/no-img.png\'" />  \n              </ion-col> -->\n      </ion-row>\n    </div>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesignlist\subdesignlist.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], SubdesignlistPage);
    return SubdesignlistPage;
}());

//# sourceMappingURL=subdesignlist.js.map

/***/ }),

/***/ 404:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SubdesignimgPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_transfer__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ionic_cordova_plugin_ratio_crop__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_barcode_scanner__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_image_picker__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_ngx_image_compress__ = __webpack_require__(185);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};












// @IonicPage()
var SubdesignimgPage = /** @class */ (function () {
    function SubdesignimgPage(cd, imageCompress, alertCtrl, imagePicker, retail, barcodeScanner, toast, file, crop, filePath, platform, comman, transfer1, actionSheetCtrl, camera, load, navCtrl, navParams) {
        this.cd = cd;
        this.imageCompress = imageCompress;
        this.alertCtrl = alertCtrl;
        this.imagePicker = imagePicker;
        this.retail = retail;
        this.barcodeScanner = barcodeScanner;
        this.toast = toast;
        this.file = file;
        this.crop = crop;
        this.filePath = filePath;
        this.platform = platform;
        this.comman = comman;
        this.transfer1 = transfer1;
        this.actionSheetCtrl = actionSheetCtrl;
        this.camera = camera;
        this.load = load;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.code = '';
        this.image = '';
        this.imageid = '';
        this.imagename = '';
        this.stockcodes = [];
        this.searchcodes = [];
        this.images = [];
        this.createstock = false;
        this.input = '';
        this.progress = 0;
        this.show = false;
        this.whole = this.navParams.get('data');
        this.image = this.whole['default_image'];
        this.images = this.whole['img_details'];
        var y = Object.assign({}, this.images);
        this.images.reverse();
        this.loggedInBranch = this.empData['id_branch'];
    }
    SubdesignimgPage.prototype.ionViewWillEnter = function () {
        this.list();
    };
    SubdesignimgPage.prototype.list = function () {
        // let loader = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
        // this.comman.getstocklist().then(data=>{
        //   this.stockcodes = data['stockcodes'];
        //   this.searchcodes = data['stockcodes'];
        //   loader.dismiss();
        // },err=>{
        //   loader.dismiss();
        // });
    };
    SubdesignimgPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CreatestockPage');
    };
    SubdesignimgPage.prototype.create = function () {
        if (this.createstock == false) {
            this.createstock = true;
        }
        else {
            this.createstock = false;
        }
    };
    SubdesignimgPage.prototype.presentActionSheet = function (data) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        if (data == 'default') {
                            _this.takePicture(_this.camera.PictureSourceType.PHOTOLIBRARY);
                        }
                        else {
                            var options = {
                                maximumImagesCount: 2,
                                quality: 100,
                            };
                            _this.imagePicker.getPictures(options).then(function (results) {
                                if (results.length > 0) {
                                    _this.loading();
                                }
                                console.log('111111111111111');
                                for (var i = 0; i < results.length; i++) {
                                    console.log(results[i]);
                                    var documentURL = decodeURIComponent(results[i]);
                                    console.log(documentURL);
                                    results[i] = documentURL;
                                    console.log(results[i]);
                                    var temp = results.length - 1 == i ? true : false;
                                    var correctPath = results[i].substr(0, results[i].lastIndexOf('/') + 1);
                                    var currentName = results[i].substr(results[i].lastIndexOf('/') + 1);
                                    _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), temp, 'gal');
                                }
                                ;
                            });
                        }
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    SubdesignimgPage.prototype.takePicture = function (sourceType) {
        var _this = this;
        // Create options for the Camera Dialog
        var options = {
            quality: 75,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
        };
        var cropOptions = {
            quality: 100,
            widthRatio: -1,
            heightRatio: -1
        };
        this.loading();
        // Get the data of an image
        this.camera.getPicture(options).then(function (imagePath) {
            console.log(imagePath);
            if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.PHOTOLIBRARY) {
                console.log(imagePath);
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        console.log(333333333333333);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        //  let currentName = imagePath.substring( imagePath.lastIndexOf( '/' ) + 1, imagePath.lastIndexOf( '?' ) );
                        var currentName = filePath.substring(filePath.lastIndexOf('/') + 1);
                        // this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), '', 'cam');
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
            else {
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        var currentName = filePath.substr(filePath.lastIndexOf('/') + 1);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        // this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), '', 'cam');
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
        }, function (err) {
            _this.dismissLoader();
            console.log(err);
            console.log('Error while selecting image.');
        });
    };
    SubdesignimgPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    // Create a new name for the image
    SubdesignimgPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    SubdesignimgPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName, index, type) {
        var _this = this;
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            console.log(_this.pathForImage(newFileName));
            var orientation = -1;
            _this.imageCompress.compressFile(_this.pathForImage(newFileName), orientation, 50, 50).then(function (result) { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    this.writeFile(result, this.createFileName(), index, type);
                    return [2 /*return*/];
                });
            }); }, function (err) {
                console.log(err);
            });
        }, function (error) {
            console.log(error);
        });
    };
    SubdesignimgPage.prototype.uploadImage = function (name) {
        var _this = this;
        var imgs = this.images.filter(function (data) { return !data.hasOwnProperty('id_design_img'); });
        if (imgs.length > 0) {
            // let loader = this.load.create( {
            //   content: "Uploading..."
            // } );
            // loader.present();
            this.show = true;
            console.log(imgs);
            imgs.forEach(function (element, index) { return __awaiter(_this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, new Promise(function (next) {
                                // Destination URL
                                var url = 'https://srikrishnajewels.com/test_sknretail/admin/index.php/admin_app_api/createSubDesignImage';
                                var d = new Date(), n = d.getTime();
                                // File for Upload
                                var targetPath = element['image_name'] + '?nocache=' + n;
                                // File name only
                                var filename = name;
                                var options = {
                                    fileKey: "name",
                                    fileName: element['name'],
                                    chunkedMode: false,
                                    mimeType: "image/jpeg",
                                    params: {
                                        fileName: element['name'],
                                        default: element['is_default'],
                                        id_sub_design: _this.whole['id_sub_design'],
                                        branch_id: _this.empData['id_branch'],
                                        created_by: _this.empData['emp_code'],
                                        id_sub_design_mapping: _this.whole['id_sub_design_mapping']
                                    }
                                };
                                var fileTransfer = _this.transfer1.create();
                                console.log(targetPath);
                                console.log(encodeURI(url));
                                console.log(options);
                                console.log(url);
                                // Use the FileTransfer to upload the image
                                fileTransfer.upload(targetPath, encodeURI(url), options).then(function (data) {
                                    console.log(data);
                                    if (index == imgs.length - 1) {
                                        setTimeout(function () {
                                            var result = JSON.parse(data.response);
                                            console.log(result);
                                            console.log(result['imageid']);
                                            // loader.dismissAll();
                                            // this.image = this.pathForImage(name);
                                            // this.imageid = result['imageid'];
                                            var check = _this.images.findIndex(function (data) { return data['image_name'] == element['image_name']; });
                                            _this.images[check]['id_design_img'] = result['imageid'];
                                            var toastMsg = _this.toast.create({
                                                message: "Image succesfully uploaded.",
                                                duration: _this.comman.toastTimeout,
                                                position: 'center'
                                            });
                                            toastMsg.present();
                                            _this.navCtrl.pop();
                                        }, 3000);
                                    }
                                    next();
                                }, function (err) {
                                    // loader.dismissAll()  
                                    console.log(err);
                                    var toastMsg = _this.toast.create({
                                        message: "Error while uploading Image.",
                                        duration: _this.comman.toastTimeout,
                                        position: 'center'
                                    });
                                    toastMsg.present();
                                    next();
                                });
                                fileTransfer.onProgress(function (data) {
                                    console.log(data);
                                    _this.progress = Math.round((data.loaded / data.total) * 100);
                                    _this.refresh();
                                    console.log(_this.progress);
                                });
                            })];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); });
        }
        else {
            this.navCtrl.pop();
        }
    };
    SubdesignimgPage.prototype.loading = function () {
        this.loader = this.load.create({
            content: "Please Wait..."
        });
        this.loader.present();
    };
    SubdesignimgPage.prototype.dismissLoader = function () {
        this.loader.dismiss();
    };
    SubdesignimgPage.prototype.submit = function () {
        var check = this.images.findIndex(function (data) { return data['is_default'] == 1; });
        if (this.imagename != '' || check >= 0) {
            this.uploadImage(this.imagename);
        }
        else {
            var toastMsg = this.toast.create({
                message: "Please Upload Default Image.",
                duration: this.comman.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    SubdesignimgPage.prototype.search = function () {
        var _this = this;
        this.stockcodes = this.searchcodes.filter(function (item) { return item['stock_code'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    SubdesignimgPage.prototype.deletePhoto = function (index, data) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: "Sure you want to delete this " + data + "? There is no undo!",
            message: '',
            buttons: [
                {
                    text: 'No',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                }, {
                    text: 'Yes',
                    handler: function () {
                        console.log('Agree clicked');
                        if (_this.images[index].hasOwnProperty('id_design_img')) {
                            var loader_1 = _this.load.create({
                                content: 'Please Wait',
                                spinner: 'dots',
                            });
                            loader_1.present();
                            var temp = { 'empcode': _this.empData['emp_code'], 'id_sub_design': _this.whole['id_sub_design'], id_sub_design_mapping: _this.whole['id_sub_design_mapping'], 'id_design_img': _this.whole['img_details'][index]['id_design_img'] };
                            _this.comman.deletegallery(temp).then(function (data) {
                                var toast = _this.toast.create({
                                    message: data['message'],
                                    duration: 3000,
                                    position: 'bottom'
                                });
                                loader_1.dismiss();
                                toast.present();
                                _this.images.splice(index, 1);
                                var check = _this.images.findIndex(function (data) { return data['is_default'] == 1; });
                                if (check < 0) {
                                    _this.imagename = '';
                                    _this.image = '';
                                }
                                else {
                                }
                            }, function (err) {
                                loader_1.dismiss();
                            });
                        }
                        else {
                            _this.images.splice(index, 1);
                            var check = _this.images.findIndex(function (data) { return data['is_default'] == 1; });
                            if (check < 0) {
                                _this.imagename = '';
                                _this.image = '';
                            }
                            else {
                            }
                        }
                    }
                }
            ]
        });
        confirm.present();
    };
    SubdesignimgPage.prototype.checkdefault = function (index) {
        var _this = this;
        console.log(this.images[index]);
        if (this.images[index].hasOwnProperty('id_design_img')) {
            var loader_2 = this.load.create({
                content: 'Please Wait',
                spinner: 'dots',
            });
            loader_2.present();
            if (this.images[index]['is_default'] == 0) {
                this.images[index]['is_default'] = 1;
                this.image = this.images[index]['image_name'];
                this.images.forEach(function (element, i) {
                    if (index == i) {
                    }
                    else {
                        _this.images[i]['is_default'] = 0;
                    }
                });
            }
            else {
                this.images[index]['is_default'] = 0;
                this.image = '';
                this.imagename = '';
            }
            var temp = { 'empcode': this.empData['emp_code'], 'id_sub_design': this.whole['id_sub_design'], id_sub_design_mapping: this.whole['id_sub_design_mapping'], 'id_design_img': this.whole['img_details'][index]['id_design_img'], 'is_default': this.images[index]['is_default'] };
            this.comman.updatedefault(temp).then(function (data) {
                var toast = _this.toast.create({
                    message: 'Default Image Updated Successfully',
                    duration: 3000,
                    position: 'bottom'
                });
                toast.present();
                loader_2.dismiss();
            });
        }
        else {
            if (this.images[index]['is_default'] == 0) {
                this.images[index]['is_default'] = 1;
                this.image = this.images[index]['image_name'];
                this.images.forEach(function (element, i) {
                    if (index == i) {
                    }
                    else {
                        _this.images[i]['is_default'] = 0;
                    }
                });
            }
            else {
                this.images[index]['is_default'] = 0;
                this.image = '';
                this.imagename = '';
            }
        }
    };
    //here is the method is used to write a file in storage  
    SubdesignimgPage.prototype.writeFile = function (base64Data, fileName, index, type) {
        var _this = this;
        var contentType = this.getContentType(base64Data);
        var DataBlob = this.base64toBlob(base64Data, contentType);
        // here iam mentioned this line this.file.externalRootDirectory is a native pre-defined file path storage. You can change a file path whatever pre-defined method.  
        var filePath = cordova.file.dataDirectory;
        this.file.writeFile(filePath, fileName, DataBlob, contentType).then(function (success) {
            console.log(success['nativeURL']);
            var currentName = success['nativeURL'].substr(success['nativeURL'].lastIndexOf('/') + 1);
            var correctPath = success['nativeURL'].substr(0, success['nativeURL'].lastIndexOf('/') + 1);
            console.log("File Writed Successfully", success);
            console.log(currentName);
            console.log(correctPath);
            // this.targetPaths.push( success['nativeURL'])
            // this.filenames.push( currentName );
            // this.copyFileToLocalDir( correctPath, currentName, this.createFileName() );
            // this.uploadImage(currentName)
            if (type == 'gal') {
                _this.images.push({ 'image_name': success['nativeURL'], 'is_default': 0, 'name': currentName });
                var y = Object.assign({}, _this.images);
                _this.images.reverse();
                if (index == true) {
                    _this.dismissLoader();
                }
            }
            else {
                _this.images.forEach(function (element, i) {
                    _this.images[i]['is_default'] = 0;
                });
                _this.imagename = currentName;
                _this.image = success['nativeURL'];
                _this.images.push({ 'image_name': _this.image, 'is_default': 1, 'name': currentName });
                var y = Object.assign({}, _this.images);
                _this.images.reverse();
                _this.dismissLoader();
            }
        }).catch(function (err) {
            console.log("Error Occured While Writing File", err);
        });
    };
    //here is the method is used to get content type of an bas64 data  
    SubdesignimgPage.prototype.getContentType = function (base64Data) {
        var block = base64Data.split(";");
        var contentType = block[0].split(":")[1];
        return contentType;
    };
    //here is the method is used to convert base64 data to blob data  
    SubdesignimgPage.prototype.base64toBlob = function (b64Data, contentType) {
        contentType = contentType || '';
        var sliceSize = 512;
        var byteCharacters = atob(b64Data.replace(/^data:image\/(png|jpeg|jpg);base64,/, ''));
        var byteArrays = [];
        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            var slice = byteCharacters.slice(offset, offset + sliceSize);
            var byteNumbers = new Array(slice.length);
            for (var i = 0; i < slice.length; i++) {
                byteNumbers[i] = slice.charCodeAt(i);
            }
            var byteArray = new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
        }
        var blob = new Blob(byteArrays, {
            type: contentType
        });
        return blob;
    };
    SubdesignimgPage.prototype.refresh = function () {
        console.log('refresheed');
        this.cd.detectChanges();
    };
    SubdesignimgPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-subdesignimg',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesignimg\subdesignimg.html"*/'<!--\n  Generated template for the CreatestockPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title  style="text-align: center;\n    margin-right: 15%;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <ion-row style="margin-bottom: 20px;">\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon>Edit Subdesign<ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n\n  <ion-row style="    margin-bottom: 15px;">\n    <ion-col>\n      Sub Design Name * &nbsp;&nbsp;:\n    </ion-col>\n    <ion-col>\n      {{whole[\'label\']}}\n    </ion-col>\n  </ion-row>\n\n  <ion-row style="    margin-bottom: 15px;"> \n    <ion-col style="margin: auto;">\n      Default Image *\n    </ion-col>\n    <ion-col>\n      <div class="row" >\n  <div style="\n  height: 80px;\n  width: 100px;\n" class="col">\n<img style="height: 80px;\nwidth: 90px;\nobject-fit: cover;\nobject-position: center;" src="{{image}}" imageViewer="{{image}}" onerror="this.src=\'assets/no-img.png\'" />\n\n  </div>\n  <div (click)="presentActionSheet(\'default\')" class="col" style="text-align: end;margin: auto;">\n    <span style="padding:5px;border: 1px solid lightgray;"><ion-icon name="add"></ion-icon></span>\n\n  </div>\n\n      </div>\n    </ion-col>\n  </ion-row>\n  <ion-grid>\n\n    <ion-col style="margin: auto;">\n      Add Images <span style="font-weight: bold;" *ngIf="images.length > 0">- ({{images.length}})</span> *\n    </ion-col>\n        <ion-row>\n      <ion-col col-10 style="margin-top: 30px;">\n        <!-- <ion-row>\n        \n          <div *ngIf="images.length > 0" class="coverphoto">\n            <button style="width: 135px;background: transparent !important;margin-bottom: 10px;" *ngFor="let targetPath of images; let id = index">\n           <div class="row">\n              <div  class="col" col-10 no-padding><img class="uploadimg1" src="{{targetPath[\'image_name\']}}" imageViewer="{{targetPath[\'image_name\']}}" onerror="this.src=\'assets/no-img.png\'"\n            *ngIf="targetPath" /></div><div class="col" col-2 no-padding  ><ion-icon (click)="checkdefault(id)" [ngClass]="targetPath[\'is_default\'] == 1 ? \'one\':\'two\'" style="padding: 0px !important;" name="checkmark-circle"></ion-icon><ion-icon (click)="deletePhoto(id)" style="padding: 0px !important;color: red;bottom: 0;\n              right: 0;\n              position: absolute;" name="close-circle"></ion-icon></div>\n          </div>\n          </button>\n          </div>\n\n        </ion-row> -->\n        \n          <div style="margin-bottom:10px" class="row" *ngFor="let targetPath of images; let id = index" >\n            <!-- <button style="width: 135px;background: transparent !important;margin-bottom: 10px;" *ngFor="let targetPath of images; let id = index"> -->\n              <div class="col"  col-3 no-padding style="text-align: center;" >\n                Default<br>\n                <ion-icon (click)="checkdefault(id)" [ngClass]="targetPath[\'is_default\'] == 1 ? \'one\':\'two\'" style="padding: 0px !important;    font-size: 1.8em;" name="checkmark-circle"></ion-icon>\n             </div>\n              <div  class="col" col-7 no-padding style="text-align:center;"><img class="uploadimg1" src="{{targetPath[\'image_name\']}}" imageViewer="{{targetPath[\'image_name\']}}" onerror="this.src=\'assets/no-img.png\'"\n            *ngIf="targetPath" /></div><div style="margin: auto;" class="col" col-2 no-padding  >\n            <ion-icon (click)="deletePhoto(id)" style="padding: 0px !important;color: red;    font-size: 1.8em;" name="close-circle"></ion-icon></div>\n          <!-- </button> -->\n          </div>\n\n      </ion-col>\n      <ion-col style="margin: auto;" col-2 (click)="presentActionSheet(\'gallery\')">\n        <div  class="col" style="text-align: end;margin: auto;">\n          <span style="padding:5px;border: 1px solid lightgray;"><ion-icon name="add"></ion-icon></span>\n      \n        </div>      </ion-col>\n    </ion-row>\n</ion-grid>\n  <div style="text-align: center;margin-top:20px;">\n    <button (click)="submit()" ion-button style="background:#86354d !important">Submit</button>\n  </div>\n\n</ion-content>\n<ion-footer>\n<div *ngIf="show == true"  style="text-align: center;    margin-top: 5px;">\n  Upload Progress : \n</div>\n<div *ngIf="show == true" class="progress-outer">\n  <div class="progress-inner" [style.width]="progress + \'%\'">\n      {{progress}}%\n  </div>\n</div>\n</ion-footer>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\subdesignimg\subdesignimg.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_9__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */], __WEBPACK_IMPORTED_MODULE_11_ngx_image_compress__["a" /* NgxImageCompressService */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_image_picker__["a" /* ImagePicker */], __WEBPACK_IMPORTED_MODULE_9__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_barcode_scanner__["a" /* BarcodeScanner */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_6_ionic_cordova_plugin_ratio_crop__["a" /* RatioCrop */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_transfer__["a" /* Transfer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], SubdesignimgPage);
    return SubdesignimgPage;
}());

//# sourceMappingURL=subdesignimg.js.map

/***/ }),

/***/ 405:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DesignlistPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__designimg_designimg__ = __webpack_require__(406);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the SubdesignlistPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var DesignlistPage = /** @class */ (function () {
    function DesignlistPage(load, toast, modal, comman, retail, navCtrl, navParams) {
        this.load = load;
        this.toast = toast;
        this.modal = modal;
        this.comman = comman;
        this.retail = retail;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.hbProducts = [];
        this.hbDesigns = [];
        this.searchhbDesigns = [];
        this.hbsubDesigns = [];
        this.searchhbsubDesigns = [];
        this.input = '';
        this.hbData = {};
        this.show = false;
    }
    DesignlistPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad SubdesignlistPage');
    };
    DesignlistPage.prototype.ionViewWillEnter = function () {
        if (this.hbData.hasOwnProperty('design_no')) {
            this.hbdesignSelected();
        }
    };
    DesignlistPage.prototype.openMasSearch = function (master) {
        var _this = this;
        console.log(master);
        if (this.hbProducts.length == 0) {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            this.retail.getProducts({ "type": "active", "id_category": "", "last_id": -1 }).then(function (data) {
                _this.hbProducts = data;
                loader_1.dismiss();
                _this.openMasModal({ 'searchArr': _this.hbProducts, page: master, listType: "normal" }, master);
            });
        }
        else if (master == 'Design') {
            if (this.hbData['pro_id']) {
                this.openMasModal({ 'searchArr': this.hbDesigns, page: master, listType: "normal" }, master);
            }
        }
        else {
            this.openMasModal({ 'searchArr': this.hbProducts, page: master, listType: "normal" }, master);
        }
    };
    DesignlistPage.prototype.openMasModal = function (data, master) {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__modal_mas_search_mas_search__["a" /* MasSearchPage */], data);
        modal.present();
        modal.onDidDismiss(function (data) {
            if (data != null) {
                if (master == 'Design') {
                    _this.hbData['design_no'] = data.design_no;
                    _this.hbData['design_name'] = data.label;
                    _this.hbdesignSelected();
                    _this.show = true;
                }
                else if (master == 'Product') {
                    _this.hbData['pro_id'] = data.pro_id;
                    _this.hbData['tax_group_id'] = data.tax_group_id;
                    _this.hbData['tax_percentage'] = data.tax_percentage;
                    _this.hbData['calculation_based_on'] = data.calculation_based_on;
                    _this.hbData['metal_type'] = data.metal_type;
                    _this.hbData['product_name'] = (data.parent_prods_name != null ? data.parent_prods_name + ',' + data.label : data.label);
                    _this.hbProdSelected();
                }
            }
        });
    };
    DesignlistPage.prototype.hbProdSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.retail.getDesigns({ "type": "active", "id_product": this.hbData['pro_id'], "last_id": -1 }).then(function (data) {
            _this.hbDesigns = data;
            _this.searchhbDesigns = data;
            _this.show = true;
            loader.dismiss();
        });
        // }  
    };
    DesignlistPage.prototype.hbdesignSelected = function () {
        var _this = this;
        // if(this.hbDesigns.length == 0) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.comman.getsubdesigns({ "id_product": this.hbData['pro_id'], "design_no": this.hbData['design_no'] }).then(function (data) {
            _this.hbsubDesigns = data;
            _this.searchhbsubDesigns = data;
            loader.dismiss();
        });
        // }  
    };
    DesignlistPage.prototype.editdesign = function (data) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__designimg_designimg__["a" /* DesignimgPage */], { 'data': data });
    };
    DesignlistPage.prototype.search = function () {
        var _this = this;
        this.hbDesigns = this.searchhbDesigns.filter(function (item) { return item['label'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    DesignlistPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-designlist',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designlist\designlist.html"*/'<!--\n  Generated template for the SubdesignlistPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title  style="text-align: center;\n    margin-right: 15%;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n</ion-header>\n\n\n<ion-content padding>\n  <ion-row>\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon> Product List  <ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n  <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n    <ion-item (tap)="openMasSearch(\'Product\')" no-padding>\n      <ion-label color="label-color" stacked>Product</ion-label>\n      <ion-input readonly=\'true\' type="text" [(ngModel)]="hbData[\'product_name\']"  ></ion-input>\n      <button  item-right ion-button clear color="dark" class="no-padding no-margin"  ><ion-icon name="arrow-dropdown"></ion-icon></button>\n    </ion-item>\n  </ion-col>\n  <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6  class="custom-2col">   \n    <ion-item  (tap)="openMasSearch(\'Design\')" no-padding>\n      <ion-label color="label-color" stacked>Design</ion-label>\n      <ion-input readonly=\'true\'  type="text" [(ngModel)]="hbData[\'design_name\']" ></ion-input> \n      <button  item-right ion-button clear color="dark" class="no-padding no-margin" ><ion-icon name="arrow-dropdown"></ion-icon></button>\n    </ion-item>\n  </ion-col> -->\n\n  <div *ngIf="show">\n\n    <ion-row >\n      <ion-col no-padding text-wrap col-12>\n        <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon>Design List<ion-badge color="light" float-right></ion-badge></div>\n      </ion-col>\n      </ion-row>\n  \n      <ion-searchbar [(ngModel)]="input" placeholder="Search"\n      (ionChange)="search()"         \n      ></ion-searchbar> \n  \n      <ion-row style="    margin-top: 10px;\n      border: 1px solid lightgrey;" *ngFor="let l of hbDesigns" (click)="editdesign(l)"> \n    \n    <ion-col  col-3 style="text-align: center;margin: auto;">\n      <img style="height: 70px;\n      width: 80px;\n      object-fit: cover;\n      object-position: center;" src="{{l[\'image\']}}" imageViewer="{{l[\'image\']}}" onerror="this.src=\'assets/no-img.png\'" />  \n          </ion-col>\n        <ion-col>\n          <div style="    padding: 5px;">Id : <span style="font-weight: bold;">{{l[\'design_no\']}}</span></div>\n\n          <div style="    padding: 5px;font-weight: bold;">{{l[\'label\']}}\n            <ion-icon name="ios-create" style="float: right;"></ion-icon>\n          </div>\n         \n    \n        </ion-col>\n        <!-- <ion-col (click)="getEstiByEstiNo(l[\'esti_no\'])" col-3 style="text-align: center;margin: auto;">\n          <img style="height: 80px;\n          width: auto;" src="{{l[\'stockqrcode\']}}" imageViewer="{{l[\'stockqrcode\']}}" onerror="this.src=\'assets/no-img.png\'" />  \n              </ion-col> -->\n      </ion-row>\n    </div>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designlist\designlist.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_3__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], DesignlistPage);
    return DesignlistPage;
}());

//# sourceMappingURL=designlist.js.map

/***/ }),

/***/ 406:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DesignimgPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_transfer__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ionic_cordova_plugin_ratio_crop__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_barcode_scanner__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_image_picker__ = __webpack_require__(107);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};











// @IonicPage()
var DesignimgPage = /** @class */ (function () {
    function DesignimgPage(alertCtrl, imagePicker, retail, barcodeScanner, toast, file, crop, filePath, platform, comman, transfer1, actionSheetCtrl, camera, load, navCtrl, navParams) {
        this.alertCtrl = alertCtrl;
        this.imagePicker = imagePicker;
        this.retail = retail;
        this.barcodeScanner = barcodeScanner;
        this.toast = toast;
        this.file = file;
        this.crop = crop;
        this.filePath = filePath;
        this.platform = platform;
        this.comman = comman;
        this.transfer1 = transfer1;
        this.actionSheetCtrl = actionSheetCtrl;
        this.camera = camera;
        this.load = load;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.code = '';
        this.image = '';
        this.imageid = '';
        this.imagename = '';
        this.stockcodes = [];
        this.searchcodes = [];
        this.images = [];
        this.createstock = false;
        this.input = '';
        this.whole = this.navParams.get('data');
        this.image = this.whole['default_image'];
        this.images = this.whole['img_details'];
        this.loggedInBranch = this.empData['id_branch'];
    }
    DesignimgPage.prototype.ionViewWillEnter = function () {
        this.list();
    };
    DesignimgPage.prototype.list = function () {
        // let loader = this.load.create({
        //   content: 'Please Wait',
        //   spinner: 'bubbles',
        // });
        // loader.present();
        // this.comman.getstocklist().then(data=>{
        //   this.stockcodes = data['stockcodes'];
        //   this.searchcodes = data['stockcodes'];
        //   loader.dismiss();
        // },err=>{
        //   loader.dismiss();
        // });
    };
    DesignimgPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CreatestockPage');
    };
    DesignimgPage.prototype.create = function () {
        if (this.createstock == false) {
            this.createstock = true;
        }
        else {
            this.createstock = false;
        }
    };
    DesignimgPage.prototype.presentActionSheet = function (data) {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        if (data == 'default') {
                            _this.takePicture(_this.camera.PictureSourceType.PHOTOLIBRARY);
                        }
                        else {
                            var options = {
                                maximumImagesCount: 5,
                                quality: 100,
                            };
                            _this.imagePicker.getPictures(options).then(function (results) {
                                if (results.length > 0) {
                                    _this.loading();
                                }
                                console.log('111111111111111');
                                for (var i = 0; i < results.length; i++) {
                                    console.log(results[i]);
                                    var documentURL = decodeURIComponent(results[i]);
                                    console.log(documentURL);
                                    results[i] = documentURL;
                                    console.log(results[i]);
                                    var temp = results.length - 1 == i ? true : false;
                                    var correctPath = results[i].substr(0, results[i].lastIndexOf('/') + 1);
                                    var currentName = results[i].substr(results[i].lastIndexOf('/') + 1);
                                    _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), temp, 'gal');
                                }
                                ;
                            });
                        }
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    DesignimgPage.prototype.takePicture = function (sourceType) {
        var _this = this;
        // Create options for the Camera Dialog
        var options = {
            quality: 75,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
        };
        var cropOptions = {
            quality: 100,
            widthRatio: -1,
            heightRatio: -1
        };
        this.loading();
        // Get the data of an image
        this.camera.getPicture(options).then(function (imagePath) {
            console.log(imagePath);
            if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.PHOTOLIBRARY) {
                console.log(imagePath);
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        console.log(333333333333333);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        //  let currentName = imagePath.substring( imagePath.lastIndexOf( '/' ) + 1, imagePath.lastIndexOf( '?' ) );
                        var currentName = filePath.substring(filePath.lastIndexOf('/') + 1);
                        _this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), '', 'cam');
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
            else {
                _this.crop.ratioCrop(imagePath, cropOptions).then(function (out) {
                    _this.filePath.resolveNativePath(out)
                        .then(function (filePath) {
                        console.log(filePath);
                        var currentName = filePath.substr(filePath.lastIndexOf('/') + 1);
                        var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                        _this.dismissLoader();
                        _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName(), '', 'cam');
                        // this.uploadImage();
                    }, function (err) {
                        _this.dismissLoader();
                    });
                }, function (err) {
                    _this.dismissLoader();
                });
            }
        }, function (err) {
            _this.dismissLoader();
            console.log(err);
            console.log('Error while selecting image.');
        });
    };
    DesignimgPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    // Create a new name for the image
    DesignimgPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    DesignimgPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName, index, type) {
        var _this = this;
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            console.log(_this.pathForImage(newFileName));
            if (type == 'gal') {
                _this.images.push({ 'image_name': _this.pathForImage(newFileName), 'is_default': 0, 'name': newFileName });
                if (index == true) {
                    _this.dismissLoader();
                }
            }
            else {
                // let check:any = this.images.findIndex(data => data['is_default'] == 1);
                // if(check < 0){
                _this.images.forEach(function (element, i) {
                    _this.images[i]['is_default'] = 0;
                });
                _this.imagename = newFileName;
                _this.image = _this.pathForImage(newFileName);
                _this.images.push({ 'image_name': _this.image, 'is_default': 1, 'name': newFileName });
                // }
                // else{
                //   this.images.splice(check,1);
                //   this.imagename = newFileName;
                //   this.image = this.pathForImage(newFileName);
                //   this.images.push({'image_name':this.image,'is_default':1,'name':newFileName});
                // }
            }
            //  this.uploadImage(newFileName)
        }, function (error) {
            console.log(error);
        });
    };
    DesignimgPage.prototype.uploadImage = function (name) {
        var _this = this;
        var imgs = this.images.filter(function (data) { return !data.hasOwnProperty('id_design_img'); });
        if (imgs.length > 0) {
            var loader_1 = this.load.create({
                content: "Uploading..."
            });
            loader_1.present();
            imgs.forEach(function (element, index) { return __awaiter(_this, void 0, void 0, function () {
                var _this = this;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, new Promise(function (next) {
                                // Destination URL
                                var url = 'https://srikrishnajewels.com/test_sknretail/admin/index.php/admin_app_api/createDesignImage';
                                var d = new Date(), n = d.getTime();
                                // File for Upload
                                var targetPath = element['image_name'] + '?nocache=' + n;
                                // File name only
                                var filename = name;
                                var options = {
                                    fileKey: "name",
                                    fileName: element['name'],
                                    chunkedMode: false,
                                    mimeType: "image/jpeg",
                                    params: {
                                        fileName: element['name'],
                                        default: element['is_default'],
                                        id_design: _this.whole['id_design'],
                                        branch_id: _this.empData['id_branch'],
                                        created_by: _this.empData['emp_code'],
                                        id_design_mapping: _this.whole['id_design_mapping']
                                    }
                                };
                                var fileTransfer = _this.transfer1.create();
                                console.log(targetPath);
                                console.log(encodeURI(url));
                                console.log(options);
                                console.log(url);
                                // Use the FileTransfer to upload the image
                                fileTransfer.upload(targetPath, encodeURI(url), options).then(function (data) {
                                    console.log(data);
                                    if (index == imgs.length - 1) {
                                        setTimeout(function () {
                                            var result = JSON.parse(data.response);
                                            console.log(result);
                                            console.log(result['imageid']);
                                            loader_1.dismissAll();
                                            // this.image = this.pathForImage(name);
                                            // this.imageid = result['imageid'];
                                            var check = _this.images.findIndex(function (data) { return data['image_name'] == element['image_name']; });
                                            _this.images[check]['id_design_img'] = result['imageid'];
                                            var toastMsg = _this.toast.create({
                                                message: "Image succesfully uploaded.",
                                                duration: _this.comman.toastTimeout,
                                                position: 'center'
                                            });
                                            toastMsg.present();
                                            _this.navCtrl.pop();
                                        }, 3000);
                                    }
                                    next();
                                }, function (err) {
                                    loader_1.dismissAll();
                                    console.log(err);
                                    var toastMsg = _this.toast.create({
                                        message: "Error while uploading Image.",
                                        duration: _this.comman.toastTimeout,
                                        position: 'center'
                                    });
                                    toastMsg.present();
                                    next();
                                });
                            })];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); });
        }
        else {
            this.navCtrl.pop();
        }
    };
    DesignimgPage.prototype.loading = function () {
        this.loader = this.load.create({
            content: "Please Wait..."
        });
        this.loader.present();
    };
    DesignimgPage.prototype.dismissLoader = function () {
        this.loader.dismiss();
    };
    DesignimgPage.prototype.submit = function () {
        var check = this.images.findIndex(function (data) { return data['is_default'] == 1; });
        if (this.imagename != '' || check >= 0) {
            this.uploadImage(this.imagename);
        }
        else {
            var toastMsg = this.toast.create({
                message: "Please Upload Default Image.",
                duration: this.comman.toastTimeout,
                position: 'center'
            });
            toastMsg.present();
        }
    };
    DesignimgPage.prototype.search = function () {
        var _this = this;
        this.stockcodes = this.searchcodes.filter(function (item) { return item['stock_code'].toUpperCase().includes(_this.input.toUpperCase()); });
    };
    DesignimgPage.prototype.deletePhoto = function (index, data) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: "Sure you want to delete this " + data + "? There is no undo!",
            message: '',
            buttons: [
                {
                    text: 'No',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                }, {
                    text: 'Yes',
                    handler: function () {
                        console.log('Agree clicked');
                        if (_this.images[index].hasOwnProperty('id_design_img')) {
                            var loader_2 = _this.load.create({
                                content: 'Please Wait',
                                spinner: 'dots',
                            });
                            loader_2.present();
                            var temp = { 'empcode': _this.empData['emp_code'], 'id_design': _this.whole['id_design'], id_design_mapping: _this.whole['id_design_mapping'], 'id_design_img': _this.whole['img_details'][index]['id_design_img'] };
                            _this.comman.deletegallery(temp).then(function (data) {
                                var toast = _this.toast.create({
                                    message: data['message'],
                                    duration: 3000,
                                    position: 'bottom'
                                });
                                loader_2.dismiss();
                                toast.present();
                                _this.images.splice(index, 1);
                                var check = _this.images.findIndex(function (data) { return data['is_default'] == 1; });
                                if (check < 0) {
                                    _this.imagename = '';
                                    _this.image = '';
                                }
                                else {
                                }
                            }, function (err) {
                                loader_2.dismiss();
                            });
                        }
                        else {
                            _this.images.splice(index, 1);
                            var check = _this.images.findIndex(function (data) { return data['is_default'] == 1; });
                            if (check < 0) {
                                _this.imagename = '';
                                _this.image = '';
                            }
                            else {
                            }
                        }
                    }
                }
            ]
        });
        confirm.present();
    };
    DesignimgPage.prototype.checkdefault = function (index) {
        var _this = this;
        console.log(this.images[index]);
        if (this.images[index].hasOwnProperty('id_design_img')) {
            var loader_3 = this.load.create({
                content: 'Please Wait',
                spinner: 'dots',
            });
            loader_3.present();
            if (this.images[index]['is_default'] == 0) {
                this.images[index]['is_default'] = 1;
                this.image = this.images[index]['image_name'];
                this.images.forEach(function (element, i) {
                    if (index == i) {
                    }
                    else {
                        _this.images[i]['is_default'] = 0;
                    }
                });
            }
            else {
                this.images[index]['is_default'] = 0;
                this.image = '';
                this.imagename = '';
            }
            var temp = { 'empcode': this.empData['emp_code'], 'id_design': this.whole['id_design'], id_sub_design_mapping: this.whole['id_design_mapping'], 'id_design_img': this.whole['img_details'][index]['id_design_img'], 'is_default': this.images[index]['is_default'] };
            this.comman.updatedefault(temp).then(function (data) {
                var toast = _this.toast.create({
                    message: 'Default Image Updated Successfully',
                    duration: 3000,
                    position: 'bottom'
                });
                toast.present();
                loader_3.dismiss();
            });
        }
        else {
            if (this.images[index]['is_default'] == 0) {
                this.images[index]['is_default'] = 1;
                this.image = this.images[index]['image_name'];
                this.images.forEach(function (element, i) {
                    if (index == i) {
                    }
                    else {
                        _this.images[i]['is_default'] = 0;
                    }
                });
            }
            else {
                this.images[index]['is_default'] = 0;
                this.image = '';
                this.imagename = '';
            }
        }
    };
    DesignimgPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-designimg',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designimg\designimg.html"*/'<!--\n  Generated template for the CreatestockPage page.\n\n  See http://ionicframework.com/docs/components/#navigation for more info on\n  Ionic pages and navigation.\n-->\n<ion-header>\n\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title  style="text-align: center;\n    margin-right: 15%;"><img class="header-logo" src=\'assets/img/header-final.svg\'/></ion-title>\n  </ion-navbar>\n\n</ion-header>\n\n\n<ion-content padding>\n  <ion-row style="margin-bottom: 20px;">\n    <ion-col no-padding text-wrap col-12>\n      <div class="theme-title-blk"> <ion-icon name="pricetags"></ion-icon>Edit Design<ion-badge color="light" float-right></ion-badge></div>\n    </ion-col>\n    </ion-row>\n\n  <ion-row style="    margin-bottom: 15px;">\n    <ion-col>\n       Design Name * &nbsp;&nbsp;:\n    </ion-col>\n    <ion-col>\n      {{whole[\'label\']}}\n    </ion-col>\n  </ion-row>\n\n  <ion-row style="    margin-bottom: 15px;"> \n    <ion-col style="margin: auto;">\n      Default Image *\n    </ion-col>\n    <ion-col>\n      <div class="row" >\n  <div style="\n  height: 80px;\n  width: 100px;\n" class="col">\n<img style="height: 80px;\nwidth: 90px;\nobject-fit: cover;\nobject-position: center;" src="{{image}}" imageViewer="{{image}}" onerror="this.src=\'assets/no-img.png\'" />\n\n  </div>\n  <div (click)="presentActionSheet(\'default\')" class="col" style="text-align: end;margin: auto;">\n    <span style="padding:5px;border: 1px solid lightgray;"><ion-icon name="add"></ion-icon></span>\n\n  </div>\n\n      </div>\n    </ion-col>\n  </ion-row>\n  <ion-grid>\n\n    <ion-col style="margin: auto;">\n      Add Images *\n    </ion-col>\n        <ion-row>\n      <ion-col col-10 style="margin-top: 30px;">\n        <ion-row>\n        \n          <div *ngIf="images.length > 0" class="coverphoto">\n            <button style="width: 125px;background: transparent !important;" *ngFor="let targetPath of images; let id = index">\n           <div class="row">\n              <div  class="col" col-9 no-padding><img class="uploadimg1" src="{{targetPath[\'image_name\']}}" imageViewer="{{targetPath[\'image_name\']}}" onerror="this.src=\'assets/no-img.png\'"\n            *ngIf="targetPath" /></div><div class="col" col-3 no-padding  ><ion-icon (click)="checkdefault(id)" [ngClass]="targetPath[\'is_default\'] == 1 ? \'one\':\'two\'" style="padding: 0px !important;" name="checkmark-circle"></ion-icon><ion-icon (click)="deletePhoto(id)" style="padding: 0px !important;" name="close-circle"></ion-icon></div>\n          </div>\n          </button>\n          </div>\n\n        </ion-row>\n      </ion-col>\n      <ion-col style="margin: auto;" col-2 (click)="presentActionSheet(\'gallery\')">\n        <div  class="col" style="text-align: end;margin: auto;">\n          <span style="padding:5px;border: 1px solid lightgray;"><ion-icon name="add"></ion-icon></span>\n      \n        </div>      </ion-col>\n    </ion-row>\n</ion-grid>\n  <div style="text-align: center;margin-top:20px;">\n    <button (click)="submit()" ion-button style="background:#86354d !important">Submit</button>\n  </div>\n\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\designimg\designimg.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_9__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_image_picker__["a" /* ImagePicker */], __WEBPACK_IMPORTED_MODULE_9__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_barcode_scanner__["a" /* BarcodeScanner */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_6_ionic_cordova_plugin_ratio_crop__["a" /* RatioCrop */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_transfer__["a" /* Transfer */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], DesignimgPage);
    return DesignimgPage;
}());

//# sourceMappingURL=designimg.js.map

/***/ }),

/***/ 407:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CustomorderPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__wishlist_wishlist__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_img_editor_editor__ = __webpack_require__(184);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_date_picker__ = __webpack_require__(55);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








///import { Transfer, TransferObject } from '@ionic-native/transfer';





var CustomorderPage = /** @class */ (function () {
    function CustomorderPage(datePicker, common, keyboard, view, platform, navParams, actionSheetCtrl, navCtrl, modal, toast, events, loadingCtrl, retail, camera, ftransfer, file, http, filePath, alertCtrl) {
        var _this = this;
        this.datePicker = datePicker;
        this.common = common;
        this.keyboard = keyboard;
        this.view = view;
        this.platform = platform;
        this.navParams = navParams;
        this.actionSheetCtrl = actionSheetCtrl;
        this.navCtrl = navCtrl;
        this.modal = modal;
        this.toast = toast;
        this.events = events;
        this.loadingCtrl = loadingCtrl;
        this.retail = retail;
        this.camera = camera;
        this.ftransfer = ftransfer;
        this.file = file;
        this.http = http;
        this.filePath = filePath;
        this.alertCtrl = alertCtrl;
        this.item = [];
        this.customData = [];
        this.wishlistData = {};
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.proceedWishlist = false;
        this.hideAddToWishlist = false;
        this.hideUpdateItem = true;
        this.showDesignDet = false;
        this.enable_customize = true;
        this.showCustomize = true;
        this.inpErrorMsg = { "weight": "", "width": "", "dia": "", "len": "", "purity": "" };
        // Sample Image
        this.targetPaths = [];
        this.filenames = [];
        this.deletephotos = [];
        this.lastImage = null;
        this.showedit = false;
        this.id_ret_category = this.navParams.get('id_category');
        this.id_product = this.navParams.get('id_product');
        this.id_sub_design = this.navParams.get('id_sub_design');
        console.log(this.empData);
        var type = this.navParams.get('type');
        if (type == 'view_only') {
            this.hideAddToWishlist = true;
            this.showDesignDet = true;
            this.enable_customize = false;
        }
        else if (type == 'edit') {
            this.hideAddToWishlist = true;
            this.hideUpdateItem = false;
            this.proceedWishlist = true;
        }
        // Set design number
        if (this.navParams.get('design_no')) {
            this.id_ret_category = this.navParams.get('id_category');
            this.id_product = this.navParams.get('id_product');
            this.design_no = this.navParams.get('design_no');
            this.id_sub_design = this.navParams.get('id_sub_design');
            localStorage.setItem('last_cat_no', this.id_ret_category);
            localStorage.setItem('last_pro_no', this.id_product);
            localStorage.setItem('last_design_no', this.design_no);
            localStorage.setItem('last_subdesign_no', this.id_sub_design);
        }
        else {
            this.id_ret_category = localStorage.getItem('last_cat_no');
            this.id_product = localStorage.getItem('last_pro_no');
            this.design_no = localStorage.getItem('last_design_no');
            this.id_sub_design = localStorage.getItem('last_subdesign_no');
        }
        var customData = this.navParams.get('item');
        console.log("Design Number : " + customData);
        if (customData) {
            this.customData = customData;
        }
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.retail.getDesignById({ 'id_category': this.id_ret_category, 'id_product': this.id_product, "design_no": this.design_no, 'id_sub_design': this.id_sub_design }).then(function (result) {
            _this.item = result;
            if (!customData) {
                _this.customData = result;
            }
            if (_this.customData['stones']) {
                _this.item['stones'].forEach(function (value, key) {
                    var stone = _this.customData['stones'].filter(function (i) { return i.stone_id === value.stone_id; });
                    if (stone.length > 0) {
                        _this.item['stones'][key]['selected'] = true;
                    }
                    console.log(key);
                    console.log(_this.item['stones']);
                });
            }
            loader.dismiss();
        });
    }
    CustomorderPage.prototype.ionViewDidLoad = function () {
    };
    CustomorderPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        console.log("ionViewWillEnter : Keyboard isOpen " + +this.keyboard.isOpen());
        if (localStorage.getItem('dip') != '') {
            var path = JSON.parse(localStorage.getItem('dip'));
            var name = JSON.parse(localStorage.getItem('din'));
            console.log("dip : " + path + " -- " + "din : " + name);
        }
        if (path != null && path != undefined && path != '' && this.navParams.get('state') == true) {
            this.targetPaths.push(path);
            this.showedit = true;
            console.log(this.targetPaths);
            this.filenames.push(name);
            console.log(this.filenames);
            this.customData['sample_images'] = this.filenames;
        }
        this.events.subscribe('img', function (userEventData) {
            // this.customData['sample_images'] = userEventData;
        });
        this.events.subscribe('tar', function (userEventData) {
            console.log(userEventData);
            _this.targetPaths.pop();
            _this.targetPaths.push(userEventData);
            _this.showedit = true;
            console.log(_this.targetPaths);
        });
        this.events.subscribe('file', function (userEventData) {
            console.log(userEventData);
            _this.filenames.pop();
            _this.filenames.push(userEventData);
            console.log(_this.filenames);
            _this.customData['sample_images'] = _this.filenames;
        });
        this.events.subscribe('err', function (userEventData) {
            _this.targetPaths.splice(userEventData, 1);
        });
        this.events.subscribe('errr', function (userEventData) {
            _this.filenames.splice(userEventData, 1);
        });
        console.log(this.customData);
        console.log(this.targetPaths);
    };
    CustomorderPage.prototype.validateFields = function () {
        console.log(this.inpErrorMsg);
        if (this.inpErrorMsg['weight'] == "Invalid" || this.inpErrorMsg['purity'] == "Invalid") {
            this.proceedWishlist = false;
        }
        else {
            if (this.inpErrorMsg['weight'] == "Valid" && this.inpErrorMsg['purity'] == "Valid") {
                this.proceedWishlist = true;
            }
        }
    };
    CustomorderPage.prototype.customInputChanged = function (field, val) {
        var value = parseFloat(val);
        if (field == "weight") {
            this.proceedWishlist = false;
            if (this.item['min_weight'] > 0 || this.item['max_weight'] > 0) {
                if (value >= this.item['min_weight'] && value <= this.item['max_weight']) {
                    this.inpErrorMsg['weight'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_weight']) {
                    this.inpErrorMsg['weight'] = "Invalid";
                }
                else if (value > this.item['max_weight']) {
                    this.inpErrorMsg['weight'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['weight'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "len") {
            if (this.item['min_length'] > 0 || this.item['max_length'] > 0) {
                if (value >= this.item['min_length'] && value <= this.item['max_length']) {
                    this.inpErrorMsg['len'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_length']) {
                    this.inpErrorMsg['len'] = "Invalid";
                }
                else if (value > this.item['max_length']) {
                    this.inpErrorMsg['len'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['len'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "width") {
            if (this.item['min_width'] > 0 || this.item['max_width'] > 0) {
                if (value >= this.item['min_width'] && value <= this.item['max_width']) {
                    this.inpErrorMsg['width'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_width']) {
                    this.inpErrorMsg['width'] = "Invalid";
                }
                else if (value > this.item['max_width']) {
                    this.inpErrorMsg['width'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['width'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "dia") {
            if (this.item['min_dia'] > 0 || this.item['max_dia'] > 0) {
                if (value >= this.item['min_dia'] && value <= this.item['max_dia']) {
                    this.inpErrorMsg['dia'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_dia']) {
                    this.inpErrorMsg['dia'] = "Invalid";
                }
                else if (value > this.item['max_dia']) {
                    this.inpErrorMsg['dia'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['dia'] = "Valid";
                    this.validateFields();
                }
            }
        }
    };
    CustomorderPage.prototype.toggle = function (block) {
        if (block == 'desDetail')
            this.showDesignDet = (this.showDesignDet == true ? false : true);
        if (block == 'customize')
            this.showCustomize = (this.showCustomize == true ? false : true);
    };
    CustomorderPage.prototype.setPurity = function (data, name) {
        this.inpErrorMsg['purity'] = "Valid";
        this.customData['id_purity'] = data;
        this.validateFields();
    };
    CustomorderPage.prototype.changeImaged = function (image) {
        this.item['defaultImage'] = image;
    };
    CustomorderPage.prototype.ngAfterViewInit = function () {
    };
    CustomorderPage.prototype.proceedToWishlist = function () {
        // let currentCustomer = localStorage.getItem( 'currentCustomer' );
        // if ( currentCustomer != null ) {
        //   this.addToWishlist();        
        // }else{
        //   this.openAddQuickCus();
        // }
        console.log(this.customData);
        if (this.customData['id_purity'] == '' || this.customData['weight'] == '' || this.customData['pcs'] == '' || this.customData['due_date'] == '') {
            console.log(this.customData);
            if (this.customData['id_purity'] == '') {
                this.common.presentToast('Please Select Purity *', 1000);
            }
            else if (this.customData['weight'] == '') {
                this.common.presentToast('Please Enter Weight *', 1000);
            }
            else if (this.customData['pcs'] == '') {
                this.common.presentToast('Please Enter Pieces *', 1000);
            }
            else if (this.customData['due_date'] == '') {
                this.common.presentToast('Please Select Date *', 1000);
            }
        }
        else {
            this.openAddQuickCus();
        }
    };
    CustomorderPage.prototype.openWishlist = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__wishlist_wishlist__["a" /* WishlistPage */]);
    };
    CustomorderPage.prototype.stoneChaned = function (value, idx) {
        console.log(value + ' ' + idx);
        console.log(this.item['stones']);
    };
    CustomorderPage.prototype.addToWishlist = function () {
        // this.loader = this.loadingCtrl.create( {
        //   content: "Please wait...",
        //   spinner: 'bubbles',
        // } );
        // this.loader.present();
        // console.log(this.item['stones']);
        // let cusData = JSON.parse( localStorage.getItem( 'currentCustomer' ) );
        // let empData = JSON.parse(localStorage.getItem('empDetail'));
        // console.log(empData);
        // console.log(this.empData);
        // this.wishlistData = {
        //                       'id_customer'     : cusData['id_customer'],
        //                       'id_branch'       : empData['id_branch'],
        //                       'id_employee'     : empData['id_employee'],
        //                       'item_type'       : 3, // E-catalog
        //                       'is_customized'   : 1,
        //                       'id_product'      : this.item['pro_id'],
        //                       'design_no'       : this.item['design_no'],
        //                       'id_sub_design'   : this.item['id_sub_design'],
        //                       'wast_percent'    : 1,
        //                       'id_mc_type'      : this.item['mc_type'],
        //                       'mc'              : this.item['mc_value'],
        //                       'stn_amt'         : 0,
        //                       'due_date'        : this.customData['due_date'],
        //                       'length'          : this.customData['len'],
        //                       'width'           : this.customData['width'],
        //                       'dia'             : this.customData['dia'],
        //                       'weight'          : this.customData['weight'],
        //                       'id_size'            : this.customData['id_size'],
        //                       'pcs'             : this.customData['pcs'],
        //                       'id_purity'       : this.customData['id_purity'],
        //                       'hook_type'       : this.customData['hook_type'],
        //                       'sample_details'  : this.customData['sample_details'],
        //                       'sample_images'   : this.customData['sample_images'],
        //                       'stones'          : this.item['stones'],
        //                       'status'          : 1,
        //                       'id_wishlist'     : this.customData['id_wishlist'],
        //                     };
        //                     this.retail.addToCart({"id_branch" : empData['id_branch'], "id_employee" : empData['id_employee'], "id_customer" : cusData['id_customer'], "status" : 1,"items" :[this.wishlistData]}).then(result => { 
        //                       this.loader.dismiss();
        //   this.common.presentToast( result.msg,'' );
        //   if(result.status){ 
        //     this.hideAddToWishlist = true;
        //     this.navCtrl.setRoot(CartPage);
        //   }
        //   if(result.status){ 
        //     this.hideAddToWishlist = true;
        //   }
        // });
        // let cusData = JSON.parse( localStorage.getItem( 'currentCustomer' ) );
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        console.log(empData);
        console.log(this.empData);
        this.wishlistData = {
            'id_customer': '',
            'id_branch': empData['id_branch'],
            'id_employee': empData['id_employee'],
            'item_type': 3,
            'is_customized': 1,
            'id_product': this.item['pro_id'],
            'design_no': this.item['design_no'],
            'id_sub_design': this.item['id_sub_design'],
            'wast_percent': 1,
            'id_mc_type': this.item['mc_type'],
            'mc': this.item['mc_value'],
            'stn_amt': 0,
            'due_date': this.customData['due_date'],
            'length': this.customData['len'],
            'width': this.customData['width'],
            'dia': this.customData['dia'],
            'weight': this.customData['weight'],
            'id_size': this.customData['id_size'],
            'pcs': this.customData['pcs'],
            'id_purity': this.customData['id_purity'],
            'hook_type': this.customData['hook_type'],
            'sample_details': this.customData['sample_details'],
            'image': this.item['defaultImage'],
            'sample_images': this.customData['sample_images'],
            'stones': this.item['stones'],
            'status': 1,
            'id_wishlist': this.customData['id_wishlist'],
            'sub_design_name': this.item['sub_design_name'],
            'design_name': this.item['design_name'],
            'product_name': this.item['product_name'],
            'id_category': this.id_ret_category,
        };
        if (localStorage.getItem('carts') == null) {
            localStorage.setItem('carts', JSON.stringify({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": '', "status": 1, "items": [this.wishlistData] }));
        }
        else {
            var local = JSON.parse(localStorage.getItem('carts'))['items'];
            console.log(local);
            local.push(this.wishlistData);
            console.log(local);
            localStorage.setItem('carts', JSON.stringify({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": '', "status": 1, "items": local }));
        }
        // this.loader.dismiss();
        this.common.presentToast("Product added to cart successfully", '');
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_11__cart_cart__["a" /* CartPage */]);
    };
    CustomorderPage.prototype.updateWishlist = function () {
        var _this = this;
        this.loader = this.loadingCtrl.create({
            content: "Please wait...",
            spinner: 'bubbles',
        });
        this.loader.present();
        var cusData = JSON.parse(localStorage.getItem('currentCustomer'));
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        this.wishlistData = {
            'id_customer': cusData['id_customer'],
            'id_branch': empData['id_branch'],
            'id_employee': empData['id_employee'],
            'item_type': 3,
            'is_customized': 1,
            'id_product': this.item['pro_id'],
            'design_no': this.item['design_no'],
            'id_sub_design': this.item['id_sub_design'],
            'wast_percent': 1,
            'id_mc_type': this.item['mc_type'],
            'mc': this.item['mc_value'],
            'stn_amt': 0,
            'length': this.customData['len'],
            'due_date': this.customData['due_date'],
            'width': this.customData['width'],
            'dia': this.customData['dia'],
            'weight': this.customData['weight'],
            'size': this.customData['size'],
            'pcs': this.customData['pcs'],
            'id_purity': this.customData['id_purity'],
            'hook_type': this.customData['hook_type'],
            'sample_details': this.customData['sample_details'],
            'sample_images': this.customData['sample_images'],
            'stones': this.item['stones'],
            'status': this.customData['status']
        };
        this.retail.addToCart({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": cusData['id_customer'], "status": 1, "items": [this.wishlistData] }).then(function (result) {
            _this.loader.dismiss();
            _this.common.presentToast(result.msg, '');
            if (result.status) {
                _this.hideUpdateItem = true;
                _this.navCtrl.pop();
            }
        });
    };
    CustomorderPage.prototype.openAddQuickCus = function () {
        // let modal = this.modal.create(AddQuickCus, {"page":"design-detail"}, {enableBackdropDismiss: false})
        // modal.present();
        // modal.onDidDismiss(mData => {
        //   if(mData != null){
        //     localStorage.setItem( 'currentCustomer', JSON.stringify( mData ) );
        //     this.addToWishlist();   
        //   }
        // });
        //   let modal = this.modal.create(CusSearchPage,{'show':'true',"page":"design-detail"}, {enableBackdropDismiss: false})
        //   modal.present();
        //   modal.onDidDismiss(mData => {
        //     console.log(mData)
        //     if(mData != null){
        //       localStorage.setItem( 'currentCustomer', JSON.stringify( mData ) );
        //       this.addToWishlist();
        // }else{
        //     }
        //   });
        this.addToWishlist();
    };
    // Sample image
    CustomorderPage.prototype.deletePhoto = function (index) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: 'Do you want to delete the image?',
            message: '',
            buttons: [
                {
                    text: 'No',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                }, {
                    text: 'Yes',
                    handler: function () {
                        console.log('Agree clicked');
                        _this.targetPaths.splice(index, 1);
                        _this.filenames.splice(index, 1);
                        _this.deletephotos.push(_this.filenames[index]);
                        _this.lastImage == '';
                    }
                }
            ]
        });
        confirm.present();
    };
    CustomorderPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.PHOTOLIBRARY);
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    CustomorderPage.prototype.takePicture = function (sourceType) {
        var _this = this;
        console.log(sourceType);
        // this.navCtrl.push(EditorPage,{images:'assets/img/earings.jpg'});
        // Create options for the   Dialog
        var options = {
            quality: 75,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
        };
        console.log(options);
        // Get the data of an image
        this.camera.getPicture(options).then(function (imagePath) {
            console.log("getPicture");
            _this.loader = _this.loadingCtrl.create({
                content: "Fetching...",
                spinner: 'bubbles',
            });
            _this.loader.present();
            console.log("imagePath : " + imagePath);
            if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.PHOTOLIBRARY) {
                _this.filePath.resolveNativePath(imagePath)
                    .then(function (filePath) {
                    console.log('ttttttttttt', _this.filePath);
                    var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                    var currentName = imagePath.substring(imagePath.lastIndexOf('/') + 1, imagePath.lastIndexOf('?'));
                    _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName());
                    // this.uploadImage();
                });
            }
            else {
                var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);
                var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);
                _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName());
                // this.uploadImage();
            }
        }, function (err) {
            console.log(err);
            _this.common.presentToast('Error while selecting image.', '');
        });
    };
    // Create a new name for the image
    CustomorderPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    CustomorderPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName) {
        var _this = this;
        console.log("#### copyFileToLocalDir ####");
        console.log("namePath/correctPath : " + namePath);
        console.log("currentName : " + currentName);
        console.log("createdFileName : " + newFileName);
        console.log("Directory : " + cordova.file.dataDirectory);
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            console.log("#### copyFile -- Success ####");
            console.log(success);
            _this.lastImage = newFileName;
            var targetPath = _this.pathForImage(newFileName);
            _this.targetPaths.push(targetPath);
            _this.filenames.push(_this.lastImage);
            // this.uploadImage();
            _this.loader.dismiss();
            console.log(targetPath);
            console.log(_this.filenames);
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_img_editor_editor__["a" /* EditorPage */], { "images": targetPath, "design_no": _this.design_no });
        }, function (error) {
            _this.common.presentToast('Error while storing file.', '');
        });
    };
    // Always get the accurate path to your apps folder
    CustomorderPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    CustomorderPage.prototype.show = function () {
        var _this = this;
        // this.keyboard.close();
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            /*date => console.log('Got date: ', date),
            err => console.log('Error occurred while getting date: ', err),*/
            /*console.log('Got date: '+ date);
            var curDate = new Date();
            curDate.setDate(curDate.getDate() - 10);*/
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.customData['due_date'] = yy + "-" + mmm + "-" + ddd;
            console.log(_this.customData['due_date']);
        });
    };
    CustomorderPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-customorder',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\customorder\customorder.html"*/'<ion-header>\n  <ion-navbar>\n    <button ion-button menuToggle>\n      <ion-icon name="menu"></ion-icon>\n    </button>\n    <ion-title>Custom Order</ion-title>\n  </ion-navbar>\n</ion-header>\n<ion-content> \n   \n     <ion-card no-margin>  \n      <ion-card-content  no-padding>\n        <ion-row padding >\n\n          <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" >\n            <ion-item no-padding>\n              <ion-label color="label-color" stacked>Product Name <span class="required"> *</span></ion-label>\n              <ion-input type="text" placeholder="Enter product name" [(ngModel)]="customData.proname"> </ion-input>\n            </ion-item>\n            <!-- <span float-right [ngClass]="inpErrorMsg[\'weight\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_weight > 0">Min. {{item.min_weight}} g </span><span *ngIf="item.max_weight > 0">Max. {{item.max_weight}} g</span></span> -->\n          </ion-col>\n\n            <ion-col col-12 class="custom-2col" *ngIf="item.purities?.length > 0" >\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Purity  <span class="required"> *</span></ion-label> \n              </ion-item>\n              <ion-scroll class="purity-scroll-blk" scrollX="true">  \n                <ion-chip #chip1 *ngFor="let pur of item.purities" color="light" [ngClass]="customData[\'id_purity\'] == pur[\'id_purity\'] ? \'selected\' : \'unselected\'" (click)="setPurity(pur.id_purity,pur.purity)" style="margin-left: 5%;">\n                  <ion-label>{{pur.purity}}</ion-label><ion-icon name="checkmark-circle" style="background-color:transparent!important;" *ngIf="item[\'id_purity\'] == pur[\'id_purity\']"></ion-icon> \n                </ion-chip>\n              </ion-scroll>\n            </ion-col> \n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" >\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Weight <span class="required"> *</span></ion-label>\n                <ion-input type="number" placeholder="Enter weight in grams" [(ngModel)]="customData.weight" (ionChange)="customInputChanged(\'weight\',customData.weight)"> </ion-input>\n              </ion-item>\n              <span float-right [ngClass]="inpErrorMsg[\'weight\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_weight > 0">Min. {{item.min_weight}} g </span><span *ngIf="item.max_weight > 0">Max. {{item.max_weight}} g</span></span>\n            </ion-col>\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Pieces *</ion-label>\n                <ion-input type="number" placeholder="Pieces" [(ngModel)]="customData.pcs" > </ion-input>\n                <span float-right ></span>\n              </ion-item>\n            </ion-col>\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Due Date *</ion-label>\n                <ion-input type="number" readonly="true" class="ion_datetime" placeholder="Select Date" displayFormat="DD-MM-YYYY" [(ngModel)]="customData.due_date" (focusin)="show()"> </ion-input>\n                <span float-right ></span>\n              </ion-item>\n            </ion-col>\n           \n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" *ngIf="item.weights?.length > 0" >\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Weight</ion-label>\n                <ion-select [(ngModel)]="customData.id_weight" placeholder="-- Choose --">\n                  <ion-option *ngFor="let s of item.weights" [value]="s.id_weight">{{s.name}}</ion-option>\n                </ion-select>\n              </ion-item>\n          </ion-col>\n\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" *ngIf="item.sizes?.length > 0" >\n                <ion-item no-padding>\n                  <ion-label color="label-color" stacked>Size</ion-label>\n                  <ion-select [(ngModel)]="customData.id_size" placeholder="-- Choose --">\n                    <ion-option *ngFor="let s of item.sizes" [value]="s.id_size">{{s.value}} {{s.name}}</ion-option>\n                  </ion-select>\n                </ion-item>\n            </ion-col>\n\n         \n\n            <ion-col col-12 class="custom-2col">\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Description</ion-label>\n                <ion-textarea [(ngModel)]="customData.sample_details" placeholder="Enter your description" rows="5"></ion-textarea>\n              </ion-item>\n            </ion-col>\n            <ion-col col-12 class="custom-2col">\n              <ion-item no-padding>\n                <ion-label color="label-color" stacked>Upload Sample</ion-label> \n                <button *ngIf="targetPath?.length <= 10" ion-button outline small color="dark" type="button" item-right icon-left (click)="presentActionSheet()">\n                    <ion-icon name="camera"></ion-icon>\n                    Choose Image\n                </button> \n              </ion-item>\n              <ion-grid> \n                <ion-row *ngIf="showedit"> \n                  <ion-col col-6 *ngFor="let targetPath of targetPaths; let id = index"> \n                    <ion-card class="block"> \n                      <ion-icon name="trash" class="deleteIcon" (click)="deletePhoto(id)"></ion-icon> <img [src]="targetPath" *ngIf="targetPath" /> \n                    </ion-card> \n                  </ion-col> \n                </ion-row>  \n              </ion-grid> \n            </ion-col> \n        </ion-row> \n      </ion-card-content>\n    </ion-card>\n  \n</ion-content> \n<ion-footer >\n  <button ion-button  icon-start full class="theme-btn" (click)="proceedToWishlist()">Add to Cart</button> \n</ion-footer>  \n\n    \n    \n    \n    \n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\customorder\customorder.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_12__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_9__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], CustomorderPage);
    return CustomorderPage;
}());

//# sourceMappingURL=customorder.js.map

/***/ }),

/***/ 409:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(410);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(414);


Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_1__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 414:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export declarations */
/* unused harmony export entryComponents */
/* unused harmony export providers */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_img_viewer__ = __webpack_require__(450);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_splash_screen__ = __webpack_require__(370);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_status_bar__ = __webpack_require__(374);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_platform_browser_animations__ = __webpack_require__(474);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_storage__ = __webpack_require__(476);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__app_component__ = __webpack_require__(480);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_market__ = __webpack_require__(376);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_date_picker__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pipes_truncate_truncate__ = __webpack_require__(751);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_toast__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_printer__ = __webpack_require__(74);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_network__ = __webpack_require__(385);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_app_version__ = __webpack_require__(386);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_android_permissions__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__ionic_native_file_opener__ = __webpack_require__(75);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__ionic_native_file_chooser__ = __webpack_require__(76);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__ionic_native_crop__ = __webpack_require__(395);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__ionic_native_transfer__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__pages_home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__pages_login_login__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__pages_maintenance_maintenance__ = __webpack_require__(399);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__pages_introimg_introimg__ = __webpack_require__(398);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__pages_otp_otp__ = __webpack_require__(387);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pages_estimation_estimation__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pages_cus_register_cus_register__ = __webpack_require__(182);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pages_category_category__ = __webpack_require__(183);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__pages_products_products__ = __webpack_require__(392);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__pages_designs_designs__ = __webpack_require__(393);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__pages_e_catalog_e_catalog__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__pages_design_detail_design_detail__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__pages_img_editor_editor__ = __webpack_require__(184);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__pages_wishlist_wishlist__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__pages_cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__pages_stock_entry_stock_entry__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__pages_modal_countrymodel_countrymodel__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__pages_modal_customer_customer__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__pages_modal_employee_employee__ = __webpack_require__(188);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__pages_modal_add_esti_item_add_esti_item__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__pages_modal_mas_search_mas_search__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__pages_modal_esti_basic_detail_esti_basic_detail__ = __webpack_require__(401);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__pages_modal_filter_filter__ = __webpack_require__(396);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__pages_modal_add_quick_cus_add_quick_cus__ = __webpack_require__(180);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__pages_modal_add_stone_detail_add_stone_detail__ = __webpack_require__(388);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__ionic_native_barcode_scanner__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__app_pipes_filter_pipe_pipe__ = __webpack_require__(752);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__components_tree_view_tree_view__ = __webpack_require__(753);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__components_items_list_items_list__ = __webpack_require__(754);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__pages_edittag_edittag__ = __webpack_require__(400);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57_ionic_cordova_plugin_ratio_crop__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__components_carousel_carousel__ = __webpack_require__(755);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__pages_estimationlist_estimationlist__ = __webpack_require__(402);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__ionic_native_bluetooth_serial__ = __webpack_require__(390);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__pages_bluetooth_bluetooth__ = __webpack_require__(181);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__pages_branch_branch__ = __webpack_require__(397);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__pages_subdesignimg_subdesignimg__ = __webpack_require__(404);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__pages_subdesignlist_subdesignlist__ = __webpack_require__(403);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__pages_cusupdate_cusupdate__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__pages_subdesign_subdesign__ = __webpack_require__(394);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__pages_designimg_designimg__ = __webpack_require__(406);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_68__pages_designlist_designlist__ = __webpack_require__(405);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_69__pages_customorder_customorder__ = __webpack_require__(407);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_70__pages_gift_gift__ = __webpack_require__(391);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_71__pages_other_other__ = __webpack_require__(389);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_72_ngx_image_compress__ = __webpack_require__(185);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_73__ionic_native_in_app_browser__ = __webpack_require__(408);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_74__ionic_native_device__ = __webpack_require__(176);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












//import { SocialSharing } from '@ionic-native/social-sharing';


//import { Ionic2RatingModule } from 'ionic2-rating/';

//import { OneSignal } from '@ionic-native/onesignal';
// import { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';












// PAGES
















// MODAL










//Pipes

// COMPONENTS



















/* import { AnimationService, AnimationBuilder } from 'css-animator'; */


var pages = [
    __WEBPACK_IMPORTED_MODULE_9__app_component__["a" /* MyApp */],
    __WEBPACK_IMPORTED_MODULE_27__pages_home_home__["a" /* HomePage */],
    __WEBPACK_IMPORTED_MODULE_28__pages_login_login__["a" /* LoginPage */],
    __WEBPACK_IMPORTED_MODULE_29__pages_maintenance_maintenance__["a" /* MaintenancePage */],
    __WEBPACK_IMPORTED_MODULE_30__pages_introimg_introimg__["a" /* IntroimgPage */],
    __WEBPACK_IMPORTED_MODULE_31__pages_otp_otp__["a" /* OtpPage */],
    __WEBPACK_IMPORTED_MODULE_32__pages_estimation_estimation__["a" /* EstiPage */],
    __WEBPACK_IMPORTED_MODULE_33__pages_cus_register_cus_register__["a" /* CusRegisterPage */],
    __WEBPACK_IMPORTED_MODULE_34__pages_category_category__["a" /* CategoryPage */],
    __WEBPACK_IMPORTED_MODULE_35__pages_products_products__["a" /* ProductsPage */],
    __WEBPACK_IMPORTED_MODULE_36__pages_designs_designs__["a" /* DesignsPage */],
    __WEBPACK_IMPORTED_MODULE_37__pages_e_catalog_e_catalog__["a" /* EcatalogPage */],
    __WEBPACK_IMPORTED_MODULE_38__pages_design_detail_design_detail__["a" /* DesignDetailPage */],
    //MODAL
    __WEBPACK_IMPORTED_MODULE_43__pages_modal_countrymodel_countrymodel__["a" /* CountrymodelPage */],
    __WEBPACK_IMPORTED_MODULE_44__pages_modal_customer_customer__["a" /* CusSearchPage */],
    __WEBPACK_IMPORTED_MODULE_46__pages_modal_add_esti_item_add_esti_item__["a" /* AddEstiItemPage */],
    __WEBPACK_IMPORTED_MODULE_45__pages_modal_employee_employee__["a" /* EmpSearchPage */],
    __WEBPACK_IMPORTED_MODULE_47__pages_modal_mas_search_mas_search__["a" /* MasSearchPage */],
    __WEBPACK_IMPORTED_MODULE_48__pages_modal_esti_basic_detail_esti_basic_detail__["a" /* EstiBasicDetailPage */],
    __WEBPACK_IMPORTED_MODULE_49__pages_modal_filter_filter__["a" /* FilterPage */],
    __WEBPACK_IMPORTED_MODULE_39__pages_img_editor_editor__["a" /* EditorPage */],
    __WEBPACK_IMPORTED_MODULE_50__pages_modal_add_quick_cus_add_quick_cus__["a" /* AddQuickCus */],
    __WEBPACK_IMPORTED_MODULE_51__pages_modal_add_stone_detail_add_stone_detail__["a" /* AddStoneDetailPage */],
    __WEBPACK_IMPORTED_MODULE_40__pages_wishlist_wishlist__["a" /* WishlistPage */],
    __WEBPACK_IMPORTED_MODULE_41__pages_cart_cart__["a" /* CartPage */],
    __WEBPACK_IMPORTED_MODULE_42__pages_stock_entry_stock_entry__["a" /* StockCodeEntryPage */],
    __WEBPACK_IMPORTED_MODULE_56__pages_edittag_edittag__["a" /* EdittagPage */],
    __WEBPACK_IMPORTED_MODULE_59__pages_estimationlist_estimationlist__["a" /* EstimationlistPage */],
    __WEBPACK_IMPORTED_MODULE_61__pages_bluetooth_bluetooth__["a" /* BluetoothPage */],
    __WEBPACK_IMPORTED_MODULE_62__pages_branch_branch__["a" /* BranchPage */],
    __WEBPACK_IMPORTED_MODULE_63__pages_subdesignimg_subdesignimg__["a" /* SubdesignimgPage */],
    __WEBPACK_IMPORTED_MODULE_64__pages_subdesignlist_subdesignlist__["a" /* SubdesignlistPage */],
    __WEBPACK_IMPORTED_MODULE_65__pages_cusupdate_cusupdate__["a" /* CusupdatePage */],
    __WEBPACK_IMPORTED_MODULE_66__pages_subdesign_subdesign__["a" /* SubdesignPage */],
    __WEBPACK_IMPORTED_MODULE_67__pages_designimg_designimg__["a" /* DesignimgPage */],
    __WEBPACK_IMPORTED_MODULE_68__pages_designlist_designlist__["a" /* DesignlistPage */],
    __WEBPACK_IMPORTED_MODULE_69__pages_customorder_customorder__["a" /* CustomorderPage */],
    __WEBPACK_IMPORTED_MODULE_70__pages_gift_gift__["a" /* GiftPage */],
    __WEBPACK_IMPORTED_MODULE_71__pages_other_other__["a" /* OtherPage */]
];
var components = [
    __WEBPACK_IMPORTED_MODULE_58__components_carousel_carousel__["a" /* CarouselComponent */],
    __WEBPACK_IMPORTED_MODULE_54__components_tree_view_tree_view__["a" /* TreeView */],
    __WEBPACK_IMPORTED_MODULE_55__components_items_list_items_list__["a" /* ItemsListComponent */]
];
var modals = [
    __WEBPACK_IMPORTED_MODULE_43__pages_modal_countrymodel_countrymodel__["a" /* CountrymodelPage */],
    __WEBPACK_IMPORTED_MODULE_44__pages_modal_customer_customer__["a" /* CusSearchPage */],
    __WEBPACK_IMPORTED_MODULE_46__pages_modal_add_esti_item_add_esti_item__["a" /* AddEstiItemPage */],
    __WEBPACK_IMPORTED_MODULE_45__pages_modal_employee_employee__["a" /* EmpSearchPage */],
    __WEBPACK_IMPORTED_MODULE_47__pages_modal_mas_search_mas_search__["a" /* MasSearchPage */],
    __WEBPACK_IMPORTED_MODULE_48__pages_modal_esti_basic_detail_esti_basic_detail__["a" /* EstiBasicDetailPage */],
    __WEBPACK_IMPORTED_MODULE_49__pages_modal_filter_filter__["a" /* FilterPage */],
];
var pipes = [
    __WEBPACK_IMPORTED_MODULE_12__pipes_truncate_truncate__["a" /* TruncatePipe */],
    __WEBPACK_IMPORTED_MODULE_53__app_pipes_filter_pipe_pipe__["a" /* FilterPipe */]
];
function declarations() {
    return [pages, components, modals, pipes];
}
function entryComponents() {
    return pages;
}
function providers() {
    return [
        __WEBPACK_IMPORTED_MODULE_74__ionic_native_device__["a" /* Device */], __WEBPACK_IMPORTED_MODULE_73__ionic_native_in_app_browser__["a" /* InAppBrowser */], __WEBPACK_IMPORTED_MODULE_72_ngx_image_compress__["a" /* NgxImageCompressService */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_market__["a" /* Market */], __WEBPACK_IMPORTED_MODULE_17__ionic_native_app_version__["a" /* AppVersion */], __WEBPACK_IMPORTED_MODULE_13__ionic_native_image_picker__["a" /* ImagePicker */], __WEBPACK_IMPORTED_MODULE_11__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_18__ionic_native_android_permissions__["a" /* AndroidPermissions */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_status_bar__["a" /* StatusBar */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_splash_screen__["a" /* SplashScreen */], __WEBPACK_IMPORTED_MODULE_14__ionic_native_toast__["a" /* Toast */], __WEBPACK_IMPORTED_MODULE_16__ionic_native_network__["a" /* Network */], __WEBPACK_IMPORTED_MODULE_15__ionic_native_printer__["a" /* Printer */], __WEBPACK_IMPORTED_MODULE_19__ionic_native_file_opener__["a" /* FileOpener */], __WEBPACK_IMPORTED_MODULE_20__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_21__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_22__ionic_native_file_chooser__["a" /* FileChooser */], __WEBPACK_IMPORTED_MODULE_23__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_24__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_25__ionic_native_crop__["a" /* Crop */], __WEBPACK_IMPORTED_MODULE_26__ionic_native_transfer__["a" /* Transfer */], __WEBPACK_IMPORTED_MODULE_57_ionic_cordova_plugin_ratio_crop__["a" /* RatioCrop */], __WEBPACK_IMPORTED_MODULE_52__ionic_native_barcode_scanner__["a" /* BarcodeScanner */], __WEBPACK_IMPORTED_MODULE_60__ionic_native_bluetooth_serial__["a" /* BluetoothSerial */],
        { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["u" /* ErrorHandler */], useClass: __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["n" /* IonicErrorHandler */], ModalController: __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["s" /* ModalController */] }
    ];
}
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* NgModule */])({
            declarations: declarations(),
            imports: [
                __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["o" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_9__app_component__["a" /* MyApp */], {
                    scrollPadding: false,
                    scrollAssist: false
                }, {
                    links: []
                }), __WEBPACK_IMPORTED_MODULE_8__ionic_storage__["a" /* IonicStorageModule */].forRoot(), __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_6__angular_http__["c" /* HttpModule */], __WEBPACK_IMPORTED_MODULE_7__angular_platform_browser_animations__["a" /* BrowserAnimationsModule */], __WEBPACK_IMPORTED_MODULE_3_ionic_img_viewer__["a" /* IonicImageViewerModule */]
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_2_ionic_angular__["m" /* IonicApp */]],
            entryComponents: entryComponents(),
            providers: providers()
        })
    ], AppModule);
    return AppModule;
}());

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 480:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MyApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__ = __webpack_require__(374);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(370);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_market__ = __webpack_require__(376);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_network__ = __webpack_require__(385);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_toast__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_app_version__ = __webpack_require__(386);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_ionic_angular_index__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_android_permissions__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_home_home__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_login_login__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_introimg_introimg__ = __webpack_require__(398);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_maintenance_maintenance__ = __webpack_require__(399);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__pages_estimation_estimation__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__pages_cus_register_cus_register__ = __webpack_require__(182);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__pages_category_category__ = __webpack_require__(183);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__pages_e_catalog_e_catalog__ = __webpack_require__(186);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__pages_wishlist_wishlist__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__pages_cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__pages_stock_entry_stock_entry__ = __webpack_require__(187);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__pages_edittag_edittag__ = __webpack_require__(400);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__pages_estimationlist_estimationlist__ = __webpack_require__(402);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__pages_subdesignlist_subdesignlist__ = __webpack_require__(403);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__pages_designlist_designlist__ = __webpack_require__(405);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__pages_customorder_customorder__ = __webpack_require__(407);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__ionic_native_in_app_browser__ = __webpack_require__(408);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__ionic_native_device__ = __webpack_require__(176);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






//import { OneSignal } from '@ionic-native/onesignal';






//Pages


















var MyApp = /** @class */ (function () {
    function MyApp(device, iab, file, androidPermissions, market, platform, events, menu, statusBar, splashScreen, network, loadingCtrl, toastCtrl, toast, alertCtrl, appVersion, app, modalCtrl, common) {
        var _this = this;
        this.device = device;
        this.iab = iab;
        this.file = file;
        this.market = market;
        this.platform = platform;
        this.events = events;
        this.menu = menu;
        this.network = network;
        this.loadingCtrl = loadingCtrl;
        this.toastCtrl = toastCtrl;
        this.toast = toast;
        this.alertCtrl = alertCtrl;
        this.appVersion = appVersion;
        this.app = app;
        this.modalCtrl = modalCtrl;
        this.common = common;
        this.rootPage = __WEBPACK_IMPORTED_MODULE_13__pages_login_login__["a" /* LoginPage */];
        this.loginstatus = false;
        this.showSplash = true;
        this.pages = [];
        this.overlayHidden = true;
        this.lastBack = 0;
        this.allowClose = false;
        this.app_version = 0;
        this.count = 1;
        this.foot = true;
        this.id_branch = 0;
        this.clickedMenu = 0;
        events.subscribe('user:created', function (user) {
            // user and time are the same arguments passed in `events.publish(user, time)
            _this.foot = user;
            console.log('Welcome', user);
        });
        platform.ready().then(function () {
            androidPermissions.requestPermissions([
                androidPermissions.PERMISSION.READ_EXTERNAL_STORAGE,
                androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE,
                androidPermissions.PERMISSION.READ_CONTACTS,
                androidPermissions.PERMISSION.READ_SMS
            ]);
            // Okay, so the platform is ready and our plugins are available.
            // Here you can do any higher level native things you might need.
            var disconnectSubscription = _this.network.onDisconnect().subscribe(function () {
                _this.presentAlert('Turn on Wi-Fi or mobile data.', 'You are Offline', '');
            });
            //disconnectSubscription.unsubscribe();
            var connectSubscription = _this.network.onConnect().subscribe(function () {
                //this.presentAlert('Turn on Wi-Fi or mobile connection','You are Offline');
            });
            //	connectSubscription.unsubscribe();
            if (platform.is('cordova')) {
                appVersion.getVersionNumber().then(function (s) {
                    _this.app_version = s;
                    console.log(_this.app_version);
                });
            }
            // Delete downloaded Estimation files in local
            _this.storageDirectory = _this.file.externalDataDirectory;
            _this.file.resolveDirectoryUrl(_this.storageDirectory).then(function (resolvedDirectory) {
                _this.file.listDir(_this.storageDirectory, _this.common.cmpShortName).then(function (data) {
                    console.log('resolvedDirectory', data);
                    if (data) {
                        var now = new Date().toISOString().split('T')[0];
                        var nowTimeStamp = Math.floor((new Date(now)).getTime() / 1000);
                        console.log(nowTimeStamp);
                        // Delete directory
                        for (var i = 0; i < data.length; i++) {
                            console.log('----- list Directory', data[i].name);
                            var folderTimeStamp = Math.floor((new Date(data[i].name)).getTime() / 1000);
                            var CurrentDate = new Date();
                            console.log(data[i].name);
                            console.log(CurrentDate.toISOString().split('T')[0]);
                            if (CurrentDate.toISOString().split('T')[0] == data[i].name) {
                                console.log(1111111);
                            }
                            else {
                                console.log(222222);
                                _this.file.removeRecursively(resolvedDirectory.nativeURL + '' + _this.common.cmpShortName + '/', data[i].name).then(function () {
                                    console.log("Directory deleted successfully");
                                }).catch(function (err) {
                                    console.log(err);
                                    console.log("Error occurred while deleting directory");
                                });
                            }
                        }
                    }
                    else {
                        console.log("No directories found");
                    }
                }).catch(function (err1) {
                    console.log(err1);
                    console.log("Error occurred while listDir");
                });
            }).catch(function (err2) {
                console.log(err2);
                console.log("Error occurred while resolveDirectoryUrl");
            });
            platform.registerBackButtonAction(function () {
                if (_this.nav.getActive()['name'] == 'EstiBasicDetailPage') {
                    _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_12__pages_home_home__["a" /* HomePage */]);
                }
                else if (_this.nav.getActive()['name'] != 'PaymentPage') {
                    var overlay = _this.app._appRoot._overlayPortal.getActive();
                    var nav = _this.app.getActiveNav();
                    var closeDelay = 2000;
                    var spamDelay = 500;
                    if (overlay && overlay.dismiss) {
                        overlay.dismiss();
                    }
                    else if (nav.canGoBack()) {
                        nav.pop();
                    }
                    else if (Date.now() - _this.lastBack > spamDelay && !_this.allowClose) {
                        _this.allowClose = true;
                        var toast_1 = _this.toastCtrl.create({
                            message: "Press back again to exit",
                            duration: closeDelay,
                            dismissOnPageChange: true
                        });
                        toast_1.onDidDismiss(function () {
                            _this.allowClose = false;
                        });
                        toast_1.present();
                    }
                    else if (Date.now() - _this.lastBack < closeDelay && _this.allowClose) {
                        platform.exitApp();
                    }
                    _this.lastBack = Date.now();
                }
            });
            statusBar.styleDefault();
            statusBar.overlaysWebView(false);
            splashScreen.hide();
            // check app version
            _this.common.getCusAppVersion().then(function (data) {
                _this.versionData = data;
                _this.branch_settings = data['settings']['branch_settings'];
                _this.login_branch = data['settings']['login_branch'];
                localStorage.setItem('versionData', JSON.stringify(_this.versionData));
                console.log(_this.versionData);
                if (_this.versionData.mode == 1) {
                    _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_15__pages_maintenance_maintenance__["a" /* MaintenancePage */], { 'maintainData': _this.versionData });
                }
                else {
                    var remember = JSON.parse(localStorage.getItem('remember'));
                    if (remember == true) {
                        localStorage.setItem('logstatus', JSON.stringify(true));
                    }
                    else {
                        localStorage.setItem('logstatus', JSON.stringify(false));
                    }
                    if (platform.is('android')) {
                        if ((_this.versionData.android) != _this.app_version) {
                            if ((_this.versionData.newver_android) != _this.app_version) {
                                _this.presentAlert(_this.versionData.msg, _this.versionData.title, _this.versionData.path);
                            }
                        }
                    }
                    else if (platform.is('ios')) {
                        if ((_this.versionData.ios) != _this.app_version) {
                            if ((_this.versionData.newver_ios) != _this.app_version) {
                                _this.presentAlert(_this.versionData.iMsg, _this.versionData.title, _this.versionData.iPackage);
                            }
                        }
                    }
                }
            });
        });
        var status = JSON.parse(localStorage.getItem('logstatus'));
        if (status == false || status == null) {
            this.pages = [];
            this.common.getCusAppVersion().then(function (data) {
                _this.versionData = data;
                _this.branch_settings = data['settings']['branch_settings'];
                _this.login_branch = data['settings']['login_branch'];
                if (data.showpopup == 1) {
                    var profileModal = _this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__pages_introimg_introimg__["a" /* IntroimgPage */], { 'image': _this.versionData });
                    profileModal.present();
                }
            });
            this.loginstatus = false;
            localStorage.setItem('logstatus', JSON.stringify(false));
            this.rootPage = __WEBPACK_IMPORTED_MODULE_13__pages_login_login__["a" /* LoginPage */];
        }
        else {
            this.pages = [];
            //this.pages = this.getpages();
            var remember = JSON.parse(localStorage.getItem('remember'));
            this.common.getCusAppVersion().then(function (data) {
                _this.versionData = data;
                localStorage.setItem('versionData', JSON.stringify(_this.versionData));
                if (data.showpopup == 1) {
                    console.log(_this.versionData);
                    var profileModal = _this.modalCtrl.create(__WEBPACK_IMPORTED_MODULE_14__pages_introimg_introimg__["a" /* IntroimgPage */], { 'image': _this.versionData });
                    profileModal.present();
                }
            });
            if (remember == true) {
                //	this.loginstatus = true;
                if (localStorage.getItem('userdet') != null) {
                    this.common.doLogin({ 'mobile': JSON.parse(localStorage.getItem('userdet'))['mobile'], 'passwd': JSON.parse(localStorage.getItem('userdet'))['passwd'] }).then(function (res) {
                        if (res) {
                            if (res.is_valid) {
                                localStorage.setItem('kyc_status', JSON.stringify(res['customer']['kyc_status']));
                                localStorage.setItem('sssuser', JSON.stringify(res));
                                _this.loginstatus = true;
                            }
                        }
                    });
                }
            }
            else {
                localStorage.setItem('logstatus', JSON.stringify(false));
                this.loginstatus = false;
                this.rootPage = __WEBPACK_IMPORTED_MODULE_13__pages_login_login__["a" /* LoginPage */];
            }
        }
        events.subscribe('user:changed', function (status) {
            _this.loginstatus = status;
            if (status) {
                var empdata = JSON.parse(localStorage.getItem('empDetail'));
                _this.pages = empdata.menus;
            }
            else {
                _this.loginstatus = false;
            }
        });
        var date = new Date();
        var ddd = date.getDate();
        var mmm = date.getMonth() + 1;
        var yy = date.getFullYear();
        this.currYear = yy;
        var postData = {
            'id_branch': this.id_branch
        };
    }
    MyApp.prototype.ionViewWillEnter = function () {
        console.log("ionViewWillEnter");
    };
    MyApp.prototype.presentAlert = function (msg, title, mypackage) {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: title,
            subTitle: msg,
            enableBackdropDismiss: false,
            buttons: [
                {
                    text: 'Ok',
                    handler: function (data) {
                        // this.nav.push(CustomorderPage);
                        if (mypackage != '') {
                            // this.market.open(mypackage);
                            // window.open(mypackage)
                            _this.iab.create(mypackage, '_system', 'location=yes,hardwareback=yes,hidden=yes');
                        }
                        // this.platform.exitApp();
                    }
                }
            ]
        });
        alert.present();
    };
    /*getpages() {
        return [
                        { title: 'Home', icon: 'home', component: HomePage, show : (this.loginstatus ? 1 : 0) },
            { title: 'Estimation', icon: 'calculator', component: EstiPage, show : (this.loginstatus ? 1 : 0) },
            { title: 'Sign Out', icon: 'log-out', component: EstiPage, show : (this.loginstatus ? 1 : 0) },
        ];
  }*/
    // On clicking Menu
    MyApp.prototype.openPage = function (pageData) {
        var _this = this;
        console.log(pageData);
        var pageName = pageData.component;
        console.log(pageName);
        this.clickedMenu = pageData.id;
        this.menu.close();
        if (pageName == 'LoginPage') {
            this.nav.push(__WEBPACK_IMPORTED_MODULE_13__pages_login_login__["a" /* LoginPage */]);
        }
        else if (pageName == 'HomePage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_12__pages_home_home__["a" /* HomePage */]);
        }
        else if (pageName == 'EstiPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_16__pages_estimation_estimation__["a" /* EstiPage */], { "page_type": pageData.page });
        }
        else if (pageName == 'CusRegisterPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_17__pages_cus_register_cus_register__["a" /* CusRegisterPage */]);
        }
        else if (pageName == 'CategoryPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_18__pages_category_category__["a" /* CategoryPage */]);
        }
        else if (pageName == 'Ecatalog') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_19__pages_e_catalog_e_catalog__["a" /* EcatalogPage */]);
        }
        else if (pageName == 'EdittagPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_23__pages_edittag_edittag__["a" /* EdittagPage */]);
        }
        else if (pageName == "WishlistPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_20__pages_wishlist_wishlist__["a" /* WishlistPage */]);
        }
        else if (pageName == "CartPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_21__pages_cart_cart__["a" /* CartPage */]);
        }
        else if (pageName == "StockCodeEntryPage") {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_22__pages_stock_entry_stock_entry__["a" /* StockCodeEntryPage */]);
        }
        else if (pageName == 'EstimationlistPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_24__pages_estimationlist_estimationlist__["a" /* EstimationlistPage */]);
        }
        else if (pageName == 'SubdesignPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_25__pages_subdesignlist_subdesignlist__["a" /* SubdesignlistPage */]);
        }
        else if (pageName == 'CustomorderPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_27__pages_customorder_customorder__["a" /* CustomorderPage */]);
        }
        else if (pageName == 'DesignlistPage') {
            this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_26__pages_designlist_designlist__["a" /* DesignlistPage */]);
        }
        else if (pageName == 'logout') {
            var confirm_1 = this.alertCtrl.create({
                title: 'Confirm Logout',
                subTitle: 'Are you sure you want to logout!',
                buttons: [
                    {
                        text: 'Cancel',
                        handler: function () {
                            console.log('Disagree clicked');
                        }
                    }, {
                        text: 'Ok',
                        handler: function () {
                            localStorage.setItem('logstatus', JSON.stringify(false));
                            localStorage.setItem('remember', JSON.stringify(false));
                            localStorage.setItem('remember2', JSON.stringify(false));
                            _this.loginstatus = false;
                            _this.events.publish('user:changed', false);
                            //this.nav.setRoot(HomePage, { st: false });
                            _this.nav.push(__WEBPACK_IMPORTED_MODULE_13__pages_login_login__["a" /* LoginPage */]);
                        }
                    }
                ]
            });
            confirm_1.present();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* Nav */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["t" /* Nav */])
    ], MyApp.prototype, "nav", void 0);
    MyApp = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\app\app.html"*/'<ion-menu [content]="content">\n\n    <ion-header>\n        <ion-toolbar color="primary">\n            <ion-title align="center"><img  style="height: 120px;" src=\'assets/img/IntroducingLogo.png\' />\n            </ion-title>\n        </ion-toolbar>\n    </ion-header>\n\n    <ion-content>\n        <ion-list>\n        	<button menuClose ion-item *ngFor="let p of pages;let i = index;" [hidden]="p.show == 0" (click)="openPage(p)" no-lines>\n				<ion-icon name="{{p.icon}}" item-left color="theme-color"></ion-icon>\n				<span>{{p.title}}<span *ngIf="i == pages.length - 1">(v -{{app_version}})</span></span>\n			</button>\n\n        </ion-list>\n    </ion-content>\n</ion-menu>\n<div class="my-overlay" padding [hidden]="overlayHidden">\n    <br />\n    <h3>You are Offline.</h3><br />\n    <h4>Turn on Wi-Fi or mobile data.</h4>\n</div>\n<ion-nav #content [root]="rootPage"></ion-nav>\n\n<!-- <ion-footer *ngIf="foot == true" style="background: #88344c !important;">\n    <ion-row>\n        <ion-col col-10 style="font-weight: bold;color:white;">\n            &#169; Sri Krishna Jewellers Retail {{currYear}}\n        </ion-col>\n        <ion-col col-2>\n            <img src=\'assets/img/logimax.png\'>\n        </ion-col>\n    </ion-row>\n</ion-footer> -->\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\app\app.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_29__ionic_native_device__["a" /* Device */], __WEBPACK_IMPORTED_MODULE_28__ionic_native_in_app_browser__["a" /* InAppBrowser */], __WEBPACK_IMPORTED_MODULE_11__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_10__ionic_native_android_permissions__["a" /* AndroidPermissions */], __WEBPACK_IMPORTED_MODULE_4__ionic_native_market__["a" /* Market */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["r" /* MenuController */], __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__["a" /* StatusBar */], __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_network__["a" /* Network */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_toast__["a" /* Toast */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_app_version__["a" /* AppVersion */], __WEBPACK_IMPORTED_MODULE_9_ionic_angular_index__["d" /* App */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_5__providers_common__["b" /* CommonProvider */]])
    ], MyApp);
    return MyApp;
}());

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 54:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CusSearchPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cusupdate_cusupdate__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__add_quick_cus_add_quick_cus__ = __webpack_require__(180);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Generated class for the CusSearchPage page.
 *
 * See https://ionicframework.com/docs/components/#navigation for more info on
 * Ionic pages and navigation.
 */
// @IonicPage()
var CusSearchPage = /** @class */ (function () {
    function CusSearchPage(ionicApp, modal, load, common, viewCtrl, navCtrl, navParams) {
        this.ionicApp = ionicApp;
        this.modal = modal;
        this.load = load;
        this.common = common;
        this.viewCtrl = viewCtrl;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.customers = [];
        this.toggle = true;
    }
    CusSearchPage.prototype.selected = function (data) {
        this.viewCtrl.dismiss(data);
    };
    CusSearchPage.prototype.getCus = function (ev) {
        var _this = this;
        var val = ev.target.value;
        if (val && val.trim() != '' && val.length >= 3) {
            // let loader = this.load.create({
            //   content: 'Please Wait',
            //   spinner: 'bubbles',
            // });
            // loader.present();
            this.common.getCustBySearch({ "searchTxt": val }).then(function (data) {
                _this.customers = data;
                // loader.dismiss();
            });
        }
    };
    CusSearchPage.prototype.ionViewDidLoad = function () {
        console.log('ionViewDidLoad CusSearchPage');
    };
    CusSearchPage.prototype.dismiss = function () {
        this.viewCtrl.dismiss();
    };
    CusSearchPage.prototype.openQuickCus = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__add_quick_cus_add_quick_cus__["a" /* AddQuickCus */]);
        modal.present();
        modal.onDidDismiss(function (data) {
            console.log(data);
            if (data != null && data != undefined) {
                _this.viewCtrl.dismiss(data);
            }
        });
    };
    CusSearchPage.prototype.edit = function (data) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__cusupdate_cusupdate__["a" /* CusupdatePage */], { 'id': data });
    };
    CusSearchPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-customer',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\customer\customer.html"*/'<ion-header>\n  <ion-navbar>\n    <ion-title>\n      Search Customer\n    </ion-title>\n    <ion-buttons end>\n        <button ion-button icon-only (click)="dismiss()">\n            <ion-icon item-right name="ios-close-outline"></ion-icon>\n        </button>\n        <button  ion-button icon-only (click)="openQuickCus()">\n          <ion-icon item-right name="ios-add-circle"></ion-icon>\n      </button>\n    </ion-buttons>\n  </ion-navbar>\n</ion-header>\n<ion-content>\n  <ion-searchbar (ionInput)="getCus($event)"></ion-searchbar>\n  <ion-list>\n    <ion-item *ngFor="let c of customers" >\n      <span (click)="selected(c)">{{ c.label }}</span>  <ion-icon (click)="edit(c[\'id_customer\'])" name="ios-create" style="float: right;"></ion-icon>\n    </ion-item>\n  </ion-list>\n</ion-content>\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\modal\customer\customer.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* IonicApp */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */]])
    ], CusSearchPage);
    return CusSearchPage;
}());

//# sourceMappingURL=customer.js.map

/***/ }),

/***/ 56:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CartPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modal_customer_customer__ = __webpack_require__(54);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var CartPage = /** @class */ (function () {
    function CartPage(modal, events, navCtrl, navParams, load, retail, common) {
        var _this = this;
        this.modal = modal;
        this.events = events;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.load = load;
        this.retail = retail;
        this.common = common;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.cusData = JSON.parse(localStorage.getItem('currentCustomer'));
        this.allowPlaceOrder = false;
        this.selectedItems = [];
        events.subscribe('cartItems:selected', function (items) {
            if (items) {
                console.log(items);
                _this.selectedItems = items;
                _this.allowPlaceOrder = (_this.selectedItems.length > 0) ? true : false;
            }
        });
    }
    CartPage.prototype.ionViewDidLoad = function () {
    };
    CartPage.prototype.createOrder = function () {
        var _this = this;
        // let currentCustomer = localStorage.getItem( 'currentCustomer' );
        // if ( currentCustomer != null ) {
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        var postData = {
            "order": {
                "order_request_from": "cart",
                "id_karigar": null,
                "order_for": 2,
                "order_to_br": null,
                "order_to": this.cusData['id_customer'],
                "order_from": this.empData['id_branch'],
                "id_branch": this.empData['id_branch'],
                "rate_calc_from": this.empData['rate_calc_from'],
                "id_employee": this.empData['uid']
            },
            "o_item": this.selectedItems
        };
        this.retail.createOrder(postData).then(function (result) {
            if (result.status) {
                _this.events.publish('Order:created', true);
            }
            _this.common.presentToast(result.msg, '');
            loader.dismiss();
        }, function (error) {
            loader.dismiss();
        });
        // }
        // else{
        //              this.openCusModal();
        // }
    };
    CartPage.prototype.openCusModal = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_4__modal_customer_customer__["a" /* CusSearchPage */]);
        modal.present();
        modal.onDidDismiss(function (mData) {
            if (mData != null) {
                localStorage.setItem('currentCustomer', JSON.stringify(mData));
                _this.cusData = JSON.parse(localStorage.getItem('currentCustomer'));
                _this.createOrder();
            }
        });
    };
    CartPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-cart',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cart\cart.html"*/'<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>Cart</ion-title>\n    </ion-navbar> \n</ion-header> \n\n<ion-content padding-vertical> \n    <items-list [page] ="\'Cart\'"></items-list>    \n</ion-content>\n<ion-footer>\n    <button ion-button [disabled] = "!allowPlaceOrder" icon-start full class="theme-btn" (click)="openCusModal()">Place Order</button> \n</ion-footer> '/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\cart\cart.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]])
    ], CartPage);
    return CartPage;
}());

//# sourceMappingURL=cart.js.map

/***/ }),

/***/ 751:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TruncatePipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

/**
 * Generated class for the TruncatePipe pipe.
 *
 * See https://angular.io/api/core/Pipe for more info on Angular Pipes.
 */
var TruncatePipe = /** @class */ (function () {
    function TruncatePipe() {
    }
    TruncatePipe.prototype.transform = function (value, args) {
        // let limit = args.length > 0 ? parseInt(args[0], 10) : 10;
        // let trail = args.length > 1 ? args[1] : '...';
        var limit = args ? parseInt(args, 10) : 10;
        var trail = '...';
        console.log('pipe');
        console.log(value.length > limit ? value.substring(0, limit) + trail : value);
        return value.length > limit ? value.substring(0, limit) + trail : value;
    };
    TruncatePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["S" /* Pipe */])({
            name: 'limitTo',
        })
    ], TruncatePipe);
    return TruncatePipe;
}());

//# sourceMappingURL=truncate.js.map

/***/ }),

/***/ 752:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FilterPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var FilterPipe = /** @class */ (function () {
    function FilterPipe() {
    }
    /*  transform(filter_options: any[], filterargs: Object): any {
         if (!filter_options || !filterargs) {
             return filter_options;
         }
         // filter items array, items which match and return true will be kept, false will be filtered out
         return filter_options.filter(item => item.id_filter == 1);
         //return filter_options;
     } */
    FilterPipe.prototype.transform = function (filter_options, filterargs) {
        return filter_options.filter(function (item) {
            for (var field in filterargs) {
                if (item[field] !== filterargs[field]) {
                    return false;
                }
            }
            return true;
        });
    };
    FilterPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["S" /* Pipe */])({
            name: 'myfilter',
            pure: false
        })
    ], FilterPipe);
    return FilterPipe;
}());

//# sourceMappingURL=filter-pipe.pipe.js.map

/***/ }),

/***/ 753:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TreeView; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var TreeView = /** @class */ (function () {
    function TreeView(events) {
        this.events = events;
        this.hasCheckbox = true;
        this.selected = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
    }
    TreeView.prototype.toggleChildren = function (node) {
        node.visible = !node.visible;
        node.icon = (node.visible == true ? "arrow-dropdown-circle" : "arrow-dropright-circle");
    };
    TreeView.prototype.prodSelected = function (prodData) {
        this.events.publish('treeProd:selected', prodData);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TreeView.prototype, "TreeData", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], TreeView.prototype, "hasCheckbox", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["O" /* Output */])(),
        __metadata("design:type", Object)
    ], TreeView.prototype, "selected", void 0);
    TreeView = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'tree-view',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\components\tree-view\tree-view.html"*/'<div *ngFor="let item of TreeData" style="padding-left:20px">         \n    <ion-grid no-padding>\n        <ion-row>\n            <ion-col col-1 class="right" style="margin:auto;text-align:center">\n            <div>\n               <ion-icon style="font-size:large" item-start *ngIf="item.children?.length" (click)="toggleChildren(item)" color="theme-color" [name]="item.icon" tappable></ion-icon>       \n            </div>\n            </ion-col> \n            <ion-col class="left">\n                <ion-item style="padding:0" no-lines>\n                    <ion-label style="font-size: 13px;font-weight: 500"> {{item.label}}</ion-label>\n                    <ion-checkbox item-start *ngIf="item.children?.length == 0" style="margin-right: 15px" [(ngModel)]="item.checked" color="theme-color" (click)="prodSelected(item)"></ion-checkbox>\n                    <ion-checkbox item-start *ngIf="item.children?.length > 0" style="margin-right: 15px" [(ngModel)]="item.checked" color="theme-color" disabled="true"></ion-checkbox>\n                </ion-item>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n    <tree-view [TreeData]="item.children" *ngIf="item.visible" [hasCheckbox]="hasCheckbox"></tree-view>\n    \n</div>\n	'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\components\tree-view\tree-view.html"*/
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */]])
    ], TreeView);
    return TreeView;
}());

//# sourceMappingURL=tree-view.js.map

/***/ }),

/***/ 754:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ItemsListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__pages_design_detail_design_detail__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__pages_cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__pages_modal_customer_customer__ = __webpack_require__(54);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ItemsListComponent = /** @class */ (function () {
    function ItemsListComponent(events, load, navCtrl, common, retail, modal) {
        var _this = this;
        this.events = events;
        this.load = load;
        this.navCtrl = navCtrl;
        this.common = common;
        this.retail = retail;
        this.modal = modal;
        this.no_more_data = false;
        this.qty = 1;
        this.items = [];
        this.total_weight = 0.00;
        this.itemsList = [];
        this.last_id = 0;
        this.selectedItems = [];
        this.currAndSett = JSON.parse(localStorage.getItem('currencyAndSettings'));
        this.cusData = JSON.parse(localStorage.getItem('currentCustomer'));
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        events.subscribe('AddToCart:completed', function (status) {
            if (status) {
                // Remove from list 
                _this.selectedItems.forEach(function (value, index) {
                    var item = _this.itemsList[index];
                    _this.itemsList.splice(index, 1);
                    _this.total_weight = _this.total_weight - parseFloat(item.weight);
                });
                _this.selectedItems = [];
                if (_this.itemsList.length == 0) {
                    _this.is_empty = (_this.itemsList.length > 0 ? 0 : 1);
                }
                if (_this.page == "Wishlist") {
                    _this.events.publish('wishListItems:selected', _this.selectedItems);
                }
                else if (_this.page == "Cart") {
                    _this.events.publish('cartItems:selected', _this.selectedItems);
                }
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_5__pages_cart_cart__["a" /* CartPage */]);
            }
        });
        events.subscribe('Order:created', function (status) {
            if (status) {
                console.log(_this.selectedItems);
                console.log(_this.itemsList);
                _this.total_weight = 0;
                // Remove from list 
                _this.selectedItems.forEach(function (value, index) {
                    var indx = _this.itemsList.indexOf(value);
                    console.log(indx);
                    if (indx >= 0) {
                        _this.itemsList.splice(indx, 1);
                        console.log(_this.itemsList);
                    }
                });
                _this.itemsList.forEach(function (data, index) {
                    _this.total_weight = _this.total_weight + parseFloat(data['weight']);
                });
                var local = JSON.parse(localStorage.getItem('carts'));
                console.log(local);
                localStorage.setItem('carts', JSON.stringify({ "id_branch": local['id_branch'], "id_employee": local['id_employee'], "id_customer": '', "status": 1, "items": _this.itemsList }));
                _this.selectedItems = [];
                if (_this.itemsList.length == 0) {
                    _this.is_empty = (_this.itemsList.length > 0 ? 0 : 1);
                }
                if (_this.page == "Wishlist") {
                    _this.events.publish('wishListItems:selected', _this.selectedItems);
                }
                else if (_this.page == "Cart") {
                    _this.events.publish('cartItems:selected', _this.selectedItems);
                }
            }
        });
        if (this.cusData == null) {
            this.cusData = { "label": "" };
        }
    }
    ItemsListComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // console.log(this.cusData);
        // if(this.cusData != null){
        //     this.getItemslist(1,''); 
        // }else{
        //     this.openCusModal();
        // }      
        console.log(localStorage.getItem('carts'));
        this.itemsList = localStorage.getItem('carts') != null ? JSON.parse(localStorage.getItem('carts'))['items'] : [];
        console.log(localStorage.getItem('carts'));
        this.total_weight = 0;
        this.itemsList.forEach(function (i) {
            _this.total_weight = _this.total_weight + parseFloat(i['weight']);
        });
        this.is_empty = (this.itemsList.length > 0 ? 0 : 1);
        console.log(this.itemsList);
    };
    ItemsListComponent.prototype.itemSelected = function (ev, item, idx) {
        console.log(this.selectedItems);
        console.log(this.page);
        console.log(idx);
        if (ev._value == true) {
            this.selectedItems.push(item);
        }
        else {
            var index = this.selectedItems.indexOf(item);
            console.log(index);
            if (index >= 0) {
                this.selectedItems.splice(index, 1);
                console.log(this.selectedItems);
            }
        }
        // if(ev._value == true){
        //     if(this.page == "Wishlist"){
        //         this.selectedItems[idx] = item['id_wishlist'];
        //     }
        //     else if(this.page == "Cart"){
        //         this.selectedItems[idx] = item;
        //     }
        // }else{
        //     this.selectedItems.splice(idx, 1);
        // }   
        if (this.page == "Wishlist") {
            this.events.publish('wishListItems:selected', this.selectedItems);
        }
        else if (this.page == "Cart") {
            this.events.publish('cartItems:selected', this.selectedItems);
        }
    };
    ItemsListComponent.prototype.openCusModal = function () {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_6__pages_modal_customer_customer__["a" /* CusSearchPage */]);
        modal.present();
        modal.onDidDismiss(function (mData) {
            if (mData != null) {
                localStorage.setItem('currentCustomer', JSON.stringify(mData));
                _this.cusData = mData;
            }
        });
    };
    ItemsListComponent.prototype.getItemslist = function (type, infiniteScroll) {
        var _this = this;
        var loader = this.load.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        if (type == 1) {
            loader.present();
            this.last_id = 0;
        }
        var status = (this.page == "Wishlist" ? 1 : (this.page == 'Cart' ? 2 : 0));
        var postData = { "id_branch": this.empData['id_branch'], "id_employee": this.empData['id_employee'], "id_customer": this.cusData['id_customer'], "status": status, "last_id": this.last_id };
        this.retail.getItemslist(postData).then(function (result) {
            if (result.status) {
                if (type == 1) {
                    if (_this.reActiveInfinite) {
                        _this.no_more_data = false;
                        _this.reActiveInfinite.enable(true);
                    }
                    _this.itemsList = result.data;
                    _this.total_weight = 0;
                    _this.itemsList.forEach(function (i) {
                        _this.total_weight = _this.total_weight + parseFloat(i['weight']);
                    });
                }
                else {
                    var data = result.data;
                    for (var index = 0; index < data.length; index++) {
                        _this.itemsList.push(data[index]);
                        _this.total_weight = _this.total_weight + parseFloat(data[index]['weight']);
                    }
                    if (data.length > 0) {
                        _this.no_more_data = false;
                        infiniteScroll.complete();
                    }
                    else {
                        infiniteScroll.complete();
                        _this.no_more_data = true;
                        infiniteScroll.enable(false);
                    }
                }
            }
            _this.is_empty = (_this.itemsList.length > 0 ? 0 : 1);
            loader.dismiss();
        }, function (error) {
            loader.dismiss();
        });
    };
    ItemsListComponent.prototype.doInfinite = function (infiniteScroll) {
        this.last_id = this.itemsList[this.itemsList.length - 1]['id_wishlist'];
        this.reActiveInfinite = infiniteScroll;
        this.getItemslist(2, infiniteScroll);
    };
    ItemsListComponent.prototype.editItem = function (item, idx) {
        // this.navCtrl.push(DesignDetailPage,{'design_no':item.design_no, 'item' : item});
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_design_detail_design_detail__["a" /* DesignDetailPage */], { 'id_category': item['id_category'], 'id_product': item['id_product'], 'design_no': item['design_no'], 'id_sub_design': item['id_sub_design'], 'type': 'edit', 'item': item });
    };
    ItemsListComponent.prototype.deleteItem = function (id_wishlist, weight, idx) {
        var local = JSON.parse(localStorage.getItem('carts'));
        this.total_weight = this.total_weight - parseFloat(weight);
        this.itemsList.splice(idx, 1);
        local['items'] = this.itemsList;
        localStorage.setItem('carts', JSON.stringify(local));
        this.is_empty = (this.itemsList.length > 0 ? 0 : 1);
        // let loader = this.load.create({
        //     content: 'Please Wait',
        //     spinner: 'bubbles',
        // });
        // loader.present();
        // this.retail.removeItem({"id_wishlist" : id_wishlist}).then(result => {
        //     this.common.presentToast( result.msg,'' );
        //     if(result.status){
        //         this.total_weight = this.total_weight - parseFloat(weight);
        //         this.itemsList.splice(idx, 1);
        //     } 
        //     loader.dismiss();
        // }, error => {
        //     loader.dismiss();
        // });
    };
    ItemsListComponent.prototype.openDesign = function (design_no) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__pages_design_detail_design_detail__["a" /* DesignDetailPage */], { 'design_no': design_no, 'type': 'edit' });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ItemsListComponent.prototype, "page", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], ItemsListComponent.prototype, "content", void 0);
    ItemsListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'items-list',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\components\items-list\items-list.html"*/'<!-- 1. Customer Search Block -->\n<!-- <ion-row>\n	<ion-col>\n		<ion-item no-padding>\n			<ion-label color="label-color" stacked>Customer <span class="required"> *</span></ion-label>\n			<ion-input type="text" [(ngModel)]="cusData[\'label\']" (tap)="openCusModal()" readonly></ion-input>\n			<button ion-button outline small color="dark" type="button" item-right (click)="getItemslist(1,\'\')"> Get {{page}} </button> \n		</ion-item>\n	</ion-col>\n</ion-row> -->\n\n\n<!-- 2. No Data Block -->\n<div class="no-data-blk" text-center *ngIf="is_empty == 1" >\n	<p class="no-data-txt">{{page}} Is Empty</p>\n</div>\n	\n\n <!-- 3. List Block -->  \n<ion-list *ngIf="itemsList?.length > 0" class="list-blk">\n	<p align="center" class="theme-color-secondary">Total Weight : {{total_weight | number : \'1.0-3\'}} g </p>\n	<ion-card *ngFor=" let item of itemsList; let i=index " nowrap> \n		<ion-row style="background: #cccccc2e;">\n			<ion-col col-8>\n				<ion-checkbox [(ngModel)]="item.selected" (ionChange)="itemSelected($event,item,i)"></ion-checkbox>\n			</ion-col>\n			<ion-col col-2>\n				<!-- <button ion-button clear small float-right no-margin color="primary" (click)="editItem(item,i)" [disabled]="item.selected"><ion-icon name="create"></ion-icon></button> -->\n			</ion-col>\n			<ion-col col-2>\n				<button ion-button clear small float-right no-margin color="danger" (click)="deleteItem(item.id_wishlist,item.weight,i)" [disabled]="item.selected"><ion-icon name="trash"></ion-icon></button>\n			</ion-col>\n		</ion-row>\n		<ion-row no-padding>\n			<ion-col no-padding>\n				<ion-item no-padding>\n					<ion-thumbnail *ngIf="!item.hasOwnProperty(\'sample_images\')" item-start><img src="{{item.image}}" imageViewer="{{item.image}}" onerror="this.onerror=null;this.src=\'assets/no-img.png\';"/></ion-thumbnail> \n					<ion-thumbnail *ngIf="item.hasOwnProperty(\'sample_images\')" item-start><img src="https://srikrishnajewels.com/test_sknretail/admin/assets/img/orders/{{item[\'sample_images\'][0]}}" imageViewer="https://srikrishnajewels.com/test_sknretail/admin/assets/img/orders/{{item[\'sample_images\'][0]}}" onerror="this.onerror=null;this.src=\'assets/no-img.png\';"/></ion-thumbnail> \n\n					<p> {{item.sub_design_name}}</p>\n					<p no-margin class="text-xsmall">{{item.design_name}}</p>\n					<p no-margin class="text-xsmall">{{item.product_name}}</p>\n					<p no-margin class="text-small" float-left>{{item.weight}} g</p>\n					<!-- <p no-margin class="text-small" float-right><span [innerHTML]="currAndSett.settings.curr_symb_html"></span> {{item.rate}}</p> -->\n				</ion-item>\n			</ion-col>\n		</ion-row>\n	</ion-card>\n\n	<!-- <ion-item-sliding *ngFor=" let item of itemsList; let i=index ">\n		<ion-item-options side="left">\n			<button ion-button color="danger" (click)="deleteItem()"><ion-icon name="trash"></ion-icon></button>\n		</ion-item-options>\n		<ion-item no-lines no-padding nowrap>\n			<ion-thumbnail item-start><img src="{{item.image}}"></ion-thumbnail>\n			<span>\n				<p>{{item.design_name}}</p>\n				<p class="text-xsmall">{{item.product_name}}</p>\n				<p class="text-small" float-left>{{item.weight}} g</p>\n				<p class="text-small" float-right><span [innerHTML]="currAndSett.settings.curr_symb_html"></span> {{item.rate}}</p>\n			</span>  \n		</ion-item> \n		<ion-item-options side="right">\n			<button ion-button color="primary" (click)="viewItem(item,i)"><ion-icon name="eye"></ion-icon></button>\n			<button ion-button color="danger" (click)="deleteItem(item,i)"><ion-icon name="trash"></ion-icon></button>\n		</ion-item-options>\n	</ion-item-sliding> -->\n</ion-list>\n<!-- <ion-infinite-scroll (ionInfinite)="doInfinite($event)">\n	<ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Loading more data..."></ion-infinite-scroll-content>\n</ion-infinite-scroll> -->\n<div *ngIf="no_more_data" align="center">\n	<ion-note floar-center>No more Items</ion-note>\n</div>\n\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\components\items-list\items-list.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */]])
    ], ItemsListComponent);
    return ItemsListComponent;
}());

//# sourceMappingURL=items-list.js.map

/***/ }),

/***/ 755:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CarouselComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(4);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var CarouselComponent = /** @class */ (function () {
    function CarouselComponent(comman) {
        this.comman = comman;
        this.slidess = [];
        this.animateClass = { 'zoom-in': true };
        console.log('caro');
        /* take images from carousel provider*/
        /*        this.comman.getbanner().then(data=>{
       
                 console.log(data)
             this.slidess = data['offers_banners'];
             console.log(this.slidess);
             // return data;
       
           }) */
    }
    CarouselComponent.prototype.slide = function () {
        this.slides.startAutoplay();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])('slides'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["y" /* Slides */])
    ], CarouselComponent.prototype, "slides", void 0);
    CarouselComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'carousel',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\components\carousel\carousel.html"*/'<ion-slides (ionSlideWillChange)="slide()" *ngIf="slidess && slidess.length" #slides [ngClass]="animateClass" style="height: auto !important;" autoplay=\'4000\' zoom=\'true\' speed=\'500\' loop=\'true\' initialSlide=\'0\' pager=\'true\'>\n    <ion-slide *ngFor="let slide of slidess">\n        <img [src]="slide.offer_img_path" class="slide-image" />\n    </ion-slide>\n</ion-slides>\n\n<ion-slides *ngIf="slidess.length == 0" #slides [ngClass]="animateClass" style="height: auto !important;" autoplay=\'4000\' zoom=\'true\' speed=\'500\' loop=\'true\' initialSlide=\'0\' pager=\'true\'>\n    <ion-slide>\n        <img src="assets/default_banner.jpg" class="slide-image" />\n    </ion-slide>\n</ion-slides>'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\components\carousel\carousel.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_1__providers_common__["b" /* CommonProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__providers_common__["b" /* CommonProvider */]])
    ], CarouselComponent);
    return CarouselComponent;
}());

//# sourceMappingURL=carousel.js.map

/***/ }),

/***/ 78:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DesignDetailPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__wishlist_wishlist__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_http__ = __webpack_require__(53);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_img_editor_editor__ = __webpack_require__(184);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__cart_cart__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_date_picker__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_ngx_image_compress__ = __webpack_require__(185);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};








///import { Transfer, TransferObject } from '@ionic-native/transfer';






var DesignDetailPage = /** @class */ (function () {
    function DesignDetailPage(imageCompress, cd, datePicker, common, keyboard, view, platform, navParams, actionSheetCtrl, navCtrl, modal, toast, events, loadingCtrl, retail, camera, ftransfer, file, http, filePath, alertCtrl) {
        var _this = this;
        this.imageCompress = imageCompress;
        this.cd = cd;
        this.datePicker = datePicker;
        this.common = common;
        this.keyboard = keyboard;
        this.view = view;
        this.platform = platform;
        this.navParams = navParams;
        this.actionSheetCtrl = actionSheetCtrl;
        this.navCtrl = navCtrl;
        this.modal = modal;
        this.toast = toast;
        this.events = events;
        this.loadingCtrl = loadingCtrl;
        this.retail = retail;
        this.camera = camera;
        this.ftransfer = ftransfer;
        this.file = file;
        this.http = http;
        this.filePath = filePath;
        this.alertCtrl = alertCtrl;
        this.item = [];
        this.customData = [];
        this.wishlistData = {};
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.proceedWishlist = false;
        this.hideAddToWishlist = false;
        this.hideUpdateItem = true;
        this.showDesignDet = false;
        this.enable_customize = true;
        this.showCustomize = true;
        this.inpErrorMsg = { "weight": "", "width": "", "dia": "", "len": "", "purity": "" };
        // Sample Image
        this.targetPaths = [];
        this.filenames = [];
        this.deletephotos = [];
        this.lastImage = null;
        this.showedit = false;
        this.id_ret_category = this.navParams.get('id_category');
        this.id_product = this.navParams.get('id_product');
        this.id_sub_design = this.navParams.get('id_sub_design');
        this.ids = '';
        this.idw = '';
        this.calc = 250;
        this.top = 0;
        console.log(this.empData);
        var type = this.navParams.get('type');
        if (type == 'view_only') {
            this.hideAddToWishlist = true;
            this.showDesignDet = true;
            this.enable_customize = false;
        }
        else if (type == 'edit') {
            this.hideAddToWishlist = true;
            this.hideUpdateItem = false;
            this.proceedWishlist = true;
        }
        // Set design number
        if (this.navParams.get('design_no')) {
            this.id_ret_category = this.navParams.get('id_category');
            this.id_product = this.navParams.get('id_product');
            this.design_no = this.navParams.get('design_no');
            this.id_sub_design = this.navParams.get('id_sub_design');
            localStorage.setItem('last_cat_no', this.id_ret_category);
            localStorage.setItem('last_pro_no', this.id_product);
            localStorage.setItem('last_design_no', this.design_no);
            localStorage.setItem('last_subdesign_no', this.id_sub_design);
        }
        else {
            this.id_ret_category = localStorage.getItem('last_cat_no');
            this.id_product = localStorage.getItem('last_pro_no');
            this.design_no = localStorage.getItem('last_design_no');
            this.id_sub_design = localStorage.getItem('last_subdesign_no');
        }
        var customData = this.navParams.get('item');
        console.log("Design Number : " + customData);
        if (customData) {
            this.customData = customData;
        }
        var loader = this.loadingCtrl.create({
            content: 'Please Wait',
            spinner: 'bubbles',
        });
        loader.present();
        this.retail.getDesignById({ 'id_category': this.id_ret_category, 'id_product': this.id_product, "design_no": this.design_no, 'id_sub_design': this.id_sub_design }).then(function (result) {
            _this.item = result;
            _this.content.resize();
            if (!customData) {
                _this.customData = result;
            }
            if (_this.customData['stones']) {
                _this.item['stones'].forEach(function (value, key) {
                    var stone = _this.customData['stones'].filter(function (i) { return i.stone_id === value.stone_id; });
                    if (stone.length > 0) {
                        _this.item['stones'][key]['selected'] = true;
                    }
                    console.log(key);
                    console.log(_this.item['stones']);
                });
            }
            loader.dismiss();
        });
    }
    DesignDetailPage.prototype.ionViewDidLoad = function () {
    };
    DesignDetailPage.prototype.ionViewWillEnter = function () {
        var _this = this;
        console.log("ionViewWillEnter : Keyboard isOpen " + +this.keyboard.isOpen());
        if (localStorage.getItem('dip') != '') {
            var path = JSON.parse(localStorage.getItem('dip'));
            var name = JSON.parse(localStorage.getItem('din'));
            console.log("dip : " + path + " -- " + "din : " + name);
        }
        if (path != null && path != undefined && path != '' && this.navParams.get('state') == true) {
            this.targetPaths.push(path);
            this.showedit = true;
            console.log(this.targetPaths);
            this.filenames.push(name);
            console.log(this.filenames);
            this.customData['targetPaths'] = this.targetPaths;
            this.customData['sample_images'] = this.filenames;
        }
        this.events.subscribe('img', function (userEventData) {
            // this.customData['sample_images'] = userEventData;
        });
        this.events.subscribe('tar', function (userEventData) {
            console.log(userEventData);
            _this.targetPaths.pop();
            _this.targetPaths.push(userEventData);
            _this.showedit = true;
            console.log(_this.targetPaths);
        });
        this.events.subscribe('file', function (userEventData) {
            console.log(userEventData);
            _this.filenames.pop();
            _this.filenames.push(userEventData);
            console.log(_this.filenames);
            _this.customData['sample_images'] = _this.filenames;
        });
        this.events.subscribe('err', function (userEventData) {
            _this.targetPaths.splice(userEventData, 1);
        });
        this.events.subscribe('errr', function (userEventData) {
            _this.filenames.splice(userEventData, 1);
        });
        console.log(this.customData);
        console.log(this.targetPaths);
    };
    DesignDetailPage.prototype.validateFields = function () {
        console.log(this.inpErrorMsg);
        if (this.inpErrorMsg['weight'] == "Invalid" || this.inpErrorMsg['purity'] == "Invalid") {
            this.proceedWishlist = false;
        }
        else {
            if (this.inpErrorMsg['weight'] == "Valid" && this.inpErrorMsg['purity'] == "Valid") {
                this.proceedWishlist = true;
            }
        }
    };
    DesignDetailPage.prototype.customInputChanged = function (field, val) {
        var value = parseFloat(val);
        if (field == "weight") {
            this.proceedWishlist = false;
            if (this.item['min_weight'] > 0 || this.item['max_weight'] > 0) {
                if (value >= this.item['min_weight'] && value <= this.item['max_weight']) {
                    this.inpErrorMsg['weight'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_weight']) {
                    this.inpErrorMsg['weight'] = "Invalid";
                }
                else if (value > this.item['max_weight']) {
                    this.inpErrorMsg['weight'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['weight'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "len") {
            if (this.item['min_length'] > 0 || this.item['max_length'] > 0) {
                if (value >= this.item['min_length'] && value <= this.item['max_length']) {
                    this.inpErrorMsg['len'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_length']) {
                    this.inpErrorMsg['len'] = "Invalid";
                }
                else if (value > this.item['max_length']) {
                    this.inpErrorMsg['len'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['len'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "width") {
            if (this.item['min_width'] > 0 || this.item['max_width'] > 0) {
                if (value >= this.item['min_width'] && value <= this.item['max_width']) {
                    this.inpErrorMsg['width'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_width']) {
                    this.inpErrorMsg['width'] = "Invalid";
                }
                else if (value > this.item['max_width']) {
                    this.inpErrorMsg['width'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['width'] = "Valid";
                    this.validateFields();
                }
            }
        }
        else if (field == "dia") {
            if (this.item['min_dia'] > 0 || this.item['max_dia'] > 0) {
                if (value >= this.item['min_dia'] && value <= this.item['max_dia']) {
                    this.inpErrorMsg['dia'] = "Valid";
                    this.validateFields();
                }
                else if (value < this.item['min_dia']) {
                    this.inpErrorMsg['dia'] = "Invalid";
                }
                else if (value > this.item['max_dia']) {
                    this.inpErrorMsg['dia'] = "Invalid";
                }
            }
            else {
                if (value > 0) {
                    this.inpErrorMsg['dia'] = "Valid";
                    this.validateFields();
                }
            }
        }
    };
    DesignDetailPage.prototype.toggle = function (block) {
        if (block == 'desDetail')
            this.showDesignDet = (this.showDesignDet == true ? false : true);
        if (block == 'customize')
            this.showCustomize = (this.showCustomize == true ? false : true);
    };
    DesignDetailPage.prototype.setPurity = function (data, name) {
        this.inpErrorMsg['purity'] = "Valid";
        this.customData['id_purity'] = data;
        this.validateFields();
    };
    DesignDetailPage.prototype.changeImaged = function (image) {
        this.item['defaultImage'] = image;
        this.content.resize();
    };
    DesignDetailPage.prototype.ngAfterViewInit = function () {
    };
    DesignDetailPage.prototype.proceedToWishlist = function () {
        // let currentCustomer = localStorage.getItem( 'currentCustomer' );
        // if ( currentCustomer != null ) {
        //   this.addToWishlist();        
        // }else{
        //   this.openAddQuickCus();
        // }
        console.log(this.customData);
        if (this.customData['id_purity'] == '' || this.customData['weight'] == '' || this.customData['pcs'] == '' || this.customData['due_date'] == '') {
            console.log(this.customData);
            if (this.customData['id_purity'] == '') {
                this.common.presentToast('Please Select Purity *', 1000);
            }
            else if (this.customData['weight'] == '') {
                this.common.presentToast('Please Enter Weight *', 1000);
            }
            else if (this.customData['pcs'] == '') {
                this.common.presentToast('Please Enter Pieces *', 1000);
            }
            else if (this.customData['due_date'] == '') {
                this.common.presentToast('Please Enter No of Days *', 1000);
            }
        }
        else {
            this.openAddQuickCus();
        }
    };
    DesignDetailPage.prototype.openWishlist = function () {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__wishlist_wishlist__["a" /* WishlistPage */]);
    };
    DesignDetailPage.prototype.stoneChaned = function (value, idx) {
        console.log(value + ' ' + idx);
        console.log(this.item['stones']);
    };
    DesignDetailPage.prototype.addToWishlist = function () {
        // this.loader = this.loadingCtrl.create( {
        //   content: "Please wait...",
        //   spinner: 'bubbles',
        // } );
        // this.loader.present();
        // console.log(this.item['stones']);
        // let cusData = JSON.parse( localStorage.getItem( 'currentCustomer' ) );
        // let empData = JSON.parse(localStorage.getItem('empDetail'));
        // console.log(empData);
        // console.log(this.empData);
        // this.wishlistData = {
        //                       'id_customer'     : cusData['id_customer'],
        //                       'id_branch'       : empData['id_branch'],
        //                       'id_employee'     : empData['id_employee'],
        //                       'item_type'       : 3, // E-catalog
        //                       'is_customized'   : 1,
        //                       'id_product'      : this.item['pro_id'],
        //                       'design_no'       : this.item['design_no'],
        //                       'id_sub_design'   : this.item['id_sub_design'],
        //                       'wast_percent'    : 1,
        //                       'id_mc_type'      : this.item['mc_type'],
        //                       'mc'              : this.item['mc_value'],
        //                       'stn_amt'         : 0,
        //                       'due_date'        : this.customData['due_date'],
        //                       'length'          : this.customData['len'],
        //                       'width'           : this.customData['width'],
        //                       'dia'             : this.customData['dia'],
        //                       'weight'          : this.customData['weight'],
        //                       'id_size'            : this.customData['id_size'],
        //                       'pcs'             : this.customData['pcs'],
        //                       'id_purity'       : this.customData['id_purity'],
        //                       'hook_type'       : this.customData['hook_type'],
        //                       'sample_details'  : this.customData['sample_details'],
        //                       'sample_images'   : this.customData['sample_images'],
        //                       'stones'          : this.item['stones'],
        //                       'status'          : 1,
        //                       'id_wishlist'     : this.customData['id_wishlist'],
        //                     };
        //                     this.retail.addToCart({"id_branch" : empData['id_branch'], "id_employee" : empData['id_employee'], "id_customer" : cusData['id_customer'], "status" : 1,"items" :[this.wishlistData]}).then(result => { 
        //                       this.loader.dismiss();
        //   this.common.presentToast( result.msg,'' );
        //   if(result.status){ 
        //     this.hideAddToWishlist = true;
        //     this.navCtrl.setRoot(CartPage);
        //   }
        //   if(result.status){ 
        //     this.hideAddToWishlist = true;
        //   }
        // });
        // let cusData = JSON.parse( localStorage.getItem( 'currentCustomer' ) );
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        console.log(empData);
        console.log(this.empData);
        this.wishlistData = {
            'id_customer': '',
            'id_branch': empData['id_branch'],
            'id_employee': empData['id_employee'],
            'item_type': 3,
            'is_customized': 1,
            'id_product': this.item['pro_id'],
            'design_no': this.item['design_no'],
            'id_sub_design': this.item['id_sub_design'],
            'wast_percent': 1,
            'id_mc_type': this.item['mc_type'],
            'mc': this.item['mc_value'],
            'stn_amt': 0,
            'due_date': this.customData['due_date'],
            'length': this.customData['len'],
            'width': this.customData['width'],
            'dia': this.customData['dia'],
            'weight': this.customData['weight'],
            'id_size': this.customData['id_size'],
            'id_weight': this.customData['id_weight'],
            'pcs': this.customData['pcs'],
            'id_purity': this.customData['id_purity'],
            'hook_type': this.customData['hook_type'],
            'sample_details': this.customData['sample_details'],
            'image': this.item['defaultImage'],
            'targetPaths': this.customData['targetPaths'],
            'sample_images': this.customData['sample_images'],
            'stones': this.item['stones'],
            'status': 1,
            'id_wishlist': this.customData['id_wishlist'],
            'sub_design_name': this.item['sub_design_name'],
            'design_name': this.item['design_name'],
            'product_name': this.item['product_name'],
            'id_category': this.id_ret_category,
        };
        if (localStorage.getItem('carts') == null) {
            localStorage.setItem('carts', JSON.stringify({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": '', "status": 1, "items": [this.wishlistData] }));
        }
        else {
            var local = JSON.parse(localStorage.getItem('carts'))['items'];
            console.log(local);
            local.push(this.wishlistData);
            console.log(local);
            localStorage.setItem('carts', JSON.stringify({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": '', "status": 1, "items": local }));
        }
        // this.loader.dismiss();
        this.common.presentToast("Product added to cart successfully", '');
        this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_11__cart_cart__["a" /* CartPage */]);
    };
    DesignDetailPage.prototype.updateWishlist = function () {
        var _this = this;
        this.loader = this.loadingCtrl.create({
            content: "Please wait...",
            spinner: 'bubbles',
        });
        this.loader.present();
        var cusData = JSON.parse(localStorage.getItem('currentCustomer'));
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        this.wishlistData = {
            'id_customer': cusData['id_customer'],
            'id_branch': empData['id_branch'],
            'id_employee': empData['id_employee'],
            'item_type': 3,
            'is_customized': 1,
            'id_product': this.item['pro_id'],
            'design_no': this.item['design_no'],
            'id_sub_design': this.item['id_sub_design'],
            'wast_percent': 1,
            'id_mc_type': this.item['mc_type'],
            'mc': this.item['mc_value'],
            'stn_amt': 0,
            'length': this.customData['len'],
            'due_date': this.customData['due_date'],
            'width': this.customData['width'],
            'dia': this.customData['dia'],
            'weight': this.customData['weight'],
            'size': this.customData['size'],
            'pcs': this.customData['pcs'],
            'id_purity': this.customData['id_purity'],
            'hook_type': this.customData['hook_type'],
            'sample_details': this.customData['sample_details'],
            'sample_images': this.customData['sample_images'],
            'targetPaths': this.customData['targetPaths'],
            'stones': this.item['stones'],
            'status': this.customData['status']
        };
        this.retail.addToCart({ "id_branch": empData['id_branch'], "id_employee": empData['id_employee'], "id_customer": cusData['id_customer'], "status": 1, "items": [this.wishlistData] }).then(function (result) {
            _this.loader.dismiss();
            _this.common.presentToast(result.msg, '');
            if (result.status) {
                _this.hideUpdateItem = true;
                _this.navCtrl.pop();
            }
        });
    };
    DesignDetailPage.prototype.openAddQuickCus = function () {
        // let modal = this.modal.create(AddQuickCus, {"page":"design-detail"}, {enableBackdropDismiss: false})
        // modal.present();
        // modal.onDidDismiss(mData => {
        //   if(mData != null){
        //     localStorage.setItem( 'currentCustomer', JSON.stringify( mData ) );
        //     this.addToWishlist();   
        //   }
        // });
        //   let modal = this.modal.create(CusSearchPage,{'show':'true',"page":"design-detail"}, {enableBackdropDismiss: false})
        //   modal.present();
        //   modal.onDidDismiss(mData => {
        //     console.log(mData)
        //     if(mData != null){
        //       localStorage.setItem( 'currentCustomer', JSON.stringify( mData ) );
        //       this.addToWishlist();
        // }else{
        //     }
        //   });
        this.addToWishlist();
    };
    // Sample image
    DesignDetailPage.prototype.deletePhoto = function (index) {
        var _this = this;
        var confirm = this.alertCtrl.create({
            title: 'Do you want to delete the image?',
            message: '',
            buttons: [
                {
                    text: 'No',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                }, {
                    text: 'Yes',
                    handler: function () {
                        console.log('Agree clicked');
                        _this.targetPaths.splice(index, 1);
                        _this.filenames.splice(index, 1);
                        _this.deletephotos.push(_this.filenames[index]);
                        _this.lastImage == '';
                    }
                }
            ]
        });
        confirm.present();
    };
    DesignDetailPage.prototype.presentActionSheet = function () {
        var _this = this;
        var actionSheet = this.actionSheetCtrl.create({
            title: 'Select Image Source',
            buttons: [
                {
                    text: 'Load from Gallery',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.PHOTOLIBRARY);
                    }
                },
                {
                    text: 'Take Picture',
                    handler: function () {
                        _this.takePicture(_this.camera.PictureSourceType.CAMERA);
                    }
                },
                {
                    text: 'Cancel',
                    role: 'cancel'
                }
            ]
        });
        actionSheet.present();
    };
    DesignDetailPage.prototype.takePicture = function (sourceType) {
        var _this = this;
        console.log(sourceType);
        // this.navCtrl.push(EditorPage,{images:'assets/img/earings.jpg'});
        // Create options for the   Dialog
        var options = {
            quality: 75,
            sourceType: sourceType,
            saveToPhotoAlbum: false,
            correctOrientation: true,
        };
        console.log(options);
        // Get the data of an image
        this.camera.getPicture(options).then(function (imagePath) {
            console.log("getPicture");
            _this.loader = _this.loadingCtrl.create({
                content: "Fetching...",
                spinner: 'bubbles',
            });
            _this.loader.present();
            console.log("imagePath : " + imagePath);
            if (_this.platform.is('android') && sourceType === _this.camera.PictureSourceType.PHOTOLIBRARY) {
                _this.filePath.resolveNativePath(imagePath)
                    .then(function (filePath) {
                    console.log('ttttttttttt', _this.filePath);
                    var correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);
                    var currentName = imagePath.substring(imagePath.lastIndexOf('/') + 1, imagePath.lastIndexOf('?'));
                    _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName());
                    // this.uploadImage();
                });
            }
            else {
                var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);
                var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);
                _this.copyFileToLocalDir(correctPath, currentName, _this.createFileName());
                // this.uploadImage();
            }
        }, function (err) {
            console.log(err);
            _this.common.presentToast('Error while selecting image.', '');
        });
    };
    // Create a new name for the image
    DesignDetailPage.prototype.createFileName = function () {
        var d = new Date(), n = d.getTime(), newFileName = n + ".jpg";
        return newFileName;
    };
    // Copy the image to a local folder
    DesignDetailPage.prototype.copyFileToLocalDir = function (namePath, currentName, newFileName) {
        var _this = this;
        console.log("#### copyFileToLocalDir ####");
        console.log("namePath/correctPath : " + namePath);
        console.log("currentName : " + currentName);
        console.log("createdFileName : " + newFileName);
        console.log("Directory : " + cordova.file.dataDirectory);
        this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(function (success) {
            // console.log("#### copyFile -- Success ####");
            // console.log(success);
            //   this.lastImage = newFileName;
            //   var targetPath = this.pathForImage( newFileName );
            //   this.targetPaths.push( targetPath );
            //   this.filenames.push( this.lastImage );
            //   this.loader.dismiss();
            //   console.log(targetPath);
            //   console.log(this.filenames);
            //   this.navCtrl.push(EditorPage,{"images":targetPath,"design_no":this.design_no})
            var orientation = -1;
            _this.imageCompress.compressFile(_this.pathForImage(newFileName), orientation, 50, 50).then(function (result) { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    this.writeFile(result, this.createFileName());
                    return [2 /*return*/];
                });
            }); }, function (err) {
                console.log(err);
            });
        }, function (error) {
            _this.common.presentToast('Error while storing file.', '');
        });
    };
    // Always get the accurate path to your apps folder
    DesignDetailPage.prototype.pathForImage = function (img) {
        if (img === null) {
            return '';
        }
        else {
            return cordova.file.dataDirectory + img;
        }
    };
    DesignDetailPage.prototype.show = function () {
        var _this = this;
        // this.keyboard.close();
        this.datePicker.show({
            date: new Date(),
            mode: 'date',
            androidTheme: this.datePicker.ANDROID_THEMES.THEME_HOLO_DARK
        }).then(function (date) {
            /*date => console.log('Got date: ', date),
            err => console.log('Error occurred while getting date: ', err),*/
            /*console.log('Got date: '+ date);
            var curDate = new Date();
            curDate.setDate(curDate.getDate() - 10);*/
            var ddd = date.getDate();
            var mmm = date.getMonth() + 1;
            var yy = date.getFullYear();
            //var today = new Date(yy+"-"+mmm+"-"+ddd).toISOString().substring(0, 10);
            var today = date.toISOString().substring(0, 10);
            //this.fromdate= today;
            _this.customData['due_date'] = yy + "-" + mmm + "-" + ddd;
            console.log(_this.customData['due_date']);
        });
    };
    DesignDetailPage.prototype.checkstock = function (id) {
        var _this = this;
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        this.ids = id;
        this.common.checkstock({ 'id_branch': empData['id_branch'], 'id_weight': this.idw, 'id_size': id, 'id_category': this.id_ret_category, 'id_product': this.id_product, "design_no": this.design_no, 'id_sub_design': this.id_sub_design }).then(function (result) {
            _this.item['is_stock_avail'] = result['avail_pcs'];
        });
    };
    DesignDetailPage.prototype.checkwgstock = function (id) {
        var _this = this;
        var empData = JSON.parse(localStorage.getItem('empDetail'));
        this.idw = id;
        this.common.checkwgstock({ 'id_branch': empData['id_branch'], 'id_size': this.ids, 'id_weight': id, 'id_category': this.id_ret_category, 'id_product': this.id_product, "design_no": this.design_no, 'id_sub_design': this.id_sub_design }).then(function (result) {
            _this.item['is_stock_avail'] = result['avail_pcs'];
        });
    };
    DesignDetailPage.prototype.scrolling = function (event) {
        if (event.scrollTop == 0) {
            this.calc = 250;
        }
        else {
            this.calc = 250 - event.scrollTop;
            this.content.resize();
            this.cd.detectChanges();
        }
        // your content here for scrolling
    };
    //here is the method is used to write a file in storage  
    DesignDetailPage.prototype.writeFile = function (base64Data, fileName) {
        var _this = this;
        var contentType = this.getContentType(base64Data);
        var DataBlob = this.base64toBlob(base64Data, contentType);
        // here iam mentioned this line this.file.externalRootDirectory is a native pre-defined file path storage. You can change a file path whatever pre-defined method.  
        var filePath = cordova.file.dataDirectory;
        this.file.writeFile(filePath, fileName, DataBlob, contentType).then(function (success) {
            console.log(success['nativeURL']);
            var currentName = success['nativeURL'].substr(success['nativeURL'].lastIndexOf('/') + 1);
            var correctPath = success['nativeURL'].substr(0, success['nativeURL'].lastIndexOf('/') + 1);
            console.log("File Writed Successfully", success);
            console.log(currentName);
            console.log(correctPath);
            console.log("#### copyFile -- Success ####");
            console.log(success);
            _this.lastImage = currentName;
            var targetPath = _this.pathForImage(currentName);
            _this.targetPaths.push(targetPath);
            _this.filenames.push(_this.lastImage);
            _this.loader.dismiss();
            console.log(targetPath);
            console.log(_this.filenames);
            _this.loader.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_10__pages_img_editor_editor__["a" /* EditorPage */], { "images": targetPath, "design_no": _this.design_no });
        }).catch(function (err) {
            console.log("Error Occured While Writing File", err);
        });
    };
    //here is the method is used to get content type of an bas64 data  
    DesignDetailPage.prototype.getContentType = function (base64Data) {
        var block = base64Data.split(";");
        var contentType = block[0].split(":")[1];
        return contentType;
    };
    //here is the method is used to convert base64 data to blob data  
    DesignDetailPage.prototype.base64toBlob = function (b64Data, contentType) {
        contentType = contentType || '';
        var sliceSize = 512;
        var byteCharacters = atob(b64Data.replace(/^data:image\/(png|jpeg|jpg);base64,/, ''));
        var byteArrays = [];
        for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
            var slice = byteCharacters.slice(offset, offset + sliceSize);
            var byteNumbers = new Array(slice.length);
            for (var i = 0; i < slice.length; i++) {
                byteNumbers[i] = slice.charCodeAt(i);
            }
            var byteArray = new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
        }
        var blob = new Blob(byteArrays, {
            type: contentType
        });
        return blob;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* ViewChild */])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */]),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* Content */])
    ], DesignDetailPage.prototype, "content", void 0);
    DesignDetailPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-design-detail',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\design-detail\design-detail.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>{{item.sub_design_name}}<br>\n\n      <span *ngIf="item.is_stock_avail==1 " class="instock">Instock</span>\n\n      <span *ngIf="item.is_stock_avail==0 "  class="outofstock">Out of stock</span>\n\n    </ion-title>\n\n  </ion-navbar>\n\n  <ion-row>\n\n    <ion-col text-center>\n\n      <img [ngStyle]="{height: calc+\'px\',\'min-height.px\' : 100}"  src="{{item.defaultImage}}" imageViewer="{{item.defaultImage}}" onerror="this.onerror=null;this.src=\'assets/no-img.png\';"/>\n\n    </ion-col>\n\n  </ion-row>\n\n</ion-header>\n\n<!--  -->\n\n<ion-content (ionScroll)="scrolling($event)"> \n\n    <hr>\n\n    <ion-scroll scrollX="true" class="img-blk" *ngIf="item.images?.length > 0" > \n\n      <ion-row *ngIf="item.images?.length > 0" nowrap>\n\n        <ion-col col-2 col-sm-3 col-md-2 col-lg-2 col-xl-2 class="img-preview-col" text-center *ngFor=" let image of item.images; let i=index " (click)="changeImaged(image)"> \n\n          <img src=\'{{image}}\' width="60px" height="60px" imageCache/>\n\n        </ion-col>\n\n      </ion-row> \n\n    </ion-scroll>\n\n    <hr>\n\n    <ion-card no-margin>  \n\n      <ion-card-header (click)="toggle(\'desDetail\')" no-padding>\n\n        <div class="theme-title-blk" no-margin>  \n\n            Product Detail \n\n            <ion-icon *ngIf="!showDesignDet" name="add-circle" float-right></ion-icon>\n\n            <ion-icon *ngIf="showDesignDet" name="remove-circle" float-right></ion-icon> \n\n        </div>\n\n      </ion-card-header>\n\n      <ion-card-content *ngIf="showDesignDet" no-padding>\n\n        <ion-row padding>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col">\n\n              <span class="text-small">Metal</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col">\n\n              <span class="text-small">: {{item.metal}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col">\n\n              <span class="text-small">Category</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col">\n\n              <span class="text-small">: {{item.category}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col" *ngIf="item.collection != null">\n\n              <span class="text-small">Collection</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col" *ngIf="item.collection != null">\n\n              <span class="text-small">: {{item.collection}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col">\n\n              <span class="text-small">Product</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col">\n\n              <span class="text-small">: {{item.product_name}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col">\n\n              <span class="text-small">Design</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col">\n\n              <span class="text-small">: {{item.design_name}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col">\n\n              <span class="text-small">SubDesign</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col">\n\n              <span class="text-small">: {{item.sub_design_name}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col" *ngIf="item.theme_name != null">\n\n              <span class="text-small">Theme</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col" *ngIf="item.theme_name != null">\n\n              <span class="text-small">: {{item.theme_name}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col" *ngIf="item.design_for != null">\n\n              <span class="text-small">Gender</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col" *ngIf="item.design_for != null">\n\n              <span class="text-small">: {{item.design_for}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-4 col-sm-4 col-md-2 col-lg-2 col-xl-2 class="custom-2col" *ngIf="item.usage_type != null">\n\n              <span class="text-small">Usage Type</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-8 col-sm-8 col-md-4 col-lg-4 col-xl-4 class="custom-2col" *ngIf="item.usage_type != null">\n\n              <span class="text-small">: {{item.usage_type}}</span>\n\n            </ion-col>\n\n            <ion-col text-wrap col-12 *ngIf="item.description != null">\n\n                {{item.description}}\n\n            </ion-col>\n\n        </ion-row>\n\n      </ion-card-content>\n\n    </ion-card>\n\n    <p></p>\n\n    <ion-card no-margin *ngIf="enable_customize">  \n\n      <ion-card-header (click)="toggle(\'customize\')" no-padding>\n\n        <div class="theme-title-blk" no-margin>  \n\n            Customize Product\n\n            <ion-icon *ngIf="!showCustomize" name="add-circle" float-right></ion-icon>\n\n            <ion-icon *ngIf="showCustomize" name="remove-circle" float-right></ion-icon> \n\n        </div>\n\n      </ion-card-header>\n\n      <ion-card-content *ngIf="showCustomize" no-padding>\n\n        <ion-row padding >\n\n            <ion-col col-12 class="custom-2col" *ngIf="item.purities?.length > 0" >\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Purity  <span class="required"> *</span></ion-label> \n\n              </ion-item>\n\n              <ion-scroll class="purity-scroll-blk" scrollX="true">  \n\n                <ion-chip #chip1 *ngFor="let pur of item.purities" color="light" [ngClass]="customData[\'id_purity\'] == pur[\'id_purity\'] ? \'selected\' : \'unselected\'" (click)="setPurity(pur.id_purity,pur.purity)" style="margin-left: 5%;">\n\n                  <ion-label>{{pur.purity}}</ion-label><ion-icon name="checkmark-circle" style="background-color:transparent!important;" *ngIf="item[\'id_purity\'] == pur[\'id_purity\']"></ion-icon> \n\n                </ion-chip>\n\n              </ion-scroll>\n\n            </ion-col> \n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" >\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Weight <span class="required"> *</span></ion-label>\n\n                <ion-input type="number" placeholder="Enter weight in grams" [(ngModel)]="customData.weight" (ionChange)="customInputChanged(\'weight\',customData.weight)"> </ion-input>\n\n              </ion-item>\n\n              <span float-right [ngClass]="inpErrorMsg[\'weight\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_weight > 0">Min. {{item.min_weight}} g </span><span *ngIf="item.max_weight > 0">Max. {{item.max_weight}} g</span></span>\n\n            </ion-col>\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Pieces *</ion-label>\n\n                <ion-input type="number" placeholder="Pieces" [(ngModel)]="customData.pcs" > </ion-input>\n\n                <span float-right ></span>\n\n              </ion-item>\n\n            </ion-col>\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Due Date *</ion-label>\n\n                <!-- <ion-input type="number" readonly="true" class="ion_datetime" placeholder="Select Date" displayFormat="DD-MM-YYYY" [(ngModel)]="customData.due_date" (focusin)="show()"> </ion-input> -->\n\n                <ion-input type="number"  placeholder="No of Days"  [(ngModel)]="customData.due_date"> </ion-input>\n\n\n\n                <span float-right ></span>\n\n              </ion-item>\n\n            </ion-col>\n\n            <!-- <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Length</ion-label>\n\n                <ion-input type="number" placeholder="Enter length in Millimeter" [(ngModel)]="customData.len" (ionChange)="customInputChanged(\'len\',customData.len)"> </ion-input>\n\n              </ion-item>\n\n              <span float-right [ngClass]="inpErrorMsg[\'len\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_length > 0">Min. {{item.min_length}} mm </span><span *ngIf="item.max_length > 0">Max. {{item.max_length}} mm</span></span>\n\n            </ion-col>\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Width</ion-label>\n\n                <ion-input type="number" placeholder="Enter width in Millimeter" [(ngModel)]="customData.width" (ionChange)="customInputChanged(\'width\',customData.width)"> </ion-input>\n\n                <span float-right [ngClass]="inpErrorMsg[\'width\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_width > 0">Min. {{item.min_width}} mm </span><span *ngIf="item.max_width > 0">Max. {{item.max_width}} mm</span></span>\n\n              </ion-item>\n\n            </ion-col>\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Dia.</ion-label>\n\n                <ion-input type="number" placeholder="Enter diameter in Millimeter" [(ngModel)]="customData.dia" (ionChange)="customInputChanged(\'dia\',customData.dia)"> </ion-input>\n\n                <span float-right [ngClass]="inpErrorMsg[\'dia\'] == \'Invalid\' ? \'input-error-msg\' : \'input-msg\'"><span *ngIf="item.min_dia > 0">Min. {{item.min_dia}} mm </span><span *ngIf="item.max_dia > 0">Max. {{item.max_dia}} mm</span></span>\n\n              </ion-item>\n\n            </ion-col> -->\n\n\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" *ngIf="item.weights?.length > 0" >\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Weight</ion-label>\n\n                <ion-select [(ngModel)]="customData.id_weight" (ngModelChange)=checkwgstock(customData.id_weight)  placeholder="-- Choose --">\n\n                  <ion-option *ngFor="let s of item.weights" [value]="s.id_weight">{{s[\'weight_description\']}}</ion-option>\n\n                </ion-select>\n\n              </ion-item>\n\n          </ion-col>\n\n\n\n\n\n            <ion-col col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 class="custom-2col" *ngIf="item.sizes?.length > 0" >\n\n                <ion-item no-padding>\n\n                  <ion-label color="label-color" stacked>Size</ion-label>\n\n                  <ion-select [(ngModel)]="customData.id_size" (ngModelChange)=checkstock(customData.id_size) placeholder="-- Choose --">\n\n                    <ion-option *ngFor="let s of item.sizes" [value]="s.id_size">{{s.value}} {{s.name}}</ion-option>\n\n                  </ion-select>\n\n                </ion-item>\n\n            </ion-col>\n\n\n\n            <ion-col col-12 class="custom-2col" *ngIf="item.stones?.length > 0"> \n\n              <ion-item no-padding>\n\n                  <ion-label color="label-color" stacked>Stones</ion-label> \n\n                </ion-item>\n\n              <ion-card class="errorMsg" padding *ngIf="stnErrMsg">\n\n                  {{stnErrMsg}}\n\n              </ion-card>\n\n              <ion-list text-center>\n\n                <ion-row  style="background: #b1abab;color: white;">\n\n                  <ion-col col-4>Stone</ion-col>\n\n                  <ion-col col-4>Pcs</ion-col>\n\n                  <ion-col col-4>Weight</ion-col>\n\n                </ion-row>\n\n                <div *ngFor="let st of item.stones; let i=index" class="text-small">\n\n                  <ion-row>\n\n                    <ion-col col-1>\n\n                      <ion-checkbox  [(ngModel)]="st.selected" (ionChange)=stoneChaned(st.stone_id,i)></ion-checkbox>\n\n                    </ion-col>\n\n                    <ion-col col-4 class="text-small">\n\n                      {{st.stone_name}}\n\n                    </ion-col>\n\n                    <ion-col col-3>\n\n                      <ion-item>\n\n                        <ion-input type="number" [value] = "st.stone_pcs" [disabled]="!st.selected"></ion-input>\n\n                      </ion-item>\n\n                    </ion-col>\n\n                    <ion-col col-4>\n\n                      <ion-item>\n\n                        <ion-input type="number" [value] = "st.stone_wt" [disabled]="!st.selected"></ion-input>\n\n                      </ion-item>\n\n                    </ion-col>\n\n                  </ion-row> \n\n                </div>\n\n              </ion-list>\n\n            </ion-col> \n\n\n\n            <ion-col col-12 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Description</ion-label>\n\n                <ion-textarea [(ngModel)]="customData.sample_details" placeholder="Enter your description" rows="5"></ion-textarea>\n\n              </ion-item>\n\n            </ion-col>\n\n            <ion-col col-12 class="custom-2col">\n\n              <ion-item no-padding>\n\n                <ion-label color="label-color" stacked>Upload Sample</ion-label> \n\n                <button *ngIf="targetPath?.length <= 10" ion-button outline small color="dark" type="button" item-right icon-left (click)="presentActionSheet()">\n\n                    <ion-icon name="camera"></ion-icon>\n\n                    Choose Image\n\n                </button> \n\n              </ion-item>\n\n              <ion-grid> \n\n                <ion-row *ngIf="showedit"> \n\n                  <ion-col col-6 *ngFor="let targetPath of targetPaths; let id = index"> \n\n                    <ion-card class="block"> \n\n                      <ion-icon name="trash" class="deleteIcon" (click)="deletePhoto(id)"></ion-icon> <img [src]="targetPath" *ngIf="targetPath" /> \n\n                    </ion-card> \n\n                  </ion-col> \n\n                </ion-row>  \n\n              </ion-grid> \n\n            </ion-col> \n\n        </ion-row> \n\n      </ion-card-content>\n\n    </ion-card>\n\n  \n\n    <!-- <h4 class="theme-color-secondary" text-center>SIMILAR PRODUCTS</h4> -->\n\n    <!-- <ion-grid>\n\n      <ion-row>\n\n        <ion-col col-6 [ngClass]="animateClass" *ngFor=" let item of subcategory; let i=index" (click)="openitemails(item.id_product)">\n\n            \n\n          <ion-card style="margin:0px;border: 1px solid #e4e4e4;height: 173px;border-radius:7px;">\n\n            <div style="margin: 3px;">\n\n              <span *ngIf="item.is_stock_avail==1 && item.stock_manage == 1" class="instock">Instock</span>\n\n              <span *ngIf="item.is_stock_avail==0 && item.stock_manage == 1"  class="outofstock">Out of stock</span>\n\n              <span *ngIf="item.is_new == 1" style="float:right;"><ion-badge color="secondary">New</ion-badge></span>\n\n            </div>\n\n            <img style="height: 120px;width: auto;margin: 0 auto;" *ngIf=\'item.imgurl != null\' src=\'{{item.imgurl}}\' imageCache/>\n\n            <img style="height: 120px;width: auto;margin: 0 auto;" *ngIf=\'item.imgurl == null\' src=\'assets/images/no-img.png\' imageCache/>\n\n            <div style="text-align:center;margin-top:7px;margin-bottom:10px;text-overflow: ellipsis;padding: 5px;font-size: 13px;overflow: hidden;color: #656565; white-space: nowrap; font-weight:bold; ">\n\n              {{item.name_design}}\n\n            </div>\n\n          </ion-card>\n\n          \n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-grid> -->\n\n</ion-content> \n\n<ion-footer >\n\n  <button ion-button  icon-start full class="theme-btn" (click)="proceedToWishlist()">Add to Cart</button> \n\n</ion-footer>  \n\n<!-- <ion-footer *ngIf="!hideUpdateItem" >\n\n  <button ion-button [disabled] = "!proceedWishlist" icon-start full class="theme-btn" (click)="updateWishlist()">Save</button> \n\n</ion-footer>   -->\n\n    \n\n    \n\n    \n\n    \n\n'/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\design-detail\design-detail.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_13_ngx_image_compress__["a" /* NgxImageCompressService */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectorRef */], __WEBPACK_IMPORTED_MODULE_12__ionic_native_date_picker__["a" /* DatePicker */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* Keyboard */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["B" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["x" /* Platform */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* ActionSheetController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["z" /* ToastController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_8__ionic_native_camera__["a" /* Camera */], __WEBPACK_IMPORTED_MODULE_5__ionic_native_file_transfer__["a" /* FileTransfer */], __WEBPACK_IMPORTED_MODULE_6__ionic_native_file__["a" /* File */], __WEBPACK_IMPORTED_MODULE_9__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_7__ionic_native_file_path__["a" /* FilePath */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* AlertController */]])
    ], DesignDetailPage);
    return DesignDetailPage;
}());

//# sourceMappingURL=design-detail.js.map

/***/ }),

/***/ 79:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WishlistPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_common__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_retail__ = __webpack_require__(14);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var WishlistPage = /** @class */ (function () {
    function WishlistPage(modal, events, navCtrl, navParams, load, retail, common) {
        var _this = this;
        this.modal = modal;
        this.events = events;
        this.navCtrl = navCtrl;
        this.navParams = navParams;
        this.load = load;
        this.retail = retail;
        this.common = common;
        this.empData = JSON.parse(localStorage.getItem('empDetail'));
        this.cusData = JSON.parse(localStorage.getItem('currentCustomer'));
        this.hideAddToCart = false;
        this.proceedCart = false;
        this.selectedItems = [];
        events.subscribe('wishListItems:selected', function (items) {
            if (items) {
                _this.selectedItems = items;
                _this.proceedCart = (_this.selectedItems.length > 0) ? true : false;
            }
        });
    }
    WishlistPage.prototype.ionViewDidLoad = function () {
    };
    WishlistPage.prototype.proceedToCart = function () {
        var _this = this;
        var currentCustomer = localStorage.getItem('currentCustomer');
        if (currentCustomer != null) {
            var loader_1 = this.load.create({
                content: 'Please Wait',
                spinner: 'bubbles',
            });
            loader_1.present();
            var postData = { "id_branch": this.empData['id_branch'], "id_employee": this.empData['id_employee'], "id_customer": this.cusData['id_customer'], "status": 1, "items": this.selectedItems };
            this.retail.addToCart(postData).then(function (result) {
                if (result.status) {
                    _this.common.presentToast(result.msg, '6000');
                    _this.events.publish('AddToCart:completed', true);
                }
                else {
                    _this.common.presentToast(result.msg, '');
                }
                loader_1.dismiss();
            }, function (error) {
                loader_1.dismiss();
            });
        }
        else {
            alert("Invalid Customer Data");
        }
    };
    WishlistPage = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["m" /* Component */])({
            selector: 'page-wishlist',template:/*ion-inline-start:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\wishlist\wishlist.html"*/'<ion-header>\n    <ion-navbar>\n        <button ion-button menuToggle><ion-icon name="menu"></ion-icon></button>\n        <ion-title>Wishlist</ion-title>\n    </ion-navbar> \n</ion-header> \n\n<ion-content padding-vertical> \n    <items-list [page] ="\'Wishlist\'"></items-list>    \n</ion-content>\n<ion-footer *ngIf="!hideAddToCart" >\n    <button ion-button [disabled] = "!proceedCart" icon-start full class="theme-btn" (click)="proceedToCart()">Add to Cart</button> \n</ion-footer> '/*ion-inline-end:"D:\Retail\RajaThangamaligai\rajaretail\src\pages\wishlist\wishlist.html"*/,
            providers: [__WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */]]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["s" /* ModalController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* Events */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["u" /* NavController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["v" /* NavParams */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* LoadingController */], __WEBPACK_IMPORTED_MODULE_3__providers_retail__["a" /* RetailProvider */], __WEBPACK_IMPORTED_MODULE_2__providers_common__["b" /* CommonProvider */]])
    ], WishlistPage);
    return WishlistPage;
}());

//# sourceMappingURL=wishlist.js.map

/***/ })

},[409]);
//# sourceMappingURL=main.js.map